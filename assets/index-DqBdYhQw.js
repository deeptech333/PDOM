(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function G0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yd={exports:{}},Sl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function ZA(){if(tv)return Sl;tv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var g in l)g!=="key"&&(u[g]=l[g])}else u=l;return l=u.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:u}}return Sl.Fragment=e,Sl.jsx=n,Sl.jsxs=n,Sl}var nv;function JA(){return nv||(nv=1,Yd.exports=ZA()),Yd.exports}var p=JA(),Kd={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function WA(){if(iv)return Re;iv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),I=Symbol.iterator;function k(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,X={};function Q(M,$,ae){this.props=M,this.context=$,this.refs=X,this.updater=ae||Z}Q.prototype.isReactComponent={},Q.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},Q.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ue(){}ue.prototype=Q.prototype;function de(M,$,ae){this.props=M,this.context=$,this.refs=X,this.updater=ae||Z}var be=de.prototype=new ue;be.constructor=de,te(be,Q.prototype),be.isPureReactComponent=!0;var ee=Array.isArray;function se(){}var w={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(M,$,ae){var ce=ae.ref;return{$$typeof:r,type:M,key:$,ref:ce!==void 0?ce:null,props:ae}}function V(M,$){return R(M.type,$,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function L(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return $[ae]})}var N=/\/+/g;function it(M,$){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):$.toString(36)}function dt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(se,se):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function F(M,$,ae,ce,ie){var ne=typeof M;(ne==="undefined"||ne==="boolean")&&(M=null);var he=!1;if(M===null)he=!0;else switch(ne){case"bigint":case"string":case"number":he=!0;break;case"object":switch(M.$$typeof){case r:case e:he=!0;break;case b:return he=M._init,F(he(M._payload),$,ae,ce,ie)}}if(he)return ie=ie(M),he=ce===""?"."+it(M,0):ce,ee(ie)?(ae="",he!=null&&(ae=he.replace(N,"$&/")+"/"),F(ie,$,ae,"",function(Ne){return Ne})):ie!=null&&(D(ie)&&(ie=V(ie,ae+(ie.key==null||M&&M.key===ie.key?"":(""+ie.key).replace(N,"$&/")+"/")+he)),$.push(ie)),1;he=0;var xe=ce===""?".":ce+":";if(ee(M))for(var Ee=0;Ee<M.length;Ee++)ce=M[Ee],ne=xe+it(ce,Ee),he+=F(ce,$,ae,ne,ie);else if(Ee=k(M),typeof Ee=="function")for(M=Ee.call(M),Ee=0;!(ce=M.next()).done;)ce=ce.value,ne=xe+it(ce,Ee++),he+=F(ce,$,ae,ne,ie);else if(ne==="object"){if(typeof M.then=="function")return F(dt(M),$,ae,ce,ie);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return he}function oe(M,$,ae){if(M==null)return M;var ce=[],ie=0;return F(M,ce,"","",function(ne){return $.call(ae,ne,ie++)}),ce}function ye(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Qe={map:oe,forEach:function(M,$,ae){oe(M,function(){$.apply(this,arguments)},ae)},count:function(M){var $=0;return oe(M,function(){$++}),$},toArray:function(M){return oe(M,function($){return $})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Re.Activity=S,Re.Children=Qe,Re.Component=Q,Re.Fragment=n,Re.Profiler=l,Re.PureComponent=de,Re.StrictMode=s,Re.Suspense=y,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Re.__COMPILER_RUNTIME={__proto__:null,c:function(M){return w.H.useMemoCache(M)}},Re.cache=function(M){return function(){return M.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(M,$,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ce=te({},M.props),ie=M.key;if($!=null)for(ne in $.key!==void 0&&(ie=""+$.key),$)!x.call($,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&$.ref===void 0||(ce[ne]=$[ne]);var ne=arguments.length-2;if(ne===1)ce.children=ae;else if(1<ne){for(var he=Array(ne),xe=0;xe<ne;xe++)he[xe]=arguments[xe+2];ce.children=he}return R(M.type,ie,ce)},Re.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Re.createElement=function(M,$,ae){var ce,ie={},ne=null;if($!=null)for(ce in $.key!==void 0&&(ne=""+$.key),$)x.call($,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ie[ce]=$[ce]);var he=arguments.length-2;if(he===1)ie.children=ae;else if(1<he){for(var xe=Array(he),Ee=0;Ee<he;Ee++)xe[Ee]=arguments[Ee+2];ie.children=xe}if(M&&M.defaultProps)for(ce in he=M.defaultProps,he)ie[ce]===void 0&&(ie[ce]=he[ce]);return R(M,ne,ie)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:g,render:M}},Re.isValidElement=D,Re.lazy=function(M){return{$$typeof:b,_payload:{_status:-1,_result:M},_init:ye}},Re.memo=function(M,$){return{$$typeof:_,type:M,compare:$===void 0?null:$}},Re.startTransition=function(M){var $=w.T,ae={};w.T=ae;try{var ce=M(),ie=w.S;ie!==null&&ie(ae,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(se,qe)}catch(ne){qe(ne)}finally{$!==null&&ae.types!==null&&($.types=ae.types),w.T=$}},Re.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Re.use=function(M){return w.H.use(M)},Re.useActionState=function(M,$,ae){return w.H.useActionState(M,$,ae)},Re.useCallback=function(M,$){return w.H.useCallback(M,$)},Re.useContext=function(M){return w.H.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M,$){return w.H.useDeferredValue(M,$)},Re.useEffect=function(M,$){return w.H.useEffect(M,$)},Re.useEffectEvent=function(M){return w.H.useEffectEvent(M)},Re.useId=function(){return w.H.useId()},Re.useImperativeHandle=function(M,$,ae){return w.H.useImperativeHandle(M,$,ae)},Re.useInsertionEffect=function(M,$){return w.H.useInsertionEffect(M,$)},Re.useLayoutEffect=function(M,$){return w.H.useLayoutEffect(M,$)},Re.useMemo=function(M,$){return w.H.useMemo(M,$)},Re.useOptimistic=function(M,$){return w.H.useOptimistic(M,$)},Re.useReducer=function(M,$,ae){return w.H.useReducer(M,$,ae)},Re.useRef=function(M){return w.H.useRef(M)},Re.useState=function(M){return w.H.useState(M)},Re.useSyncExternalStore=function(M,$,ae){return w.H.useSyncExternalStore(M,$,ae)},Re.useTransition=function(){return w.H.useTransition()},Re.version="19.2.0",Re}var rv;function qm(){return rv||(rv=1,Kd.exports=WA()),Kd.exports}var ge=qm();const e1=G0(ge);var Xd={exports:{}},wl={},$d={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function t1(){return sv||(sv=1,(function(r){function e(F,oe){var ye=F.length;F.push(oe);e:for(;0<ye;){var qe=ye-1>>>1,Qe=F[qe];if(0<l(Qe,oe))F[qe]=oe,F[ye]=Qe,ye=qe;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var oe=F[0],ye=F.pop();if(ye!==oe){F[0]=ye;e:for(var qe=0,Qe=F.length,M=Qe>>>1;qe<M;){var $=2*(qe+1)-1,ae=F[$],ce=$+1,ie=F[ce];if(0>l(ae,ye))ce<Qe&&0>l(ie,ae)?(F[qe]=ie,F[ce]=ye,qe=ce):(F[qe]=ae,F[$]=ye,qe=$);else if(ce<Qe&&0>l(ie,ye))F[qe]=ie,F[ce]=ye,qe=ce;else break e}}return oe}function l(F,oe){var ye=F.sortIndex-oe.sortIndex;return ye!==0?ye:F.id-oe.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var y=[],_=[],b=1,S=null,I=3,k=!1,Z=!1,te=!1,X=!1,Q=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;function be(F){for(var oe=n(_);oe!==null;){if(oe.callback===null)s(_);else if(oe.startTime<=F)s(_),oe.sortIndex=oe.expirationTime,e(y,oe);else break;oe=n(_)}}function ee(F){if(te=!1,be(F),!Z)if(n(y)!==null)Z=!0,se||(se=!0,L());else{var oe=n(_);oe!==null&&dt(ee,oe.startTime-F)}}var se=!1,w=-1,x=5,R=-1;function V(){return X?!0:!(r.unstable_now()-R<x)}function D(){if(X=!1,se){var F=r.unstable_now();R=F;var oe=!0;try{e:{Z=!1,te&&(te=!1,ue(w),w=-1),k=!0;var ye=I;try{t:{for(be(F),S=n(y);S!==null&&!(S.expirationTime>F&&V());){var qe=S.callback;if(typeof qe=="function"){S.callback=null,I=S.priorityLevel;var Qe=qe(S.expirationTime<=F);if(F=r.unstable_now(),typeof Qe=="function"){S.callback=Qe,be(F),oe=!0;break t}S===n(y)&&s(y),be(F)}else s(y);S=n(y)}if(S!==null)oe=!0;else{var M=n(_);M!==null&&dt(ee,M.startTime-F),oe=!1}}break e}finally{S=null,I=ye,k=!1}oe=void 0}}finally{oe?L():se=!1}}}var L;if(typeof de=="function")L=function(){de(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,it=N.port2;N.port1.onmessage=D,L=function(){it.postMessage(null)}}else L=function(){Q(D,0)};function dt(F,oe){w=Q(function(){F(r.unstable_now())},oe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(F){switch(I){case 1:case 2:case 3:var oe=3;break;default:oe=I}var ye=I;I=oe;try{return F()}finally{I=ye}},r.unstable_requestPaint=function(){X=!0},r.unstable_runWithPriority=function(F,oe){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ye=I;I=F;try{return oe()}finally{I=ye}},r.unstable_scheduleCallback=function(F,oe,ye){var qe=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?qe+ye:qe):ye=qe,F){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ye+Qe,F={id:b++,callback:oe,priorityLevel:F,startTime:ye,expirationTime:Qe,sortIndex:-1},ye>qe?(F.sortIndex=ye,e(_,F),n(y)===null&&F===n(_)&&(te?(ue(w),w=-1):te=!0,dt(ee,ye-qe))):(F.sortIndex=Qe,e(y,F),Z||k||(Z=!0,se||(se=!0,L()))),F},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(F){var oe=I;return function(){var ye=I;I=oe;try{return F.apply(this,arguments)}finally{I=ye}}}})(Zd)),Zd}var av;function n1(){return av||(av=1,$d.exports=t1()),$d.exports}var Jd={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function i1(){if(ov)return nn;ov=1;var r=qm();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)_+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(y,_,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:y,containerInfo:_,implementation:b}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(y,_){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(y,_,null,b)},nn.flushSync=function(y){var _=f.T,b=s.p;try{if(f.T=null,s.p=2,y)return y()}finally{f.T=_,s.p=b,s.d.f()}},nn.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(y,_))},nn.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},nn.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var b=_.as,S=g(b,_.crossOrigin),I=typeof _.integrity=="string"?_.integrity:void 0,k=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;b==="style"?s.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:I,fetchPriority:k}):b==="script"&&s.d.X(y,{crossOrigin:S,integrity:I,fetchPriority:k,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},nn.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var b=g(_.as,_.crossOrigin);s.d.M(y,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(y)},nn.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var b=_.as,S=g(b,_.crossOrigin);s.d.L(y,b,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},nn.preloadModule=function(y,_){if(typeof y=="string")if(_){var b=g(_.as,_.crossOrigin);s.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(y)},nn.requestFormReset=function(y){s.d.r(y)},nn.unstable_batchedUpdates=function(y,_){return y(_)},nn.useFormState=function(y,_,b){return f.H.useFormState(y,_,b)},nn.useFormStatus=function(){return f.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var lv;function r1(){if(lv)return Jd.exports;lv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Jd.exports=i1(),Jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function s1(){if(uv)return wl;uv=1;var r=n1(),e=qm(),n=r1();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(s(188))}function _(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===o)return y(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,o=d;break}if(T===o){v=!0,o=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,o=h;break}if(T===o){v=!0,o=d,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function b(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=b(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,I=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),de=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function it(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case te:return"Fragment";case Q:return"Profiler";case X:return"StrictMode";case ee:return"Suspense";case se:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Z:return"Portal";case de:return t.displayName||"Context";case ue:return(t._context.displayName||"Context")+".Consumer";case be:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w:return i=t.displayName||null,i!==null?i:it(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return it(t(i))}catch{}}return null}var dt=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},qe=[],Qe=-1;function M(t){return{current:t}}function $(t){0>Qe||(t.current=qe[Qe],qe[Qe]=null,Qe--)}function ae(t,i){Qe++,qe[Qe]=t.current,t.current=i}var ce=M(null),ie=M(null),ne=M(null),he=M(null);function xe(t,i){switch(ae(ne,i),ae(ie,t),ae(ce,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?S_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=S_(i),t=w_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(ce),ae(ce,t)}function Ee(){$(ce),$(ie),$(ne)}function Ne(t){t.memoizedState!==null&&ae(he,t);var i=ce.current,a=w_(i,t.type);i!==a&&(ae(ie,t),ae(ce,a))}function St(t){ie.current===t&&($(ce),$(ie)),he.current===t&&($(he),El._currentValue=ye)}var fn,kt;function je(t){if(fn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);fn=i&&i[1]||"",kt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fn+t+kt}var zt=!1;function tn(t,i){if(!t||zt)return"";zt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(H){var q=H}Reflect.construct(t,[],J)}else{try{J.call()}catch(H){q=H}t.call(J.prototype)}}else{try{throw Error()}catch(H){q=H}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var C=v.split(`
`),z=T.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===z.length)for(o=C.length-1,h=z.length-1;1<=o&&0<=h&&C[o]!==z[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==z[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==z[h]){var G=`
`+C[o].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=o&&0<=h);break}}}finally{zt=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?je(a):""}function bn(t,i){switch(t.tag){case 26:case 27:case 5:return je(t.type);case 16:return je("Lazy");case 13:return t.child!==i&&i!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return tn(t.type,!1);case 11:return tn(t.type.render,!1);case 1:return tn(t.type,!0);case 31:return je("Activity");default:return""}}function Xn(t){try{var i="",a=null;do i+=bn(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ht=Object.prototype.hasOwnProperty,gt=r.unstable_scheduleCallback,Bi=r.unstable_cancelCallback,aa=r.unstable_shouldYield,Hi=r.unstable_requestPaint,Gt=r.unstable_now,fi=r.unstable_getCurrentPriorityLevel,yr=r.unstable_ImmediatePriority,So=r.unstable_UserBlockingPriority,_r=r.unstable_NormalPriority,Xh=r.unstable_LowPriority,du=r.unstable_IdlePriority,mu=r.log,pu=r.unstable_setDisableYieldValue,$n=null,Qt=null;function Mn(t){if(typeof mu=="function"&&pu(t),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode($n,t)}catch{}}var yt=Math.clz32?Math.clz32:yu,gu=Math.log,oa=Math.LN2;function yu(t){return t>>>=0,t===0?32:31-(gu(t)/oa|0)|0}var di=256,_s=262144,wt=4194304;function mi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function pi(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=mi(o):(v&=T,v!==0?h=mi(v):a||(a=T&~t,a!==0&&(h=mi(a))))):(T=o&~d,T!==0?h=mi(T):v!==0?h=mi(v):a||(a=o&~t,a!==0&&(h=mi(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Zn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function $h(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _u(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function gi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function vs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Zh(t,i,a,o,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,C=t.expirationTimes,z=t.hiddenUpdates;for(a=v&~a;0<a;){var G=31-yt(a),J=1<<G;T[G]=0,C[G]=-1;var q=z[G];if(q!==null)for(z[G]=null,G=0;G<q.length;G++){var H=q[G];H!==null&&(H.lane&=-536870913)}a&=~J}o!==0&&Es(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Es(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-yt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function wo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-yt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function xo(t,i){var a=i&-i;return a=(a&42)!==0?1:Ts(a),(a&(t.suspendedLanes|i))!==0?0:a}function Ts(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function vu(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:K_(t.type))}function Jn(t,i){var a=oe.p;try{return oe.p=t,i()}finally{oe.p=a}}var Wn=Math.random().toString(36).slice(2),xt="__reactFiber$"+Wn,qt="__reactProps$"+Wn,yi="__reactContainer$"+Wn,la="__reactEvents$"+Wn,Jh="__reactListeners$"+Wn,Eu="__reactHandles$"+Wn,Tu="__reactResources$"+Wn,_i="__reactMarker$"+Wn;function ua(t){delete t[xt],delete t[qt],delete t[la],delete t[Jh],delete t[Eu]}function vi(t){var i=t[xt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[yi]||a[xt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=O_(t);t!==null;){if(a=t[xt])return a;t=O_(t)}return i}t=a,a=t.parentNode}return null}function jn(t){if(t=t[xt]||t[yi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function An(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Ei(t){var i=t[Tu];return i||(i=t[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(t){t[_i]=!0}var Ro=new Set,Io={};function Ti(t,i){bi(t,i),bi(t+"Capture",i)}function bi(t,i){for(Io[t]=i,t=0;t<i.length;t++)Ro.add(i[t])}var No=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Co={},Do={};function bu(t){return ht.call(Do,t)?!0:ht.call(Co,t)?!1:No.test(t)?Do[t]=!0:(Co[t]=!0,!1)}function ca(t,i,a){if(bu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Sn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function It(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function Bt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Oo(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function $e(t){if(!t._valueTracker){var i=vr(t)?"checked":"value";t._valueTracker=Oo(t,i,""+t[i])}}function bs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=vr(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function Ai(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var As=/[\n"\\]/g;function dn(t){return t.replace(As,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ha(t,i,a,o,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Bt(i)):t.value!==""+Bt(i)&&(t.value=""+Bt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Vo(t,v,Bt(i)):a!=null?Vo(t,v,Bt(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Bt(T):t.removeAttribute("name")}function Au(t,i,a,o,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){$e(t);return}a=a!=null?""+Bt(a):"",i=i!=null?""+Bt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),$e(t)}function Vo(t,i,a){i==="number"&&Ai(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Er(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Bt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Su(t,i,a){if(i!=null&&(i=""+Bt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Bt(a):""}function Tr(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(dt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Bt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),$e(t)}function mn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var wu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mo(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||wu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function jo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Mo(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Mo(t,d,i[d])}function fa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),br=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(t){return br.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ei(){}var Lo=null;function Ln(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ar=null,Si=null;function Ss(t){var i=jn(t);if(i&&(t=i.stateNode)){var a=t[qt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ha(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[qt]||null;if(!h)throw Error(s(90));ha(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&bs(o)}break e;case"textarea":Su(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Er(t,!!a.multiple,i,!1)}}}var ma=!1;function Sr(t,i,a){if(ma)return t(i,a);ma=!0;try{var o=t(i);return o}finally{if(ma=!1,(Ar!==null||Si!==null)&&(vc(),Ar&&(i=Ar,t=Si,Si=Ar=null,Ss(i),t)))for(i=0;i<t.length;i++)Ss(t[i])}}function ti(t,i){var a=t.stateNode;if(a===null)return null;var o=a[qt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ws=!1;if(kn)try{var We={};Object.defineProperty(We,"passive",{get:function(){ws=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{ws=!1}var wi=null,ko=null,xs=null;function Po(){if(xs)return xs;var t,i=ko,a=i.length,o,h="value"in wi?wi.value:wi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return xs=h.slice(t,1<o?1-o:void 0)}function Rs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Gi(){return!0}function ni(){return!1}function Yt(t){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Gi:ni,this.isPropagationStopped=ni,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),i}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=Yt(Qi),wr=S({},Qi,{view:0,detail:0}),Uo=Yt(wr),xr,pa,Ri,ga=S({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ri&&(Ri&&t.type==="mousemove"?(xr=t.screenX-Ri.screenX,pa=t.screenY-Ri.screenY):pa=xr=0,Ri=t),xr)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),zo=Yt(ga),Is=S({},ga,{dataTransfer:0}),Ru=Yt(Is),Iu=S({},wr,{relatedTarget:0}),Ns=Yt(Iu),qo=S({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=Yt(qo),ya=S({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cu=Yt(ya),Du=S({},Qi,{data:0}),Ii=Yt(Du),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Mu[t])?!!i[t]:!1}function Rr(){return ju}var ln=S({},wr,{key:function(t){if(t.key){var i=Ou[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Rs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(t){return t.type==="keypress"?Rs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lu=Yt(ln),ku=S({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Yt(ku),c=S({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),m=Yt(c),E=S({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Yt(E),P=S({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B=Yt(P),re=S({},Qi,{newState:0,oldState:0}),Ce=Yt(re),_t=[9,13,27,32],Ye=kn&&"CompositionEvent"in window,ut=null;kn&&"documentMode"in document&&(ut=document.documentMode);var Pn=kn&&"TextEvent"in window&&!ut,Ni=kn&&(!Ye||ut&&8<ut&&11>=ut),ii=" ",ri=!1;function Cs(t,i){switch(t){case"keyup":return _t.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _a(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var va=!1;function Tb(t,i){switch(t){case"compositionend":return _a(i);case"keypress":return i.which!==32?null:(ri=!0,ii);case"textInput":return t=i.data,t===ii&&ri?null:t;default:return null}}function bb(t,i){if(va)return t==="compositionend"||!Ye&&Cs(t,i)?(t=Po(),xs=ko=wi=null,va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ni&&i.locale!=="ko"?null:i.data;default:return null}}var Ab={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ab[t.type]:i==="textarea"}function Lp(t,i,a,o){Ar?Si?Si.push(o):Si=[o]:Ar=o,i=xc(i,"onChange"),0<i.length&&(a=new xi("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Bo=null,Ho=null;function Sb(t){__(t,0)}function Pu(t){var i=An(t);if(bs(i))return t}function kp(t,i){if(t==="change")return i}var Pp=!1;if(kn){var Wh;if(kn){var ef="oninput"in document;if(!ef){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),ef=typeof Up.oninput=="function"}Wh=ef}else Wh=!1;Pp=Wh&&(!document.documentMode||9<document.documentMode)}function zp(){Bo&&(Bo.detachEvent("onpropertychange",qp),Ho=Bo=null)}function qp(t){if(t.propertyName==="value"&&Pu(Ho)){var i=[];Lp(i,Ho,t,Ln(t)),Sr(Sb,i)}}function wb(t,i,a){t==="focusin"?(zp(),Bo=i,Ho=a,Bo.attachEvent("onpropertychange",qp)):t==="focusout"&&zp()}function xb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pu(Ho)}function Rb(t,i){if(t==="click")return Pu(i)}function Ib(t,i){if(t==="input"||t==="change")return Pu(i)}function Nb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var wn=typeof Object.is=="function"?Object.is:Nb;function Fo(t,i){if(wn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!ht.call(i,h)||!wn(t[h],i[h]))return!1}return!0}function Bp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hp(t,i){var a=Bp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bp(a)}}function Fp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Fp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Gp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ai(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ai(t.document)}return i}function tf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Cb=kn&&"documentMode"in document&&11>=document.documentMode,Ea=null,nf=null,Go=null,rf=!1;function Qp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;rf||Ea==null||Ea!==Ai(o)||(o=Ea,"selectionStart"in o&&tf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Go&&Fo(Go,o)||(Go=o,o=xc(nf,"onSelect"),0<o.length&&(i=new xi("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Ea)))}function Ds(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ta={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionrun:Ds("Transition","TransitionRun"),transitionstart:Ds("Transition","TransitionStart"),transitioncancel:Ds("Transition","TransitionCancel"),transitionend:Ds("Transition","TransitionEnd")},sf={},Yp={};kn&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Os(t){if(sf[t])return sf[t];if(!Ta[t])return t;var i=Ta[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Yp)return sf[t]=i[a];return t}var Kp=Os("animationend"),Xp=Os("animationiteration"),$p=Os("animationstart"),Db=Os("transitionrun"),Ob=Os("transitionstart"),Vb=Os("transitioncancel"),Zp=Os("transitionend"),Jp=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function si(t,i){Jp.set(t,i),Ti(i,[t])}var Uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Un=[],ba=0,of=0;function zu(){for(var t=ba,i=of=ba=0;i<t;){var a=Un[i];Un[i++]=null;var o=Un[i];Un[i++]=null;var h=Un[i];Un[i++]=null;var d=Un[i];if(Un[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Wp(a,h,d)}}function qu(t,i,a,o){Un[ba++]=t,Un[ba++]=i,Un[ba++]=a,Un[ba++]=o,of|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function lf(t,i,a,o){return qu(t,i,a,o),Bu(t)}function Vs(t,i){return qu(t,null,null,i),Bu(t)}function Wp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-yt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Bu(t){if(50<dl)throw dl=0,yd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Aa={};function Mb(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,i,a,o){return new Mb(t,i,a,o)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ki(t,i){var a=t.alternate;return a===null?(a=xn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function eg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Hu(t,i,a,o,h,d){var v=0;if(o=t,typeof t=="function")uf(t)&&(v=1);else if(typeof t=="string")v=UA(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=xn(31,a,i,h),t.elementType=R,t.lanes=d,t;case te:return Ms(a.children,h,d,i);case X:v=8,h|=24;break;case Q:return t=xn(12,a,i,h|2),t.elementType=Q,t.lanes=d,t;case ee:return t=xn(13,a,i,h),t.elementType=ee,t.lanes=d,t;case se:return t=xn(19,a,i,h),t.elementType=se,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case de:v=10;break e;case ue:v=9;break e;case be:v=11;break e;case w:v=14;break e;case x:v=16,o=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=xn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Ms(t,i,a,o){return t=xn(7,t,o,i),t.lanes=a,t}function cf(t,i,a){return t=xn(6,t,null,i),t.lanes=a,t}function tg(t){var i=xn(18,null,null,0);return i.stateNode=t,i}function hf(t,i,a){return i=xn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ng=new WeakMap;function zn(t,i){if(typeof t=="object"&&t!==null){var a=ng.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Xn(i)},ng.set(t,i),i)}return{value:t,source:i,stack:Xn(i)}}var Sa=[],wa=0,Fu=null,Qo=0,qn=[],Bn=0,Ir=null,Ci=1,Di="";function Xi(t,i){Sa[wa++]=Qo,Sa[wa++]=Fu,Fu=t,Qo=i}function ig(t,i,a){qn[Bn++]=Ci,qn[Bn++]=Di,qn[Bn++]=Ir,Ir=t;var o=Ci;t=Di;var h=32-yt(o)-1;o&=~(1<<h),a+=1;var d=32-yt(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Ci=1<<32-yt(i)+h|a<<h|o,Di=d+t}else Ci=1<<d|a<<h|o,Di=t}function ff(t){t.return!==null&&(Xi(t,1),ig(t,1,0))}function df(t){for(;t===Fu;)Fu=Sa[--wa],Sa[wa]=null,Qo=Sa[--wa],Sa[wa]=null;for(;t===Ir;)Ir=qn[--Bn],qn[Bn]=null,Di=qn[--Bn],qn[Bn]=null,Ci=qn[--Bn],qn[Bn]=null}function rg(t,i){qn[Bn++]=Ci,qn[Bn++]=Di,qn[Bn++]=Ir,Ci=i.id,Di=i.overflow,Ir=t}var Kt=null,at=null,Be=!1,Nr=null,Hn=!1,mf=Error(s(519));function Cr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yo(zn(i,t)),mf}function sg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[xt]=t,i[qt]=o,a){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(a=0;a<pl.length;a++)Me(pl[a],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),Au(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),Tr(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||b_(i.textContent,a)?(o.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),o.onScroll!=null&&Me("scroll",i),o.onScrollEnd!=null&&Me("scrollend",i),o.onClick!=null&&(i.onclick=ei),i=!0):i=!1,i||Cr(t,!0)}function ag(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Kt=Kt.return}}function xa(t){if(t!==Kt)return!1;if(!Be)return ag(t),Be=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Od(t.type,t.memoizedProps)),a=!a),a&&at&&Cr(t),ag(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=D_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=D_(t)}else i===27?(i=at,Fr(t.type)?(t=kd,kd=null,at=t):at=i):at=Kt?Gn(t.stateNode.nextSibling):null;return!0}function js(){at=Kt=null,Be=!1}function pf(){var t=Nr;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),Nr=null),t}function Yo(t){Nr===null?Nr=[t]:Nr.push(t)}var gf=M(null),Ls=null,$i=null;function Dr(t,i,a){ae(gf,i._currentValue),i._currentValue=a}function Zi(t){t._currentValue=gf.current,$(gf)}function yf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function _f(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var C=0;C<i.length;C++)if(T.context===i[C]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),yf(d.return,a,t),o||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),yf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ra(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;wn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===he.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(El):t=[El])}h=h.return}t!==null&&_f(i,t,a,o),i.flags|=262144}function Gu(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ks(t){Ls=t,$i=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xt(t){return og(Ls,t)}function Qu(t,i){return Ls===null&&ks(t),og(t,i)}function og(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},$i===null){if(t===null)throw Error(s(308));$i=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else $i=$i.next=i;return a}var jb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Lb=r.unstable_scheduleCallback,kb=r.unstable_NormalPriority,Nt={$$typeof:de,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new jb,data:new Map,refCount:0}}function Ko(t){t.refCount--,t.refCount===0&&Lb(kb,function(){t.controller.abort()})}var Xo=null,Ef=0,Ia=0,Na=null;function Pb(t,i){if(Xo===null){var a=Xo=[];Ef=0,Ia=Ad(),Na={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ef++,i.then(lg,lg),i}function lg(){if(--Ef===0&&Xo!==null){Na!==null&&(Na.status="fulfilled");var t=Xo;Xo=null,Ia=0,Na=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Ub(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var ug=F.S;F.S=function(t,i){Qy=Gt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Pb(t,i),ug!==null&&ug(t,i)};var Ps=M(null);function Tf(){var t=Ps.current;return t!==null?t:rt.pooledCache}function Yu(t,i){i===null?ae(Ps,Ps.current):ae(Ps,i.pool)}function cg(){var t=Tf();return t===null?null:{parent:Nt._currentValue,pool:t}}var Ca=Error(s(460)),bf=Error(s(474)),Ku=Error(s(542)),Xu={then:function(){}};function hg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ei,ei),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t;default:if(typeof i.status=="string")i.then(ei,ei);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t}throw zs=i,Ca}}function Us(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zs=a,Ca):a}}var zs=null;function dg(){if(zs===null)throw Error(s(459));var t=zs;return zs=null,t}function mg(t){if(t===Ca||t===Ku)throw Error(s(483))}var Da=null,$o=0;function $u(t){var i=$o;return $o+=1,Da===null&&(Da=[]),fg(Da,t,i)}function Zo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Zu(t,i){throw i.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function pg(t){function i(j,O){if(t){var U=j.deletions;U===null?(j.deletions=[O],j.flags|=16):U.push(O)}}function a(j,O){if(!t)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function o(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function h(j,O){return j=Ki(j,O),j.index=0,j.sibling=null,j}function d(j,O,U){return j.index=U,t?(U=j.alternate,U!==null?(U=U.index,U<O?(j.flags|=67108866,O):U):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function v(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,O,U,Y){return O===null||O.tag!==6?(O=cf(U,j.mode,Y),O.return=j,O):(O=h(O,U),O.return=j,O)}function C(j,O,U,Y){var _e=U.type;return _e===te?G(j,O,U.props.children,Y,U.key):O!==null&&(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&Us(_e)===O.type)?(O=h(O,U.props),Zo(O,U),O.return=j,O):(O=Hu(U.type,U.key,U.props,null,j.mode,Y),Zo(O,U),O.return=j,O)}function z(j,O,U,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=hf(U,j.mode,Y),O.return=j,O):(O=h(O,U.children||[]),O.return=j,O)}function G(j,O,U,Y,_e){return O===null||O.tag!==7?(O=Ms(U,j.mode,Y,_e),O.return=j,O):(O=h(O,U),O.return=j,O)}function J(j,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=cf(""+O,j.mode,U),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case k:return U=Hu(O.type,O.key,O.props,null,j.mode,U),Zo(U,O),U.return=j,U;case Z:return O=hf(O,j.mode,U),O.return=j,O;case x:return O=Us(O),J(j,O,U)}if(dt(O)||L(O))return O=Ms(O,j.mode,U,null),O.return=j,O;if(typeof O.then=="function")return J(j,$u(O),U);if(O.$$typeof===de)return J(j,Qu(j,O),U);Zu(j,O)}return null}function q(j,O,U,Y){var _e=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return _e!==null?null:T(j,O,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case k:return U.key===_e?C(j,O,U,Y):null;case Z:return U.key===_e?z(j,O,U,Y):null;case x:return U=Us(U),q(j,O,U,Y)}if(dt(U)||L(U))return _e!==null?null:G(j,O,U,Y,null);if(typeof U.then=="function")return q(j,O,$u(U),Y);if(U.$$typeof===de)return q(j,O,Qu(j,U),Y);Zu(j,U)}return null}function H(j,O,U,Y,_e){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return j=j.get(U)||null,T(O,j,""+Y,_e);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case k:return j=j.get(Y.key===null?U:Y.key)||null,C(O,j,Y,_e);case Z:return j=j.get(Y.key===null?U:Y.key)||null,z(O,j,Y,_e);case x:return Y=Us(Y),H(j,O,U,Y,_e)}if(dt(Y)||L(Y))return j=j.get(U)||null,G(O,j,Y,_e,null);if(typeof Y.then=="function")return H(j,O,U,$u(Y),_e);if(Y.$$typeof===de)return H(j,O,U,Qu(O,Y),_e);Zu(O,Y)}return null}function me(j,O,U,Y){for(var _e=null,Fe=null,pe=O,Oe=O=0,ke=null;pe!==null&&Oe<U.length;Oe++){pe.index>Oe?(ke=pe,pe=null):ke=pe.sibling;var Ge=q(j,pe,U[Oe],Y);if(Ge===null){pe===null&&(pe=ke);break}t&&pe&&Ge.alternate===null&&i(j,pe),O=d(Ge,O,Oe),Fe===null?_e=Ge:Fe.sibling=Ge,Fe=Ge,pe=ke}if(Oe===U.length)return a(j,pe),Be&&Xi(j,Oe),_e;if(pe===null){for(;Oe<U.length;Oe++)pe=J(j,U[Oe],Y),pe!==null&&(O=d(pe,O,Oe),Fe===null?_e=pe:Fe.sibling=pe,Fe=pe);return Be&&Xi(j,Oe),_e}for(pe=o(pe);Oe<U.length;Oe++)ke=H(pe,j,Oe,U[Oe],Y),ke!==null&&(t&&ke.alternate!==null&&pe.delete(ke.key===null?Oe:ke.key),O=d(ke,O,Oe),Fe===null?_e=ke:Fe.sibling=ke,Fe=ke);return t&&pe.forEach(function(Xr){return i(j,Xr)}),Be&&Xi(j,Oe),_e}function Te(j,O,U,Y){if(U==null)throw Error(s(151));for(var _e=null,Fe=null,pe=O,Oe=O=0,ke=null,Ge=U.next();pe!==null&&!Ge.done;Oe++,Ge=U.next()){pe.index>Oe?(ke=pe,pe=null):ke=pe.sibling;var Xr=q(j,pe,Ge.value,Y);if(Xr===null){pe===null&&(pe=ke);break}t&&pe&&Xr.alternate===null&&i(j,pe),O=d(Xr,O,Oe),Fe===null?_e=Xr:Fe.sibling=Xr,Fe=Xr,pe=ke}if(Ge.done)return a(j,pe),Be&&Xi(j,Oe),_e;if(pe===null){for(;!Ge.done;Oe++,Ge=U.next())Ge=J(j,Ge.value,Y),Ge!==null&&(O=d(Ge,O,Oe),Fe===null?_e=Ge:Fe.sibling=Ge,Fe=Ge);return Be&&Xi(j,Oe),_e}for(pe=o(pe);!Ge.done;Oe++,Ge=U.next())Ge=H(pe,j,Oe,Ge.value,Y),Ge!==null&&(t&&Ge.alternate!==null&&pe.delete(Ge.key===null?Oe:Ge.key),O=d(Ge,O,Oe),Fe===null?_e=Ge:Fe.sibling=Ge,Fe=Ge);return t&&pe.forEach(function($A){return i(j,$A)}),Be&&Xi(j,Oe),_e}function nt(j,O,U,Y){if(typeof U=="object"&&U!==null&&U.type===te&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case k:e:{for(var _e=U.key;O!==null;){if(O.key===_e){if(_e=U.type,_e===te){if(O.tag===7){a(j,O.sibling),Y=h(O,U.props.children),Y.return=j,j=Y;break e}}else if(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&Us(_e)===O.type){a(j,O.sibling),Y=h(O,U.props),Zo(Y,U),Y.return=j,j=Y;break e}a(j,O);break}else i(j,O);O=O.sibling}U.type===te?(Y=Ms(U.props.children,j.mode,Y,U.key),Y.return=j,j=Y):(Y=Hu(U.type,U.key,U.props,null,j.mode,Y),Zo(Y,U),Y.return=j,j=Y)}return v(j);case Z:e:{for(_e=U.key;O!==null;){if(O.key===_e)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(j,O.sibling),Y=h(O,U.children||[]),Y.return=j,j=Y;break e}else{a(j,O);break}else i(j,O);O=O.sibling}Y=hf(U,j.mode,Y),Y.return=j,j=Y}return v(j);case x:return U=Us(U),nt(j,O,U,Y)}if(dt(U))return me(j,O,U,Y);if(L(U)){if(_e=L(U),typeof _e!="function")throw Error(s(150));return U=_e.call(U),Te(j,O,U,Y)}if(typeof U.then=="function")return nt(j,O,$u(U),Y);if(U.$$typeof===de)return nt(j,O,Qu(j,U),Y);Zu(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(j,O.sibling),Y=h(O,U),Y.return=j,j=Y):(a(j,O),Y=cf(U,j.mode,Y),Y.return=j,j=Y),v(j)):a(j,O)}return function(j,O,U,Y){try{$o=0;var _e=nt(j,O,U,Y);return Da=null,_e}catch(pe){if(pe===Ca||pe===Ku)throw pe;var Fe=xn(29,pe,null,j.mode);return Fe.lanes=Y,Fe.return=j,Fe}finally{}}}var qs=pg(!0),gg=pg(!1),Or=!1;function Af(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ke&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Bu(t),Wp(t,null,a),i}return qu(t,o,i,a),Bu(t)}function Jo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,wo(t,a)}}function wf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var xf=!1;function Wo(){if(xf){var t=Na;if(t!==null)throw t}}function el(t,i,a,o){xf=!1;var h=t.updateQueue;Or=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,z=C.next;C.next=null,v===null?d=z:v.next=z,v=C;var G=t.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==v&&(T===null?G.firstBaseUpdate=z:T.next=z,G.lastBaseUpdate=C))}if(d!==null){var J=h.baseState;v=0,G=z=C=null,T=d;do{var q=T.lane&-536870913,H=q!==T.lane;if(H?(Le&q)===q:(o&q)===q){q!==0&&q===Ia&&(xf=!0),G!==null&&(G=G.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var me=t,Te=T;q=i;var nt=a;switch(Te.tag){case 1:if(me=Te.payload,typeof me=="function"){J=me.call(nt,J,q);break e}J=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Te.payload,q=typeof me=="function"?me.call(nt,J,q):me,q==null)break e;J=S({},J,q);break e;case 2:Or=!0}}q=T.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(z=G=H,C=J):G=G.next=H,v|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;H=T,T=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);G===null&&(C=J),h.baseState=C,h.firstBaseUpdate=z,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),Ur|=v,t.lanes=v,t.memoizedState=J}}function yg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function _g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)yg(a[t],i)}var Oa=M(null),Ju=M(0);function vg(t,i){t=ar,ae(Ju,t),ae(Oa,i),ar=t|i.baseLanes}function Rf(){ae(Ju,ar),ae(Oa,Oa.current)}function If(){ar=Ju.current,$(Oa),$(Ju)}var Rn=M(null),Fn=null;function jr(t){var i=t.alternate;ae(vt,vt.current&1),ae(Rn,t),Fn===null&&(i===null||Oa.current!==null||i.memoizedState!==null)&&(Fn=t)}function Nf(t){ae(vt,vt.current),ae(Rn,t),Fn===null&&(Fn=t)}function Eg(t){t.tag===22?(ae(vt,vt.current),ae(Rn,t),Fn===null&&(Fn=t)):Lr()}function Lr(){ae(vt,vt.current),ae(Rn,Rn.current)}function In(t){$(Rn),Fn===t&&(Fn=null),$(vt)}var vt=M(0);function Wu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||jd(a)||Ld(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ji=0,De=null,et=null,Ct=null,ec=!1,Va=!1,Bs=!1,tc=0,tl=0,Ma=null,zb=0;function mt(){throw Error(s(321))}function Cf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!wn(t[a],i[a]))return!1;return!0}function Df(t,i,a,o,h,d){return Ji=d,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=t===null||t.memoizedState===null?iy:Qf,Bs=!1,d=a(o,h),Bs=!1,Va&&(d=bg(i,a,o,h)),Tg(t),d}function Tg(t){F.H=rl;var i=et!==null&&et.next!==null;if(Ji=0,Ct=et=De=null,ec=!1,tl=0,Ma=null,i)throw Error(s(300));t===null||Dt||(t=t.dependencies,t!==null&&Gu(t)&&(Dt=!0))}function bg(t,i,a,o){De=t;var h=0;do{if(Va&&(Ma=null),tl=0,Va=!1,25<=h)throw Error(s(301));if(h+=1,Ct=et=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=ry,d=i(a,o)}while(Va);return d}function qb(){var t=F.H,i=t.useState()[0];return i=typeof i.then=="function"?nl(i):i,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(De.flags|=1024),i}function Of(){var t=tc!==0;return tc=0,t}function Vf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Mf(t){if(ec){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ec=!1}Ji=0,Ct=et=De=null,Va=!1,tl=tc=0,Ma=null}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?De.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Et(){if(et===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var i=Ct===null?De.memoizedState:Ct.next;if(i!==null)Ct=i,et=t;else{if(t===null)throw De.alternate===null?Error(s(467)):Error(s(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Ct===null?De.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(t){var i=tl;return tl+=1,Ma===null&&(Ma=[]),t=fg(Ma,t,i),i=De,(Ct===null?i.memoizedState:Ct.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?iy:Qf),t}function ic(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return nl(t);if(t.$$typeof===de)return Xt(t)}throw Error(s(438,String(t)))}function jf(t){var i=null,a=De.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=De.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=nc(),De.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=V;return i.index++,a}function Wi(t,i){return typeof i=="function"?i(t):i}function rc(t){var i=Et();return Lf(i,et,t)}function Lf(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=v=null,C=null,z=i,G=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(Le&J)===J:(Ji&J)===J){var q=z.revertLane;if(q===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===Ia&&(G=!0);else if((Ji&q)===q){z=z.next,q===Ia&&(G=!0);continue}else J={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(T=C=J,v=d):C=C.next=J,De.lanes|=q,Ur|=q;J=z.action,Bs&&a(d,J),d=z.hasEagerState?z.eagerState:a(d,J)}else q={lane:J,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(T=C=q,v=d):C=C.next=q,De.lanes|=J,Ur|=J;z=z.next}while(z!==null&&z!==i);if(C===null?v=d:C.next=T,!wn(d,t.memoizedState)&&(Dt=!0,G&&(a=Na,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=C,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function kf(t){var i=Et(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);wn(d,i.memoizedState)||(Dt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Ag(t,i,a){var o=De,h=Et(),d=Be;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!wn((et||h).memoizedState,a);if(v&&(h.memoizedState=a,Dt=!0),h=h.queue,zf(xg.bind(null,o,h,t),[t]),h.getSnapshot!==i||v||Ct!==null&&Ct.memoizedState.tag&1){if(o.flags|=2048,ja(9,{destroy:void 0},wg.bind(null,o,h,a,i),null),rt===null)throw Error(s(349));d||(Ji&127)!==0||Sg(o,i,a)}return a}function Sg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=De.updateQueue,i===null?(i=nc(),De.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function wg(t,i,a,o){i.value=a,i.getSnapshot=o,Rg(i)&&Ig(t)}function xg(t,i,a){return a(function(){Rg(i)&&Ig(t)})}function Rg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!wn(t,a)}catch{return!0}}function Ig(t){var i=Vs(t,2);i!==null&&vn(i,t,2)}function Pf(t){var i=un();if(typeof t=="function"){var a=t;if(t=a(),Bs){Mn(!0);try{a()}finally{Mn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},i}function Ng(t,i,a,o){return t.baseState=a,Lf(t,et,typeof o=="function"?o:Wi)}function Bb(t,i,a,o,h){if(oc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};F.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Cg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Cg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=F.T,v={};F.T=v;try{var T=a(h,o),C=F.S;C!==null&&C(v,T),Dg(t,i,T)}catch(z){Uf(t,i,z)}finally{d!==null&&v.types!==null&&(d.types=v.types),F.T=d}}else try{d=a(h,o),Dg(t,i,d)}catch(z){Uf(t,i,z)}}function Dg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Og(t,i,o)},function(o){return Uf(t,i,o)}):Og(t,i,a)}function Og(t,i,a){i.status="fulfilled",i.value=a,Vg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Cg(t,a)))}function Uf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Vg(i),i=i.next;while(i!==o)}t.action=null}function Vg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Mg(t,i){return i}function jg(t,i){if(Be){var a=rt.formState;if(a!==null){e:{var o=De;if(Be){if(at){t:{for(var h=at,d=Hn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Gn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){at=Gn(h.nextSibling),o=h.data==="F!";break e}}Cr(o)}o=!1}o&&(i=a[0])}}return a=un(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:i},a.queue=o,a=ey.bind(null,De,o),o.dispatch=a,o=Pf(!1),d=Gf.bind(null,De,!1,o.queue),o=un(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=Bb.bind(null,De,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Lg(t){var i=Et();return kg(i,et,t)}function kg(t,i,a){if(i=Lf(t,i,Mg)[0],t=rc(Wi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=nl(i)}catch(v){throw v===Ca?Ku:v}else o=i;i=Et();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(De.flags|=2048,ja(9,{destroy:void 0},Hb.bind(null,h,a),null)),[o,d,t]}function Hb(t,i){t.action=i}function Pg(t){var i=Et(),a=et;if(a!==null)return kg(i,a,t);Et(),i=i.memoizedState,a=Et();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function ja(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=De.updateQueue,i===null&&(i=nc(),De.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Ug(){return Et().memoizedState}function sc(t,i,a,o){var h=un();De.flags|=t,h.memoizedState=ja(1|i,{destroy:void 0},a,o===void 0?null:o)}function ac(t,i,a,o){var h=Et();o=o===void 0?null:o;var d=h.memoizedState.inst;et!==null&&o!==null&&Cf(o,et.memoizedState.deps)?h.memoizedState=ja(i,d,a,o):(De.flags|=t,h.memoizedState=ja(1|i,d,a,o))}function zg(t,i){sc(8390656,8,t,i)}function zf(t,i){ac(2048,8,t,i)}function Fb(t){De.flags|=4;var i=De.updateQueue;if(i===null)i=nc(),De.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function qg(t){var i=Et().memoizedState;return Fb({ref:i,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Bg(t,i){return ac(4,2,t,i)}function Hg(t,i){return ac(4,4,t,i)}function Fg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Gg(t,i,a){a=a!=null?a.concat([t]):null,ac(4,4,Fg.bind(null,i,t),a)}function qf(){}function Qg(t,i){var a=Et();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Cf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Yg(t,i){var a=Et();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Cf(i,o[1]))return o[0];if(o=t(),Bs){Mn(!0);try{t()}finally{Mn(!1)}}return a.memoizedState=[o,i],o}function Bf(t,i,a){return a===void 0||(Ji&1073741824)!==0&&(Le&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Ky(),De.lanes|=t,Ur|=t,a)}function Kg(t,i,a,o){return wn(a,i)?a:Oa.current!==null?(t=Bf(t,a,o),wn(t,i)||(Dt=!0),t):(Ji&42)===0||(Ji&1073741824)!==0&&(Le&261930)===0?(Dt=!0,t.memoizedState=a):(t=Ky(),De.lanes|=t,Ur|=t,i)}function Xg(t,i,a,o,h){var d=oe.p;oe.p=d!==0&&8>d?d:8;var v=F.T,T={};F.T=T,Gf(t,!1,i,a);try{var C=h(),z=F.S;if(z!==null&&z(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var G=Ub(C,o);il(t,i,G,Dn(t))}else il(t,i,o,Dn(t))}catch(J){il(t,i,{then:function(){},status:"rejected",reason:J},Dn())}finally{oe.p=d,v!==null&&T.types!==null&&(v.types=T.types),F.T=v}}function Gb(){}function Hf(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=$g(t).queue;Xg(t,h,i,ye,a===null?Gb:function(){return Zg(t),a(o)})}function $g(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:ye},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Zg(t){var i=$g(t);i.next===null&&(i=t.alternate.memoizedState),il(t,i.next.queue,{},Dn())}function Ff(){return Xt(El)}function Jg(){return Et().memoizedState}function Wg(){return Et().memoizedState}function Qb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Dn();t=Vr(a);var o=Mr(i,t,a);o!==null&&(vn(o,i,a),Jo(o,i,a)),i={cache:vf()},t.payload=i;return}i=i.return}}function Yb(t,i,a){var o=Dn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},oc(t)?ty(i,a):(a=lf(t,i,a,o),a!==null&&(vn(a,t,o),ny(a,i,o)))}function ey(t,i,a){var o=Dn();il(t,i,a,o)}function il(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(t))ty(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,wn(T,v))return qu(t,i,h,0),rt===null&&zu(),!1}catch{}finally{}if(a=lf(t,i,h,o),a!==null)return vn(a,t,o),ny(a,i,o),!0}return!1}function Gf(t,i,a,o){if(o={lane:2,revertLane:Ad(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},oc(t)){if(i)throw Error(s(479))}else i=lf(t,a,o,2),i!==null&&vn(i,t,2)}function oc(t){var i=t.alternate;return t===De||i!==null&&i===De}function ty(t,i){Va=ec=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ny(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,wo(t,a)}}var rl={readContext:Xt,use:ic,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};rl.useEffectEvent=mt;var iy={readContext:Xt,use:ic,useCallback:function(t,i){return un().memoizedState=[t,i===void 0?null:i],t},useContext:Xt,useEffect:zg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,sc(4194308,4,Fg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return sc(4194308,4,t,i)},useInsertionEffect:function(t,i){sc(4,2,t,i)},useMemo:function(t,i){var a=un();i=i===void 0?null:i;var o=t();if(Bs){Mn(!0);try{t()}finally{Mn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=un();if(a!==void 0){var h=a(i);if(Bs){Mn(!0);try{a(i)}finally{Mn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Yb.bind(null,De,t),[o.memoizedState,t]},useRef:function(t){var i=un();return t={current:t},i.memoizedState=t},useState:function(t){t=Pf(t);var i=t.queue,a=ey.bind(null,De,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:qf,useDeferredValue:function(t,i){var a=un();return Bf(a,t,i)},useTransition:function(){var t=Pf(!1);return t=Xg.bind(null,De,t.queue,!0,!1),un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=De,h=un();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),rt===null)throw Error(s(349));(Le&127)!==0||Sg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,zg(xg.bind(null,o,d,t),[t]),o.flags|=2048,ja(9,{destroy:void 0},wg.bind(null,o,d,a,i),null),a},useId:function(){var t=un(),i=rt.identifierPrefix;if(Be){var a=Di,o=Ci;a=(o&~(1<<32-yt(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=tc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=zb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Ff,useFormState:jg,useActionState:jg,useOptimistic:function(t){var i=un();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Gf.bind(null,De,!0,a),a.dispatch=i,[t,i]},useMemoCache:jf,useCacheRefresh:function(){return un().memoizedState=Qb.bind(null,De)},useEffectEvent:function(t){var i=un(),a={impl:t};return i.memoizedState=a,function(){if((Ke&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Qf={readContext:Xt,use:ic,useCallback:Qg,useContext:Xt,useEffect:zf,useImperativeHandle:Gg,useInsertionEffect:Bg,useLayoutEffect:Hg,useMemo:Yg,useReducer:rc,useRef:Ug,useState:function(){return rc(Wi)},useDebugValue:qf,useDeferredValue:function(t,i){var a=Et();return Kg(a,et.memoizedState,t,i)},useTransition:function(){var t=rc(Wi)[0],i=Et().memoizedState;return[typeof t=="boolean"?t:nl(t),i]},useSyncExternalStore:Ag,useId:Jg,useHostTransitionStatus:Ff,useFormState:Lg,useActionState:Lg,useOptimistic:function(t,i){var a=Et();return Ng(a,et,t,i)},useMemoCache:jf,useCacheRefresh:Wg};Qf.useEffectEvent=qg;var ry={readContext:Xt,use:ic,useCallback:Qg,useContext:Xt,useEffect:zf,useImperativeHandle:Gg,useInsertionEffect:Bg,useLayoutEffect:Hg,useMemo:Yg,useReducer:kf,useRef:Ug,useState:function(){return kf(Wi)},useDebugValue:qf,useDeferredValue:function(t,i){var a=Et();return et===null?Bf(a,t,i):Kg(a,et.memoizedState,t,i)},useTransition:function(){var t=kf(Wi)[0],i=Et().memoizedState;return[typeof t=="boolean"?t:nl(t),i]},useSyncExternalStore:Ag,useId:Jg,useHostTransitionStatus:Ff,useFormState:Pg,useActionState:Pg,useOptimistic:function(t,i){var a=Et();return et!==null?Ng(a,et,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:Wg};ry.useEffectEvent=qg;function Yf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Dn(),h=Vr(o);h.payload=i,a!=null&&(h.callback=a),i=Mr(t,h,o),i!==null&&(vn(i,t,o),Jo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Dn(),h=Vr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Mr(t,h,o),i!==null&&(vn(i,t,o),Jo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Dn(),o=Vr(a);o.tag=2,i!=null&&(o.callback=i),i=Mr(t,o,a),i!==null&&(vn(i,t,a),Jo(i,t,a))}};function sy(t,i,a,o,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Fo(a,o)||!Fo(h,d):!0}function ay(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Kf.enqueueReplaceState(i,i.state,null)}function Hs(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function oy(t){Uu(t)}function ly(t){console.error(t)}function uy(t){Uu(t)}function lc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function cy(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(t,i,a){return a=Vr(a),a.tag=3,a.payload={element:null},a.callback=function(){lc(t,i)},a}function hy(t){return t=Vr(t),t.tag=3,t}function fy(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){cy(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){cy(i,a,o),typeof h!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function Kb(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Ra(i,a,h,!0),a=Rn.current,a!==null){switch(a.tag){case 31:case 13:return Fn===null?Ec():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Xu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Ed(t,o,h)),!1;case 22:return a.flags|=65536,o===Xu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Ed(t,o,h)),!1}throw Error(s(435,a.tag))}return Ed(t,o,h),Ec(),!1}if(Be)return i=Rn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==mf&&(t=Error(s(422),{cause:o}),Yo(zn(t,a)))):(o!==mf&&(i=Error(s(423),{cause:o}),Yo(zn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=zn(o,a),h=Xf(t.stateNode,o,h),wf(t,h),pt!==4&&(pt=2)),!1;var d=Error(s(520),{cause:o});if(d=zn(d,a),fl===null?fl=[d]:fl.push(d),pt!==4&&(pt=2),i===null)return!0;o=zn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Xf(a.stateNode,o,t),wf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(zr===null||!zr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=hy(h),fy(h,t,a,o),wf(a,h),!1}a=a.return}while(a!==null);return!1}var $f=Error(s(461)),Dt=!1;function $t(t,i,a,o){i.child=t===null?gg(i,null,a,o):qs(i,t.child,a,o)}function dy(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return ks(i),o=Df(t,i,a,v,d,h),T=Of(),t!==null&&!Dt?(Vf(t,i,h),er(t,i,h)):(Be&&T&&ff(i),i.flags|=1,$t(t,i,o,h),i.child)}function my(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!uf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,py(t,i,d,o,h)):(t=Hu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!rd(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(v,o)&&t.ref===i.ref)return er(t,i,h)}return i.flags|=1,t=Ki(d,o),t.ref=i.ref,t.return=i,i.child=t}function py(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Fo(d,o)&&t.ref===i.ref)if(Dt=!1,i.pendingProps=o=d,rd(t,h))(t.flags&131072)!==0&&(Dt=!0);else return i.lanes=t.lanes,er(t,i,h)}return Zf(t,i,a,o,h)}function gy(t,i,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return yy(t,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yu(i,d!==null?d.cachePool:null),d!==null?vg(i,d):Rf(),Eg(i);else return o=i.lanes=536870912,yy(t,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Yu(i,d.cachePool),vg(i,d),Lr(),i.memoizedState=null):(t!==null&&Yu(i,null),Rf(),Lr());return $t(t,i,h,a),i.child}function sl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function yy(t,i,a,o,h){var d=Tf();return d=d===null?null:{parent:Nt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Yu(i,null),Rf(),Eg(i),t!==null&&Ra(t,i,o,!0),i.childLanes=h,null}function uc(t,i){return i=hc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function _y(t,i,a){return qs(i,t.child,null,a),t=uc(i,i.pendingProps),t.flags|=2,In(i),i.memoizedState=null,t}function Xb(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Be){if(o.mode==="hidden")return t=uc(i,o),i.lanes=536870912,sl(null,t);if(Nf(i),(t=at)?(t=C_(t,Hn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ir!==null?{id:Ci,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,Kt=i,at=null)):t=null,t===null)throw Cr(i);return i.lanes=536870912,null}return uc(i,o)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(Nf(i),h)if(i.flags&256)i.flags&=-257,i=_y(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Dt||Ra(t,i,a,!1),h=(a&t.childLanes)!==0,Dt||h){if(o=rt,o!==null&&(v=xo(o,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Vs(t,v),vn(o,t,v),$f;Ec(),i=_y(t,i,a)}else t=d.treeContext,at=Gn(v.nextSibling),Kt=i,Be=!0,Nr=null,Hn=!1,t!==null&&rg(i,t),i=uc(i,o),i.flags|=4096;return i}return t=Ki(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function cc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Zf(t,i,a,o,h){return ks(i),a=Df(t,i,a,o,void 0,h),o=Of(),t!==null&&!Dt?(Vf(t,i,h),er(t,i,h)):(Be&&o&&ff(i),i.flags|=1,$t(t,i,a,h),i.child)}function vy(t,i,a,o,h,d){return ks(i),i.updateQueue=null,a=bg(i,o,a,h),Tg(t),o=Of(),t!==null&&!Dt?(Vf(t,i,d),er(t,i,d)):(Be&&o&&ff(i),i.flags|=1,$t(t,i,a,d),i.child)}function Ey(t,i,a,o,h){if(ks(i),i.stateNode===null){var d=Aa,v=a.contextType;typeof v=="object"&&v!==null&&(d=Xt(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},Af(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Xt(v):Aa,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Yf(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Kf.enqueueReplaceState(d,d.state,null),el(i,o,d,h),Wo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,C=Hs(a,T);d.props=C;var z=d.context,G=a.contextType;v=Aa,typeof G=="object"&&G!==null&&(v=Xt(G));var J=a.getDerivedStateFromProps;G=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||z!==v)&&ay(i,d,o,v),Or=!1;var q=i.memoizedState;d.state=q,el(i,o,d,h),Wo(),z=i.memoizedState,T||q!==z||Or?(typeof J=="function"&&(Yf(i,a,J,o),z=i.memoizedState),(C=Or||sy(i,a,C,o,q,z,v))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=z),d.props=o,d.state=z,d.context=v,o=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Sf(t,i),v=i.memoizedProps,G=Hs(a,v),d.props=G,J=i.pendingProps,q=d.context,z=a.contextType,C=Aa,typeof z=="object"&&z!==null&&(C=Xt(z)),T=a.getDerivedStateFromProps,(z=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==J||q!==C)&&ay(i,d,o,C),Or=!1,q=i.memoizedState,d.state=q,el(i,o,d,h),Wo();var H=i.memoizedState;v!==J||q!==H||Or||t!==null&&t.dependencies!==null&&Gu(t.dependencies)?(typeof T=="function"&&(Yf(i,a,T,o),H=i.memoizedState),(G=Or||sy(i,a,G,o,q,H,C)||t!==null&&t.dependencies!==null&&Gu(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,H,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,H,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),d.props=o,d.state=H,d.context=C,o=G):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,cc(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=qs(i,t.child,null,h),i.child=qs(i,null,a,h)):$t(t,i,a,h),i.memoizedState=d.state,t=i.child):t=er(t,i,h),t}function Ty(t,i,a,o){return js(),i.flags|=256,$t(t,i,a,o),i.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(t){return{baseLanes:t,cachePool:cg()}}function ed(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Cn),t}function by(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(vt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Be){if(h?jr(i):Lr(),(t=at)?(t=C_(t,Hn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ir!==null?{id:Ci,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,Kt=i,at=null)):t=null,t===null)throw Cr(i);return Ld(t)?i.lanes=32:i.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(Lr(),h=i.mode,T=hc({mode:"hidden",children:T},h),o=Ms(o,h,a,null),T.return=i,o.return=i,T.sibling=o,i.child=T,o=i.child,o.memoizedState=Wf(a),o.childLanes=ed(t,v,a),i.memoizedState=Jf,sl(null,o)):(jr(i),td(i,T))}var C=t.memoizedState;if(C!==null&&(T=C.dehydrated,T!==null)){if(d)i.flags&256?(jr(i),i.flags&=-257,i=nd(t,i,a)):i.memoizedState!==null?(Lr(),i.child=t.child,i.flags|=128,i=null):(Lr(),T=o.fallback,h=i.mode,o=hc({mode:"visible",children:o.children},h),T=Ms(T,h,a,null),T.flags|=2,o.return=i,T.return=i,o.sibling=T,i.child=o,qs(i,t.child,null,a),o=i.child,o.memoizedState=Wf(a),o.childLanes=ed(t,v,a),i.memoizedState=Jf,i=sl(null,o));else if(jr(i),Ld(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var z=v.dgst;v=z,o=Error(s(419)),o.stack="",o.digest=v,Yo({value:o,source:null,stack:null}),i=nd(t,i,a)}else if(Dt||Ra(t,i,a,!1),v=(a&t.childLanes)!==0,Dt||v){if(v=rt,v!==null&&(o=xo(v,a),o!==0&&o!==C.retryLane))throw C.retryLane=o,Vs(t,o),vn(v,t,o),$f;jd(T)||Ec(),i=nd(t,i,a)}else jd(T)?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,at=Gn(T.nextSibling),Kt=i,Be=!0,Nr=null,Hn=!1,t!==null&&rg(i,t),i=td(i,o.children),i.flags|=4096);return i}return h?(Lr(),T=o.fallback,h=i.mode,C=t.child,z=C.sibling,o=Ki(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,z!==null?T=Ki(z,T):(T=Ms(T,h,a,null),T.flags|=2),T.return=i,o.return=i,o.sibling=T,i.child=o,sl(null,o),o=i.child,T=t.child.memoizedState,T===null?T=Wf(a):(h=T.cachePool,h!==null?(C=Nt._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=cg(),T={baseLanes:T.baseLanes|a,cachePool:h}),o.memoizedState=T,o.childLanes=ed(t,v,a),i.memoizedState=Jf,sl(t.child,o)):(jr(i),a=t.child,t=a.sibling,a=Ki(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function td(t,i){return i=hc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function hc(t,i){return t=xn(22,t,null,i),t.lanes=0,t}function nd(t,i,a){return qs(i,t.child,null,a),t=td(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ay(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),yf(t.return,i,a)}function id(t,i,a,o,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function Sy(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var v=vt.current,T=(v&2)!==0;if(T?(v=v&1|2,i.flags|=128):v&=1,ae(vt,v),$t(t,i,o,a),o=Be?Qo:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ay(t,a,i);else if(t.tag===19)Ay(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Wu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),id(i,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Wu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}id(i,!0,a,null,d,o);break;case"together":id(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function er(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ur|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ra(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ki(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ki(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function rd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Gu(t)))}function $b(t,i,a){switch(i.tag){case 3:xe(i,i.stateNode.containerInfo),Dr(i,Nt,t.memoizedState.cache),js();break;case 27:case 5:Ne(i);break;case 4:xe(i,i.stateNode.containerInfo);break;case 10:Dr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Nf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(jr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?by(t,i,a):(jr(i),t=er(t,i,a),t!==null?t.sibling:null);jr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Ra(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Sy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(vt,vt.current),o)break;return null;case 22:return i.lanes=0,gy(t,i,a,i.pendingProps);case 24:Dr(i,Nt,t.memoizedState.cache)}return er(t,i,a)}function wy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Dt=!0;else{if(!rd(t,a)&&(i.flags&128)===0)return Dt=!1,$b(t,i,a);Dt=(t.flags&131072)!==0}else Dt=!1,Be&&(i.flags&1048576)!==0&&ig(i,Qo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=Us(i.elementType),i.type=t,typeof t=="function")uf(t)?(o=Hs(t,o),i.tag=1,i=Ey(null,i,t,o,a)):(i.tag=0,i=Zf(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===be){i.tag=11,i=dy(null,i,t,o,a);break e}else if(h===w){i.tag=14,i=my(null,i,t,o,a);break e}}throw i=it(t)||t,Error(s(306,i,""))}}return i;case 0:return Zf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Hs(o,i.pendingProps),Ey(t,i,o,h,a);case 3:e:{if(xe(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Sf(t,i),el(i,o,null,a);var v=i.memoizedState;if(o=v.cache,Dr(i,Nt,o),o!==d.cache&&_f(i,[Nt],a,!0),Wo(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ty(t,i,o,a);break e}else if(o!==h){h=zn(Error(s(424)),i),Yo(h),i=Ty(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=Gn(t.firstChild),Kt=i,Be=!0,Nr=null,Hn=!0,a=gg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(js(),o===h){i=er(t,i,a);break e}$t(t,i,o,a)}i=i.child}return i;case 26:return cc(t,i),t===null?(a=L_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Be||(a=i.type,t=i.pendingProps,o=Rc(ne.current).createElement(a),o[xt]=i,o[qt]=t,Zt(o,a,t),Rt(o),i.stateNode=o):i.memoizedState=L_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ne(i),t===null&&Be&&(o=i.stateNode=V_(i.type,i.pendingProps,ne.current),Kt=i,Hn=!0,h=at,Fr(i.type)?(kd=h,at=Gn(o.firstChild)):at=h),$t(t,i,i.pendingProps.children,a),cc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Be&&((h=o=at)&&(o=xA(o,i.type,i.pendingProps,Hn),o!==null?(i.stateNode=o,Kt=i,at=Gn(o.firstChild),Hn=!1,h=!0):h=!1),h||Cr(i)),Ne(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,o=d.children,Od(h,d)?o=null:v!==null&&Od(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Df(t,i,qb,null,null,a),El._currentValue=h),cc(t,i),$t(t,i,o,a),i.child;case 6:return t===null&&Be&&((t=a=at)&&(a=RA(a,i.pendingProps,Hn),a!==null?(i.stateNode=a,Kt=i,at=null,t=!0):t=!1),t||Cr(i)),null;case 13:return by(t,i,a);case 4:return xe(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=qs(i,null,o,a):$t(t,i,o,a),i.child;case 11:return dy(t,i,i.type,i.pendingProps,a);case 7:return $t(t,i,i.pendingProps,a),i.child;case 8:return $t(t,i,i.pendingProps.children,a),i.child;case 12:return $t(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Dr(i,i.type,o.value),$t(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,ks(i),h=Xt(h),o=o(h),i.flags|=1,$t(t,i,o,a),i.child;case 14:return my(t,i,i.type,i.pendingProps,a);case 15:return py(t,i,i.type,i.pendingProps,a);case 19:return Sy(t,i,a);case 31:return Xb(t,i,a);case 22:return gy(t,i,a,i.pendingProps);case 24:return ks(i),o=Xt(Nt),t===null?(h=Tf(),h===null&&(h=rt,d=vf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},Af(i),Dr(i,Nt,h)):((t.lanes&a)!==0&&(Sf(t,i),el(i,null,null,a),Wo()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Dr(i,Nt,o)):(o=d.cache,Dr(i,Nt,o),o!==h.cache&&_f(i,[Nt],a,!0))),$t(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function tr(t){t.flags|=4}function sd(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Jy())t.flags|=8192;else throw zs=Xu,bf}else t.flags&=-16777217}function xy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!q_(i))if(Jy())t.flags|=8192;else throw zs=Xu,bf}function fc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?_u():536870912,t.lanes|=i,Ua|=i)}function al(t,i){if(!Be)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ot(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function Zb(t,i,a){var o=i.pendingProps;switch(df(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(i),null;case 1:return ot(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Zi(Nt),Ee(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xa(i)?tr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pf())),ot(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(tr(i),d!==null?(ot(i),xy(i,d)):(ot(i),sd(i,h,null,o,a))):d?d!==t.memoizedState?(tr(i),ot(i),xy(i,d)):(ot(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&tr(i),ot(i),sd(i,h,t,o,a)),null;case 27:if(St(i),a=ne.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&tr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ot(i),null}t=ce.current,xa(i)?sg(i):(t=V_(h,o,a),i.stateNode=t,tr(i))}return ot(i),null;case 5:if(St(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&tr(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ot(i),null}if(d=ce.current,xa(i))sg(i);else{var v=Rc(ne.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}d[xt]=i,d[qt]=o;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(Zt(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&tr(i)}}return ot(i),sd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&tr(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=ne.current,xa(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=Kt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[xt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||b_(t.nodeValue,a)),t||Cr(i,!0)}else t=Rc(t).createTextNode(o),t[xt]=i,i.stateNode=t}return ot(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=xa(i),a!==null){if(t===null){if(!o)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[xt]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),t=!1}else a=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(In(i),i):(In(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ot(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=xa(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xt]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),h=!1}else h=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(In(i),i):(In(i),null)}return In(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),fc(i,i.updateQueue),ot(i),null);case 4:return Ee(),t===null&&Rd(i.stateNode.containerInfo),ot(i),null;case 10:return Zi(i.type),ot(i),null;case 19:if($(vt),o=i.memoizedState,o===null)return ot(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)al(o,!1);else{if(pt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Wu(t),d!==null){for(i.flags|=128,al(o,!1),t=d.updateQueue,i.updateQueue=t,fc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)eg(a,t),a=a.sibling;return ae(vt,vt.current&1|2),Be&&Xi(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&Gt()>yc&&(i.flags|=128,h=!0,al(o,!1),i.lanes=4194304)}else{if(!h)if(t=Wu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,fc(i,t),al(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Be)return ot(i),null}else 2*Gt()-o.renderingStartTime>yc&&a!==536870912&&(i.flags|=128,h=!0,al(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(t=o.last,t!==null?t.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Gt(),t.sibling=null,a=vt.current,ae(vt,h?a&1|2:a&1),Be&&Xi(i,o.treeForkCount),t):(ot(i),null);case 22:case 23:return In(i),If(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(ot(i),i.subtreeFlags&6&&(i.flags|=8192)):ot(i),a=i.updateQueue,a!==null&&fc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&$(Ps),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Zi(Nt),ot(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Jb(t,i){switch(df(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Zi(Nt),Ee(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return St(i),null;case 31:if(i.memoizedState!==null){if(In(i),i.alternate===null)throw Error(s(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(In(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return $(vt),null;case 4:return Ee(),null;case 10:return Zi(i.type),null;case 22:case 23:return In(i),If(),t!==null&&$(Ps),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Zi(Nt),null;case 25:return null;default:return null}}function Ry(t,i){switch(df(i),i.tag){case 3:Zi(Nt),Ee();break;case 26:case 27:case 5:St(i);break;case 4:Ee();break;case 31:i.memoizedState!==null&&In(i);break;case 13:In(i);break;case 19:$(vt);break;case 10:Zi(i.type);break;case 22:case 23:In(i),If(),t!==null&&$(Ps);break;case 24:Zi(Nt)}}function ol(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(T){Je(i,i.return,T)}}function kr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var C=a,z=T;try{z()}catch(G){Je(h,C,G)}}}o=o.next}while(o!==d)}}catch(G){Je(i,i.return,G)}}function Iy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{_g(i,a)}catch(o){Je(t,t.return,o)}}}function Ny(t,i,a){a.props=Hs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Je(t,i,o)}}function ll(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Je(t,i,h)}}function Oi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Je(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Je(t,i,h)}else a.current=null}function Cy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Je(t,t.return,h)}}function ad(t,i,a){try{var o=t.stateNode;EA(o,t.type,a,i),o[qt]=i}catch(h){Je(t,t.return,h)}}function Dy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fr(t.type)||t.tag===4}function od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ld(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ei));else if(o!==4&&(o===27&&Fr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(ld(t,i,a),t=t.sibling;t!==null;)ld(t,i,a),t=t.sibling}function dc(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Fr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(dc(t,i,a),t=t.sibling;t!==null;)dc(t,i,a),t=t.sibling}function Oy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Zt(i,o,a),i[xt]=t,i[qt]=a}catch(d){Je(t,t.return,d)}}var nr=!1,Ot=!1,ud=!1,Vy=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Wb(t,i){if(t=t.containerInfo,Cd=Mc,t=Gp(t),tf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,T=-1,C=-1,z=0,G=0,J=t,q=null;t:for(;;){for(var H;J!==a||h!==0&&J.nodeType!==3||(T=v+h),J!==d||o!==0&&J.nodeType!==3||(C=v+o),J.nodeType===3&&(v+=J.nodeValue.length),(H=J.firstChild)!==null;)q=J,J=H;for(;;){if(J===t)break t;if(q===a&&++z===h&&(T=v),q===d&&++G===o&&(C=v),(H=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=H}a=T===-1||C===-1?null:{start:T,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:t,selectionRange:a},Mc=!1,Ht=i;Ht!==null;)if(i=Ht,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ht=t;else for(;Ht!==null;){switch(i=Ht,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var me=Hs(a.type,h);t=o.getSnapshotBeforeUpdate(me,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Te){Je(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Md(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Md(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Ht=t;break}Ht=i.return}}function My(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:rr(t,a),o&4&&ol(5,a);break;case 1:if(rr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){Je(a,a.return,v)}else{var h=Hs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Je(a,a.return,v)}}o&64&&Iy(a),o&512&&ll(a,a.return);break;case 3:if(rr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{_g(t,i)}catch(v){Je(a,a.return,v)}}break;case 27:i===null&&o&4&&Oy(a);case 26:case 5:rr(t,a),i===null&&o&4&&Cy(a),o&512&&ll(a,a.return);break;case 12:rr(t,a);break;case 31:rr(t,a),o&4&&ky(t,a);break;case 13:rr(t,a),o&4&&Py(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=lA.bind(null,a),IA(t,a))));break;case 22:if(o=a.memoizedState!==null||nr,!o){i=i!==null&&i.memoizedState!==null||Ot,h=nr;var d=Ot;nr=o,(Ot=i)&&!d?sr(t,a,(a.subtreeFlags&8772)!==0):rr(t,a),nr=h,Ot=d}break;case 30:break;default:rr(t,a)}}function jy(t){var i=t.alternate;i!==null&&(t.alternate=null,jy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ua(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,pn=!1;function ir(t,i,a){for(a=a.child;a!==null;)Ly(t,i,a),a=a.sibling}function Ly(t,i,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount($n,a)}catch{}switch(a.tag){case 26:Ot||Oi(a,i),ir(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||Oi(a,i);var o=ct,h=pn;Fr(a.type)&&(ct=a.stateNode,pn=!1),ir(t,i,a),yl(a.stateNode),ct=o,pn=h;break;case 5:Ot||Oi(a,i);case 6:if(o=ct,h=pn,ct=null,ir(t,i,a),ct=o,pn=h,ct!==null)if(pn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(d){Je(a,i,d)}else try{ct.removeChild(a.stateNode)}catch(d){Je(a,i,d)}break;case 18:ct!==null&&(pn?(t=ct,I_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ya(t)):I_(ct,a.stateNode));break;case 4:o=ct,h=pn,ct=a.stateNode.containerInfo,pn=!0,ir(t,i,a),ct=o,pn=h;break;case 0:case 11:case 14:case 15:kr(2,a,i),Ot||kr(4,a,i),ir(t,i,a);break;case 1:Ot||(Oi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Ny(a,i,o)),ir(t,i,a);break;case 21:ir(t,i,a);break;case 22:Ot=(o=Ot)||a.memoizedState!==null,ir(t,i,a),Ot=o;break;default:ir(t,i,a)}}function ky(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ya(t)}catch(a){Je(i,i.return,a)}}}function Py(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ya(t)}catch(a){Je(i,i.return,a)}}function eA(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Vy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Vy),i;default:throw Error(s(435,t.tag))}}function mc(t,i){var a=eA(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=uA.bind(null,t,o);o.then(h,h)}})}function gn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Fr(T.type)){ct=T.stateNode,pn=!1;break e}break;case 5:ct=T.stateNode,pn=!1;break e;case 3:case 4:ct=T.stateNode.containerInfo,pn=!0;break e}T=T.return}if(ct===null)throw Error(s(160));Ly(d,v,h),ct=null,pn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Uy(i,t),i=i.sibling}var ai=null;function Uy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gn(i,t),yn(t),o&4&&(kr(3,t,t.return),ol(3,t),kr(5,t,t.return));break;case 1:gn(i,t),yn(t),o&512&&(Ot||a===null||Oi(a,a.return)),o&64&&nr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=ai;if(gn(i,t),yn(t),o&512&&(Ot||a===null||Oi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[_i]||d[xt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Zt(d,o,a),d[xt]=t,Rt(d),o=d;break e;case"link":var v=U_("link","href",h).get(o+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(o),Zt(d,o,a),h.head.appendChild(d);break;case"meta":if(v=U_("meta","content",h).get(o+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}d=h.createElement(o),Zt(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[xt]=t,Rt(d),o=d}t.stateNode=o}else z_(h,t.type,t.stateNode);else t.stateNode=P_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?z_(h,t.type,t.stateNode):P_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&ad(t,t.memoizedProps,a.memoizedProps)}break;case 27:gn(i,t),yn(t),o&512&&(Ot||a===null||Oi(a,a.return)),a!==null&&o&4&&ad(t,t.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,t),yn(t),o&512&&(Ot||a===null||Oi(a,a.return)),t.flags&32){h=t.stateNode;try{mn(h,"")}catch(me){Je(t,t.return,me)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,ad(t,h,a!==null?a.memoizedProps:h)),o&1024&&(ud=!0);break;case 6:if(gn(i,t),yn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(me){Je(t,t.return,me)}}break;case 3:if(Cc=null,h=ai,ai=Ic(i.containerInfo),gn(i,t),ai=h,yn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ya(i.containerInfo)}catch(me){Je(t,t.return,me)}ud&&(ud=!1,zy(t));break;case 4:o=ai,ai=Ic(t.stateNode.containerInfo),gn(i,t),yn(t),ai=o;break;case 12:gn(i,t),yn(t);break;case 31:gn(i,t),yn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,mc(t,o)));break;case 13:gn(i,t),yn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gc=Gt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,mc(t,o)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,z=nr,G=Ot;if(nr=z||h,Ot=G||C,gn(i,t),Ot=G,nr=z,yn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||nr||Ot||Fs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=C.stateNode;var J=C.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(me){Je(C,C.return,me)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(me){Je(C,C.return,me)}}}else if(i.tag===18){if(a===null){C=i;try{var H=C.stateNode;h?N_(H,!0):N_(C.stateNode,!1)}catch(me){Je(C,C.return,me)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,mc(t,a))));break;case 19:gn(i,t),yn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,mc(t,o)));break;case 30:break;case 21:break;default:gn(i,t),yn(t)}}function yn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Dy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=od(t);dc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(mn(v,""),a.flags&=-33);var T=od(t);dc(t,T,v);break;case 3:case 4:var C=a.stateNode.containerInfo,z=od(t);ld(t,z,C);break;default:throw Error(s(161))}}catch(G){Je(t,t.return,G)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function zy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;zy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function rr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)My(t,i.alternate,i),i=i.sibling}function Fs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:kr(4,i,i.return),Fs(i);break;case 1:Oi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ny(i,i.return,a),Fs(i);break;case 27:yl(i.stateNode);case 26:case 5:Oi(i,i.return),Fs(i);break;case 22:i.memoizedState===null&&Fs(i);break;case 30:Fs(i);break;default:Fs(i)}t=t.sibling}}function sr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:sr(h,d,a),ol(4,d);break;case 1:if(sr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){Je(o,o.return,z)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)yg(C[h],T)}catch(z){Je(o,o.return,z)}}a&&v&64&&Iy(d),ll(d,d.return);break;case 27:Oy(d);case 26:case 5:sr(h,d,a),a&&o===null&&v&4&&Cy(d),ll(d,d.return);break;case 12:sr(h,d,a);break;case 31:sr(h,d,a),a&&v&4&&ky(h,d);break;case 13:sr(h,d,a),a&&v&4&&Py(h,d);break;case 22:d.memoizedState===null&&sr(h,d,a),ll(d,d.return);break;case 30:break;default:sr(h,d,a)}i=i.sibling}}function cd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ko(a))}function hd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ko(t))}function oi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)qy(t,i,a,o),i=i.sibling}function qy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:oi(t,i,a,o),h&2048&&ol(9,i);break;case 1:oi(t,i,a,o);break;case 3:oi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ko(t)));break;case 12:if(h&2048){oi(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Je(i,i.return,C)}}else oi(t,i,a,o);break;case 31:oi(t,i,a,o);break;case 13:oi(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?oi(t,i,a,o):ul(t,i):d._visibility&2?oi(t,i,a,o):(d._visibility|=2,La(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&cd(v,i);break;case 24:oi(t,i,a,o),h&2048&&hd(i.alternate,i);break;default:oi(t,i,a,o)}}function La(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,T=a,C=o,z=v.flags;switch(v.tag){case 0:case 11:case 15:La(d,v,T,C,h),ol(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?La(d,v,T,C,h):ul(d,v):(G._visibility|=2,La(d,v,T,C,h)),h&&z&2048&&cd(v.alternate,v);break;case 24:La(d,v,T,C,h),h&&z&2048&&hd(v.alternate,v);break;default:La(d,v,T,C,h)}i=i.sibling}}function ul(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:ul(a,o),h&2048&&cd(o.alternate,o);break;case 24:ul(a,o),h&2048&&hd(o.alternate,o);break;default:ul(a,o)}i=i.sibling}}var cl=8192;function ka(t,i,a){if(t.subtreeFlags&cl)for(t=t.child;t!==null;)By(t,i,a),t=t.sibling}function By(t,i,a){switch(t.tag){case 26:ka(t,i,a),t.flags&cl&&t.memoizedState!==null&&zA(a,ai,t.memoizedState,t.memoizedProps);break;case 5:ka(t,i,a);break;case 3:case 4:var o=ai;ai=Ic(t.stateNode.containerInfo),ka(t,i,a),ai=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=cl,cl=16777216,ka(t,i,a),cl=o):ka(t,i,a));break;default:ka(t,i,a)}}function Hy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function hl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ht=o,Gy(o,t)}Hy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fy(t),t=t.sibling}function Fy(t){switch(t.tag){case 0:case 11:case 15:hl(t),t.flags&2048&&kr(9,t,t.return);break;case 3:hl(t);break;case 12:hl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,pc(t)):hl(t);break;default:hl(t)}}function pc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ht=o,Gy(o,t)}Hy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:kr(8,i,i.return),pc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,pc(i));break;default:pc(i)}t=t.sibling}}function Gy(t,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:kr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ko(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ht=o;else e:for(a=t;Ht!==null;){o=Ht;var h=o.sibling,d=o.return;if(jy(o),o===a){Ht=null;break e}if(h!==null){h.return=d,Ht=h;break e}Ht=d}}}var tA={getCacheForType:function(t){var i=Xt(Nt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Xt(Nt).controller.signal}},nA=typeof WeakMap=="function"?WeakMap:Map,Ke=0,rt=null,Ve=null,Le=0,Ze=0,Nn=null,Pr=!1,Pa=!1,fd=!1,ar=0,pt=0,Ur=0,Gs=0,dd=0,Cn=0,Ua=0,fl=null,_n=null,md=!1,gc=0,Qy=0,yc=1/0,_c=null,zr=null,Pt=0,qr=null,za=null,or=0,pd=0,gd=null,Yy=null,dl=0,yd=null;function Dn(){return(Ke&2)!==0&&Le!==0?Le&-Le:F.T!==null?Ad():vu()}function Ky(){if(Cn===0)if((Le&536870912)===0||Be){var t=_s;_s<<=1,(_s&3932160)===0&&(_s=262144),Cn=t}else Cn=536870912;return t=Rn.current,t!==null&&(t.flags|=32),Cn}function vn(t,i,a){(t===rt&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(qa(t,0),Br(t,Le,Cn,!1)),vs(t,a),((Ke&2)===0||t!==rt)&&(t===rt&&((Ke&2)===0&&(Gs|=a),pt===4&&Br(t,Le,Cn,!1)),Vi(t))}function Xy(t,i,a){if((Ke&6)!==0)throw Error(s(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Zn(t,i),h=o?sA(t,i):vd(t,i,!0),d=o;do{if(h===0){Pa&&!o&&Br(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!iA(a)){h=vd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=t;h=fl;var C=T.current.memoizedState.isDehydrated;if(C&&(qa(T,v).flags|=256),v=vd(T,v,!1),v!==2){if(fd&&!C){T.errorRecoveryDisabledLanes|=d,Gs|=d,h=4;break e}d=_n,_n=h,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){qa(t,0),Br(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Br(o,i,Cn,!Pr);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=gc+300-Gt(),10<h)){if(Br(o,i,Cn,!Pr),pi(o,0,!0)!==0)break e;or=i,o.timeoutHandle=x_($y.bind(null,o,a,_n,_c,md,i,Cn,Gs,Ua,Pr,d,"Throttled",-0,0),h);break e}$y(o,a,_n,_c,md,i,Cn,Gs,Ua,Pr,d,null,-0,0)}}break}while(!0);Vi(t)}function $y(t,i,a,o,h,d,v,T,C,z,G,J,q,H){if(t.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},By(i,d,J);var me=(d&62914560)===d?gc-Gt():(d&4194048)===d?Qy-Gt():0;if(me=qA(J,me),me!==null){or=d,t.cancelPendingCommit=me(r_.bind(null,t,i,d,a,o,h,v,T,C,G,J,null,q,H)),Br(t,d,v,!z);return}}r_(t,i,d,a,o,h,v,T,C)}function iA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!wn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Br(t,i,a,o){i&=~dd,i&=~Gs,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-yt(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Es(t,a,i)}function vc(){return(Ke&6)===0?(ml(0),!1):!0}function _d(){if(Ve!==null){if(Ze===0)var t=Ve.return;else t=Ve,$i=Ls=null,Mf(t),Da=null,$o=0,t=Ve;for(;t!==null;)Ry(t.alternate,t),t=t.return;Ve=null}}function qa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,AA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),or=0,_d(),rt=t,Ve=a=Ki(t.current,null),Le=i,Ze=0,Nn=null,Pr=!1,Pa=Zn(t,i),fd=!1,Ua=Cn=dd=Gs=Ur=pt=0,_n=fl=null,md=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-yt(o),d=1<<h;i|=t[h],o&=~d}return ar=i,zu(),a}function Zy(t,i){De=null,F.H=rl,i===Ca||i===Ku?(i=dg(),Ze=3):i===bf?(i=dg(),Ze=4):Ze=i===$f?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Ve===null&&(pt=1,lc(t,zn(i,t.current)))}function Jy(){var t=Rn.current;return t===null?!0:(Le&4194048)===Le?Fn===null:(Le&62914560)===Le||(Le&536870912)!==0?t===Fn:!1}function Wy(){var t=F.H;return F.H=rl,t===null?rl:t}function e_(){var t=F.A;return F.A=tA,t}function Ec(){pt=4,Pr||(Le&4194048)!==Le&&Rn.current!==null||(Pa=!0),(Ur&134217727)===0&&(Gs&134217727)===0||rt===null||Br(rt,Le,Cn,!1)}function vd(t,i,a){var o=Ke;Ke|=2;var h=Wy(),d=e_();(rt!==t||Le!==i)&&(_c=null,qa(t,i)),i=!1;var v=pt;e:do try{if(Ze!==0&&Ve!==null){var T=Ve,C=Nn;switch(Ze){case 8:_d(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(i=!0);var z=Ze;if(Ze=0,Nn=null,Ba(t,T,C,z),a&&Pa){v=0;break e}break;default:z=Ze,Ze=0,Nn=null,Ba(t,T,C,z)}}rA(),v=pt;break}catch(G){Zy(t,G)}while(!0);return i&&t.shellSuspendCounter++,$i=Ls=null,Ke=o,F.H=h,F.A=d,Ve===null&&(rt=null,Le=0,zu()),v}function rA(){for(;Ve!==null;)t_(Ve)}function sA(t,i){var a=Ke;Ke|=2;var o=Wy(),h=e_();rt!==t||Le!==i?(_c=null,yc=Gt()+500,qa(t,i)):Pa=Zn(t,i);e:do try{if(Ze!==0&&Ve!==null){i=Ve;var d=Nn;t:switch(Ze){case 1:Ze=0,Nn=null,Ba(t,i,d,1);break;case 2:case 9:if(hg(d)){Ze=0,Nn=null,n_(i);break}i=function(){Ze!==2&&Ze!==9||rt!==t||(Ze=7),Vi(t)},d.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:hg(d)?(Ze=0,Nn=null,n_(i)):(Ze=0,Nn=null,Ba(t,i,d,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var T=Ve;if(v?q_(v):T.stateNode.complete){Ze=0,Nn=null;var C=T.sibling;if(C!==null)Ve=C;else{var z=T.return;z!==null?(Ve=z,Tc(z)):Ve=null}break t}}Ze=0,Nn=null,Ba(t,i,d,5);break;case 6:Ze=0,Nn=null,Ba(t,i,d,6);break;case 8:_d(),pt=6;break e;default:throw Error(s(462))}}aA();break}catch(G){Zy(t,G)}while(!0);return $i=Ls=null,F.H=o,F.A=h,Ke=a,Ve!==null?0:(rt=null,Le=0,zu(),pt)}function aA(){for(;Ve!==null&&!aa();)t_(Ve)}function t_(t){var i=wy(t.alternate,t,ar);t.memoizedProps=t.pendingProps,i===null?Tc(t):Ve=i}function n_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=vy(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=vy(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:Mf(i);default:Ry(a,i),i=Ve=eg(i,ar),i=wy(a,i,ar)}t.memoizedProps=t.pendingProps,i===null?Tc(t):Ve=i}function Ba(t,i,a,o){$i=Ls=null,Mf(i),Da=null,$o=0;var h=i.return;try{if(Kb(t,h,i,a,Le)){pt=1,lc(t,zn(a,t.current)),Ve=null;return}}catch(d){if(h!==null)throw Ve=h,d;pt=1,lc(t,zn(a,t.current)),Ve=null;return}i.flags&32768?(Be||o===1?t=!0:Pa||(Le&536870912)!==0?t=!1:(Pr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Rn.current,o!==null&&o.tag===13&&(o.flags|=16384))),i_(i,t)):Tc(i)}function Tc(t){var i=t;do{if((i.flags&32768)!==0){i_(i,Pr);return}t=i.return;var a=Zb(i.alternate,i,ar);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=t}while(i!==null);pt===0&&(pt=5)}function i_(t,i){do{var a=Jb(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);pt=6,Ve=null}function r_(t,i,a,o,h,d,v,T,C){t.cancelPendingCommit=null;do bc();while(Pt!==0);if((Ke&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=of,Zh(t,a,d,v,T,C),t===rt&&(Ve=rt=null,Le=0),za=i,qr=t,or=a,pd=d,gd=h,Yy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,cA(_r,function(){return u_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=oe.p,oe.p=2,v=Ke,Ke|=4;try{Wb(t,i,a)}finally{Ke=v,oe.p=h,F.T=o}}Pt=1,s_(),a_(),o_()}}function s_(){if(Pt===1){Pt=0;var t=qr,i=za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=oe.p;oe.p=2;var h=Ke;Ke|=4;try{Uy(i,t);var d=Dd,v=Gp(t.containerInfo),T=d.focusedElem,C=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&Fp(T.ownerDocument.documentElement,T)){if(C!==null&&tf(T)){var z=C.start,G=C.end;if(G===void 0&&(G=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(G,T.value.length);else{var J=T.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var H=q.getSelection(),me=T.textContent.length,Te=Math.min(C.start,me),nt=C.end===void 0?Te:Math.min(C.end,me);!H.extend&&Te>nt&&(v=nt,nt=Te,Te=v);var j=Hp(T,Te),O=Hp(T,nt);if(j&&O&&(H.rangeCount!==1||H.anchorNode!==j.node||H.anchorOffset!==j.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var U=J.createRange();U.setStart(j.node,j.offset),H.removeAllRanges(),Te>nt?(H.addRange(U),H.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),H.addRange(U))}}}}for(J=[],H=T;H=H.parentNode;)H.nodeType===1&&J.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var Y=J[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Mc=!!Cd,Dd=Cd=null}finally{Ke=h,oe.p=o,F.T=a}}t.current=i,Pt=2}}function a_(){if(Pt===2){Pt=0;var t=qr,i=za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=oe.p;oe.p=2;var h=Ke;Ke|=4;try{My(t,i.alternate,i)}finally{Ke=h,oe.p=o,F.T=a}}Pt=3}}function o_(){if(Pt===4||Pt===3){Pt=0,Hi();var t=qr,i=za,a=or,o=Yy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Pt=5:(Pt=0,za=qr=null,l_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(zr=null),Fi(a),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot($n,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=F.T,h=oe.p,oe.p=2,F.T=null;try{for(var d=t.onRecoverableError,v=0;v<o.length;v++){var T=o[v];d(T.value,{componentStack:T.stack})}}finally{F.T=i,oe.p=h}}(or&3)!==0&&bc(),Vi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===yd?dl++:(dl=0,yd=t):dl=0,ml(0)}}function l_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ko(i)))}function bc(){return s_(),a_(),o_(),u_()}function u_(){if(Pt!==5)return!1;var t=qr,i=pd;pd=0;var a=Fi(or),o=F.T,h=oe.p;try{oe.p=32>a?32:a,F.T=null,a=gd,gd=null;var d=qr,v=or;if(Pt=0,za=qr=null,or=0,(Ke&6)!==0)throw Error(s(331));var T=Ke;if(Ke|=4,Fy(d.current),qy(d,d.current,v,a),Ke=T,ml(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot($n,d)}catch{}return!0}finally{oe.p=h,F.T=o,l_(t,i)}}function c_(t,i,a){i=zn(a,i),i=Xf(t.stateNode,i,2),t=Mr(t,i,2),t!==null&&(vs(t,2),Vi(t))}function Je(t,i,a){if(t.tag===3)c_(t,t,a);else for(;i!==null;){if(i.tag===3){c_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(zr===null||!zr.has(o))){t=zn(a,t),a=hy(2),o=Mr(i,a,2),o!==null&&(fy(a,o,i,t),vs(o,2),Vi(o));break}}i=i.return}}function Ed(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new nA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(fd=!0,h.add(a),t=oA.bind(null,t,i,a),i.then(t,t))}function oA(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,rt===t&&(Le&a)===a&&(pt===4||pt===3&&(Le&62914560)===Le&&300>Gt()-gc?(Ke&2)===0&&qa(t,0):dd|=a,Ua===Le&&(Ua=0)),Vi(t)}function h_(t,i){i===0&&(i=_u()),t=Vs(t,i),t!==null&&(vs(t,i),Vi(t))}function lA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),h_(t,a)}function uA(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),h_(t,a)}function cA(t,i){return gt(t,i)}var Ac=null,Ha=null,Td=!1,Sc=!1,bd=!1,Hr=0;function Vi(t){t!==Ha&&t.next===null&&(Ha===null?Ac=Ha=t:Ha=Ha.next=t),Sc=!0,Td||(Td=!0,fA())}function ml(t,i){if(!bd&&Sc){bd=!0;do for(var a=!1,o=Ac;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-yt(42|t)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,p_(o,d))}else d=Le,d=pi(o,o===rt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Zn(o,d)||(a=!0,p_(o,d));o=o.next}while(a);bd=!1}}function hA(){f_()}function f_(){Sc=Td=!1;var t=0;Hr!==0&&bA()&&(t=Hr);for(var i=Gt(),a=null,o=Ac;o!==null;){var h=o.next,d=d_(o,i);d===0?(o.next=null,a===null?Ac=h:a.next=h,h===null&&(Ha=a)):(a=o,(t!==0||(d&3)!==0)&&(Sc=!0)),o=h}Pt!==0&&Pt!==5||ml(t),Hr!==0&&(Hr=0)}function d_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-yt(d),T=1<<v,C=h[v];C===-1?((T&a)===0||(T&o)!==0)&&(h[v]=$h(T,i)):C<=i&&(t.expiredLanes|=T),d&=~T}if(i=rt,a=Le,a=pi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Bi(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Zn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&Bi(o),Fi(a)){case 2:case 8:a=So;break;case 32:a=_r;break;case 268435456:a=du;break;default:a=_r}return o=m_.bind(null,t),a=gt(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&Bi(o),t.callbackPriority=2,t.callbackNode=null,2}function m_(t,i){if(Pt!==0&&Pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(bc()&&t.callbackNode!==a)return null;var o=Le;return o=pi(t,t===rt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Xy(t,o,i),d_(t,Gt()),t.callbackNode!=null&&t.callbackNode===a?m_.bind(null,t):null)}function p_(t,i){if(bc())return null;Xy(t,i,!0)}function fA(){SA(function(){(Ke&6)!==0?gt(yr,hA):f_()})}function Ad(){if(Hr===0){var t=Ia;t===0&&(t=di,di<<=1,(di&261888)===0&&(di=256)),Hr=t}return Hr}function g_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:da(""+t)}function y_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function dA(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=g_((h[qt]||null).action),v=o.submitter;v&&(i=(i=v[qt]||null)?g_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new xi("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Hr!==0){var C=v?y_(h,v):new FormData(h);Hf(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(T.preventDefault(),C=v?y_(h,v):new FormData(h),Hf(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var Sd=0;Sd<af.length;Sd++){var wd=af[Sd],mA=wd.toLowerCase(),pA=wd[0].toUpperCase()+wd.slice(1);si(mA,"on"+pA)}si(Kp,"onAnimationEnd"),si(Xp,"onAnimationIteration"),si($p,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(Db,"onTransitionRun"),si(Ob,"onTransitionStart"),si(Vb,"onTransitionCancel"),si(Zp,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pl));function __(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var T=o[v],C=T.instance,z=T.currentTarget;if(T=T.listener,C!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=z;try{d(h)}catch(G){Uu(G)}h.currentTarget=null,d=C}else for(v=0;v<o.length;v++){if(T=o[v],C=T.instance,z=T.currentTarget,T=T.listener,C!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=z;try{d(h)}catch(G){Uu(G)}h.currentTarget=null,d=C}}}}function Me(t,i){var a=i[la];a===void 0&&(a=i[la]=new Set);var o=t+"__bubble";a.has(o)||(v_(i,t,2,!1),a.add(o))}function xd(t,i,a){var o=0;i&&(o|=4),v_(a,t,o,i)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Rd(t){if(!t[wc]){t[wc]=!0,Ro.forEach(function(a){a!=="selectionchange"&&(gA.has(a)||xd(a,!1,t),xd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[wc]||(i[wc]=!0,xd("selectionchange",!1,i))}}function v_(t,i,a,o){switch(K_(i)){case 2:var h=FA;break;case 8:h=GA;break;default:h=Bd}a=h.bind(null,i,a,t),h=void 0,!ws||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Id(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=o.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=vi(T),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){o=d=v;continue e}T=T.parentNode}}o=o.return}Sr(function(){var z=d,G=Ln(a),J=[];e:{var q=Jp.get(t);if(q!==void 0){var H=xi,me=t;switch(t){case"keypress":if(Rs(a)===0)break e;case"keydown":case"keyup":H=Lu;break;case"focusin":me="focus",H=Ns;break;case"focusout":me="blur",H=Ns;break;case"beforeblur":case"afterblur":H=Ns;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=m;break;case Kp:case Xp:case $p:H=Nu;break;case Zp:H=A;break;case"scroll":case"scrollend":H=Uo;break;case"wheel":H=B;break;case"copy":case"cut":case"paste":H=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Yi;break;case"toggle":case"beforetoggle":H=Ce}var Te=(i&4)!==0,nt=!Te&&(t==="scroll"||t==="scrollend"),j=Te?q!==null?q+"Capture":null:q;Te=[];for(var O=z,U;O!==null;){var Y=O;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||j===null||(Y=ti(O,j),Y!=null&&Te.push(gl(O,Y,U))),nt)break;O=O.return}0<Te.length&&(q=new H(q,me,null,a,G),J.push({event:q,listeners:Te}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Lo&&(me=a.relatedTarget||a.fromElement)&&(vi(me)||me[yi]))break e;if((H||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,H?(me=a.relatedTarget||a.toElement,H=z,me=me?vi(me):null,me!==null&&(nt=u(me),Te=me.tag,me!==nt||Te!==5&&Te!==27&&Te!==6)&&(me=null)):(H=null,me=z),H!==me)){if(Te=zo,Y="onMouseLeave",j="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Te=Yi,Y="onPointerLeave",j="onPointerEnter",O="pointer"),nt=H==null?q:An(H),U=me==null?q:An(me),q=new Te(Y,O+"leave",H,a,G),q.target=nt,q.relatedTarget=U,Y=null,vi(G)===z&&(Te=new Te(j,O+"enter",me,a,G),Te.target=U,Te.relatedTarget=nt,Y=Te),nt=Y,H&&me)t:{for(Te=yA,j=H,O=me,U=0,Y=j;Y;Y=Te(Y))U++;Y=0;for(var _e=O;_e;_e=Te(_e))Y++;for(;0<U-Y;)j=Te(j),U--;for(;0<Y-U;)O=Te(O),Y--;for(;U--;){if(j===O||O!==null&&j===O.alternate){Te=j;break t}j=Te(j),O=Te(O)}Te=null}else Te=null;H!==null&&E_(J,q,H,Te,!1),me!==null&&nt!==null&&E_(J,nt,me,Te,!0)}}e:{if(q=z?An(z):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var Fe=kp;else if(jp(q))if(Pp)Fe=Ib;else{Fe=xb;var pe=wb}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&fa(z.elementType)&&(Fe=kp):Fe=Rb;if(Fe&&(Fe=Fe(t,z))){Lp(J,Fe,a,G);break e}pe&&pe(t,q,z),t==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&Vo(q,"number",q.value)}switch(pe=z?An(z):window,t){case"focusin":(jp(pe)||pe.contentEditable==="true")&&(Ea=pe,nf=z,Go=null);break;case"focusout":Go=nf=Ea=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Qp(J,a,G);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":Qp(J,a,G)}var Oe;if(Ye)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else va?Cs(t,a)&&(ke="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Ni&&a.locale!=="ko"&&(va||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&va&&(Oe=Po()):(wi=G,ko="value"in wi?wi.value:wi.textContent,va=!0)),pe=xc(z,ke),0<pe.length&&(ke=new Ii(ke,t,null,a,G),J.push({event:ke,listeners:pe}),Oe?ke.data=Oe:(Oe=_a(a),Oe!==null&&(ke.data=Oe)))),(Oe=Pn?Tb(t,a):bb(t,a))&&(ke=xc(z,"onBeforeInput"),0<ke.length&&(pe=new Ii("onBeforeInput","beforeinput",null,a,G),J.push({event:pe,listeners:ke}),pe.data=Oe)),dA(J,t,z,a,G)}__(J,i)})}function gl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function xc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ti(t,a),h!=null&&o.unshift(gl(t,h,d)),h=ti(t,i),h!=null&&o.push(gl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function yA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function E_(t,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var T=a,C=T.alternate,z=T.stateNode;if(T=T.tag,C!==null&&C===o)break;T!==5&&T!==26&&T!==27||z===null||(C=z,h?(z=ti(a,d),z!=null&&v.unshift(gl(a,z,C))):h||(z=ti(a,d),z!=null&&v.push(gl(a,z,C)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var _A=/\r\n?/g,vA=/\u0000|\uFFFD/g;function T_(t){return(typeof t=="string"?t:""+t).replace(_A,`
`).replace(vA,"")}function b_(t,i){return i=T_(i),T_(t)===i}function tt(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||mn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&mn(t,""+o);break;case"className":Sn(t,"class",o);break;case"tabIndex":Sn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(t,a,o);break;case"style":jo(t,o,d);break;case"data":if(i!=="object"){Sn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=da(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&tt(t,i,"name",h.name,h,null),tt(t,i,"formEncType",h.formEncType,h,null),tt(t,i,"formMethod",h.formMethod,h,null),tt(t,i,"formTarget",h.formTarget,h,null)):(tt(t,i,"encType",h.encType,h,null),tt(t,i,"method",h.method,h,null),tt(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=da(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=ei);break;case"onScroll":o!=null&&Me("scroll",t);break;case"onScrollEnd":o!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=da(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Me("beforetoggle",t),Me("toggle",t),ca(t,"popover",o);break;case"xlinkActuate":It(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":It(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":It(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":It(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":It(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":It(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":It(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":It(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":It(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ca(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xu.get(a)||a,ca(t,a,o))}}function Nd(t,i,a,o,h,d){switch(a){case"style":jo(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?mn(t,o):(typeof o=="number"||typeof o=="bigint")&&mn(t,""+o);break;case"onScroll":o!=null&&Me("scroll",t);break;case"onScrollEnd":o!=null&&Me("scrollend",t);break;case"onClick":o!=null&&(t.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Io.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):ca(t,a,o)}}}function Zt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tt(t,i,d,v,a,null)}}h&&tt(t,i,"srcSet",a.srcSet,a,null),o&&tt(t,i,"src",a.src,a,null);return;case"input":Me("invalid",t);var T=d=v=h=null,C=null,z=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":C=G;break;case"defaultChecked":z=G;break;case"value":d=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:tt(t,i,o,G,a,null)}}Au(t,d,T,C,z,v,h,!1);return;case"select":Me("invalid",t),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:tt(t,i,h,T,a,null)}i=d,a=v,t.multiple=!!o,i!=null?Er(t,!!o,i,!1):a!=null&&Er(t,!!o,a,!0);return;case"textarea":Me("invalid",t),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:tt(t,i,v,T,a,null)}Tr(t,o,h,d);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(o=a[C],o!=null))switch(C){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:tt(t,i,C,o,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(o=0;o<pl.length;o++)Me(pl[o],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tt(t,i,z,o,a,null)}return;default:if(fa(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Nd(t,i,G,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&tt(t,i,T,o,a,null))}function EA(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,C=null,z=null,G=null;for(H in a){var J=a[H];if(a.hasOwnProperty(H)&&J!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=J;default:o.hasOwnProperty(H)||tt(t,i,H,null,o,J)}}for(var q in o){var H=o[q];if(J=a[q],o.hasOwnProperty(q)&&(H!=null||J!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":z=H;break;case"defaultChecked":G=H;break;case"value":v=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==J&&tt(t,i,q,H,o,J)}}ha(t,v,T,C,z,G,d,h);return;case"select":H=v=T=q=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":H=C;default:o.hasOwnProperty(d)||tt(t,i,d,null,o,C)}for(h in o)if(d=o[h],C=a[h],o.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":q=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==C&&tt(t,i,h,d,o,C)}i=T,a=v,o=H,q!=null?Er(t,!!a,q,!1):!!o!=!!a&&(i!=null?Er(t,!!a,i,!0):Er(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:tt(t,i,T,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&tt(t,i,v,h,o,d)}Su(t,q,H);return;case"option":for(var me in a)if(q=a[me],a.hasOwnProperty(me)&&q!=null&&!o.hasOwnProperty(me))switch(me){case"selected":t.selected=!1;break;default:tt(t,i,me,null,o,q)}for(C in o)if(q=o[C],H=a[C],o.hasOwnProperty(C)&&q!==H&&(q!=null||H!=null))switch(C){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:tt(t,i,C,q,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)q=a[Te],a.hasOwnProperty(Te)&&q!=null&&!o.hasOwnProperty(Te)&&tt(t,i,Te,null,o,q);for(z in o)if(q=o[z],H=a[z],o.hasOwnProperty(z)&&q!==H&&(q!=null||H!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:tt(t,i,z,q,o,H)}return;default:if(fa(i)){for(var nt in a)q=a[nt],a.hasOwnProperty(nt)&&q!==void 0&&!o.hasOwnProperty(nt)&&Nd(t,i,nt,void 0,o,q);for(G in o)q=o[G],H=a[G],!o.hasOwnProperty(G)||q===H||q===void 0&&H===void 0||Nd(t,i,G,q,o,H);return}}for(var j in a)q=a[j],a.hasOwnProperty(j)&&q!=null&&!o.hasOwnProperty(j)&&tt(t,i,j,null,o,q);for(J in o)q=o[J],H=a[J],!o.hasOwnProperty(J)||q===H||q==null&&H==null||tt(t,i,J,q,o,H)}function A_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,v=h.initiatorType,T=h.duration;if(d&&T&&A_(v)){for(v=0,T=h.responseEnd,o+=1;o<a.length;o++){var C=a[o],z=C.startTime;if(z>T)break;var G=C.transferSize,J=C.initiatorType;G&&A_(J)&&(C=C.responseEnd,v+=G*(C<T?1:(T-z)/(C-z)))}if(--o,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Cd=null,Dd=null;function Rc(t){return t.nodeType===9?t:t.ownerDocument}function S_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Od(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vd=null;function bA(){var t=window.event;return t&&t.type==="popstate"?t===Vd?!1:(Vd=t,!0):(Vd=null,!1)}var x_=typeof setTimeout=="function"?setTimeout:void 0,AA=typeof clearTimeout=="function"?clearTimeout:void 0,R_=typeof Promise=="function"?Promise:void 0,SA=typeof queueMicrotask=="function"?queueMicrotask:typeof R_<"u"?function(t){return R_.resolve(null).then(t).catch(wA)}:x_;function wA(t){setTimeout(function(){throw t})}function Fr(t){return t==="head"}function I_(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),Ya(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")yl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,yl(a);for(var d=a.firstChild;d;){var v=d.nextSibling,T=d.nodeName;d[_i]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&yl(t.ownerDocument.body);a=h}while(a);Ya(i)}function N_(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Md(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Md(a),ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function xA(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[_i])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Gn(t.nextSibling),t===null)break}return null}function RA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Gn(t.nextSibling),t===null))return null;return t}function C_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Gn(t.nextSibling),t===null))return null;return t}function jd(t){return t.data==="$?"||t.data==="$~"}function Ld(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function IA(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Gn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var kd=null;function D_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Gn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function O_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function V_(t,i,a){switch(i=Rc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function yl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ua(t)}var Qn=new Map,M_=new Set;function Ic(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var lr=oe.d;oe.d={f:NA,r:CA,D:DA,C:OA,L:VA,m:MA,X:LA,S:jA,M:kA};function NA(){var t=lr.f(),i=vc();return t||i}function CA(t){var i=jn(t);i!==null&&i.tag===5&&i.type==="form"?Zg(i):lr.r(t)}var Fa=typeof document>"u"?null:document;function j_(t,i,a){var o=Fa;if(o&&typeof i=="string"&&i){var h=dn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),M_.has(h)||(M_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Zt(i,"link",t),Rt(i),o.head.appendChild(i)))}}function DA(t){lr.D(t),j_("dns-prefetch",t,null)}function OA(t,i){lr.C(t,i),j_("preconnect",t,i)}function VA(t,i,a){lr.L(t,i,a);var o=Fa;if(o&&t&&i){var h='link[rel="preload"][as="'+dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+dn(a.imageSizes)+'"]')):h+='[href="'+dn(t)+'"]';var d=h;switch(i){case"style":d=Ga(t);break;case"script":d=Qa(t)}Qn.has(d)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Qn.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(_l(d))||i==="script"&&o.querySelector(vl(d))||(i=o.createElement("link"),Zt(i,"link",t),Rt(i),o.head.appendChild(i)))}}function MA(t,i){lr.m(t,i);var a=Fa;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+dn(o)+'"][href="'+dn(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Qa(t)}if(!Qn.has(d)&&(t=S({rel:"modulepreload",href:t},i),Qn.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vl(d)))return}o=a.createElement("link"),Zt(o,"link",t),Rt(o),a.head.appendChild(o)}}}function jA(t,i,a){lr.S(t,i,a);var o=Fa;if(o&&t){var h=Ei(o).hoistableStyles,d=Ga(t);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(_l(d)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Qn.get(d))&&Pd(t,a);var C=v=o.createElement("link");Rt(C),Zt(C,"link",t),C._p=new Promise(function(z,G){C.onload=z,C.onerror=G}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Nc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function LA(t,i){lr.X(t,i);var a=Fa;if(a&&t){var o=Ei(a).hoistableScripts,h=Qa(t),d=o.get(h);d||(d=a.querySelector(vl(h)),d||(t=S({src:t,async:!0},i),(i=Qn.get(h))&&Ud(t,i),d=a.createElement("script"),Rt(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function kA(t,i){lr.M(t,i);var a=Fa;if(a&&t){var o=Ei(a).hoistableScripts,h=Qa(t),d=o.get(h);d||(d=a.querySelector(vl(h)),d||(t=S({src:t,async:!0,type:"module"},i),(i=Qn.get(h))&&Ud(t,i),d=a.createElement("script"),Rt(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function L_(t,i,a,o){var h=(h=ne.current)?Ic(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ga(a.href),a=Ei(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ga(a.href);var d=Ei(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(_l(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(t,a),d||PA(h,t,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Qa(a),a=Ei(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ga(t){return'href="'+dn(t)+'"'}function _l(t){return'link[rel="stylesheet"]['+t+"]"}function k_(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function PA(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Zt(i,"link",a),Rt(i),t.head.appendChild(i))}function Qa(t){return'[src="'+dn(t)+'"]'}function vl(t){return"script[async]"+t}function P_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+dn(a.href)+'"]');if(o)return i.instance=o,Rt(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Rt(o),Zt(o,"style",h),Nc(o,a.precedence,t),i.instance=o;case"stylesheet":h=Ga(a.href);var d=t.querySelector(_l(h));if(d)return i.state.loading|=4,i.instance=d,Rt(d),d;o=k_(a),(h=Qn.get(h))&&Pd(o,h),d=(t.ownerDocument||t).createElement("link"),Rt(d);var v=d;return v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),Zt(d,"link",o),i.state.loading|=4,Nc(d,a.precedence,t),i.instance=d;case"script":return d=Qa(a.src),(h=t.querySelector(vl(d)))?(i.instance=h,Rt(h),h):(o=a,(h=Qn.get(d))&&(o=S({},a),Ud(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Rt(h),Zt(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Nc(o,a.precedence,t));return i.instance}function Nc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Pd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Ud(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Cc=null;function U_(t,i,a){if(Cc===null){var o=new Map,h=Cc=new Map;h.set(a,o)}else h=Cc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[_i]||d[xt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var T=o.get(v);T?T.push(d):o.set(v,[d])}}return o}function z_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function UA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function q_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function zA(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ga(o.href),d=i.querySelector(_l(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Dc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Rt(d);return}d=i.ownerDocument||i,o=k_(o),(h=Qn.get(h))&&Pd(o,h),d=d.createElement("link"),Rt(d);var v=d;v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),Zt(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Dc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var zd=0;function qA(t,i){return t.stylesheets&&t.count===0&&Vc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Vc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&zd===0&&(zd=62500*TA());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>zd?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Dc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Oc=null;function Vc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Oc=new Map,i.forEach(BA,t),Oc=null,Dc.call(t))}function BA(t,i){if(!(i.state.loading&4)){var a=Oc.get(t);if(a)var o=a.get(null);else{a=new Map,Oc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=Dc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var El={$$typeof:de,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function HA(t,i,a,o,h,d,v,T,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function B_(t,i,a,o,h,d,v,T,C,z,G,J){return t=new HA(t,i,a,v,C,z,G,J,T),i=1,d===!0&&(i|=24),d=xn(3,null,null,i),t.current=d,d.stateNode=t,i=vf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},Af(d),t}function H_(t){return t?(t=Aa,t):Aa}function F_(t,i,a,o,h,d){h=H_(h),o.context===null?o.context=h:o.pendingContext=h,o=Vr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Mr(t,o,i),a!==null&&(vn(a,t,i),Jo(a,t,i))}function G_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function qd(t,i){G_(t,i),(t=t.alternate)&&G_(t,i)}function Q_(t){if(t.tag===13||t.tag===31){var i=Vs(t,67108864);i!==null&&vn(i,t,67108864),qd(t,67108864)}}function Y_(t){if(t.tag===13||t.tag===31){var i=Dn();i=Ts(i);var a=Vs(t,i);a!==null&&vn(a,t,i),qd(t,i)}}var Mc=!0;function FA(t,i,a,o){var h=F.T;F.T=null;var d=oe.p;try{oe.p=2,Bd(t,i,a,o)}finally{oe.p=d,F.T=h}}function GA(t,i,a,o){var h=F.T;F.T=null;var d=oe.p;try{oe.p=8,Bd(t,i,a,o)}finally{oe.p=d,F.T=h}}function Bd(t,i,a,o){if(Mc){var h=Hd(o);if(h===null)Id(t,i,o,jc,a),X_(t,o);else if(YA(h,t,i,a,o))o.stopPropagation();else if(X_(t,o),i&4&&-1<QA.indexOf(t)){for(;h!==null;){var d=jn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=mi(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var C=1<<31-yt(v);T.entanglements[1]|=C,v&=~C}Vi(d),(Ke&6)===0&&(yc=Gt()+500,ml(0))}}break;case 31:case 13:T=Vs(d,2),T!==null&&vn(T,d,2),vc(),qd(d,2)}if(d=Hd(o),d===null&&Id(t,i,o,jc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Id(t,i,o,null,a)}}function Hd(t){return t=Ln(t),Fd(t)}var jc=null;function Fd(t){if(jc=null,t=vi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=g(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return jc=t,null}function K_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fi()){case yr:return 2;case So:return 8;case _r:case Xh:return 32;case du:return 268435456;default:return 32}default:return 32}}var Gd=!1,Gr=null,Qr=null,Yr=null,Tl=new Map,bl=new Map,Kr=[],QA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(t,i){switch(t){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Tl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(i.pointerId)}}function Al(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=jn(i),i!==null&&Q_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function YA(t,i,a,o,h){switch(i){case"focusin":return Gr=Al(Gr,t,i,a,o,h),!0;case"dragenter":return Qr=Al(Qr,t,i,a,o,h),!0;case"mouseover":return Yr=Al(Yr,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return Tl.set(d,Al(Tl.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,bl.set(d,Al(bl.get(d)||null,t,i,a,o,h)),!0}return!1}function $_(t){var i=vi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Jn(t.priority,function(){Y_(a)});return}}else if(i===31){if(i=g(a),i!==null){t.blockedOn=i,Jn(t.priority,function(){Y_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Hd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Lo=o,a.target.dispatchEvent(o),Lo=null}else return i=jn(a),i!==null&&Q_(i),t.blockedOn=a,!1;i.shift()}return!0}function Z_(t,i,a){Lc(t)&&a.delete(i)}function KA(){Gd=!1,Gr!==null&&Lc(Gr)&&(Gr=null),Qr!==null&&Lc(Qr)&&(Qr=null),Yr!==null&&Lc(Yr)&&(Yr=null),Tl.forEach(Z_),bl.forEach(Z_)}function kc(t,i){t.blockedOn===i&&(t.blockedOn=null,Gd||(Gd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,KA)))}var Pc=null;function J_(t){Pc!==t&&(Pc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Pc===t&&(Pc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Fd(o||a)===null)continue;break}var d=jn(a);d!==null&&(t.splice(i,3),i-=3,Hf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Ya(t){function i(C){return kc(C,t)}Gr!==null&&kc(Gr,t),Qr!==null&&kc(Qr,t),Yr!==null&&kc(Yr,t),Tl.forEach(i),bl.forEach(i);for(var a=0;a<Kr.length;a++){var o=Kr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Kr.length&&(a=Kr[0],a.blockedOn===null);)$_(a),a.blockedOn===null&&Kr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[qt]||null;if(typeof d=="function")v||J_(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[qt]||null)T=v.formAction;else if(Fd(h)!==null)continue}else T=v.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),J_(a)}}}function W_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Qd(t){this._internalRoot=t}Uc.prototype.render=Qd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Dn();F_(a,o,t,i,null,null)},Uc.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;F_(t.current,2,null,t,null,null),vc(),i[yi]=null}};function Uc(t){this._internalRoot=t}Uc.prototype.unstable_scheduleHydration=function(t){if(t){var i=vu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Kr.length&&i!==0&&i<Kr[a].priority;a++);Kr.splice(a,0,t),a===0&&$_(t)}};var ev=e.version;if(ev!=="19.2.0")throw Error(s(527,ev,"19.2.0"));oe.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=_(i),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var XA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{$n=zc.inject(XA),Qt=zc}catch{}}return wl.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=oy,d=ly,v=uy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=B_(t,1,!1,null,null,a,o,null,h,d,v,W_),t[yi]=i.current,Rd(t),new Qd(i)},wl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",d=oy,v=ly,T=uy,C=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),i=B_(t,1,!0,i,a??null,o,h,C,d,v,T,W_),i.context=H_(null),a=i.current,o=Dn(),o=Ts(o),h=Vr(o),h.callback=null,Mr(a,h,o),a=o,i.current.lanes=a,vs(i,a),Vi(i),t[yi]=i.current,Rd(t),new Uc(i)},wl.version="19.2.0",wl}var cv;function a1(){if(cv)return Xd.exports;cv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Xd.exports=s1(),Xd.exports}var o1=a1();const l1=G0(o1),u1=({className:r})=>p.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),c1=({className:r})=>p.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),h1=({className:r})=>p.jsxs("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{d:"M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m11 0a2 2 0 104 0m-4 0a2 2 0 114 0"})]}),Bm=({className:r})=>p.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),hv=({className:r})=>p.jsxs("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),oh=({className:r})=>p.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),f1=({className:r})=>p.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Ks=({className:r})=>p.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),Wa=({className:r})=>p.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),d1=({currentView:r,setView:e,user:n,onLogout:s})=>{const u=[{id:"dashboard",label:"لوحة التحكم",icon:u1,roles:["admin","user"]},{id:"purchaseOrders",label:"سندات الطلب",icon:c1,roles:["admin","user"]},{id:"deliveryNotes",label:"سندات الاستلام",icon:h1,roles:["admin","user"]},{id:"settings",label:"الإعدادات",icon:hv,roles:["admin"]},{id:"residenceSettings",label:"إعدادات الإقامة",icon:hv,roles:["user"]}].filter(f=>n&&f.roles.includes(n.role));return p.jsxs("div",{className:"w-64 bg-gray-800 text-white h-screen p-4 flex flex-col fixed",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold mb-2 text-center",children:"نظام التسيير"}),n&&p.jsxs("p",{className:"text-center text-gray-400 text-sm mb-6 border-b border-gray-600 pb-4",children:["مرحبًا، ",n.username]})]}),p.jsx("nav",{className:"flex-grow",children:p.jsx("ul",{children:u.map(f=>p.jsx("li",{className:"mb-2",children:p.jsxs("button",{onClick:()=>e(f.id),className:`w-full flex items-center p-3 rounded-lg transition-colors duration-200 ${r===f.id?"bg-blue-600 text-white":"hover:bg-gray-700"}`,"aria-current":r===f.id?"page":void 0,children:[p.jsx(f.icon,{className:"w-6 h-6 ml-3"}),p.jsx("span",{children:f.label})]})},f.id))})}),p.jsx("div",{children:p.jsxs("button",{onClick:s,className:"w-full flex items-center p-3 rounded-lg transition-colors duration-200 hover:bg-red-700",children:[p.jsx(f1,{className:"w-6 h-6 ml-3"}),p.jsx("span",{children:"تسجيل الخروج"})]})})]})};var cn=(r=>(r.OPEN="قيد المعالجة",r.PARTIALLY_RECEIVED="تم الاستلام جزئياً",r.FULLY_RECEIVED="تم الاستلام كلياً",r.CANCELLED="ملغى",r))(cn||{}),Kc=(r=>(r.FULL="كامل",r.PARTIAL="جزئي",r.REJECTED="مرفوض",r))(Kc||{});const fv=({lots:r,products:e,suppliers:n,onSave:s,onCancel:l,existingOrder:u})=>{const[f,g]=ge.useState(""),[y,_]=ge.useState(""),[b,S]=ge.useState(new Date().toISOString().split("T")[0]),[I,k]=ge.useState([]),Z=!!u,te=ge.useMemo(()=>r.find(ee=>ee.id===y),[r,y]),X=ge.useMemo(()=>n.find(ee=>ee.id===(te==null?void 0:te.supplierId)),[n,te]),Q=ge.useMemo(()=>y?e.filter(ee=>ee.lotId===y):[],[e,y]);ge.useEffect(()=>{Z&&u&&(g(u.orderNumber),S(u.date),_(u.lotId),k(u.details))},[Z,u]),ge.useEffect(()=>{if(y&&!Z){const ee=Q.map(se=>({productId:se.id,quantity:0,price:se.price}));k(ee)}else y||k([])},[y,Q,Z]);const ue=(ee,se)=>{k(w=>w.map(x=>x.productId===ee?{...x,quantity:Math.max(0,se)}:x))},de=ge.useMemo(()=>I.reduce((ee,se)=>ee+se.price*se.quantity,0),[I]),be=()=>{if(!f.trim()){alert("الرجاء إدخال رقم سند الطلب.");return}if(!te||!X){alert("الرجاء اختيار حصة صالحة.");return}const ee={id:u==null?void 0:u.id,orderNumber:f.trim(),date:b,lotId:te.id,supplierId:X.id,totalAmount:de,details:I.filter(se=>se.quantity>0),status:(u==null?void 0:u.status)||cn.OPEN};s(ee)};return p.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg animate-fade-in-up",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:Z?"تعديل سند طلب":"إنشاء سند طلب جديد"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"orderNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم سند الطلب"}),p.jsx("input",{type:"text",id:"orderNumber",value:f,onChange:ee=>g(ee.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"lot",className:"block text-sm font-medium text-gray-700 mb-1",children:"اختر الحصة"}),p.jsxs("select",{id:"lot",value:y,onChange:ee=>_(ee.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[p.jsx("option",{value:"",children:"-- اختر حصة --"}),r.map(ee=>p.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"التاريخ"}),p.jsx("input",{type:"date",id:"date",value:b,onChange:ee=>S(ee.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm"})]})]}),X&&p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"معلومات الممون"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"الشركة:"})," ",X.company]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"العنوان:"})," ",X.address]})]}),y&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"تفاصيل المنتجات"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المنتج"}),p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الوحدة"}),p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"السعر الفردي"}),p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المطلوبة"}),p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المجموع الجزئي"})]})}),p.jsx("tbody",{children:I.map(ee=>{const se=e.find(w=>w.id===ee.productId);return se?p.jsxs("tr",{className:"hover:bg-gray-50",children:[p.jsx("td",{className:"py-2 px-4 border-b",children:se.name}),p.jsx("td",{className:"py-2 px-4 border-b",children:se.unit}),p.jsxs("td",{className:"py-2 px-4 border-b",children:[ee.price.toFixed(2)," د.ج"]}),p.jsx("td",{className:"py-2 px-4 border-b",children:p.jsx("input",{type:"number",value:ee.quantity,onChange:w=>ue(ee.productId,parseInt(w.target.value)||0),className:"w-24 p-1 border border-gray-300 rounded-md text-center",min:"0"})}),p.jsxs("td",{className:"py-2 px-4 border-b",children:[(ee.price*ee.quantity).toFixed(2)," د.ج"]})]},ee.productId):null})}),p.jsx("tfoot",{className:"bg-gray-100 font-bold",children:p.jsxs("tr",{children:[p.jsx("td",{colSpan:4,className:"py-3 px-4 text-left text-lg",children:"المجموع الكلي"}),p.jsxs("td",{className:"py-3 px-4 text-right text-lg",children:[de.toFixed(2)," د.ج"]})]})})]})}),p.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[p.jsx("button",{onClick:l,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),p.jsx("button",{onClick:be,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:Z?"تحديث السند":"حفظ سند الطلب"})]})]})]})},dv=({lots:r,openPurchaseOrders:e,products:n,suppliers:s,onSave:l,onCancel:u,existingNote:f})=>{const[g,y]=ge.useState(""),[_,b]=ge.useState(""),[S,I]=ge.useState(new Date().toISOString().split("T")[0]),[k,Z]=ge.useState([]),te=!!f;ge.useEffect(()=>{te&&f&&(y(f.noteNumber),b(f.purchaseOrderId),I(f.receptionDate),Z(f.details))},[te,f]);const X=ge.useMemo(()=>e.find(ee=>ee.id===_),[e,_]),Q=ge.useMemo(()=>s.find(ee=>ee.id===(X==null?void 0:X.supplierId)),[s,X]);ge.useEffect(()=>{if(X&&!te){const ee=X.details.map(se=>({productId:se.productId,quantityOrdered:se.quantity,quantityReceived:se.quantity}));Z(ee)}else _||Z([])},[X,te,_]);const ue=(ee,se)=>{var x;const w=((x=k.find(R=>R.productId===ee))==null?void 0:x.quantityOrdered)||0;Z(R=>R.map(V=>V.productId===ee?{...V,quantityReceived:Math.max(0,Math.min(se,w))}:V))},de=ge.useMemo(()=>X?k.reduce((ee,se)=>{const w=X.details.find(x=>x.productId===se.productId);return ee+((w==null?void 0:w.price)||0)*se.quantityReceived},0):0,[k,X]),be=()=>{if(!g.trim()){alert("الرجاء إدخال رقم سند الاستلام.");return}if(!X){alert("الرجاء اختيار سند طلب صالح.");return}const ee=k.reduce((R,V)=>R+V.quantityReceived,0);let se,w;ee===0?(se=Kc.REJECTED,w=X.status):X.details.every(V=>{const D=k.find(L=>L.productId===V.productId);return V.quantity===((D==null?void 0:D.quantityReceived)||0)})?(se=Kc.FULL,w=cn.FULLY_RECEIVED):(se=Kc.PARTIAL,w=cn.PARTIALLY_RECEIVED);const x={id:f==null?void 0:f.id,noteNumber:g.trim(),receptionDate:S,purchaseOrderId:X.id,totalAmount:de,status:se,details:k.filter(R=>R.quantityReceived>0)};l(x,w)};return p.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg animate-fade-in-up",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:te?"تعديل سند استلام":"إنشاء سند استلام جديد"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"noteNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم سند الاستلام"}),p.jsx("input",{type:"text",id:"noteNumber",value:g,onChange:ee=>y(ee.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"po",className:"block text-sm font-medium text-gray-700 mb-1",children:"اختر سند الطلب"}),p.jsxs("select",{id:"po",value:_,onChange:ee=>b(ee.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",disabled:te,children:[p.jsx("option",{value:"",children:"-- اختر سند طلب --"}),e.map(ee=>{const se=r.find(x=>x.id===ee.lotId),w=se?`${se.name} - ${ee.orderNumber} - ${ee.date}`:`${ee.orderNumber} - ${ee.date}`;return p.jsx("option",{value:ee.id,children:w},ee.id)})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الاستلام"}),p.jsx("input",{type:"date",id:"date",value:S,onChange:ee=>I(ee.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm"})]})]}),Q&&X&&p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"معلومات الممون وسند الطلب"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"الممون:"})," ",Q.company]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"رقم سند الطلب:"})," ",X.orderNumber]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"تاريخ سند الطلب:"})," ",X.date]})]}),_&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"تفاصيل الاستلام"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المنتج"}),p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الوحدة"}),p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المطلوبة"}),p.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المستلمة"})]})}),p.jsx("tbody",{children:k.map(ee=>{const se=n.find(w=>w.id===ee.productId);return se?p.jsxs("tr",{className:"hover:bg-gray-50",children:[p.jsx("td",{className:"py-2 px-4 border-b",children:se.name}),p.jsx("td",{className:"py-2 px-4 border-b",children:se.unit}),p.jsx("td",{className:"py-2 px-4 border-b",children:ee.quantityOrdered}),p.jsx("td",{className:"py-2 px-4 border-b",children:p.jsx("input",{type:"number",value:ee.quantityReceived,onChange:w=>ue(ee.productId,parseInt(w.target.value)||0),className:"w-24 p-1 border border-gray-300 rounded-md text-center",min:"0",max:ee.quantityOrdered})})]},ee.productId):null})})]})}),p.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[p.jsx("button",{onClick:u,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),p.jsx("button",{onClick:be,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition",children:te?"تحديث السند":"حفظ سند الاستلام"})]})]})]})},m1=()=>{};var mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},p1=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=r[n++];e[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=r[n++],f=r[n++],g=r[n++],y=((l&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},Y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const u=r[l],f=l+1<r.length,g=f?r[l+1]:0,y=l+2<r.length,_=y?r[l+2]:0,b=u>>2,S=(u&3)<<4|g>>4;let I=(g&15)<<2|_>>6,k=_&63;y||(k=64,f||(I=64)),s.push(n[b],n[S],n[I],n[k])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Q0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):p1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const u=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const _=l<r.length?n[r.charAt(l)]:64;++l;const S=l<r.length?n[r.charAt(l)]:64;if(++l,u==null||g==null||_==null||S==null)throw new g1;const I=u<<2|g>>4;if(s.push(I),_!==64){const k=g<<4&240|_>>2;if(s.push(k),S!==64){const Z=_<<6&192|S;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class g1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y1=function(r){const e=Q0(r);return Y0.encodeByteArray(e,!0)},lh=function(r){return y1(r).replace(/\./g,"")},K0=function(r){try{return Y0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=()=>_1().__FIREBASE_DEFAULTS__,E1=()=>{if(typeof process>"u"||typeof mv>"u")return;const r=mv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},T1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&K0(r[1]);return e&&JSON.parse(e)},xh=()=>{try{return m1()||v1()||E1()||T1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},X0=r=>{var e,n;return(n=(e=xh())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},b1=r=>{const e=X0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},$0=()=>{var r;return(r=xh())==null?void 0:r.config},Z0=r=>{var e;return(e=xh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function J0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[lh(JSON.stringify(n)),lh(JSON.stringify(f)),""].join(".")}const Ll={};function w1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ll))Ll[e]?r.emulator.push(e):r.prod.push(e);return r}function x1(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let pv=!1;function W0(r,e){if(typeof window>"u"||typeof document>"u"||!po(window.location.host)||Ll[r]===e||Ll[r]||pv)return;Ll[r]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=w1().prod.length>0;function f(){const I=document.getElementById(s);I&&I.remove()}function g(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function y(I,k){I.setAttribute("width","24"),I.setAttribute("id",k),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function _(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{pv=!0,f()},I}function b(I,k){I.setAttribute("id",k),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function S(){const I=x1(s),k=n("text"),Z=document.getElementById(k)||document.createElement("span"),te=n("learnmore"),X=document.getElementById(te)||document.createElement("a"),Q=n("preprendIcon"),ue=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const de=I.element;g(de),b(X,te);const be=_();y(ue,Q),de.append(ue,Z,X,be),document.body.appendChild(de)}u?(Z.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function I1(){var e;const r=(e=xh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function D1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O1(){const r=on();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function V1(){return!I1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M1(){try{return typeof indexedDB=="object"}catch{return!1}}function j1(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="FirebaseError";class gr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=L1,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wl.prototype.create)}}class Wl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?k1(u,s):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new gr(l,g,s)}}function k1(r,e){return r.replace(P1,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const P1=/\{\$([^}]+)}/g;function U1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Zs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const u=r[l],f=e[l];if(gv(u)&&gv(f)){if(!Zs(u,f))return!1}else if(u!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function gv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Cl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,u]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Dl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function z1(r,e){const n=new q1(r,e);return n.subscribe.bind(n)}class q1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");B1(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Wd),l.error===void 0&&(l.error=Wd),l.complete===void 0&&(l.complete=Wd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B1(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r){return r&&r._delegate?r._delegate:r}class Js{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new A1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G1(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&f.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:F1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F1(r){return r===Ys?void 0:r}function G1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new H1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const Y1={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},K1=Pe.INFO,X1={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},$1=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=X1[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hm{constructor(e){this.name=e,this._logLevel=K1,this._logHandler=$1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const Z1=(r,e)=>e.some(n=>r instanceof n);let yv,_v;function J1(){return yv||(yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W1(){return _v||(_v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,mm=new WeakMap,tE=new WeakMap,em=new WeakMap,Fm=new WeakMap;function eS(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(ns(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&eE.set(n,r)}).catch(()=>{}),Fm.set(e,r),e}function tS(r){if(mm.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});mm.set(r,e)}let pm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return mm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||tE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function nS(r){pm=r(pm)}function iS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(tm(this),e,...n);return tE.set(s,e.sort?e.sort():[e]),ns(s)}:W1().includes(r)?function(...e){return r.apply(tm(this),e),ns(eE.get(this))}:function(...e){return ns(r.apply(tm(this),e))}}function rS(r){return typeof r=="function"?iS(r):(r instanceof IDBTransaction&&tS(r),Z1(r,J1())?new Proxy(r,pm):r)}function ns(r){if(r instanceof IDBRequest)return eS(r);if(em.has(r))return em.get(r);const e=rS(r);return e!==r&&(em.set(r,e),Fm.set(e,r)),e}const tm=r=>Fm.get(r);function sS(r,e,{blocked:n,upgrade:s,blocking:l,terminated:u}={}){const f=indexedDB.open(r,e),g=ns(f);return s&&f.addEventListener("upgradeneeded",y=>{s(ns(f.result),y.oldVersion,y.newVersion,ns(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const aS=["get","getKey","getAll","getAllKeys","count"],oS=["put","add","delete","clear"],nm=new Map;function vv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(nm.get(e))return nm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=oS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||aS.includes(n)))return;const u=async function(f,...g){const y=this.transaction(f,l?"readwrite":"readonly");let _=y.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[n](...g),l&&y.done]))[0]};return nm.set(e,u),u}nS(r=>({...r,get:(e,n,s)=>vv(e,n)||r.get(e,n,s),has:(e,n)=>!!vv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function uS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gm="@firebase/app",Ev="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Hm("@firebase/app"),cS="@firebase/app-compat",hS="@firebase/analytics-compat",fS="@firebase/analytics",dS="@firebase/app-check-compat",mS="@firebase/app-check",pS="@firebase/auth",gS="@firebase/auth-compat",yS="@firebase/database",_S="@firebase/data-connect",vS="@firebase/database-compat",ES="@firebase/functions",TS="@firebase/functions-compat",bS="@firebase/installations",AS="@firebase/installations-compat",SS="@firebase/messaging",wS="@firebase/messaging-compat",xS="@firebase/performance",RS="@firebase/performance-compat",IS="@firebase/remote-config",NS="@firebase/remote-config-compat",CS="@firebase/storage",DS="@firebase/storage-compat",OS="@firebase/firestore",VS="@firebase/ai",MS="@firebase/firestore-compat",jS="firebase",LS="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="[DEFAULT]",kS={[gm]:"fire-core",[cS]:"fire-core-compat",[fS]:"fire-analytics",[hS]:"fire-analytics-compat",[mS]:"fire-app-check",[dS]:"fire-app-check-compat",[pS]:"fire-auth",[gS]:"fire-auth-compat",[yS]:"fire-rtdb",[_S]:"fire-data-connect",[vS]:"fire-rtdb-compat",[ES]:"fire-fn",[TS]:"fire-fn-compat",[bS]:"fire-iid",[AS]:"fire-iid-compat",[SS]:"fire-fcm",[wS]:"fire-fcm-compat",[xS]:"fire-perf",[RS]:"fire-perf-compat",[IS]:"fire-rc",[NS]:"fire-rc-compat",[CS]:"fire-gcs",[DS]:"fire-gcs-compat",[OS]:"fire-fst",[MS]:"fire-fst-compat",[VS]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new Map,PS=new Map,_m=new Map;function Tv(r,e){try{r.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ao(r){const e=r.name;if(_m.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;_m.set(e,r);for(const n of Bl.values())Tv(n,r);for(const n of PS.values())Tv(n,r);return!0}function Gm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function li(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new Wl("app","Firebase",US);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=LS;function nE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:ym,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw is.create("bad-app-name",{appName:String(l)});if(n||(n=$0()),!n)throw is.create("no-options");const u=Bl.get(l);if(u){if(Zs(n,u.options)&&Zs(s,u.config))return u;throw is.create("duplicate-app",{appName:l})}const f=new Q1(l);for(const y of _m.values())f.addComponent(y);const g=new zS(n,s,f);return Bl.set(l,g),g}function Qm(r=ym){const e=Bl.get(r);if(!e&&r===ym&&$0())return nE();if(!e)throw is.create("no-app",{appName:r});return e}function qS(){return Array.from(Bl.values())}function rs(r,e,n){let s=kS[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${s}" with version "${e}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(f.join(" "));return}ao(new Js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="firebase-heartbeat-database",HS=1,Hl="firebase-heartbeat-store";let im=null;function iE(){return im||(im=sS(BS,HS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(r=>{throw is.create("idb-open",{originalErrorMessage:r.message})})),im}async function FS(r){try{const n=(await iE()).transaction(Hl),s=await n.objectStore(Hl).get(rE(r));return await n.done,s}catch(e){if(e instanceof gr)fr.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function bv(r,e){try{const s=(await iE()).transaction(Hl,"readwrite");await s.objectStore(Hl).put(e,rE(r)),await s.done}catch(n){if(n instanceof gr)fr.warn(n.message);else{const s=is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(s.message)}}}function rE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=1024,QS=30;class YS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Av();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats.length>QS){const f=$S(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){fr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Av(),{heartbeatsToSend:s,unsentEntries:l}=KS(this._heartbeatsCache.heartbeats),u=lh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return fr.warn(n),""}}}function Av(){return new Date().toISOString().substring(0,10)}function KS(r,e=GS){const n=[];let s=r.slice();for(const l of r){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Sv(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Sv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class XS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M1()?j1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Sv(r){return lh(JSON.stringify({version:2,heartbeats:r})).length}function $S(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(r){ao(new Js("platform-logger",e=>new lS(e),"PRIVATE")),ao(new Js("heartbeat",e=>new YS(e),"PRIVATE")),rs(gm,Ev,r),rs(gm,Ev,"esm2020"),rs("fire-js","")}ZS("");var JS="firebase",WS="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(JS,WS,"app");function sE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ew=sE,aE=new Wl("auth","Firebase",sE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Hm("@firebase/auth");function tw(r,...e){uh.logLevel<=Pe.WARN&&uh.warn(`Auth (${go}): ${r}`,...e)}function Xc(r,...e){uh.logLevel<=Pe.ERROR&&uh.error(`Auth (${go}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(r,...e){throw Ym(r,...e)}function ji(r,...e){return Ym(r,...e)}function oE(r,e,n){const s={...ew(),[e]:n};return new Wl("auth","Firebase",s).create(e,{appName:r.name})}function ss(r){return oE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ym(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return aE.create(r,...e)}function Ae(r,e,...n){if(!r)throw Ym(e,...n)}function ur(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Xc(e),new Error(e)}function dr(r,e){r||ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function nw(){return wv()==="http:"||wv()==="https:"}function wv(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nw()||C1()||"connection"in navigator)?navigator.onLine:!0}function rw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=R1()||D1()}get(){return iw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(r,e){dr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ow=new tu(3e4,6e4);function na(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ms(r,e,n,s,l={}){return uE(r,l,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const g=eu({key:r.config.apiKey,...f}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:y,...u};return N1()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&po(r.emulatorConfig.host)&&(_.credentials="include"),lE.fetch()(await cE(r,r.config.apiHost,n,g),_)})}async function uE(r,e,n){r._canInitEmulator=!1;const s={...sw,...e};try{const l=new uw(r),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw qc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[y,_]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(r,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw qc(r,"email-already-in-use",f);if(y==="USER_DISABLED")throw qc(r,"user-disabled",f);const b=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw oE(r,b,_);ci(r,b)}}catch(l){if(l instanceof gr)throw l;ci(r,"network-request-failed",{message:String(l)})}}async function Rh(r,e,n,s,l={}){const u=await ms(r,e,n,s,l);return"mfaPendingCredential"in u&&ci(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function cE(r,e,n,s){const l=`${e}${n}?${s}`,u=r,f=u.config.emulator?Km(r.config,l):`${r.config.apiScheme}://${l}`;return aw.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function lw(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ji(this.auth,"network-request-failed")),ow.get())})}}function qc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=ji(r,e,s);return l.customData._tokenResponse=n,l}function xv(r){return r!==void 0&&r.enterprise!==void 0}class cw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lw(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hw(r,e){return ms(r,"GET","/v2/recaptchaConfig",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(r,e){return ms(r,"POST","/v1/accounts:delete",e)}async function ch(r,e){return ms(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dw(r,e=!1){const n=Lt(r),s=await n.getIdToken(e),l=Xm(s);Ae(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:l,token:s,authTime:kl(rm(l.auth_time)),issuedAtTime:kl(rm(l.iat)),expirationTime:kl(rm(l.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function rm(r){return Number(r)*1e3}function Xm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const l=K0(n);return l?JSON.parse(l):(Xc("Failed to decode base64 JWT payload"),null)}catch(l){return Xc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Rv(r){const e=Xm(r);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gr&&mw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function mw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kl(this.lastLoginAt),this.creationTime=kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(r){var S;const e=r.auth,n=await r.getIdToken(),s=await Fl(r,ch(e,{idToken:n}));Ae(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const u=(S=l.providerUserInfo)!=null&&S.length?hE(l.providerUserInfo):[],f=yw(r.providerData,u),g=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),_=g?y:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Em(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,b)}async function gw(r){const e=Lt(r);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yw(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function hE(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(r,e){const n=await uE(r,{},async()=>{const s=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=r.config,f=await cE(r,l,"/v1/token",`key=${u}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return r.emulatorConfig&&po(r.emulatorConfig.host)&&(y.credentials="include"),lE.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vw(r,e){return ms(r,"POST","/v2/accounts:revokeToken",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=Rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:u}=await _w(e,n);this.updateTokensAndExpiration(s,l,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:u}=n,f=new to;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(Ae(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(Ae(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(r,e){Ae(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ui{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new pw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Em(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Fl(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dw(this,e)}reload(){return gw(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Fl(this,fw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,y=n._redirectEventId??void 0,_=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:S,emailVerified:I,isAnonymous:k,providerData:Z,stsTokenManager:te}=n;Ae(S&&te,e,"internal-error");const X=to.fromJSON(this.name,te);Ae(typeof S=="string",e,"internal-error"),$r(s,e.name),$r(l,e.name),Ae(typeof I=="boolean",e,"internal-error"),Ae(typeof k=="boolean",e,"internal-error"),$r(u,e.name),$r(f,e.name),$r(g,e.name),$r(y,e.name),$r(_,e.name),$r(b,e.name);const Q=new ui({uid:S,auth:e,email:l,emailVerified:I,displayName:s,isAnonymous:k,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:X,createdAt:_,lastLoginAt:b});return Z&&Array.isArray(Z)&&(Q.providerData=Z.map(ue=>({...ue}))),y&&(Q._redirectEventId=y),Q}static async _fromIdTokenResponse(e,n,s=!1){const l=new to;l.updateFromServerResponse(n);const u=new ui({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await hh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Ae(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?hE(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(u!=null&&u.length),g=new to;g.updateFromIdToken(s);const y=new ui({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:f}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Em(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map;function cr(r){dr(r instanceof Function,"Expected a class definition");let e=Iv.get(r);return e?(dr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Iv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fE.type="NONE";const Nv=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(r,e,n){return`firebase:${r}:${e}:${n}`}class no{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:u}=this.auth;this.fullUserKey=$c(this.userKey,l.apiKey,u),this.fullPersistenceKey=$c("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ch(this.auth,{idToken:e}).catch(()=>{});return n?ui._fromGetAccountInfoResponse(this.auth,n,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new no(cr(Nv),e,s);const l=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=l[0]||cr(Nv);const f=$c(s,e.config.apiKey,e.name);let g=null;for(const _ of n)try{const b=await _._get(f);if(b){let S;if(typeof b=="string"){const I=await ch(e,{idToken:b}).catch(()=>{});if(!I)break;S=await ui._fromGetAccountInfoResponse(e,I,b)}else S=ui._fromJSON(e,b);_!==u&&(g=S),u=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new no(u,e,s):(u=y[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new no(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(vE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||pE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function dE(r=on()){return/firefox\//i.test(r)}function mE(r=on()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pE(r=on()){return/crios\//i.test(r)}function gE(r=on()){return/iemobile/i.test(r)}function yE(r=on()){return/android/i.test(r)}function _E(r=on()){return/blackberry/i.test(r)}function vE(r=on()){return/webos/i.test(r)}function $m(r=on()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Ew(r=on()){var e;return $m(r)&&!!((e=window.navigator)!=null&&e.standalone)}function Tw(){return O1()&&document.documentMode===10}function EE(r=on()){return $m(r)||yE(r)||vE(r)||_E(r)||/windows phone/i.test(r)||gE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r,e=[]){let n;switch(r){case"Browser":n=Cv(on());break;case"Worker":n=`${Cv(on())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${go}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,g)=>{try{const y=e(u);f(y)}catch(y){g(y)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(r,e={}){return ms(r,"GET","/v2/passwordPolicy",na(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=6;class ww{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Sw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dv(this),this.idTokenSubscription=new Dv(this),this.beforeStateQueue=new bw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{var s,l,u;if(!this._deleted&&(this.persistenceManager=await no.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ch(this,{idToken:e}),s=await ui._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(li(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=s==null?void 0:s._redirectEventId,y=await this.tryRedirectSignIn(e);(!f||f===g)&&(y!=null&&y.user)&&(s=y.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(f){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(ss(this));const n=e?Lt(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Aw(this),n=new ww(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await vw(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cr(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await no.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,s,l);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&tw(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yo(r){return Lt(r)}class Dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=z1(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rw(r){Ih=r}function bE(r){return Ih.loadJS(r)}function Iw(){return Ih.recaptchaEnterpriseScript}function Nw(){return Ih.gapiScript}function Cw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Dw{constructor(){this.enterprise=new Ow}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ow{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Vw="recaptcha-enterprise",AE="NO_RECAPTCHA";class Mw{constructor(e){this.type=Vw,this.auth=yo(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{hw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const _=new cw(y);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(y=>{g(y)})})}function l(u,f,g){const y=window.grecaptcha;xv(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(_=>{f(_)}).catch(()=>{f(AE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Dw().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(g=>{if(!n&&xv(window.grecaptcha))l(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=Iw();y.length!==0&&(y+=g),bE(y).then(()=>{l(g,u,f)}).catch(_=>{f(_)})}}).catch(g=>{f(g)})})}}async function Ov(r,e,n,s=!1,l=!1){const u=new Mw(r);let f;if(l)f=AE;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,_=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Vv(r,e,n,s,l){var u;if((u=r._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Ov(r,e,n,n==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await Ov(r,e,n,n==="getOobCode");return s(r,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(r,e){const n=Gm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Zs(u,e??{}))return l;ci(l,"already-initialized")}return n.initialize({options:e})}function Lw(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(cr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function kw(r,e,n){const s=yo(r);Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,u=SE(e),{host:f,port:g}=Pw(e),y=g===null?"":`:${g}`,_={url:`${u}//${f}${y}/`},b=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Ae(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ae(Zs(_,s.config.emulator)&&Zs(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,po(f)?(J0(`${u}//${f}${y}`),W0("Auth",!0)):Uw()}function SE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Pw(r){const e=SE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const u=l[1];return{host:u,port:Mv(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Mv(f)}}}function Mv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Uw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ur("not implemented")}_getIdTokenResponse(e){return ur("not implemented")}_linkToIdToken(e,n){return ur("not implemented")}_getReauthenticationResolver(e){return ur("not implemented")}}async function zw(r,e){return ms(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(r,e){return Rh(r,"POST","/v1/accounts:signInWithPassword",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(r,e){return Rh(r,"POST","/v1/accounts:signInWithEmailLink",na(r,e))}async function Hw(r,e){return Rh(r,"POST","/v1/accounts:signInWithEmailLink",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends Zm{constructor(e,n,s,l=null){super("password",s),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Gl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Gl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vv(e,n,"signInWithPassword",qw);case"emailLink":return Bw(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vv(e,s,"signUpPassword",zw);case"emailLink":return Hw(e,{idToken:n,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(r,e){return Rh(r,"POST","/v1/accounts:signInWithIdp",na(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="http://localhost";class Ws extends Zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ci("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...u}=n;if(!s||!l)return null;const f=new Ws(s,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,io(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:Fw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=eu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qw(r){const e=Cl(Dl(r)).link,n=e?Cl(Dl(e)).deep_link_id:null,s=Cl(Dl(r)).deep_link_id;return(s?Cl(Dl(s)).link:null)||s||n||e||r}class Jm{constructor(e){const n=Cl(Dl(e)),s=n.apiKey??null,l=n.oobCode??null,u=Gw(n.mode??null);Ae(s&&l&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Qw(e);try{return new Jm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.providerId=_o.PROVIDER_ID}static credential(e,n){return Gl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Jm.parseLink(n);return Ae(s,"argument-error"),Gl._fromEmailAndCode(e,s.code,s.tenantId)}}_o.PROVIDER_ID="password";_o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends wE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends nu{constructor(){super("facebook.com")}static credential(e){return Ws._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ws._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Jr.credential(n,s)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends nu{constructor(){super("github.com")}static credential(e){return Ws._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends nu{constructor(){super("twitter.com")}static credential(e,n){return Ws._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return es.credential(n,s)}catch{return null}}}es.TWITTER_SIGN_IN_METHOD="twitter.com";es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const u=await ui._fromIdTokenResponse(e,s,l),f=jv(s);return new oo({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=jv(s);return new oo({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function jv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends gr{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new fh(e,n,s,l)}}function xE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(r,u,e,s):u})}async function Yw(r,e,n=!1){const s=await Fl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return oo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(r,e,n=!1){const{auth:s}=r;if(li(s.app))return Promise.reject(ss(s));const l="reauthenticate";try{const u=await Fl(r,xE(s,l,e,r),n);Ae(u.idToken,s,"internal-error");const f=Xm(u.idToken);Ae(f,s,"internal-error");const{sub:g}=f;return Ae(r.uid===g,s,"user-mismatch"),oo._forOperation(r,l,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ci(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(r,e,n=!1){if(li(r.app))return Promise.reject(ss(r));const s="signIn",l=await xE(r,s,e),u=await oo._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(u.user),u}async function Xw(r,e){return RE(yo(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(r){const e=yo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Zw(r,e,n){return li(r.app)?Promise.reject(ss(r)):Xw(Lt(r),_o.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&$w(r),s})}function Jw(r,e,n,s){return Lt(r).onIdTokenChanged(e,n,s)}function Ww(r,e,n){return Lt(r).beforeAuthStateChanged(e,n)}function e2(r,e,n,s){return Lt(r).onAuthStateChanged(e,n,s)}function t2(r){return Lt(r).signOut()}const dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=1e3,i2=10;class NE extends IE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,y)=>{this.notifyListeners(f,y)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);Tw()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,i2):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},n2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NE.type="LOCAL";const r2=NE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends IE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CE.type="SESSION";const DE=CE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new Nh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(f).map(async _=>_(n.origin,u)),y=await s2(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((g,y)=>{const _=Wm("",20);l.port1.start();const b=setTimeout(()=>{y(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(S){const I=S;if(I.data.eventId===_)switch(I.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(I.data.response);break;default:clearTimeout(b),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function o2(r){Li().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function l2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u2(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function c2(){return OE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebaseLocalStorageDb",h2=1,mh="firebaseLocalStorage",ME="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(r,e){return r.transaction([mh],e?"readwrite":"readonly").objectStore(mh)}function f2(){const r=indexedDB.deleteDatabase(VE);return new iu(r).toPromise()}function Tm(){const r=indexedDB.open(VE,h2);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(mh,{keyPath:ME})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(mh)?e(s):(s.close(),await f2(),e(await Tm()))})})}async function Lv(r,e,n){const s=Ch(r,!0).put({[ME]:e,value:n});return new iu(s).toPromise()}async function d2(r,e){const n=Ch(r,!1).get(e),s=await new iu(n).toPromise();return s===void 0?null:s.value}function kv(r,e){const n=Ch(r,!0).delete(e);return new iu(n).toPromise()}const m2=800,p2=3;class jE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>p2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(c2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await l2(),!this.activeServiceWorker)return;this.sender=new a2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tm();return await Lv(e,dh,"1"),await kv(e,dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Lv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>d2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Ch(l,!1).getAll();return new iu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),m2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jE.type="LOCAL";const g2=jE;new tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(r,e){return e?cr(e):(Ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends Zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _2(r){return RE(r.auth,new ep(r),r.bypassAuthState)}function v2(r){const{auth:e,user:n}=r;return Ae(n,e,"internal-error"),Kw(n,new ep(r),r.bypassAuthState)}async function E2(r){const{auth:e,user:n}=r;return Ae(n,e,"internal-error"),Yw(n,new ep(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,s,l,u=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _2;case"linkViaPopup":case"linkViaRedirect":return E2;case"reauthViaPopup":case"reauthViaRedirect":return v2;default:ci(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new tu(2e3,1e4);class eo extends LE{constructor(e,n,s,l,u){super(e,n,l,u),this.provider=s,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=Wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T2.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="pendingRedirect",Zc=new Map;class A2 extends LE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const s=await S2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S2(r,e){const n=R2(e),s=x2(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function w2(r,e){Zc.set(r._key(),e)}function x2(r){return cr(r._redirectPersistence)}function R2(r){return $c(b2,r.config.apiKey,r.name)}async function I2(r,e,n=!1){if(li(r.app))return Promise.reject(ss(r));const s=yo(r),l=y2(s,e),f=await new A2(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=600*1e3;class C2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!kE(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(ji(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pv(e))}saveEventToCache(e){this.cachedEventUids.add(Pv(e)),this.lastProcessedEventTime=Date.now()}}function Pv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function kE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(r,e={}){return ms(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M2=/^https?/;async function j2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await O2(r);for(const n of e)try{if(L2(n))return}catch{}ci(r,"unauthorized-domain")}function L2(r){const e=vm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!M2.test(n))return!1;if(V2.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=new tu(3e4,6e4);function Uv(){const r=Li().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function P2(r){return new Promise((e,n)=>{var l,u,f;function s(){Uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uv(),n(ji(r,"network-request-failed"))},timeout:k2.get()})}if((u=(l=Li().gapi)==null?void 0:l.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Li().gapi)!=null&&f.load)s();else{const g=Cw("iframefcb");return Li()[g]=()=>{gapi.load?s():n(ji(r,"network-request-failed"))},bE(`${Nw()}?onload=${g}`).catch(y=>n(y))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function U2(r){return Jc=Jc||P2(r),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new tu(5e3,15e3),q2="__/auth/iframe",B2="emulator/auth/iframe",H2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G2(r){const e=r.config;Ae(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Km(e,B2):`https://${r.config.authDomain}/${q2}`,s={apiKey:e.apiKey,appName:r.name,v:go},l=F2.get(r.config.apiHost);l&&(s.eid=l);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${eu(s).slice(1)}`}async function Q2(r){const e=await U2(r),n=Li().gapi;return Ae(n,r,"internal-error"),e.open({where:document.body,url:G2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H2,dontclear:!0},s=>new Promise(async(l,u)=>{await s.restyle({setHideOnLeave:!1});const f=ji(r,"network-request-failed"),g=Li().setTimeout(()=>{u(f)},z2.get());function y(){Li().clearTimeout(g),l(s)}s.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K2=500,X2=600,$2="_blank",Z2="http://localhost";class zv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J2(r,e,n,s=K2,l=X2){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y={...Y2,width:s.toString(),height:l.toString(),top:u,left:f},_=on().toLowerCase();n&&(g=pE(_)?$2:n),dE(_)&&(e=e||Z2,y.scrollbars="yes");const b=Object.entries(y).reduce((I,[k,Z])=>`${I}${k}=${Z},`,"");if(Ew(_)&&g!=="_self")return W2(e||"",g),new zv(null);const S=window.open(e||"",g,b);Ae(S,r,"popup-blocked");try{S.focus()}catch{}return new zv(S)}function W2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="__/auth/handler",tx="emulator/auth/handler",nx=encodeURIComponent("fac");async function qv(r,e,n,s,l,u){Ae(r.config.authDomain,r,"auth-domain-config-required"),Ae(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:go,eventId:l};if(e instanceof wE){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",U1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,S]of Object.entries({}))f[b]=S}if(e instanceof nu){const b=e.getScopes().filter(S=>S!=="");b.length>0&&(f.scopes=b.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const y=await r._getAppCheckToken(),_=y?`#${nx}=${encodeURIComponent(y)}`:"";return`${ix(r)}?${eu(g).slice(1)}${_}`}function ix({config:r}){return r.emulator?Km(r,tx):`https://${r.authDomain}/${ex}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="webStorageSupport";class rx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DE,this._completeRedirectFn=I2,this._overrideRedirectResult=w2}async _openPopup(e,n,s,l){var f;dr((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await qv(e,n,s,vm(),l);return J2(e,u,Wm())}async _openRedirect(e,n,s,l){await this._originValidation(e);const u=await qv(e,n,s,vm(),l);return o2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(dr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Q2(e),s=new C2(e);return n.register("authEvent",l=>(Ae(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sm,{type:sm},l=>{var f;const u=(f=l==null?void 0:l[0])==null?void 0:f[sm];u!==void 0&&n(!!u),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=j2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EE()||mE()||$m()}}const sx=rx;var Bv="@firebase/auth",Hv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lx(r){ao(new Js("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;Ae(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(r)},_=new xw(s,l,u,y);return Lw(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ao(new Js("auth-internal",e=>{const n=yo(e.getProvider("auth").getImmediate());return(s=>new ax(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(Bv,Hv,ox(r)),rs(Bv,Hv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=300,cx=Z0("authIdTokenMaxAge")||ux;let Fv=null;const hx=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>cx)return;const l=n==null?void 0:n.token;Fv!==l&&(Fv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function fx(r=Qm()){const e=Gm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=jw(r,{popupRedirectResolver:sx,persistence:[g2,r2,DE]}),s=Z0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=hx(u.toString());Ww(n,f,()=>f(n.currentUser)),Jw(n,g=>f(g))}}const l=X0("auth");return l&&kw(n,`http://${l}`),n}function dx(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Rw({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const u=ji("internal-error");u.customData=l,n(u)},s.type="text/javascript",s.charset="UTF-8",dx().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lx("Browser");var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,PE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,x){function R(){}R.prototype=x.prototype,w.F=x.prototype,w.prototype=new R,w.prototype.constructor=w,w.D=function(V,D,L){for(var N=Array(arguments.length-2),it=2;it<arguments.length;it++)N[it-2]=arguments[it];return x.prototype[D].apply(V,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(w,x,R){R||(R=0);const V=Array(16);if(typeof x=="string")for(var D=0;D<16;++D)V[D]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(D=0;D<16;++D)V[D]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=w.g[0],R=w.g[1],D=w.g[2];let L=w.g[3],N;N=x+(L^R&(D^L))+V[0]+3614090360&4294967295,x=R+(N<<7&4294967295|N>>>25),N=L+(D^x&(R^D))+V[1]+3905402710&4294967295,L=x+(N<<12&4294967295|N>>>20),N=D+(R^L&(x^R))+V[2]+606105819&4294967295,D=L+(N<<17&4294967295|N>>>15),N=R+(x^D&(L^x))+V[3]+3250441966&4294967295,R=D+(N<<22&4294967295|N>>>10),N=x+(L^R&(D^L))+V[4]+4118548399&4294967295,x=R+(N<<7&4294967295|N>>>25),N=L+(D^x&(R^D))+V[5]+1200080426&4294967295,L=x+(N<<12&4294967295|N>>>20),N=D+(R^L&(x^R))+V[6]+2821735955&4294967295,D=L+(N<<17&4294967295|N>>>15),N=R+(x^D&(L^x))+V[7]+4249261313&4294967295,R=D+(N<<22&4294967295|N>>>10),N=x+(L^R&(D^L))+V[8]+1770035416&4294967295,x=R+(N<<7&4294967295|N>>>25),N=L+(D^x&(R^D))+V[9]+2336552879&4294967295,L=x+(N<<12&4294967295|N>>>20),N=D+(R^L&(x^R))+V[10]+4294925233&4294967295,D=L+(N<<17&4294967295|N>>>15),N=R+(x^D&(L^x))+V[11]+2304563134&4294967295,R=D+(N<<22&4294967295|N>>>10),N=x+(L^R&(D^L))+V[12]+1804603682&4294967295,x=R+(N<<7&4294967295|N>>>25),N=L+(D^x&(R^D))+V[13]+4254626195&4294967295,L=x+(N<<12&4294967295|N>>>20),N=D+(R^L&(x^R))+V[14]+2792965006&4294967295,D=L+(N<<17&4294967295|N>>>15),N=R+(x^D&(L^x))+V[15]+1236535329&4294967295,R=D+(N<<22&4294967295|N>>>10),N=x+(D^L&(R^D))+V[1]+4129170786&4294967295,x=R+(N<<5&4294967295|N>>>27),N=L+(R^D&(x^R))+V[6]+3225465664&4294967295,L=x+(N<<9&4294967295|N>>>23),N=D+(x^R&(L^x))+V[11]+643717713&4294967295,D=L+(N<<14&4294967295|N>>>18),N=R+(L^x&(D^L))+V[0]+3921069994&4294967295,R=D+(N<<20&4294967295|N>>>12),N=x+(D^L&(R^D))+V[5]+3593408605&4294967295,x=R+(N<<5&4294967295|N>>>27),N=L+(R^D&(x^R))+V[10]+38016083&4294967295,L=x+(N<<9&4294967295|N>>>23),N=D+(x^R&(L^x))+V[15]+3634488961&4294967295,D=L+(N<<14&4294967295|N>>>18),N=R+(L^x&(D^L))+V[4]+3889429448&4294967295,R=D+(N<<20&4294967295|N>>>12),N=x+(D^L&(R^D))+V[9]+568446438&4294967295,x=R+(N<<5&4294967295|N>>>27),N=L+(R^D&(x^R))+V[14]+3275163606&4294967295,L=x+(N<<9&4294967295|N>>>23),N=D+(x^R&(L^x))+V[3]+4107603335&4294967295,D=L+(N<<14&4294967295|N>>>18),N=R+(L^x&(D^L))+V[8]+1163531501&4294967295,R=D+(N<<20&4294967295|N>>>12),N=x+(D^L&(R^D))+V[13]+2850285829&4294967295,x=R+(N<<5&4294967295|N>>>27),N=L+(R^D&(x^R))+V[2]+4243563512&4294967295,L=x+(N<<9&4294967295|N>>>23),N=D+(x^R&(L^x))+V[7]+1735328473&4294967295,D=L+(N<<14&4294967295|N>>>18),N=R+(L^x&(D^L))+V[12]+2368359562&4294967295,R=D+(N<<20&4294967295|N>>>12),N=x+(R^D^L)+V[5]+4294588738&4294967295,x=R+(N<<4&4294967295|N>>>28),N=L+(x^R^D)+V[8]+2272392833&4294967295,L=x+(N<<11&4294967295|N>>>21),N=D+(L^x^R)+V[11]+1839030562&4294967295,D=L+(N<<16&4294967295|N>>>16),N=R+(D^L^x)+V[14]+4259657740&4294967295,R=D+(N<<23&4294967295|N>>>9),N=x+(R^D^L)+V[1]+2763975236&4294967295,x=R+(N<<4&4294967295|N>>>28),N=L+(x^R^D)+V[4]+1272893353&4294967295,L=x+(N<<11&4294967295|N>>>21),N=D+(L^x^R)+V[7]+4139469664&4294967295,D=L+(N<<16&4294967295|N>>>16),N=R+(D^L^x)+V[10]+3200236656&4294967295,R=D+(N<<23&4294967295|N>>>9),N=x+(R^D^L)+V[13]+681279174&4294967295,x=R+(N<<4&4294967295|N>>>28),N=L+(x^R^D)+V[0]+3936430074&4294967295,L=x+(N<<11&4294967295|N>>>21),N=D+(L^x^R)+V[3]+3572445317&4294967295,D=L+(N<<16&4294967295|N>>>16),N=R+(D^L^x)+V[6]+76029189&4294967295,R=D+(N<<23&4294967295|N>>>9),N=x+(R^D^L)+V[9]+3654602809&4294967295,x=R+(N<<4&4294967295|N>>>28),N=L+(x^R^D)+V[12]+3873151461&4294967295,L=x+(N<<11&4294967295|N>>>21),N=D+(L^x^R)+V[15]+530742520&4294967295,D=L+(N<<16&4294967295|N>>>16),N=R+(D^L^x)+V[2]+3299628645&4294967295,R=D+(N<<23&4294967295|N>>>9),N=x+(D^(R|~L))+V[0]+4096336452&4294967295,x=R+(N<<6&4294967295|N>>>26),N=L+(R^(x|~D))+V[7]+1126891415&4294967295,L=x+(N<<10&4294967295|N>>>22),N=D+(x^(L|~R))+V[14]+2878612391&4294967295,D=L+(N<<15&4294967295|N>>>17),N=R+(L^(D|~x))+V[5]+4237533241&4294967295,R=D+(N<<21&4294967295|N>>>11),N=x+(D^(R|~L))+V[12]+1700485571&4294967295,x=R+(N<<6&4294967295|N>>>26),N=L+(R^(x|~D))+V[3]+2399980690&4294967295,L=x+(N<<10&4294967295|N>>>22),N=D+(x^(L|~R))+V[10]+4293915773&4294967295,D=L+(N<<15&4294967295|N>>>17),N=R+(L^(D|~x))+V[1]+2240044497&4294967295,R=D+(N<<21&4294967295|N>>>11),N=x+(D^(R|~L))+V[8]+1873313359&4294967295,x=R+(N<<6&4294967295|N>>>26),N=L+(R^(x|~D))+V[15]+4264355552&4294967295,L=x+(N<<10&4294967295|N>>>22),N=D+(x^(L|~R))+V[6]+2734768916&4294967295,D=L+(N<<15&4294967295|N>>>17),N=R+(L^(D|~x))+V[13]+1309151649&4294967295,R=D+(N<<21&4294967295|N>>>11),N=x+(D^(R|~L))+V[4]+4149444226&4294967295,x=R+(N<<6&4294967295|N>>>26),N=L+(R^(x|~D))+V[11]+3174756917&4294967295,L=x+(N<<10&4294967295|N>>>22),N=D+(x^(L|~R))+V[2]+718787259&4294967295,D=L+(N<<15&4294967295|N>>>17),N=R+(L^(D|~x))+V[9]+3951481745&4294967295,w.g[0]=w.g[0]+x&4294967295,w.g[1]=w.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+L&4294967295}s.prototype.v=function(w,x){x===void 0&&(x=w.length);const R=x-this.blockSize,V=this.C;let D=this.h,L=0;for(;L<x;){if(D==0)for(;L<=R;)l(this,w,L),L+=this.blockSize;if(typeof w=="string"){for(;L<x;)if(V[D++]=w.charCodeAt(L++),D==this.blockSize){l(this,V),D=0;break}}else for(;L<x;)if(V[D++]=w[L++],D==this.blockSize){l(this,V),D=0;break}}this.h=D,this.o+=x},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var x=1;x<w.length-8;++x)w[x]=0;x=this.o*8;for(var R=w.length-8;R<w.length;++R)w[R]=x&255,x/=256;for(this.v(w),w=Array(16),x=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)w[x++]=this.g[R]>>>V&255;return w};function u(w,x){var R=g;return Object.prototype.hasOwnProperty.call(R,w)?R[w]:R[w]=x(w)}function f(w,x){this.h=x;const R=[];let V=!0;for(let D=w.length-1;D>=0;D--){const L=w[D]|0;V&&L==x||(R[D]=L,V=!1)}this.g=R}var g={};function y(w){return-128<=w&&w<128?u(w,function(x){return new f([x|0],x<0?-1:0)}):new f([w|0],w<0?-1:0)}function _(w){if(isNaN(w)||!isFinite(w))return S;if(w<0)return X(_(-w));const x=[];let R=1;for(let V=0;w>=R;V++)x[V]=w/R|0,R*=4294967296;return new f(x,0)}function b(w,x){if(w.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(w.charAt(0)=="-")return X(b(w.substring(1),x));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=_(Math.pow(x,8));let V=S;for(let L=0;L<w.length;L+=8){var D=Math.min(8,w.length-L);const N=parseInt(w.substring(L,L+D),x);D<8?(D=_(Math.pow(x,D)),V=V.j(D).add(_(N))):(V=V.j(R),V=V.add(_(N)))}return V}var S=y(0),I=y(1),k=y(16777216);r=f.prototype,r.m=function(){if(te(this))return-X(this).m();let w=0,x=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);w+=(V>=0?V:4294967296+V)*x,x*=4294967296}return w},r.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(Z(this))return"0";if(te(this))return"-"+X(this).toString(w);const x=_(Math.pow(w,6));var R=this;let V="";for(;;){const D=be(R,x).g;R=Q(R,D.j(x));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(w);if(R=D,Z(R))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},r.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function Z(w){if(w.h!=0)return!1;for(let x=0;x<w.g.length;x++)if(w.g[x]!=0)return!1;return!0}function te(w){return w.h==-1}r.l=function(w){return w=Q(this,w),te(w)?-1:Z(w)?0:1};function X(w){const x=w.g.length,R=[];for(let V=0;V<x;V++)R[V]=~w.g[V];return new f(R,~w.h).add(I)}r.abs=function(){return te(this)?X(this):this},r.add=function(w){const x=Math.max(this.g.length,w.g.length),R=[];let V=0;for(let D=0;D<=x;D++){let L=V+(this.i(D)&65535)+(w.i(D)&65535),N=(L>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);V=N>>>16,L&=65535,N&=65535,R[D]=N<<16|L}return new f(R,R[R.length-1]&-2147483648?-1:0)};function Q(w,x){return w.add(X(x))}r.j=function(w){if(Z(this)||Z(w))return S;if(te(this))return te(w)?X(this).j(X(w)):X(X(this).j(w));if(te(w))return X(this.j(X(w)));if(this.l(k)<0&&w.l(k)<0)return _(this.m()*w.m());const x=this.g.length+w.g.length,R=[];for(var V=0;V<2*x;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<w.g.length;D++){const L=this.i(V)>>>16,N=this.i(V)&65535,it=w.i(D)>>>16,dt=w.i(D)&65535;R[2*V+2*D]+=N*dt,ue(R,2*V+2*D),R[2*V+2*D+1]+=L*dt,ue(R,2*V+2*D+1),R[2*V+2*D+1]+=N*it,ue(R,2*V+2*D+1),R[2*V+2*D+2]+=L*it,ue(R,2*V+2*D+2)}for(w=0;w<x;w++)R[w]=R[2*w+1]<<16|R[2*w];for(w=x;w<2*x;w++)R[w]=0;return new f(R,0)};function ue(w,x){for(;(w[x]&65535)!=w[x];)w[x+1]+=w[x]>>>16,w[x]&=65535,x++}function de(w,x){this.g=w,this.h=x}function be(w,x){if(Z(x))throw Error("division by zero");if(Z(w))return new de(S,S);if(te(w))return x=be(X(w),x),new de(X(x.g),X(x.h));if(te(x))return x=be(w,X(x)),new de(X(x.g),x.h);if(w.g.length>30){if(te(w)||te(x))throw Error("slowDivide_ only works with positive integers.");for(var R=I,V=x;V.l(w)<=0;)R=ee(R),V=ee(V);var D=se(R,1),L=se(V,1);for(V=se(V,2),R=se(R,2);!Z(V);){var N=L.add(V);N.l(w)<=0&&(D=D.add(R),L=N),V=se(V,1),R=se(R,1)}return x=Q(w,D.j(x)),new de(D,x)}for(D=S;w.l(x)>=0;){for(R=Math.max(1,Math.floor(w.m()/x.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=_(R),N=L.j(x);te(N)||N.l(w)>0;)R-=V,L=_(R),N=L.j(x);Z(L)&&(L=I),D=D.add(L),w=Q(w,N)}return new de(D,w)}r.B=function(w){return be(this,w).h},r.and=function(w){const x=Math.max(this.g.length,w.g.length),R=[];for(let V=0;V<x;V++)R[V]=this.i(V)&w.i(V);return new f(R,this.h&w.h)},r.or=function(w){const x=Math.max(this.g.length,w.g.length),R=[];for(let V=0;V<x;V++)R[V]=this.i(V)|w.i(V);return new f(R,this.h|w.h)},r.xor=function(w){const x=Math.max(this.g.length,w.g.length),R=[];for(let V=0;V<x;V++)R[V]=this.i(V)^w.i(V);return new f(R,this.h^w.h)};function ee(w){const x=w.g.length+1,R=[];for(let V=0;V<x;V++)R[V]=w.i(V)<<1|w.i(V-1)>>>31;return new f(R,w.h)}function se(w,x){const R=x>>5;x%=32;const V=w.g.length-R,D=[];for(let L=0;L<V;L++)D[L]=x>0?w.i(L+R)>>>x|w.i(L+R+1)<<32-x:w.i(L+R);return new f(D,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,PE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=b,as=f}).apply(typeof Gv<"u"?Gv:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UE,Ol,zE,Wc,bm,qE,BE,HE;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var m=0;m<c.length;++m){var E=c[m];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function l(c,m){if(m)e:{var E=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var P=c[A];if(!(P in E))break e;E=E[P]}c=c[c.length-1],A=E[c],m=m(A),m!=A&&m!=null&&e(E,c,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(m){var E=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&E.push([A,m[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function y(c,m,E){return c.call.apply(c.bind,arguments)}function _(c,m,E){return _=y,_.apply(null,arguments)}function b(c,m){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function S(c,m){function E(){}E.prototype=m.prototype,c.Z=m.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(A,P,B){for(var re=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)re[Ce-2]=arguments[Ce];return m.prototype[P].apply(A,re)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function k(c){const m=c.length;if(m>0){const E=Array(m);for(let A=0;A<m;A++)E[A]=c[A];return E}return[]}function Z(c,m){for(let A=1;A<arguments.length;A++){const P=arguments[A];var E=typeof P;if(E=E!="object"?E:P?Array.isArray(P)?"array":E:"null",E=="array"||E=="object"&&typeof P.length=="number"){E=c.length||0;const B=P.length||0;c.length=E+B;for(let re=0;re<B;re++)c[E+re]=P[re]}else c.push(P)}}class te{constructor(m,E){this.i=m,this.j=E,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function X(c){f.setTimeout(()=>{throw c},0)}function Q(){var c=w;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ue{constructor(){this.h=this.g=null}add(m,E){const A=de.get();A.set(m,E),this.h?this.h.next=A:this.g=A,this.h=A}}var de=new te(()=>new be,c=>c.reset());class be{constructor(){this.next=this.g=this.h=null}set(m,E){this.h=m,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,se=!1,w=new ue,x=()=>{const c=Promise.resolve(void 0);ee=()=>{c.then(R)}};function R(){for(var c;c=Q();){try{c.h.call(c.g)}catch(E){X(E)}var m=de;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}se=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};f.addEventListener("test",E,m),f.removeEventListener("test",E,m)}catch{}return c})();function N(c){return/^[\s\xa0]*$/.test(c)}function it(c,m){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}S(it,D),it.prototype.init=function(c,m){const E=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(E=="mouseover"?m=c.fromElement:E=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),F=0;function oe(c,m,E,A,P){this.listener=c,this.proxy=null,this.src=m,this.type=E,this.capture=!!A,this.ha=P,this.key=++F,this.da=this.fa=!1}function ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qe(c,m,E){for(const A in c)m.call(E,c[A],A,c)}function Qe(c,m){for(const E in c)m.call(void 0,c[E],E,c)}function M(c){const m={};for(const E in c)m[E]=c[E];return m}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(c,m){let E,A;for(let P=1;P<arguments.length;P++){A=arguments[P];for(E in A)c[E]=A[E];for(let B=0;B<$.length;B++)E=$[B],Object.prototype.hasOwnProperty.call(A,E)&&(c[E]=A[E])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,m,E,A,P){const B=c.toString();c=this.g[B],c||(c=this.g[B]=[],this.h++);const re=ne(c,m,A,P);return re>-1?(m=c[re],E||(m.fa=!1)):(m=new oe(m,this.src,B,!!A,P),m.fa=E,c.push(m)),m};function ie(c,m){const E=m.type;if(E in c.g){var A=c.g[E],P=Array.prototype.indexOf.call(A,m,void 0),B;(B=P>=0)&&Array.prototype.splice.call(A,P,1),B&&(ye(m),c.g[E].length==0&&(delete c.g[E],c.h--))}}function ne(c,m,E,A){for(let P=0;P<c.length;++P){const B=c[P];if(!B.da&&B.listener==m&&B.capture==!!E&&B.ha==A)return P}return-1}var he="closure_lm_"+(Math.random()*1e6|0),xe={};function Ee(c,m,E,A,P){if(Array.isArray(m)){for(let B=0;B<m.length;B++)Ee(c,m[B],E,A,P);return null}return E=Xn(E),c&&c[dt]?c.J(m,E,g(A)?!!A.capture:!1,P):Ne(c,m,E,!1,A,P)}function Ne(c,m,E,A,P,B){if(!m)throw Error("Invalid event type");const re=g(P)?!!P.capture:!!P;let Ce=tn(c);if(Ce||(c[he]=Ce=new ce(c)),E=Ce.add(m,E,A,re,B),E.proxy)return E;if(A=St(),E.proxy=A,A.src=c,A.listener=E,c.addEventListener)L||(P=re),P===void 0&&(P=!1),c.addEventListener(m.toString(),A,P);else if(c.attachEvent)c.attachEvent(je(m.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function St(){function c(E){return m.call(c.src,c.listener,E)}const m=zt;return c}function fn(c,m,E,A,P){if(Array.isArray(m))for(var B=0;B<m.length;B++)fn(c,m[B],E,A,P);else A=g(A)?!!A.capture:!!A,E=Xn(E),c&&c[dt]?(c=c.i,B=String(m).toString(),B in c.g&&(m=c.g[B],E=ne(m,E,A,P),E>-1&&(ye(m[E]),Array.prototype.splice.call(m,E,1),m.length==0&&(delete c.g[B],c.h--)))):c&&(c=tn(c))&&(m=c.g[m.toString()],c=-1,m&&(c=ne(m,E,A,P)),(E=c>-1?m[c]:null)&&kt(E))}function kt(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[dt])ie(m.i,c);else{var E=c.type,A=c.proxy;m.removeEventListener?m.removeEventListener(E,A,c.capture):m.detachEvent?m.detachEvent(je(E),A):m.addListener&&m.removeListener&&m.removeListener(A),(E=tn(m))?(ie(E,c),E.h==0&&(E.src=null,m[he]=null)):ye(c)}}}function je(c){return c in xe?xe[c]:xe[c]="on"+c}function zt(c,m){if(c.da)c=!0;else{m=new it(m,this);const E=c.listener,A=c.ha||c.src;c.fa&&kt(c),c=E.call(A,m)}return c}function tn(c){return c=c[he],c instanceof ce?c:null}var bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xn(c){return typeof c=="function"?c:(c[bn]||(c[bn]=function(m){return c.handleEvent(m)}),c[bn])}function ht(){V.call(this),this.i=new ce(this),this.M=this,this.G=null}S(ht,V),ht.prototype[dt]=!0,ht.prototype.removeEventListener=function(c,m,E,A){fn(this,c,m,E,A)};function gt(c,m){var E,A=c.G;if(A)for(E=[];A;A=A.G)E.push(A);if(c=c.M,A=m.type||m,typeof m=="string")m=new D(m,c);else if(m instanceof D)m.target=m.target||c;else{var P=m;m=new D(A,c),ae(m,P)}P=!0;let B,re;if(E)for(re=E.length-1;re>=0;re--)B=m.g=E[re],P=Bi(B,A,!0,m)&&P;if(B=m.g=c,P=Bi(B,A,!0,m)&&P,P=Bi(B,A,!1,m)&&P,E)for(re=0;re<E.length;re++)B=m.g=E[re],P=Bi(B,A,!1,m)&&P}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const E=c.g[m];for(let A=0;A<E.length;A++)ye(E[A]);delete c.g[m],c.h--}}this.G=null},ht.prototype.J=function(c,m,E,A){return this.i.add(String(c),m,!1,E,A)},ht.prototype.K=function(c,m,E,A){return this.i.add(String(c),m,!0,E,A)};function Bi(c,m,E,A){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let P=!0;for(let B=0;B<m.length;++B){const re=m[B];if(re&&!re.da&&re.capture==E){const Ce=re.listener,_t=re.ha||re.src;re.fa&&ie(c.i,re),P=Ce.call(_t,A)!==!1&&P}}return P&&!A.defaultPrevented}function aa(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function Hi(c){c.g=aa(()=>{c.g=null,c.i&&(c.i=!1,Hi(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Gt extends V{constructor(m,E){super(),this.m=m,this.l=E,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Hi(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(c){V.call(this),this.h=c,this.g={}}S(fi,V);var yr=[];function So(c){qe(c.g,function(m,E){this.g.hasOwnProperty(E)&&kt(m)},c),c.g={}}fi.prototype.N=function(){fi.Z.N.call(this),So(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=f.JSON.stringify,Xh=f.JSON.parse,du=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function mu(){}function pu(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){D.call(this,"d")}S(Qt,D);function Mn(){D.call(this,"c")}S(Mn,D);var yt={},gu=null;function oa(){return gu=gu||new ht}yt.Ia="serverreachability";function yu(c){D.call(this,yt.Ia,c)}S(yu,D);function di(c){const m=oa();gt(m,new yu(m))}yt.STAT_EVENT="statevent";function _s(c,m){D.call(this,yt.STAT_EVENT,c),this.stat=m}S(_s,D);function wt(c){const m=oa();gt(m,new _s(m,c))}yt.Ja="timingevent";function mi(c,m){D.call(this,yt.Ja,c),this.size=m}S(mi,D);function pi(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function Zn(){this.g=!0}Zn.prototype.ua=function(){this.g=!1};function $h(c,m,E,A,P,B){c.info(function(){if(c.g)if(B){var re="",Ce=B.split("&");for(let Ye=0;Ye<Ce.length;Ye++){var _t=Ce[Ye].split("=");if(_t.length>1){const ut=_t[0];_t=_t[1];const Pn=ut.split("_");re=Pn.length>=2&&Pn[1]=="type"?re+(ut+"="+_t+"&"):re+(ut+"=redacted&")}}}else re=null;else re=B;return"XMLHTTP REQ ("+A+") [attempt "+P+"]: "+m+`
`+E+`
`+re})}function _u(c,m,E,A,P,B,re){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+P+"]: "+m+`
`+E+`
`+B+" "+re})}function gi(c,m,E,A){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Zh(c,E)+(A?" "+A:"")})}function vs(c,m){c.info(function(){return"TIMEOUT: "+m})}Zn.prototype.info=function(){};function Zh(c,m){if(!c.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(c=0;c<B.length;c++)if(Array.isArray(B[c])){var E=B[c];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var P=A[0];if(P!="noop"&&P!="stop"&&P!="close")for(let re=1;re<A.length;re++)A[re]=""}}}}return _r(B)}catch{return m}}var Es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xo;function Ts(){}S(Ts,mu),Ts.prototype.g=function(){return new XMLHttpRequest},xo=new Ts;function Fi(c){return encodeURIComponent(String(c))}function vu(c){var m=1;c=c.split(":");const E=[];for(;m>0&&c.length;)E.push(c.shift()),m--;return c.length&&E.push(c.join(":")),E}function Jn(c,m,E,A){this.j=c,this.i=m,this.l=E,this.S=A||1,this.V=new fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wn}function Wn(){this.i=null,this.g="",this.h=!1}var xt={},qt={};function yi(c,m,E){c.M=1,c.A=bs(It(m)),c.u=E,c.R=!0,la(c,null)}function la(c,m){c.F=Date.now(),_i(c),c.B=It(c.A);var E=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),fa(E.i,"t",A),c.C=0,E=c.j.L,c.h=new Wn,c.g=Mu(c.j,E?m:null,!c.u),c.P>0&&(c.O=new Gt(_(c.Y,c,c.g),c.P)),m=c.V,E=c.g,A=c.ba;var P="readystatechange";Array.isArray(P)||(P&&(yr[0]=P.toString()),P=yr);for(let B=0;B<P.length;B++){const re=Ee(E,P[B],A||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),di(),$h(c.i,c.v,c.B,c.l,c.S,c.u)}Jn.prototype.ba=function(c){c=c.target;const m=this.O;m&&ni(c)==3?m.j():this.Y(c)},Jn.prototype.Y=function(c){try{if(c==this.g)e:{const Ce=ni(this.g),_t=this.g.ya(),Ye=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Ce!=4||_t==7||(_t==8||Ye<=0?di(3):di(2)),vi(this);var m=this.g.ca();this.X=m;var E=Jh(this);if(this.o=m==200,_u(this.i,this.v,this.B,this.l,this.S,Ce,m),this.o){if(this.U&&!this.L){t:{if(this.g){var A,P=this.g;if((A=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var B=A;break t}}B=null}if(c=B)gi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ei(this,c);else{this.o=!1,this.m=3,wt(12),An(this),jn(this);break e}}if(this.R){c=!0;let ut;for(;!this.K&&this.C<E.length;)if(ut=Tu(this,E),ut==qt){Ce==4&&(this.m=4,wt(14),c=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==xt){this.m=4,wt(15),gi(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else gi(this.i,this.l,ut,null),Ei(this,ut);if(Eu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,wt(16),c=!1),this.o=this.o&&c,!c)gi(this.i,this.l,E,"[Invalid Chunked Response]"),An(this),jn(this);else if(E.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),qo(re),re.P=!0,wt(11))}}else gi(this.i,this.l,E,null),Ei(this,E);Ce==4&&An(this),this.o&&!this.K&&(Ce==4?Cu(this.j,this):(this.o=!1,_i(this)))}else Qi(this.g),m==400&&E.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),An(this),jn(this)}}}catch{}finally{}};function Jh(c){if(!Eu(c))return c.g.la();const m=Yt(c.g);if(m==="")return"";let E="";const A=m.length,P=ni(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return An(c),jn(c),"";c.h.i=new f.TextDecoder}for(let B=0;B<A;B++)c.h.h=!0,E+=c.h.i.decode(m[B],{stream:!(P&&B==A-1)});return m.length=0,c.h.g+=E,c.C=0,c.h.g}function Eu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Tu(c,m){var E=c.C,A=m.indexOf(`
`,E);return A==-1?qt:(E=Number(m.substring(E,A)),isNaN(E)?xt:(A+=1,A+E>m.length?qt:(m=m.slice(A,A+E),c.C=A+E,m)))}Jn.prototype.cancel=function(){this.K=!0,An(this)};function _i(c){c.T=Date.now()+c.H,ua(c,c.H)}function ua(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=pi(_(c.aa,c),m)}function vi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Jn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(vs(this.i,this.B),this.M!=2&&(di(),wt(17)),An(this),this.m=2,jn(this)):ua(this,this.T-c)};function jn(c){c.j.I==0||c.K||Cu(c.j,c)}function An(c){vi(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,So(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function Ei(c,m){try{var E=c.j;if(E.I!=0&&(E.g==c||bi(E.h,c))){if(!c.L&&bi(E.h,c)&&E.I==3){try{var A=E.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var P=A;if(P[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)ya(E),xr(E);else break e;Ns(E),wt(18)}}else E.xa=P[1],0<E.xa-E.K&&P[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=pi(_(E.Va,E),6e3));Ti(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ii(E,11)}else if((c.L||E.g==c)&&ya(E),!N(m))for(P=E.Ba.g.parse(m),m=0;m<P.length;m++){let Ye=P[m];const ut=Ye[0];if(!(ut<=E.K))if(E.K=ut,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const Pn=Ye[3];Pn!=null&&(E.ka=Pn,E.j.info("VER="+E.ka));const Ni=Ye[4];Ni!=null&&(E.za=Ni,E.j.info("SVER="+E.za));const ii=Ye[5];ii!=null&&typeof ii=="number"&&ii>0&&(A=1.5*ii,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const ri=c.g;if(ri){const Cs=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var B=A.h;B.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(No(B,B.h),B.h=null))}if(A.G){const _a=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;_a&&(A.wa=_a,$e(A.J,A.G,_a))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var re=c;if(A.na=Vu(A,A.L?A.ba:null,A.W),re.L){Co(A.h,re);var Ce=re,_t=A.O;_t&&(Ce.H=_t),Ce.D&&(vi(Ce),_i(Ce)),A.g=re}else Iu(A);E.i.length>0&&Ri(E)}else Ye[0]!="stop"&&Ye[0]!="close"||Ii(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Ii(E,7):Uo(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}di(4)}catch{}}var Rt=class{constructor(c,m){this.g=c,this.map=m}};function Ro(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Io(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ti(c){return c.h?1:c.g?c.g.size:0}function bi(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function No(c,m){c.g?c.g.add(m):c.h=m}function Co(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Ro.prototype.cancel=function(){if(this.i=Do(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Do(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const E of c.g.values())m=m.concat(E.G);return m}return k(c.i)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(c,m){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const A=c[E].indexOf("=");let P,B=null;A>=0?(P=c[E].substring(0,A),B=c[E].substring(A+1)):P=c[E],m(P,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Sn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof Sn?(this.l=c.l,Bt(this,c.j),this.o=c.o,this.g=c.g,vr(this,c.u),this.h=c.h,Oo(this,xu(c.i)),this.m=c.m):c&&(m=String(c).match(bu))?(this.l=!1,Bt(this,m[1]||"",!0),this.o=Ai(m[2]||""),this.g=Ai(m[3]||"",!0),vr(this,m[4]),this.h=Ai(m[5]||"",!0),Oo(this,m[6]||"",!0),this.m=Ai(m[7]||"")):(this.l=!1,this.i=new Tr(null,this.l))}Sn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(As(m,ha,!0),":");var E=this.g;return(E||m=="file")&&(c.push("//"),(m=this.o)&&c.push(As(m,ha,!0),"@"),c.push(Fi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(As(E,E.charAt(0)=="/"?Vo:Au,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",As(E,Su)),c.join("")},Sn.prototype.resolve=function(c){const m=It(this);let E=!!c.j;E?Bt(m,c.j):E=!!c.o,E?m.o=c.o:E=!!c.g,E?m.g=c.g:E=c.u!=null;var A=c.h;if(E)vr(m,c.u);else if(E=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var P=m.h.lastIndexOf("/");P!=-1&&(A=m.h.slice(0,P+1)+A)}if(P=A,P==".."||P==".")A="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){A=P.lastIndexOf("/",0)==0,P=P.split("/");const B=[];for(let re=0;re<P.length;){const Ce=P[re++];Ce=="."?A&&re==P.length&&B.push(""):Ce==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&re==P.length&&B.push("")):(B.push(Ce),A=!0)}A=B.join("/")}else A=P}return E?m.h=A:E=c.i.toString()!=="",E?Oo(m,xu(c.i)):E=!!c.m,E&&(m.m=c.m),m};function It(c){return new Sn(c)}function Bt(c,m,E){c.j=E?Ai(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function vr(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Oo(c,m,E){m instanceof Tr?(c.i=m,da(c.i,c.l)):(E||(m=As(m,Er)),c.i=new Tr(m,c.l))}function $e(c,m,E){c.i.set(m,E)}function bs(c){return $e(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ai(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function As(c,m,E){return typeof c=="string"?(c=encodeURI(c).replace(m,dn),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function dn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ha=/[#\/\?@]/g,Au=/[#\?:]/g,Vo=/[#\?]/g,Er=/[#\?@]/g,Su=/#/g;function Tr(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function mn(c){c.g||(c.g=new Map,c.h=0,c.i&&ca(c.i,function(m,E){c.add(decodeURIComponent(m.replace(/\+/g," ")),E)}))}r=Tr.prototype,r.add=function(c,m){mn(this),this.i=null,c=br(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(m),this.h+=1,this};function wu(c,m){mn(c),m=br(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Mo(c,m){return mn(c),m=br(c,m),c.g.has(m)}r.forEach=function(c,m){mn(this),this.g.forEach(function(E,A){E.forEach(function(P){c.call(m,P,A,this)},this)},this)};function jo(c,m){mn(c);let E=[];if(typeof m=="string")Mo(c,m)&&(E=E.concat(c.g.get(br(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)E=E.concat(c[m]);return E}r.set=function(c,m){return mn(this),this.i=null,c=br(this,c),Mo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},r.get=function(c,m){return c?(c=jo(this,c),c.length>0?String(c[0]):m):m};function fa(c,m,E){wu(c,m),E.length>0&&(c.i=null,c.g.set(br(c,m),k(E)),c.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var E=m[A];const P=Fi(E);E=jo(this,E);for(let B=0;B<E.length;B++){let re=P;E[B]!==""&&(re+="="+Fi(E[B])),c.push(re)}}return this.i=c.join("&")};function xu(c){const m=new Tr;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function br(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function da(c,m){m&&!c.j&&(mn(c),c.i=null,c.g.forEach(function(E,A){const P=A.toLowerCase();A!=P&&(wu(this,A),fa(this,P,E))},c)),c.j=m}function ei(c,m){const E=new Zn;if(f.Image){const A=new Image;A.onload=b(Ln,E,"TestLoadImage: loaded",!0,m,A),A.onerror=b(Ln,E,"TestLoadImage: error",!1,m,A),A.onabort=b(Ln,E,"TestLoadImage: abort",!1,m,A),A.ontimeout=b(Ln,E,"TestLoadImage: timeout",!1,m,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else m(!1)}function Lo(c,m){const E=new Zn,A=new AbortController,P=setTimeout(()=>{A.abort(),Ln(E,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:A.signal}).then(B=>{clearTimeout(P),B.ok?Ln(E,"TestPingServer: ok",!0,m):Ln(E,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),Ln(E,"TestPingServer: error",!1,m)})}function Ln(c,m,E,A,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),A(E)}catch{}}function Ar(){this.g=new du}function Si(c){this.i=c.Sb||null,this.h=c.ab||!1}S(Si,mu),Si.prototype.g=function(){return new Ss(this.i,this.h)};function Ss(c,m){ht.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Ss,ht),r=Ss.prototype,r.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,ti(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ma(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ma(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Sr(this):ti(this),this.readyState==3&&ma(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Sr(this))},r.Na=function(c){this.g&&(this.response=c,Sr(this))},r.ga=function(){this.g&&Sr(this)};function Sr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ti(c)}r.setRequestHeader=function(c,m){this.A.append(c,m)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var E=m.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=m.next();return c.join(`\r
`)};function ti(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function kn(c){let m="";return qe(c,function(E,A){m+=A,m+=":",m+=E,m+=`\r
`}),m}function ws(c,m,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=kn(E),typeof c=="string"?E!=null&&Fi(E):$e(c,m,E))}function We(c){ht.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(We,ht);var wi=/^https?$/i,ko=["POST","PUT"];r=We.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,m,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xo.g(),this.g.onreadystatechange=I(_(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(B){xs(this,B);return}if(c=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var P in A)E.set(P,A[P]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())E.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(B=>B.toLowerCase()=="content-type"),P=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(ko,m,void 0)>=0)||A||P||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,re]of E)this.g.setRequestHeader(B,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(B){xs(this,B)}};function xs(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Po(c),Gi(c)}function Po(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,gt(this,"complete"),gt(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),We.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Rs(this):this.Xa())},r.Xa=function(){Rs(this)};function Rs(c){if(c.h&&typeof u<"u"){if(c.v&&ni(c)==4)setTimeout(c.Ca.bind(c),0);else if(gt(c,"readystatechange"),ni(c)==4){c.h=!1;try{const B=c.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var E;if(!(E=m)){var A;if(A=B===0){let re=String(c.D).match(bu)[1]||null;!re&&f.self&&f.self.location&&(re=f.self.location.protocol.slice(0,-1)),A=!wi.test(re?re.toLowerCase():"")}E=A}if(E)gt(c,"complete"),gt(c,"success");else{c.o=6;try{var P=ni(c)>2?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.ca()+"]",Po(c)}}finally{Gi(c)}}}}function Gi(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,m||gt(c,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ni(c){return c.g?c.g.readyState:0}r.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Xh(m)}};function Yt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(c){const m={};c=(c.g&&ni(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(N(c[A]))continue;var E=vu(c[A]);const P=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const B=m[P]||[];m[P]=B,B.push(E)}Qe(m,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(c,m,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||m}function wr(c){this.za=0,this.i=[],this.j=new Zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,c),this.Za=xi("retryDelaySeedMs",1e4,c),this.Ta=xi("forwardChannelMaxRetries",2,c),this.va=xi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ro(c&&c.concurrentRequestLimit),this.Ba=new Ar,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=wr.prototype,r.ka=8,r.I=1,r.connect=function(c,m,E,A){wt(0),this.W=c,this.H=m||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Vu(this,null,this.W),Ri(this)};function Uo(c){if(pa(c),c.I==3){var m=c.V++,E=It(c.J);if($e(E,"SID",c.M),$e(E,"RID",m),$e(E,"TYPE","terminate"),Is(c,E),m=new Jn(c,c.j,m),m.M=2,m.A=bs(It(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=m.A,E=!0),E||(m.g=Mu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),_i(m)}Ou(c)}function xr(c){c.g&&(qo(c),c.g.cancel(),c.g=null)}function pa(c){xr(c),c.v&&(f.clearTimeout(c.v),c.v=null),ya(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Ri(c){if(!Io(c.h)&&!c.m){c.m=!0;var m=c.Ea;ee||x(),se||(ee(),se=!0),w.add(m,c),c.D=0}}function ga(c,m){return Ti(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=pi(_(c.Ea,c,m),Du(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const P=new Jn(this,this.j,c);let B=this.o;if(this.U&&(B?(B=M(B),ae(B,this.U)):B=this.U),this.u!==null||this.R||(P.J=B,B=null),this.S)e:{for(var m=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=E;break e}if(m===4096||E===this.i.length-1){m=E+1;break e}}m=1e3}else m=1e3;m=Ru(this,P,m),E=It(this.J),$e(E,"RID",c),$e(E,"CVER",22),this.G&&$e(E,"X-HTTP-Session-Id",this.G),Is(this,E),B&&(this.R?m="headers="+Fi(kn(B))+"&"+m:this.u&&ws(E,this.u,B)),No(this.h,P),this.Ra&&$e(E,"TYPE","init"),this.S?($e(E,"$req",m),$e(E,"SID","null"),P.U=!0,yi(P,E,null)):yi(P,E,m),this.I=2}}else this.I==3&&(c?zo(this,c):this.i.length==0||Io(this.h)||zo(this))};function zo(c,m){var E;m?E=m.l:E=c.V++;const A=It(c.J);$e(A,"SID",c.M),$e(A,"RID",E),$e(A,"AID",c.K),Is(c,A),c.u&&c.o&&ws(A,c.u,c.o),E=new Jn(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Ru(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),No(c.h,E),yi(E,A,m)}function Is(c,m){c.H&&qe(c.H,function(E,A){$e(m,A,E)}),c.l&&qe({},function(E,A){$e(m,A,E)})}function Ru(c,m,E){E=Math.min(c.i.length,E);const A=c.l?_(c.l.Ka,c.l,c):null;e:{var P=c.i;let Ce=-1;for(;;){const _t=["count="+E];Ce==-1?E>0?(Ce=P[0].g,_t.push("ofs="+Ce)):Ce=0:_t.push("ofs="+Ce);let Ye=!0;for(let ut=0;ut<E;ut++){var B=P[ut].g;const Pn=P[ut].map;if(B-=Ce,B<0)Ce=Math.max(0,P[ut].g-100),Ye=!1;else try{B="req"+B+"_"||"";try{var re=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Ni,ii]of re){let ri=ii;g(ii)&&(ri=_r(ii)),_t.push(B+Ni+"="+encodeURIComponent(ri))}}catch(Ni){throw _t.push(B+"type="+encodeURIComponent("_badmap")),Ni}}catch{A&&A(Pn)}}if(Ye){re=_t.join("&");break e}}re=void 0}return c=c.i.splice(0,E),m.G=c,re}function Iu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;ee||x(),se||(ee(),se=!0),w.add(m,c),c.A=0}}function Ns(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=pi(_(c.Da,c),Du(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=pi(_(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),xr(this),Nu(this))};function qo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Nu(c){c.g=new Jn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=It(c.na);$e(m,"RID","rpc"),$e(m,"SID",c.M),$e(m,"AID",c.K),$e(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&$e(m,"TO",c.ia),$e(m,"TYPE","xmlhttp"),Is(c,m),c.u&&c.o&&ws(m,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=bs(It(m)),E.u=null,E.R=!0,la(E,c)}r.Va=function(){this.C!=null&&(this.C=null,xr(this),Ns(this),wt(19))};function ya(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Cu(c,m){var E=null;if(c.g==m){ya(c),qo(c),c.g=null;var A=2}else if(bi(c.h,m))E=m.G,Co(c.h,m),A=1;else return;if(c.I!=0){if(m.o)if(A==1){E=m.u?m.u.length:0,m=Date.now()-m.F;var P=c.D;A=oa(),gt(A,new mi(A,E)),Ri(c)}else Iu(c);else if(P=m.m,P==3||P==0&&m.X>0||!(A==1&&ga(c,m)||A==2&&Ns(c)))switch(E&&E.length>0&&(m=c.h,m.i=m.i.concat(E)),P){case 1:Ii(c,5);break;case 4:Ii(c,10);break;case 3:Ii(c,6);break;default:Ii(c,2)}}}function Du(c,m){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*m}function Ii(c,m){if(c.j.info("Error code "+m),m==2){var E=_(c.bb,c),A=c.Ua;const P=!A;A=new Sn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Bt(A,"https"),bs(A),P?ei(A.toString(),E):Lo(A.toString(),E)}else wt(2);c.I=0,c.l&&c.l.pa(m),Ou(c),pa(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Ou(c){if(c.I=0,c.ja=[],c.l){const m=Do(c.h);(m.length!=0||c.i.length!=0)&&(Z(c.ja,m),Z(c.ja,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.oa()}}function Vu(c,m,E){var A=E instanceof Sn?It(E):new Sn(E);if(A.g!="")m&&(A.g=m+"."+A.g),vr(A,A.u);else{var P=f.location;A=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;const B=new Sn(null);A&&Bt(B,A),m&&(B.g=m),P&&vr(B,P),E&&(B.h=E),A=B}return E=c.G,m=c.wa,E&&m&&$e(A,E,m),$e(A,"VER",c.ka),Is(c,A),A}function Mu(c,m,E){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new We(new Si({ab:E})):new We(c.ma),m.Fa(c.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}r=ju.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Rr(){}Rr.prototype.g=function(c,m){return new ln(c,m)};function ln(c,m){ht.call(this),this.g=new wr(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!N(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!N(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Yi(this)}S(ln,ht),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Uo(this.g)},ln.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=_r(c),c=E);m.i.push(new Rt(m.Ya++,c)),m.I==3&&Ri(m)},ln.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,ln.Z.N.call(this)};function Lu(c){Qt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const E in m){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}S(Lu,Qt);function ku(){Mn.call(this),this.status=1}S(ku,Mn);function Yi(c){this.g=c}S(Yi,ju),Yi.prototype.ra=function(){gt(this.g,"a")},Yi.prototype.qa=function(c){gt(this.g,new Lu(c))},Yi.prototype.pa=function(c){gt(this.g,new ku)},Yi.prototype.oa=function(){gt(this.g,"b")},Rr.prototype.createWebChannel=Rr.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,HE=function(){return new Rr},BE=function(){return oa()},qE=yt,bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,Wc=Es,wo.COMPLETE="complete",zE=wo,pu.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",ht.prototype.listen=ht.prototype.J,Ol=pu,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,UE=We}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const Qv="@firebase/firestore",Yv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Hm("@firebase/firestore");function Ka(){return ea.logLevel}function fe(r,...e){if(ea.logLevel<=Pe.DEBUG){const n=e.map(tp);ea.debug(`Firestore (${vo}): ${r}`,...n)}}function mr(r,...e){if(ea.logLevel<=Pe.ERROR){const n=e.map(tp);ea.error(`Firestore (${vo}): ${r}`,...n)}}function lo(r,...e){if(ea.logLevel<=Pe.WARN){const n=e.map(tp);ea.warn(`Firestore (${vo}): ${r}`,...n)}}function tp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,FE(r,s,n)}function FE(r,e,n){let s=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw mr(s),new Error(s)}function Xe(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||FE(e,l,s)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(sn.UNAUTHENTICATED)))}shutdown(){}}class px{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class gx{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let s=this.i;const l=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},g=y=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new GE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class yx{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _x{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new yx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const s=u=>{u.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,fe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const l=u=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Kv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Kv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=Ex(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<n&&(s+=e.charAt(l[u]%62))}return s}}function Ue(r,e){return r<e?-1:r>e?1:0}function Am(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),u=e.charAt(s);if(l!==u)return am(l)===am(u)?Ue(l,u):am(l)?1:-1}return Ue(r.length,e.length)}const Tx=55296,bx=57343;function am(r){const e=r.charCodeAt(0);return e>=Tx&&e<=bx}function uo(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="__name__";class Mi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Se(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const u=Mi.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const s=Mi.isNumericId(e),l=Mi.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Mi.extractNumericId(e).compare(Mi.extractNumericId(n)):Am(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class st extends Mi{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const Ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Mi{construct(e,n,s){return new Wt(e,n,s)}static isValidIdentifier(e){return Ax.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xv}static keyField(){return new Wt([Xv])}static fromServerFormat(e){const n=[];let s="",l=0;const u=()=>{if(s.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(s+=g,l++):(u(),l++)}if(u(),f)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(st.fromString(e))}static fromName(e){return new ve(st.fromString(e).popFirst(5))}static empty(){return new ve(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(r,e,n){if(!n)throw new le(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Sx(r,e,n,s){if(e===!0&&s===!0)throw new le(K.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function $v(r){if(!ve.isDocumentKey(r))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Zv(r){if(ve.isDocumentKey(r))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function YE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Dh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function Kn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dh(r);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r,e){const n={typeString:r};return e&&(n.value=e),n}function ru(r,e){if(!YE(r))throw new le(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new le(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=-62135596800,Wv=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Wv);return new lt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Jv)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wv}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ru(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:jt("string",lt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new lt(0,0))}static max(){return new we(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=-1;function wx(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=we.fromTimestamp(s===1e9?new lt(n+1,0):new lt(n,s));return new ls(l,ve.empty(),e)}function xx(r){return new ls(r.readTime,r.key,Ql)}class ls{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ls(we.min(),ve.empty(),Ql)}static max(){return new ls(we.max(),ve.empty(),Ql)}}function Rx(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:Ue(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==Ix)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,s)=>{n(e)}))}static reject(e){return new W(((n,s)=>{s(e)}))}static waitFor(e){return new W(((n,s)=>{let l=0,u=0,f=!1;e.forEach((g=>{++l,g.next((()=>{++u,f&&u===l&&n()}),(y=>s(y)))})),f=!0,u===l&&n()}))}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next((l=>l?W.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,u)=>{s.push(n.call(this,l,u))})),this.waitFor(s)}static mapArray(e,n){return new W(((s,l)=>{const u=e.length,f=new Array(u);let g=0;for(let y=0;y<u;y++){const _=y;n(e[_]).next((b=>{f[_]=b,++g,g===u&&s(f)}),(b=>l(b)))}}))}static doWhile(e,n){return new W(((s,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):s()};u()}))}}function Cx(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function To(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=-1;function Vh(r){return r==null}function ph(r){return r===0&&1/r==-1/0}function Dx(r){return typeof r=="number"&&Number.isInteger(r)&&!ph(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="";function Ox(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=e0(e)),e=Vx(r.get(n),e);return e0(e)}function Vx(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const u=r.charAt(l);switch(u){case"\0":n+="";break;case KE:n+="";break;default:n+=u}}return n}function e0(r){return r+KE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ps(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function XE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,s,l,u){this.key=e,this.value=n,this.color=s??Jt.RED,this.left=l??Jt.EMPTY,this.right=u??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,u){return new Jt(e??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const u=s(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,s),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Jt.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,s,l,u){return this}insert(e,n,s){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new n0(this.data.getIterator())}getIteratorFrom(e){return new n0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class n0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new Ut(Wt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $E("Invalid base64 string: "+u):u}})(e);return new en(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const Mx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(r){if(Xe(!!r,39018),typeof r=="string"){let e=0;const n=Mx.exec(r);if(Xe(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(r.seconds),nanos:bt(r.nanos)}}function bt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function cs(r){return typeof r=="string"?en.fromBase64String(r):en.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="server_timestamp",JE="__type__",WE="__previous_value__",eT="__local_write_time__";function rp(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[JE])==null?void 0:s.stringValue)===ZE}function Mh(r){const e=r.mapValue.fields[WE];return rp(e)?Mh(e):e}function Yl(r){const e=us(r.mapValue.fields[eT].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n,s,l,u,f,g,y,_,b){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=b}}const gh="(default)";class Kl{constructor(e,n){this.projectId=e,this.database=n||gh}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===gh}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="__type__",Lx="__max__",Fc={mapValue:{}},nT="__vector__",yh="value";function hs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?rp(r)?4:Px(r)?9007199254740991:kx(r)?10:11:Se(28295,{value:r})}function qi(r,e){if(r===e)return!0;const n=hs(r);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Yl(r).isEqual(Yl(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=us(l.timestampValue),g=us(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,u){return cs(l.bytesValue).isEqual(cs(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,u){return bt(l.geoPointValue.latitude)===bt(u.geoPointValue.latitude)&&bt(l.geoPointValue.longitude)===bt(u.geoPointValue.longitude)})(r,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return bt(l.integerValue)===bt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=bt(l.doubleValue),g=bt(u.doubleValue);return f===g?ph(f)===ph(g):isNaN(f)&&isNaN(g)}return!1})(r,e);case 9:return uo(r.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},g=u.mapValue.fields||{};if(t0(f)!==t0(g))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(g[y]===void 0||!qi(f[y],g[y])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function Xl(r,e){return(r.values||[]).find((n=>qi(n,e)))!==void 0}function co(r,e){if(r===e)return 0;const n=hs(r),s=hs(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=bt(u.integerValue||u.doubleValue),y=bt(f.integerValue||f.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(r,e);case 3:return i0(r.timestampValue,e.timestampValue);case 4:return i0(Yl(r),Yl(e));case 5:return Am(r.stringValue,e.stringValue);case 6:return(function(u,f){const g=cs(u),y=cs(f);return g.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),y=f.split("/");for(let _=0;_<g.length&&_<y.length;_++){const b=Ue(g[_],y[_]);if(b!==0)return b}return Ue(g.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=Ue(bt(u.latitude),bt(f.latitude));return g!==0?g:Ue(bt(u.longitude),bt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return r0(r.arrayValue,e.arrayValue);case 10:return(function(u,f){var I,k,Z,te;const g=u.fields||{},y=f.fields||{},_=(I=g[yh])==null?void 0:I.arrayValue,b=(k=y[yh])==null?void 0:k.arrayValue,S=Ue(((Z=_==null?void 0:_.values)==null?void 0:Z.length)||0,((te=b==null?void 0:b.values)==null?void 0:te.length)||0);return S!==0?S:r0(_,b)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Fc.mapValue&&f===Fc.mapValue)return 0;if(u===Fc.mapValue)return 1;if(f===Fc.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),_=f.fields||{},b=Object.keys(_);y.sort(),b.sort();for(let S=0;S<y.length&&S<b.length;++S){const I=Am(y[S],b[S]);if(I!==0)return I;const k=co(g[y[S]],_[b[S]]);if(k!==0)return k}return Ue(y.length,b.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function i0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ue(r,e);const n=us(r),s=us(e),l=Ue(n.seconds,s.seconds);return l!==0?l:Ue(n.nanos,s.nanos)}function r0(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const u=co(n[l],s[l]);if(u)return u}return Ue(n.length,s.length)}function ho(r){return Sm(r)}function Sm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=us(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return cs(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ve.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const u of n.values||[])l?l=!1:s+=",",s+=Sm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of s)u?u=!1:l+=",",l+=`${f}:${Sm(n.fields[f])}`;return l+"}"})(r.mapValue):Se(61005,{value:r})}function eh(r){switch(hs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(r);return e?16+eh(e):16;case 5:return 2*r.stringValue.length;case 6:return cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,u)=>l+eh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return ps(s.fields,((u,f)=>{l+=u.length+eh(f)})),l})(r.mapValue);default:throw Se(13486,{value:r})}}function s0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function wm(r){return!!r&&"integerValue"in r}function sp(r){return!!r&&"arrayValue"in r}function a0(r){return!!r&&"nullValue"in r}function o0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function th(r){return!!r&&"mapValue"in r}function kx(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[tT])==null?void 0:s.stringValue)===nT}function Pl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ps(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Pl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pl(r.arrayValue.values[n]);return e}return{...r}}function Px(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Lx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pl(n)}setAll(e){let n=Wt.emptyPath(),s={},l=[];e.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,s,l),s={},l=[],n=g.popLast()}f?s[g.lastSegment()]=Pl(f):l.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,l)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];th(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){ps(n,((l,u)=>e[l]=u));for(const l of s)delete e[l]}clone(){return new Tn(Pl(this.value))}}function iT(r){const e=[];return ps(r.fields,((n,s)=>{const l=new Wt([n]);if(th(s)){const u=iT(s.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,s,l,u,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new an(e,0,we.min(),we.min(),we.min(),Tn.empty(),0)}static newFoundDocument(e,n,s,l){return new an(e,1,n,we.min(),s,l,0)}static newNoDocument(e,n){return new an(e,2,n,we.min(),we.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,we.min(),we.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.position=e,this.inclusive=n}}function l0(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const u=e[l],f=r.position[l];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(f.referenceValue),n.key):s=co(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function u0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!qi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ux(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{}class Mt extends rT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new qx(e,n,s):n==="array-contains"?new Fx(e,s):n==="in"?new Gx(e,s):n==="not-in"?new Qx(e,s):n==="array-contains-any"?new Yx(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Bx(e,s):new Hx(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends rT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hi(e,n)}matches(e){return sT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sT(r){return r.op==="and"}function aT(r){return zx(r)&&sT(r)}function zx(r){for(const e of r.filters)if(e instanceof hi)return!1;return!0}function xm(r){if(r instanceof Mt)return r.field.canonicalString()+r.op.toString()+ho(r.value);if(aT(r))return r.filters.map((e=>xm(e))).join(",");{const e=r.filters.map((n=>xm(n))).join(",");return`${r.op}(${e})`}}function oT(r,e){return r instanceof Mt?(function(s,l){return l instanceof Mt&&s.op===l.op&&s.field.isEqual(l.field)&&qi(s.value,l.value)})(r,e):r instanceof hi?(function(s,l){return l instanceof hi&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((u,f,g)=>u&&oT(f,l.filters[g])),!0):!1})(r,e):void Se(19439)}function lT(r){return r instanceof Mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`})(r):r instanceof hi?(function(n){return n.op.toString()+" {"+n.getFilters().map(lT).join(" ,")+"}"})(r):"Filter"}class qx extends Mt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class Bx extends Mt{constructor(e,n){super(e,"in",n),this.keys=uT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Hx extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=uT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function uT(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class Fx extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sp(n)&&Xl(n.arrayValue,this.value)}}class Gx extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xl(this.value.arrayValue,n)}}class Qx extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xl(this.value.arrayValue,n)}}class Yx extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Xl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n=null,s=[],l=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function c0(r,e=null,n=[],s=[],l=null,u=null,f=null){return new Kx(r,e,n,s,l,u,f)}function ap(r){const e=Ie(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>xm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>ho(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>ho(s))).join(",")),e.Te=n}return e.Te}function op(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!Ux(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!oT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!u0(r.startAt,e.startAt)&&u0(r.endAt,e.endAt)}function Rm(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n=null,s=[],l=[],u=null,f="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Xx(r,e,n,s,l,u,f,g){return new bo(r,e,n,s,l,u,f,g)}function lp(r){return new bo(r)}function h0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function cT(r){return r.collectionGroup!==null}function Ul(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Ut(Wt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new $l(u,s))})),n.has(Wt.keyField().canonicalString())||e.Ie.push(new $l(Wt.keyField(),s))}return e.Ie}function ki(r){const e=Ie(r);return e.Ee||(e.Ee=$x(e,Ul(r))),e.Ee}function $x(r,e){if(r.limitType==="F")return c0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new $l(l.field,u)}));const n=r.endAt?new _h(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new _h(r.startAt.position,r.startAt.inclusive):null;return c0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Im(r,e){const n=r.filters.concat([e]);return new bo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Nm(r,e,n){return new bo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function jh(r,e){return op(ki(r),ki(e))&&r.limitType===e.limitType}function hT(r){return`${ap(ki(r))}|lt:${r.limitType}`}function Xa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>lT(l))).join(", ")}]`),Vh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>ho(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>ho(l))).join(",")),`Target(${s})`})(ki(r))}; limitType=${r.limitType})`}function Lh(r,e){return e.isFoundDocument()&&(function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,l){for(const u of Ul(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(f,g,y){const _=l0(f,g,y);return f.inclusive?_<=0:_<0})(s.startAt,Ul(s),l)||s.endAt&&!(function(f,g,y){const _=l0(f,g,y);return f.inclusive?_>=0:_>0})(s.endAt,Ul(s),l))})(r,e)}function Zx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fT(r){return(e,n)=>{let s=!1;for(const l of Ul(r)){const u=Jx(l,e,n);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function Jx(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,f,g){const y=f.data.field(u),_=g.data.field(u);return y!==null&&_!==null?co(y,_):Se(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,((n,s)=>{for(const[l,u]of s)e(l,u)}))}isEmpty(){return XE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new ft(ve.comparator);function pr(){return Wx}const dT=new ft(ve.comparator);function Vl(...r){let e=dT;for(const n of r)e=e.insert(n.key,n);return e}function mT(r){let e=dT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Xs(){return zl()}function pT(){return zl()}function zl(){return new ia((r=>r.toString()),((r,e)=>r.isEqual(e)))}const eR=new ft(ve.comparator),tR=new Ut(ve.comparator);function ze(...r){let e=tR;for(const n of r)e=e.add(n);return e}const nR=new Ut(Ue);function iR(){return nR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function gT(r){return{integerValue:""+r}}function rR(r,e){return Dx(e)?gT(e):up(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function sR(r,e,n){return r instanceof vh?(function(l,u){const f={fields:{[JE]:{stringValue:ZE},[eT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&rp(u)&&(u=Mh(u)),u&&(f.fields[WE]=u),{mapValue:f}})(n,e):r instanceof Zl?_T(r,e):r instanceof Jl?vT(r,e):(function(l,u){const f=yT(l,u),g=f0(f)+f0(l.Ae);return wm(f)&&wm(l.Ae)?gT(g):up(l.serializer,g)})(r,e)}function aR(r,e,n){return r instanceof Zl?_T(r,e):r instanceof Jl?vT(r,e):n}function yT(r,e){return r instanceof Eh?(function(s){return wm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class vh extends kh{}class Zl extends kh{constructor(e){super(),this.elements=e}}function _T(r,e){const n=ET(e);for(const s of r.elements)n.some((l=>qi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Jl extends kh{constructor(e){super(),this.elements=e}}function vT(r,e){let n=ET(e);for(const s of r.elements)n=n.filter((l=>!qi(l,s)));return{arrayValue:{values:n}}}class Eh extends kh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function f0(r){return bt(r.integerValue||r.doubleValue)}function ET(r){return sp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function oR(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Zl&&l instanceof Zl||s instanceof Jl&&l instanceof Jl?uo(s.elements,l.elements,qi):s instanceof Eh&&l instanceof Eh?qi(s.Ae,l.Ae):s instanceof vh&&l instanceof vh})(r.transform,e.transform)}class lR{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ph{}function TT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Uh(r.key,hn.none()):new su(r.key,r.data,hn.none());{const n=r.data,s=Tn.empty();let l=new Ut(Wt.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),l=l.add(u)}return new gs(r.key,s,new Vn(l.toArray()),hn.none())}}function uR(r,e,n){r instanceof su?(function(l,u,f){const g=l.value.clone(),y=m0(l.fieldTransforms,u,f.transformResults);g.setAll(y),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):r instanceof gs?(function(l,u,f){if(!nh(l.precondition,u))return void u.convertToUnknownDocument(f.version);const g=m0(l.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(bT(l)),y.setAll(g),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(r,e,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function ql(r,e,n,s){return r instanceof su?(function(u,f,g,y){if(!nh(u.precondition,f))return g;const _=u.value.clone(),b=p0(u.fieldTransforms,y,f);return _.setAll(b),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(r,e,n,s):r instanceof gs?(function(u,f,g,y){if(!nh(u.precondition,f))return g;const _=p0(u.fieldTransforms,y,f),b=f.data;return b.setAll(bT(u)),b.setAll(_),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(r,e,n,s):(function(u,f,g){return nh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(r,e,n)}function cR(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),u=yT(s.transform,l||null);u!=null&&(n===null&&(n=Tn.empty()),n.set(s.field,u))}return n||null}function d0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&uo(s,l,((u,f)=>oR(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class su extends Ph{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class gs extends Ph{constructor(e,n,s,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function bT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function m0(r,e,n){const s=new Map;Xe(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const u=r[l],f=u.transform,g=e.data.field(u.field);s.set(u.field,aR(f,g,n[l]))}return s}function p0(r,e,n){const s=new Map;for(const l of r){const u=l.transform,f=n.data.field(l.field);s.set(l.field,sR(u,f,e))}return s}class Uh extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hR extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&uR(u,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ql(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ql(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=pT();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(l.key)?null:g;const y=TT(f,g);y!==null&&s.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,((n,s)=>d0(n,s)))&&uo(this.baseMutations,e.baseMutations,((n,s)=>d0(n,s)))}}class cp{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){Xe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return eR})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,s[f].version);return new cp(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,He;function pR(r){switch(r){case K.OK:return Se(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function AT(r){if(r===void 0)return mr("GRPC error has no .code"),K.UNKNOWN;switch(r){case Vt.OK:return K.OK;case Vt.CANCELLED:return K.CANCELLED;case Vt.UNKNOWN:return K.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return K.INTERNAL;case Vt.UNAVAILABLE:return K.UNAVAILABLE;case Vt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Vt.NOT_FOUND:return K.NOT_FOUND;case Vt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Vt.ABORTED:return K.ABORTED;case Vt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Vt.DATA_LOSS:return K.DATA_LOSS;default:return Se(39323,{code:r})}}(He=Vt||(Vt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new as([4294967295,4294967295],0);function g0(r){const e=gR().encode(r),n=new PE;return n.update(e),new Uint8Array(n.digest())}function y0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new as([n,s],0),new as([l,u],0)]}class hp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ml(`Invalid padding: ${n}`);if(s<0)throw new Ml(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=as.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(as.fromNumber(s)));return l.compare(yR)===1&&(l=new as([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=g0(e),[s,l]=y0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,l,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new hp(u,l,n);return s.forEach((g=>f.insert(g))),f}insert(e){if(this.ge===0)return;const n=g0(e),[s,l]=y0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,s,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new zh(we.min(),l,new ft(Ue),pr(),ze())}}class au{constructor(e,n,s,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new au(s,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class ST{constructor(e,n){this.targetId=e,this.Ce=n}}class wT{constructor(e,n,s=en.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class _0{constructor(){this.ve=0,this.Fe=v0(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),s=ze();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Se(38017,{changeType:u})}})),new au(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=v0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _R{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=Gc(),this.He=Gc(),this.Ye=new ft(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Rm(u))if(s===0){const f=new ve(u.path);this.et(n,f,an.newNoDocument(f,we.min()))}else Xe(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const g=this.ut(e),y=g?this.ct(g,e,f):1;if(y!==0){this.it(n);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=n;let f,g;try{f=cs(s).toUint8Array()}catch(y){if(y instanceof $E)return lo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new hp(f,l,u)}catch(y){return lo(y instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&Rm(g.target)){const y=new ve(g.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,an.newNoDocument(y,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=ze();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new zh(e,n,this.Ye,this.je,s);return this.je=pr(),this.Je=Gc(),this.He=Gc(),this.Ye=new ft(Ue),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new _0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ut(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ut(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gc(){return new ft(ve.comparator)}function v0(){return new ft(ve.comparator)}const vR={asc:"ASCENDING",desc:"DESCENDING"},ER={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TR={and:"AND",or:"OR"};class bR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(r,e){return r.useProto3Json||Vh(e)?e:{value:e}}function Th(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function AR(r,e){return Th(r,e.toTimestamp())}function Pi(r){return Xe(!!r,49232),we.fromTimestamp((function(n){const s=us(n);return new lt(s.seconds,s.nanos)})(r))}function fp(r,e){return Dm(r,e).canonicalString()}function Dm(r,e){const n=(function(l){return new st(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function RT(r){const e=st.fromString(r);return Xe(OT(e),10190,{key:e.toString()}),e}function Om(r,e){return fp(r.databaseId,e.path)}function om(r,e){const n=RT(e);if(n.get(1)!==r.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(NT(n))}function IT(r,e){return fp(r.databaseId,e)}function SR(r){const e=RT(r);return e.length===4?st.emptyPath():NT(e)}function Vm(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function NT(r){return Xe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function E0(r,e,n){return{name:Om(r,e),fields:n.value.mapValue.fields}}function wR(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Se(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(_,b){return _.useProto3Json?(Xe(b===void 0||typeof b=="string",58123),en.fromBase64String(b||"")):(Xe(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),en.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(_){const b=_.code===void 0?K.UNKNOWN:AT(_.code);return new le(b,_.message||"")})(f);n=new wT(s,l,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=om(r,s.document.name),u=Pi(s.document.updateTime),f=s.document.createTime?Pi(s.document.createTime):we.min(),g=new Tn({mapValue:{fields:s.document.fields}}),y=an.newFoundDocument(l,u,f,g),_=s.targetIds||[],b=s.removedTargetIds||[];n=new ih(_,b,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=om(r,s.document),u=s.readTime?Pi(s.readTime):we.min(),f=an.newNoDocument(l,u),g=s.removedTargetIds||[];n=new ih([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=om(r,s.document),u=s.removedTargetIds||[];n=new ih([],u,l,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,f=new mR(l,u),g=s.targetId;n=new ST(g,f)}}return n}function xR(r,e){let n;if(e instanceof su)n={update:E0(r,e.key,e.value)};else if(e instanceof Uh)n={delete:Om(r,e.key)};else if(e instanceof gs)n={update:E0(r,e.key,e.data),updateMask:jR(e.fieldMask)};else{if(!(e instanceof hR))return Se(16599,{Vt:e.type});n={verify:Om(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const g=f.transform;if(g instanceof vh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Zl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Jl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Eh)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Se(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:AR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Se(27497)})(r,e.precondition)),n}function RR(r,e){return r&&r.length>0?(Xe(e!==void 0,14353),r.map((n=>(function(l,u){let f=l.updateTime?Pi(l.updateTime):Pi(u);return f.isEqual(we.min())&&(f=Pi(u)),new lR(f,l.transformResults||[])})(n,e)))):[]}function IR(r,e){return{documents:[IT(r,e.path)]}}function NR(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=IT(r,l);const u=(function(_){if(_.length!==0)return DT(hi.create(_,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(_){if(_.length!==0)return _.map((b=>(function(I){return{field:$a(I.field),direction:OR(I.dir)}})(b)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=Cm(r,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:l}}function CR(r){let e=SR(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Xe(s===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(S){const I=CT(S);return I instanceof hi&&aT(I)?I.getFilters():[I]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((I=>(function(Z){return new $l(Za(Z.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(I)))})(n.orderBy));let g=null;n.limit&&(g=(function(S){let I;return I=typeof S=="object"?S.value:S,Vh(I)?null:I})(n.limit));let y=null;n.startAt&&(y=(function(S){const I=!!S.before,k=S.values||[];return new _h(k,I)})(n.startAt));let _=null;return n.endAt&&(_=(function(S){const I=!S.before,k=S.values||[];return new _h(k,I)})(n.endAt)),Xx(e,l,f,u,g,"F",y,_)}function DR(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Za(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Za(n.unaryFilter.field);return Mt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Za(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Za(n.unaryFilter.field);return Mt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Mt.create(Za(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return hi.create(n.compositeFilter.filters.map((s=>CT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(r):Se(30097,{filter:r})}function OR(r){return vR[r]}function VR(r){return ER[r]}function MR(r){return TR[r]}function $a(r){return{fieldPath:r.canonicalString()}}function Za(r){return Wt.fromServerFormat(r.fieldPath)}function DT(r){return r instanceof Mt?(function(n){if(n.op==="=="){if(o0(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(a0(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(o0(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(a0(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:VR(n.op),value:n.value}}})(r):r instanceof hi?(function(n){const s=n.getFilters().map((l=>DT(l)));return s.length===1?s[0]:{compositeFilter:{op:MR(n.op),filters:s}}})(r):Se(54877,{filter:r})}function jR(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function OT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,s,l,u=we.min(),f=we.min(),g=en.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.yt=e}}function kR(r){const e=CR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Nm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.Cn=new UR}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(ls.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class UR{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Ut(st.comparator),u=!l.has(s);return this.index[n]=l.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Ut(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VT=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(VT,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fo(0)}static cr(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LruGarbageCollector",zR=1048576;function A0([r,e],[n,s]){const l=Ue(r,n);return l===0?Ue(e,s):l}class qR{constructor(e){this.Ir=e,this.buffer=new Ut(A0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();A0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BR{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(b0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){To(n)?fe(b0,"Ignoring IndexedDB error during garbage collection: ",n):await Eo(n)}await this.Vr(3e5)}))}}class HR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Oh.ce);const s=new qR(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(T0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,u,f,g,y,_;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,f=Date.now(),this.nthSequenceNumber(e,l)))).next((S=>(s=S,g=Date.now(),this.removeTargets(e,s,n)))).next((S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(_=Date.now(),Ka()<=Pe.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${S} documents in `+(_-y)+`ms
Total Duration: ${_-b}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:S}))))}}function FR(r,e){return new HR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.changes=new ia((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&ql(s.mutation,l,Vn.empty(),lt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ze()){const l=Xs();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((u=>{let f=Vl();return u.forEach(((g,y)=>{f=f.insert(g,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Xs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ze())))}populateOverlays(e,n,s){const l=[];return s.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(e,n,s,l){let u=pr();const f=zl(),g=(function(){return zl()})();return n.forEach(((y,_)=>{const b=s.get(_.key);l.has(_.key)&&(b===void 0||b.mutation instanceof gs)?u=u.insert(_.key,_):b!==void 0?(f.set(_.key,b.mutation.getFieldMask()),ql(b.mutation,_,b.mutation.getFieldMask(),lt.now())):f.set(_.key,Vn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((_,b)=>f.set(_,b))),n.forEach(((_,b)=>g.set(_,new QR(b,f.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=zl();let l=new ft(((f,g)=>f-g)),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const g of f)g.keys().forEach((y=>{const _=n.get(y);if(_===null)return;let b=s.get(y)||Vn.empty();b=g.applyToLocalView(_,b),s.set(y,b);const S=(l.get(g.batchId)||ze()).add(y);l=l.insert(g.batchId,S)}))})).next((()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,b=y.value,S=pT();b.forEach((I=>{if(!u.has(I)){const k=TT(n.get(I),s.get(I));k!==null&&S.set(I,k),u=u.add(I)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,S))}return W.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-u.size):W.resolve(Xs());let g=Ql,y=u;return f.next((_=>W.forEach(_,((b,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),u.get(b)?W.resolve():this.remoteDocumentCache.getEntry(e,b).next((I=>{y=y.insert(b,I)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,y,_,ze()))).next((b=>({batchId:g,changes:mT(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let l=Vl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const u=n.collectionGroup;let f=Vl();return this.indexManager.getCollectionParents(e,u).next((g=>W.forEach(g,(y=>{const _=(function(S,I){return new bo(I,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,s,l).next((b=>{b.forEach(((S,I)=>{f=f.insert(S,I)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,l)))).next((f=>{u.forEach(((y,_)=>{const b=_.getKey();f.get(b)===null&&(f=f.insert(b,an.newInvalidDocument(b)))}));let g=Vl();return f.forEach(((y,_)=>{const b=u.get(y);b!==void 0&&ql(b.mutation,_,Vn.empty(),lt.now()),Lh(n,_)&&(g=g.insert(y,_))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Pi(l.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:kR(l.bundledQuery),readTime:Pi(l.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.overlays=new ft(ve.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Xs();return W.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&s.set(l,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,u)=>{this.St(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const l=Xs(),u=n.length+1,f=new ve(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&y.largestBatchId>s&&l.set(y.getKey(),y)}return W.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let u=new ft(((_,b)=>_-b));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let b=u.get(_.largestBatchId);b===null&&(b=Xs(),u=u.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const g=Xs(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,b)=>g.set(_,b))),!(g.size()>=l)););return W.resolve(g)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new dR(n,s));let u=this.qr.get(n);u===void 0&&(u=ze(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.Qr=new Ut(Ft.$r),this.Ur=new Ut(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Ft(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new st([])),s=new Ft(n,e),l=new Ft(n,e+1),u=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new st([])),s=new Ft(n,e),l=new Ft(n,e+1);let u=ze();return this.Ur.forEachInRange([s,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Ft(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Ft.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new fR(u,n,s,l);this.mutationQueue.push(f);for(const g of l)this.Zr=this.Zr.add(new Ft(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),u=l<0?0:l;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ip:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ft(n,0),l=new Ft(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,l],(f=>{const g=this.Xr(f.Yr);u.push(g)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ut(Ue);return n.forEach((l=>{const u=new Ft(l,0),f=new Ft(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{s=s.add(g.Yr)}))})),W.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const f=new Ft(new ve(u),0);let g=new Ut(Ue);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(g=g.add(y.Yr)),!0)}),f),W.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return W.forEach(n.mutations,(l=>{const u=new Ft(l.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Ft(n,0),l=this.Zr.firstAfterOrEqual(s);return W.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.ri=e,this.docs=(function(){return new ft(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let s=pr();return n.forEach((l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():an.newInvalidDocument(l))})),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let u=pr();const f=n.path,g=new ve(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:b}}=y.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||Rx(xx(b),s)<=0||(l.has(b.key)||Lh(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,s,l){Se(9500)}ii(e,n){return W.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new WR(this)}getSize(e){return W.resolve(this.size)}}class WR extends GR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.persistence=e,this.si=new ia((n=>ap(n)),op),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new dp,this.targetCount=0,this.ai=fo.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let l=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)})),W.waitFor(u).next((()=>l))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Oh(0),this.li=!1,this.li=!0,this.hi=new $R,this.referenceDelegate=e(this),this.Pi=new eI(this),this.indexManager=new PR,this.remoteDocumentCache=(function(l){return new JR(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new LR(n),this.Ii=new KR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new ZR(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const l=new tI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return W.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class tI extends Nx{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new dp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(s=>{const l=ve.fromPath(s);return this.gi(e,l).next((u=>{u||n.removeEntry(l,we.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class bh{constructor(e,n){this.persistence=e,this.pi=new ia((s=>Ox(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=FR(this,n)}static mi(e,n){return new bh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((s,l)=>this.br(e,s,l).next((u=>u?W.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((g=>{g||(s++,u.removeEntry(f,we.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}br(e,n,s){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return W.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=ze(),l=ze();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new pp(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return V1()?8:Cx(on())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,l,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new nI;return this.Ss(e,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,f,g.size)}))})).next((()=>u.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(Ka()<=Pe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Ka()<=Pe.DEBUG&&fe("QueryEngine","Query:",Xa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ka()<=Pe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(n))):W.resolve())}ys(e,n){if(h0(n))return W.resolve(null);let s=ki(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Nm(n,null,"F"),s=ki(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=ze(...u);return this.ps.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,s).next((y=>{const _=this.Ds(n,g);return this.Cs(n,_,f,y.readTime)?this.ys(e,Nm(n,null,"F")):this.vs(e,_,n,y)}))))})))))}ws(e,n,s,l){return h0(n)||l.isEqual(we.min())?W.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,l)?W.resolve(null):(Ka()<=Pe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Xa(n)),this.vs(e,f,n,wx(l,Ql)).next((g=>g)))}))}Ds(e,n){let s=new Ut(fT(e));return n.forEach(((l,u)=>{Lh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,s){return Ka()<=Pe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Xa(n)),this.ps.getDocumentsMatchingQuery(e,n,ls.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="LocalStore",rI=3e8;class sI{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ft(Ue),this.xs=new ia((u=>ap(u)),op),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function aI(r,e,n,s){return new sI(r,e,n,s)}async function jT(r,e){const n=Ie(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],g=[];let y=ze();for(const _ of l){f.push(_.batchId);for(const b of _.mutations)y=y.add(b.key)}for(const _ of u){g.push(_.batchId);for(const b of _.mutations)y=y.add(b.key)}return n.localDocuments.getDocuments(s,y).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:g})))}))}))}function oI(r,e){const n=Ie(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,_,b){const S=_.batch,I=S.keys();let k=W.resolve();return I.forEach((Z=>{k=k.next((()=>b.getEntry(y,Z))).next((te=>{const X=_.docVersions.get(Z);Xe(X!==null,48541),te.version.compareTo(X)<0&&(S.applyToRemoteDocument(te,_),te.isValidDocument()&&(te.setReadTime(_.commitVersion),b.addEntry(te)))}))})),k.next((()=>g.mutationQueue.removeMutationBatch(y,S)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let y=ze();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function LT(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function lI(r,e){const n=Ie(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];e.targetChanges.forEach(((b,S)=>{const I=l.get(S);if(!I)return;g.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(u,b.addedDocuments,S))));let k=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?k=k.withResumeToken(en.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):b.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(b.resumeToken,s)),l=l.insert(S,k),(function(te,X,Q){return te.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=rI?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(I,k,b)&&g.push(n.Pi.updateTargetData(u,k))}));let y=pr(),_=ze();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(uI(u,f,e.documentUpdates).next((b=>{y=b.ks,_=b.qs}))),!s.isEqual(we.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next((S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(b)}return W.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,y,_))).next((()=>y))})).then((u=>(n.Ms=l,u)))}function uI(r,e,n){let s=ze(),l=ze();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=pr();return n.forEach(((g,y)=>{const _=u.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),y.isNoDocument()&&y.version.isEqual(we.min())?(e.removeEntry(g,y.readTime),f=f.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),f=f.insert(g,y)):fe(gp,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function cI(r,e){const n=Ie(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ip),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function hI(r,e){const n=Ie(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((u=>u?(l=u,W.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new ts(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Mm(r,e,n){const s=Ie(r),l=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!To(f))throw f;fe(gp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function S0(r,e,n){const s=Ie(r);let l=we.min(),u=ze();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,_,b){const S=Ie(y),I=S.xs.get(b);return I!==void 0?W.resolve(S.Ms.get(I)):S.Pi.getTargetData(_,b)})(s,f,ki(e)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,g.targetId).next((y=>{u=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?l:we.min(),n?u:ze()))).next((g=>(fI(s,Zx(e),g),{documents:g,Qs:u})))))}function fI(r,e,n){let s=r.Os.get(e)||we.min();n.forEach(((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class w0{constructor(){this.activeTargetIds=iR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dI{constructor(){this.Mo=new w0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="ConnectivityMonitor";class R0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(x0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(x0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function jm(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="RestConnection",pI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===gh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,u){const f=jm(),g=this.zo(e,n.toUriEncodedString());fe(lm,`Sending RPC '${e}' ${f}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,u);const{host:_}=new URL(g),b=po(_);return this.Jo(e,g,y,s,b).then((S=>(fe(lm,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw lo(lm,`RPC '${e}' ${f} failed with error: `,S,"url: ",g,"request:",s),S}))}Ho(e,n,s,l,u,f){return this.Go(e,n,s,l,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),s&&s.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const s=pI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class _I extends gI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,u){const f=jm();return new Promise(((g,y)=>{const _=new UE;_.setWithCredentials(!0),_.listenOnce(zE.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Wc.NO_ERROR:const S=_.getResponseJson();fe(rn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),g(S);break;case Wc.TIMEOUT:fe(rn,`RPC '${e}' ${f} timed out`),y(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const I=_.getStatus();if(fe(rn,`RPC '${e}' ${f} failed with status:`,I,"response text:",_.getResponseText()),I>0){let k=_.getResponseJson();Array.isArray(k)&&(k=k[0]);const Z=k==null?void 0:k.error;if(Z&&Z.status&&Z.message){const te=(function(Q){const ue=Q.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(ue)>=0?ue:K.UNKNOWN})(Z.status);y(new le(te,Z.message))}else y(new le(K.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new le(K.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{fe(rn,`RPC '${e}' ${f} completed.`)}}));const b=JSON.stringify(l);fe(rn,`RPC '${e}' ${f} sending request:`,l),_.send(n,"POST",b,s,15)}))}T_(e,n,s){const l=jm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=HE(),g=BE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const b=u.join("");fe(rn,`Creating RPC '${e}' stream ${l}: ${b}`,y);const S=f.createWebChannel(b,y);this.I_(S);let I=!1,k=!1;const Z=new yI({Yo:X=>{k?fe(rn,`Not sending because RPC '${e}' stream ${l} is closed:`,X):(I||(fe(rn,`Opening RPC '${e}' stream ${l} transport.`),S.open(),I=!0),fe(rn,`RPC '${e}' stream ${l} sending:`,X),S.send(X))},Zo:()=>S.close()}),te=(X,Q,ue)=>{X.listen(Q,(de=>{try{ue(de)}catch(be){setTimeout((()=>{throw be}),0)}}))};return te(S,Ol.EventType.OPEN,(()=>{k||(fe(rn,`RPC '${e}' stream ${l} transport opened.`),Z.o_())})),te(S,Ol.EventType.CLOSE,(()=>{k||(k=!0,fe(rn,`RPC '${e}' stream ${l} transport closed`),Z.a_(),this.E_(S))})),te(S,Ol.EventType.ERROR,(X=>{k||(k=!0,lo(rn,`RPC '${e}' stream ${l} transport errored. Name:`,X.name,"Message:",X.message),Z.a_(new le(K.UNAVAILABLE,"The operation could not be completed")))})),te(S,Ol.EventType.MESSAGE,(X=>{var Q;if(!k){const ue=X.data[0];Xe(!!ue,16349);const de=ue,be=(de==null?void 0:de.error)||((Q=de[0])==null?void 0:Q.error);if(be){fe(rn,`RPC '${e}' stream ${l} received error:`,be);const ee=be.status;let se=(function(R){const V=Vt[R];if(V!==void 0)return AT(V)})(ee),w=be.message;se===void 0&&(se=K.INTERNAL,w="Unknown error status: "+ee+" with message "+be.message),k=!0,Z.a_(new le(se,w)),S.close()}else fe(rn,`RPC '${e}' stream ${l} received:`,ue),Z.u_(ue)}})),te(g,qE.STAT_EVENT,(X=>{X.stat===bm.PROXY?fe(rn,`RPC '${e}' stream ${l} detected buffering proxy`):X.stat===bm.NOPROXY&&fe(rn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r){return new bR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,s=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&fe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="PersistentStream";class PT{constructor(e,n,s,l,u,f,g,y){this.Mi=e,this.S_=s,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new le(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(I0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(I0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vI extends PT{constructor(e,n,s,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wR(this.serializer,e),s=(function(u){if(!("targetChange"in u))return we.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?we.min():f.readTime?Pi(f.readTime):we.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Vm(this.serializer),n.addTarget=(function(u,f){let g;const y=f.target;if(g=Rm(y)?{documents:IR(u,y)}:{query:NR(u,y).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=xT(u,f.resumeToken);const _=Cm(u,f.expectedCount);_!==null&&(g.expectedCount=_)}else if(f.snapshotVersion.compareTo(we.min())>0){g.readTime=Th(u,f.snapshotVersion.toTimestamp());const _=Cm(u,f.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const s=DR(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Vm(this.serializer),n.removeTarget=e,this.q_(n)}}class EI extends PT{constructor(e,n,s,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=RR(e.writeResults,e.commitTime),s=Pi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Vm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>xR(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{}class bI extends TI{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Dm(n,s),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(K.UNKNOWN,u.toString())}))}Ho(e,n,s,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(e,Dm(n,s),l,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new le(K.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mr(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="RemoteStore";class SI{constructor(e,n,s,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{ra(this)&&(fe(ta,"Restarting streams for network reachability change."),await(async function(y){const _=Ie(y);_.Ea.add(4),await ou(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Bh(_)})(this))}))})),this.Ra=new AI(s,l)}}async function Bh(r){if(ra(r))for(const e of r.da)await e(!0)}async function ou(r){for(const e of r.da)await e(!1)}function UT(r,e){const n=Ie(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ep(n)?vp(n):Ao(n).O_()&&_p(n,e))}function yp(r,e){const n=Ie(r),s=Ao(n);n.Ia.delete(e),s.O_()&&zT(n,e),n.Ia.size===0&&(s.O_()?s.L_():ra(n)&&n.Ra.set("Unknown"))}function _p(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(r).Y_(e)}function zT(r,e){r.Va.Ue(e),Ao(r).Z_(e)}function vp(r){r.Va=new _R({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ao(r).start(),r.Ra.ua()}function Ep(r){return ra(r)&&!Ao(r).x_()&&r.Ia.size>0}function ra(r){return Ie(r).Ea.size===0}function qT(r){r.Va=void 0}async function wI(r){r.Ra.set("Online")}async function xI(r){r.Ia.forEach(((e,n)=>{_p(r,e)}))}async function RI(r,e){qT(r),Ep(r)?(r.Ra.ha(e),vp(r)):r.Ra.set("Unknown")}async function II(r,e,n){if(r.Ra.set("Online"),e instanceof wT&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const g of u.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Ia.delete(g),l.Va.removeTarget(g))})(r,e)}catch(s){fe(ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ah(r,s)}else if(e instanceof ih?r.Va.Ze(e):e instanceof ST?r.Va.st(e):r.Va.tt(e),!n.isEqual(we.min()))try{const s=await LT(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const b=u.Ia.get(_);b&&u.Ia.set(_,b.withResumeToken(y.resumeToken,f))}})),g.targetMismatches.forEach(((y,_)=>{const b=u.Ia.get(y);if(!b)return;u.Ia.set(y,b.withResumeToken(en.EMPTY_BYTE_STRING,b.snapshotVersion)),zT(u,y);const S=new ts(b.target,y,_,b.sequenceNumber);_p(u,S)})),u.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(s){fe(ta,"Failed to raise snapshot:",s),await Ah(r,s)}}async function Ah(r,e,n){if(!To(e))throw e;r.Ea.add(1),await ou(r),r.Ra.set("Offline"),n||(n=()=>LT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe(ta,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Bh(r)}))}function BT(r,e){return e().catch((n=>Ah(r,n,e)))}async function Hh(r){const e=Ie(r),n=fs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ip;for(;NI(e);)try{const l=await cI(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,CI(e,l)}catch(l){await Ah(e,l)}HT(e)&&FT(e)}function NI(r){return ra(r)&&r.Ta.length<10}function CI(r,e){r.Ta.push(e);const n=fs(r);n.O_()&&n.X_&&n.ea(e.mutations)}function HT(r){return ra(r)&&!fs(r).x_()&&r.Ta.length>0}function FT(r){fs(r).start()}async function DI(r){fs(r).ra()}async function OI(r){const e=fs(r);for(const n of r.Ta)e.ea(n.mutations)}async function VI(r,e,n){const s=r.Ta.shift(),l=cp.from(s,e,n);await BT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Hh(r)}async function MI(r,e){e&&fs(r).X_&&await(async function(s,l){if((function(f){return pR(f)&&f!==K.ABORTED})(l.code)){const u=s.Ta.shift();fs(s).B_(),await BT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Hh(s)}})(r,e),HT(r)&&FT(r)}async function N0(r,e){const n=Ie(r);n.asyncQueue.verifyOperationInProgress(),fe(ta,"RemoteStore received new credentials");const s=ra(n);n.Ea.add(3),await ou(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function jI(r,e){const n=Ie(r);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await ou(n),n.Ra.set("Unknown"))}function Ao(r){return r.ma||(r.ma=(function(n,s,l){const u=Ie(n);return u.sa(),new vI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Xo:wI.bind(null,r),t_:xI.bind(null,r),r_:RI.bind(null,r),H_:II.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Ep(r)?vp(r):r.Ra.set("Unknown")):(await r.ma.stop(),qT(r))}))),r.ma}function fs(r){return r.fa||(r.fa=(function(n,s,l){const u=Ie(n);return u.sa(),new EI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:DI.bind(null,r),r_:MI.bind(null,r),ta:OI.bind(null,r),na:VI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Hh(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(ta,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,s,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,u){const f=Date.now()+s,g=new Tp(e,n,f,l,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bp(r,e){if(mr("AsyncQueue",`${e}: ${r}`),To(r))return new le(K.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{static emptySet(e){return new ro(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Vl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ro)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new ro;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.ga=new ft(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class mo{constructor(e,n,s,l,u,f,g,y,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,l,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new mo(e,n,ro.emptySet(n),f,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kI{constructor(){this.queries=D0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Ie(n),u=l.queries;l.queries=D0(),u.forEach(((f,g)=>{for(const y of g.Sa)y.onError(s)}))})(this,new le(K.ABORTED,"Firestore shutting down"))}}function D0(){return new ia((r=>hT(r)),jh)}async function GT(r,e){const n=Ie(r);let s=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(s=2):(u=new LI,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=bp(f,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Ap(n)}async function QT(r,e){const n=Ie(r),s=e.query;let l=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function PI(r,e){const n=Ie(r);let s=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(l)&&(s=!0);f.wa=l}}s&&Ap(n)}function UI(r,e,n){const s=Ie(r),l=s.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);s.queries.delete(e)}function Ap(r){r.Ca.forEach((e=>{e.next()}))}var Lm,O0;(O0=Lm||(Lm={})).Ma="default",O0.Cache="cache";class YT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.key=e}}class XT{constructor(e){this.key=e}}class zI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=fT(e),this.tu=new ro(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new C0,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,S)=>{const I=l.get(b),k=Lh(this.query,S)?S:null,Z=!!I&&this.mutatedKeys.has(I.key),te=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let X=!1;I&&k?I.data.isEqual(k.data)?Z!==te&&(s.track({type:3,doc:k}),X=!0):this.su(I,k)||(s.track({type:2,doc:k}),X=!0,(y&&this.eu(k,y)>0||_&&this.eu(k,_)<0)&&(g=!0)):!I&&k?(s.track({type:0,doc:k}),X=!0):I&&!k&&(s.track({type:1,doc:I}),X=!0,(y||_)&&(g=!0)),X&&(k?(f=f.add(k),u=te?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),s.track({type:1,doc:b})}return{tu:f,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((b,S)=>(function(k,Z){const te=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:X})}};return te(k)-te(Z)})(b.type,S.type)||this.eu(b.doc,S.doc))),this.ou(s),l=l??!1;const g=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,f.length!==0||_?{snapshot:new mo(this.query,e.tu,u,f,e.mutatedKeys,y===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new C0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new XT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new KT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sp="SyncEngine";class qI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class BI{constructor(e){this.key=e,this.hu=!1}}class HI{constructor(e,n,s,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ia((g=>hT(g)),jh),this.Iu=new Map,this.Eu=new Set,this.du=new ft(ve.comparator),this.Au=new Map,this.Ru=new dp,this.Vu={},this.mu=new Map,this.fu=fo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FI(r,e,n=!0){const s=tb(r);let l;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await $T(s,e,n,!0),l}async function GI(r,e){const n=tb(r);await $T(n,e,!0,!1)}async function $T(r,e,n,s){const l=await hI(r.localStore,ki(e)),u=l.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await QI(r,e,u,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&UT(r.remoteStore,l),g}async function QI(r,e,n,s,l){r.pu=(S,I,k)=>(async function(te,X,Q,ue){let de=X.view.ru(Q);de.Cs&&(de=await S0(te.localStore,X.query,!1).then((({documents:w})=>X.view.ru(w,de))));const be=ue&&ue.targetChanges.get(X.targetId),ee=ue&&ue.targetMismatches.get(X.targetId)!=null,se=X.view.applyChanges(de,te.isPrimaryClient,be,ee);return M0(te,X.targetId,se.au),se.snapshot})(r,S,I,k);const u=await S0(r.localStore,e,!0),f=new zI(e,u.Qs),g=f.ru(u.documents),y=au.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),_=f.applyChanges(g,r.isPrimaryClient,y);M0(r,n,_.au);const b=new qI(e,n,f);return r.Tu.set(e,b),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),_.snapshot}async function YI(r,e,n){const s=Ie(r),l=s.Tu.get(e),u=s.Iu.get(l.targetId);if(u.length>1)return s.Iu.set(l.targetId,u.filter((f=>!jh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Mm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&yp(s.remoteStore,l.targetId),km(s,l.targetId)})).catch(Eo)):(km(s,l.targetId),await Mm(s.localStore,l.targetId,!0))}async function KI(r,e){const n=Ie(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),yp(n.remoteStore,s.targetId))}async function XI(r,e,n){const s=nN(r);try{const l=await(function(f,g){const y=Ie(f),_=lt.now(),b=g.reduce(((k,Z)=>k.add(Z.key)),ze());let S,I;return y.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let Z=pr(),te=ze();return y.Ns.getEntries(k,b).next((X=>{Z=X,Z.forEach(((Q,ue)=>{ue.isValidDocument()||(te=te.add(Q))}))})).next((()=>y.localDocuments.getOverlayedDocuments(k,Z))).next((X=>{S=X;const Q=[];for(const ue of g){const de=cR(ue,S.get(ue.key).overlayedDocument);de!=null&&Q.push(new gs(ue.key,de,iT(de.value.mapValue),hn.exists(!0)))}return y.mutationQueue.addMutationBatch(k,_,Q,g)})).next((X=>{I=X;const Q=X.applyToLocalDocumentSet(S,te);return y.documentOverlayCache.saveOverlays(k,X.batchId,Q)}))})).then((()=>({batchId:I.batchId,changes:mT(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(f,g,y){let _=f.Vu[f.currentUser.toKey()];_||(_=new ft(Ue)),_=_.insert(g,y),f.Vu[f.currentUser.toKey()]=_})(s,l.batchId,n),await lu(s,l.changes),await Hh(s.remoteStore)}catch(l){const u=bp(l,"Failed to persist write");n.reject(u)}}async function ZT(r,e){const n=Ie(r);try{const s=await lI(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(Xe(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Xe(f.hu,14607):l.removedDocuments.size>0&&(Xe(f.hu,42227),f.hu=!1))})),await lu(n,s,e)}catch(s){await Eo(s)}}function V0(r,e,n){const s=Ie(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&l.push(g.snapshot)})),(function(f,g){const y=Ie(f);y.onlineState=g;let _=!1;y.queries.forEach(((b,S)=>{for(const I of S.Sa)I.va(g)&&(_=!0)})),_&&Ap(y)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function $I(r,e,n){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),u=l&&l.key;if(u){let f=new ft(ve.comparator);f=f.insert(u,an.newNoDocument(u,we.min()));const g=ze().add(u),y=new zh(we.min(),new Map,new ft(Ue),f,g);await ZT(s,y),s.du=s.du.remove(u),s.Au.delete(e),wp(s)}else await Mm(s.localStore,e,!1).then((()=>km(s,e,n))).catch(Eo)}async function ZI(r,e){const n=Ie(r),s=e.batch.batchId;try{const l=await oI(n.localStore,e);WT(n,s,null),JT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await lu(n,l)}catch(l){await Eo(l)}}async function JI(r,e,n){const s=Ie(r);try{const l=await(function(f,g){const y=Ie(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let b;return y.mutationQueue.lookupMutationBatch(_,g).next((S=>(Xe(S!==null,37113),b=S.keys(),y.mutationQueue.removeMutationBatch(_,S)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,b,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b))).next((()=>y.localDocuments.getDocuments(_,b)))}))})(s.localStore,e);WT(s,e,n),JT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await lu(s,l)}catch(l){await Eo(l)}}function JT(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function WT(r,e,n){const s=Ie(r);let l=s.Vu[s.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function km(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||eb(r,s)}))}function eb(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(yp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),wp(r))}function M0(r,e,n){for(const s of n)s instanceof KT?(r.Ru.addReference(s.key,e),WI(r,s)):s instanceof XT?(fe(Sp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||eb(r,s.key)):Se(19791,{wu:s})}function WI(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(fe(Sp,"New document in limbo: "+n),r.Eu.add(s),wp(r))}function wp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ve(st.fromString(e)),s=r.fu.next();r.Au.set(s,new BI(n)),r.du=r.du.insert(n,s),UT(r.remoteStore,new ts(ki(lp(n.path)),s,"TargetPurposeLimboResolution",Oh.ce))}}async function lu(r,e,n){const s=Ie(r),l=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,y)=>{f.push(s.pu(y,e,n).then((_=>{var b;if((_||n)&&s.isPrimaryClient){const S=_?!_.fromCache:(b=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(_){l.push(_);const S=pp.As(y.targetId,_);u.push(S)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(y,_){const b=Ie(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>W.forEach(_,(I=>W.forEach(I.Es,(k=>b.persistence.referenceDelegate.addReference(S,I.targetId,k))).next((()=>W.forEach(I.ds,(k=>b.persistence.referenceDelegate.removeReference(S,I.targetId,k)))))))))}catch(S){if(!To(S))throw S;fe(gp,"Failed to update sequence numbers: "+S)}for(const S of _){const I=S.targetId;if(!S.fromCache){const k=b.Ms.get(I),Z=k.snapshotVersion,te=k.withLastLimboFreeSnapshotVersion(Z);b.Ms=b.Ms.insert(I,te)}}})(s.localStore,u))}async function eN(r,e){const n=Ie(r);if(!n.currentUser.isEqual(e)){fe(Sp,"User change. New user:",e.toKey());const s=await jT(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((g=>{g.forEach((y=>{y.reject(new le(K.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await lu(n,s.Ls)}}function tN(r,e){const n=Ie(r),s=n.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let l=ze();const u=n.Iu.get(e);if(!u)return l;for(const f of u){const g=n.Tu.get(f);l=l.unionWith(g.view.nu)}return l}}function tb(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$I.bind(null,e),e.Pu.H_=PI.bind(null,e.eventManager),e.Pu.yu=UI.bind(null,e.eventManager),e}function nN(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JI.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aI(this.persistence,new iI,e.initialUser,this.serializer)}Cu(e){return new MT(mp.mi,this.serializer)}Du(e){return new dI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class iN extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof bh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new BR(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new MT((s=>bh.mi(s,n)),this.serializer)}}class Pm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>V0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=eN.bind(null,this.syncEngine),await jI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kI})()}createDatastore(e){const n=qh(e.databaseInfo.databaseId),s=(function(u){return new _I(u)})(e.databaseInfo);return(function(u,f,g,y){return new bI(u,f,g,y)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,u,f,g){return new SI(s,l,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>V0(this.syncEngine,n,0)),(function(){return R0.v()?new R0:new mI})())}createSyncEngine(e,n){return(function(l,u,f,g,y,_,b){const S=new HI(l,u,f,g,y,_);return b&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(l){const u=Ie(l);fe(ta,"RemoteStore shutting down."),u.Ea.add(5),await ou(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Pm.provider={build:()=>new Pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class rN{constructor(e,n,s,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=sn.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{fe(ds,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(fe(ds,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=bp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cm(r,e){r.asyncQueue.verifyOperationInProgress(),fe(ds,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await jT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function j0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await sN(r);fe(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>N0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>N0(e.remoteStore,l))),r._onlineComponents=e}async function sN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(ds,"Using user provided OfflineComponentProvider");try{await cm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===K.FAILED_PRECONDITION||l.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await cm(r,new Sh)}}else fe(ds,"Using default OfflineComponentProvider"),await cm(r,new iN(void 0));return r._offlineComponents}async function ib(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(ds,"Using user provided OnlineComponentProvider"),await j0(r,r._uninitializedComponentsProvider._online)):(fe(ds,"Using default OnlineComponentProvider"),await j0(r,new Pm))),r._onlineComponents}function aN(r){return ib(r).then((e=>e.syncEngine))}async function rb(r){const e=await ib(r),n=e.eventManager;return n.onListen=FI.bind(null,e.syncEngine),n.onUnlisten=YI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KI.bind(null,e.syncEngine),n}function oN(r,e,n={}){const s=new hr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,y,_){const b=new nb({next:I=>{b.Nu(),f.enqueueAndForget((()=>QT(u,S)));const k=I.docs.has(g);!k&&I.fromCache?_.reject(new le(K.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&I.fromCache&&y&&y.source==="server"?_.reject(new le(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(I)},error:I=>_.reject(I)}),S=new YT(lp(g.path),b,{includeMetadataChanges:!0,qa:!0});return GT(u,S)})(await rb(r),r.asyncQueue,e,n,s))),s.promise}function lN(r,e,n={}){const s=new hr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,y,_){const b=new nb({next:I=>{b.Nu(),f.enqueueAndForget((()=>QT(u,S))),I.fromCache&&y.source==="server"?_.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(I)},error:I=>_.reject(I)}),S=new YT(g,b,{includeMetadataChanges:!0,qa:!0});return GT(u,S)})(await rb(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="firestore.googleapis.com",k0=!0;class P0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ab,this.ssl=k0}else this.host=e.host,this.ssl=e.ssl??k0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zR)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new mx;switch(s.type){case"firstParty":return new _x(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=L0.get(n);s&&(fe("ComponentProvider","Removing Datastore"),L0.delete(n),s.terminate())})(this),Promise.resolve()}}function uN(r,e,n,s={}){var _;r=Kn(r,Fh);const l=po(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${n}`;l&&(J0(`https://${g}`),W0("Firestore",!0)),u.host!==ab&&u.host!==g&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:g,ssl:l,emulatorOptions:s};if(!Zs(y,f)&&(r._setSettings(y),s.mockUserToken)){let b,S;if(typeof s.mockUserToken=="string")b=s.mockUserToken,S=sn.MOCK_USER;else{b=S1(s.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new sn(I)}r._authCredentials=new px(new GE(b,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class At{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ru(n,At._jsonSchema))return new At(e,s||null,new ve(st.fromString(n.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:jt("string",At._jsonSchemaVersion),referencePath:jt("string")};class os extends sa{constructor(e,n,s){super(e,n,lp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ve(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function Ja(r,e,...n){if(r=Lt(r),QE("collection","path",e),r instanceof Fh){const s=st.fromString(e,...n);return Zv(s),new os(r,null,s)}{if(!(r instanceof At||r instanceof os))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...n));return Zv(s),new os(r.firestore,null,s)}}function On(r,e,...n){if(r=Lt(r),arguments.length===1&&(e=np.newId()),QE("doc","path",e),r instanceof Fh){const s=st.fromString(e,...n);return $v(s),new At(r,null,new ve(s))}{if(!(r instanceof At||r instanceof os))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...n));return $v(s),new At(r.firestore,r instanceof os?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="AsyncQueue";class z0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kT(this,"async_queue_retry"),this._c=()=>{const s=um();s&&fe(U0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!To(e))throw e;fe(U0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,mr("INTERNAL UNHANDLED ERROR: ",q0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Tp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Se(47125,{Pc:q0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function q0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ys extends Fh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new z0,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z0(e),this._firestoreClient=void 0,await e}}}function cN(r,e){const n=typeof r=="object"?r:Qm(),s=typeof r=="string"?r:gh,l=Gm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=b1("firestore");u&&uN(l,...u)}return l}function Gh(r){if(r._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hN(r),r._firestoreClient}function hN(r){var s,l,u;const e=r._freezeSettings(),n=(function(g,y,_,b){return new jx(g,y,_,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,sb(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new rN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(en.fromBase64String(e))}catch(n){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ru(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:jt("string",Yn._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(e){if(ru(e,Ui._jsonSchema))return new Ui(e.latitude,e.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:jt("string",Ui._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ru(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new zi(e.vectorValues);throw new le(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:jt("string",zi._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=/^__.*__$/;class dN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new su(e,this.data,n,this.fieldTransforms)}}class ob{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class Rp{constructor(e,n,s,l,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lb(this.Ac)&&fN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||qh(e)}Cc(e,n,s,l=!1){return new Rp({Ac:e,methodName:n,Dc:s,path:Wt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cu(r){const e=r._freezeSettings(),n=qh(r._databaseId);return new mN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Ip(r,e,n,s,l,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,l);Np("Data must be an object, but it was:",f,s);const g=hb(s,f);let y,_;if(u.merge)y=new Vn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const S of u.mergeFields){const I=Um(e,S,n);if(!f.contains(I))throw new le(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);db(b,I)||b.push(I)}y=new Vn(b),_=f.fieldTransforms.filter((S=>y.covers(S.field)))}else y=null,_=f.fieldTransforms;return new dN(new Tn(g),y,_)}class Qh extends xp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qh}}function ub(r,e,n,s){const l=r.Cc(1,e,n);Np("Data must be an object, but it was:",l,s);const u=[],f=Tn.empty();ps(s,((y,_)=>{const b=Cp(e,y,n);_=Lt(_);const S=l.yc(b);if(_ instanceof Qh)u.push(b);else{const I=hu(_,S);I!=null&&(u.push(b),f.set(b,I))}}));const g=new Vn(u);return new ob(f,g,l.fieldTransforms)}function cb(r,e,n,s,l,u){const f=r.Cc(1,e,n),g=[Um(e,s,n)],y=[l];if(u.length%2!=0)throw new le(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)g.push(Um(e,u[I])),y.push(u[I+1]);const _=[],b=Tn.empty();for(let I=g.length-1;I>=0;--I)if(!db(_,g[I])){const k=g[I];let Z=y[I];Z=Lt(Z);const te=f.yc(k);if(Z instanceof Qh)_.push(k);else{const X=hu(Z,te);X!=null&&(_.push(k),b.set(k,X))}}const S=new Vn(_);return new ob(b,S,f.fieldTransforms)}function pN(r,e,n,s=!1){return hu(n,r.Cc(s?4:3,e))}function hu(r,e){if(fb(r=Lt(r)))return Np("Unsupported field value:",e,r),hb(r,e);if(r instanceof xp)return(function(s,l){if(!lb(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const u=[];let f=0;for(const g of s){let y=hu(g,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,l){if((s=Lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=lt.fromDate(s);return{timestampValue:Th(l.serializer,u)}}if(s instanceof lt){const u=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Th(l.serializer,u)}}if(s instanceof Ui)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Yn)return{bytesValue:xT(l.serializer,s._byteString)};if(s instanceof At){const u=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:fp(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof zi)return(function(f,g){return{mapValue:{fields:{[tT]:{stringValue:nT},[yh]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return up(g.serializer,_)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Dh(s)}`)})(r,e)}function hb(r,e){const n={};return XE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(r,((s,l)=>{const u=hu(l,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function fb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof lt||r instanceof Ui||r instanceof Yn||r instanceof At||r instanceof xp||r instanceof zi)}function Np(r,e,n){if(!fb(n)||!YE(n)){const s=Dh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Um(r,e,n){if((e=Lt(e))instanceof uu)return e._internalPath;if(typeof e=="string")return Cp(r,e);throw wh("Field path arguments must be of type string or ",r,!1,void 0,n)}const gN=new RegExp("[~\\*/\\[\\]]");function Cp(r,e,n){if(e.search(gN)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new uu(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function wh(r,e,n,s,l){const u=s&&!s.isEmpty(),f=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${s}`),f&&(y+=` in document ${l}`),y+=")"),new le(K.INVALID_ARGUMENT,g+r+y)}function db(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,s,l,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yN extends mb{data(){return super.data()}}function Yh(r,e){return typeof e=="string"?Cp(r,e):e instanceof uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class pb extends Dp{}function xl(r,e,...n){let s=[];e instanceof Dp&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((y=>y instanceof Op)).length,g=u.filter((y=>y instanceof Kh)).length;if(f>1||f>0&&g>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Kh extends pb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Kh(e,n,s)}_apply(e){const n=this._parse(e);return gb(e._query,n),new sa(e.firestore,e.converter,Im(e._query,n))}_parse(e){const n=cu(e.firestore);return(function(u,f,g,y,_,b,S){let I;if(_.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){H0(S,b);const Z=[];for(const te of S)Z.push(B0(y,u,te));I={arrayValue:{values:Z}}}else I=B0(y,u,S)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||H0(S,b),I=pN(g,f,S,b==="in"||b==="not-in");return Mt.create(_,b,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qs(r,e,n){const s=e,l=Yh("where",r);return Kh._create(l,s,n)}class Op extends Dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Op(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:hi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let f=l;const g=u.getFlattenedFilters();for(const y of g)gb(f,y),f=Im(f,y)})(e._query,n),new sa(e.firestore,e.converter,Im(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vp extends pb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vp(e,n)}_apply(e){const n=(function(l,u,f){if(l.startAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $l(u,f)})(e._query,this._field,this._direction);return new sa(e.firestore,e.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new bo(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function vN(r,e="asc"){const n=e,s=Yh("orderBy",r);return Vp._create(s,n)}function B0(r,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cT(e)&&n.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!ve.isDocumentKey(s))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return s0(r,new ve(s))}if(n instanceof At)return s0(r,n._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dh(n)}.`)}function H0(r,e){if(!Array.isArray(r)||r.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gb(r,e){const n=(function(l,u){for(const f of l)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EN{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ps(e,((l,u)=>{s[l]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,l,u;const n=(u=(l=(s=e.fields)==null?void 0:s[yh].arrayValue)==null?void 0:l.values)==null?void 0:u.map((f=>bt(f.doubleValue)));return new zi(n)}convertGeoPoint(e){return new Ui(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Mh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const n=us(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);Xe(OT(s),9688,{name:e});const l=new Kl(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return l.isEqual(n)||mr(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $s extends mb{constructor(e,n,s,l,u,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Yh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$s._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:jt("string",$s._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class rh extends $s{data(e={}){return super.data(e)}}class so{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new jl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new rh(this._firestore,this._userDataWriter,s.key,s,new jl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((g=>{const y=new rh(l._firestore,l._userDataWriter,g.doc.key,g.doc,new jl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const y=new rh(l._firestore,l._userDataWriter,g.doc.key,g.doc,new jl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,b=-1;return g.type!==0&&(_=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),b=f.indexOf(g.doc.key)),{type:TN(g.type),doc:y,oldIndex:_,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(r){r=Kn(r,At);const e=Kn(r.firestore,ys);return oN(Gh(e),r._key).then((n=>SN(e,r,n)))}so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:jt("string",so._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class yb extends EN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function Rl(r){r=Kn(r,sa);const e=Kn(r.firestore,ys),n=Gh(e),s=new yb(e);return _N(r._query),lN(n,r._query).then((l=>new so(e,s,r,l)))}function AN(r,e,n){r=Kn(r,At);const s=Kn(r.firestore,ys),l=Mp(r.converter,e,n);return fu(s,[Ip(cu(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,hn.none())])}function sh(r,e,n,...s){r=Kn(r,At);const l=Kn(r.firestore,ys),u=cu(l);let f;return f=typeof(e=Lt(e))=="string"||e instanceof uu?cb(u,"updateDoc",r._key,e,n,s):ub(u,"updateDoc",r._key,e),fu(l,[f.toMutation(r._key,hn.exists(!0))])}function _b(r){return fu(Kn(r.firestore,ys),[new Uh(r._key,hn.none())])}function zm(r,e){const n=Kn(r.firestore,ys),s=On(r),l=Mp(r.converter,e);return fu(n,[Ip(cu(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,hn.exists(!1))]).then((()=>s))}function fu(r,e){return(function(s,l){const u=new hr;return s.asyncQueue.enqueueAndForget((async()=>XI(await aN(s),l,u))),u.promise})(Gh(r),e)}function SN(r,e,n){const s=n.docs.get(e._key),l=new yb(r);return new $s(r,l,e._key,s,new jl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=cu(e)}set(e,n,s){this._verifyNotCommitted();const l=hm(e,this._firestore),u=Mp(l.converter,n,s),f=Ip(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,s);return this._mutations.push(f.toMutation(l._key,hn.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const u=hm(e,this._firestore);let f;return f=typeof(n=Lt(n))=="string"||n instanceof uu?cb(this._dataReader,"WriteBatch.update",u._key,n,s,l):ub(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hm(e,this._firestore);return this._mutations=this._mutations.concat(new Uh(n._key,hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hm(r,e){if((r=Lt(r)).firestore!==e)throw new le(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(r){return Gh(r=Kn(r,ys)),new wN(r,(e=>fu(r,e)))}(function(e,n=!0){(function(l){vo=l})(go),ao(new Js("firestore",((s,{instanceIdentifier:l,options:u})=>{const f=s.getProvider("app").getImmediate(),g=new ys(new gx(s.getProvider("auth-internal")),new vx(f,s.getProvider("app-check-internal")),(function(_,b){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(_.options.projectId,b)})(f,l),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),rs(Qv,Yv,e),rs(Qv,Yv,"esm2020")})();const fm={apiKey:"AIzaSyC9DO5rZ4_7h-WP77T1OzETxTgMa4xmk9U",authDomain:"mybcbl.firebaseapp.com",projectId:"mybcbl",storageBucket:"mybcbl.firebasestorage.app",messagingSenderId:"28767389623",appId:"1:28767389623:web:36bc808db4e1d894870a32"};let Yc,ah,Tt,vb=!1;try{if(fm.apiKey==="YOUR_API_KEY"||fm.projectId==="YOUR_PROJECT_ID")throw new Error("بيانات اعتماد Firebase غير معدة. الرجاء تحديث ملف lib/firebase.ts");qS().length?Yc=Qm():Yc=nE(fm),ah=fx(Yc),Tt=cN(Yc),vb=!0}catch(r){console.error("خطأ في تهيئة Firebase:",r.message)}const xN=({children:r,onClose:e,title:n})=>p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start pt-20",onClick:e,role:"dialog","aria-modal":"true",children:p.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl","aria-label":"Close modal",children:"×"})]}),p.jsx("div",{className:"p-6",children:r})]})}),RN=({onSave:r,onCancel:e,existingSupplier:n})=>{const[s,l]=ge.useState({name:"",company:"",address:"",phone:"",nif:"",bankAccount:""});ge.useEffect(()=>{n&&l({name:n.name,company:n.company,address:n.address,phone:n.phone,nif:n.nif,bankAccount:n.bankAccount})},[n]);const u=g=>{l({...s,[g.target.name]:g.target.value})},f=g=>{g.preventDefault(),r({...s,id:n==null?void 0:n.id})};return p.jsxs("form",{onSubmit:f,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الاسم"}),p.jsx("input",{name:"name",value:s.name,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الشركة"}),p.jsx("input",{name:"company",value:s.company,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),p.jsx("input",{name:"address",value:s.address,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الهاتف"}),p.jsx("input",{name:"phone",value:s.phone,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الرقم التعريفي الجبائي (NIF)"}),p.jsx("input",{name:"nif",value:s.nif,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الحساب البنكي"}),p.jsx("input",{name:"bankAccount",value:s.bankAccount,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[p.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),p.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:n?"تحديث":"حفظ"})]})]})},IN=({suppliers:r,onSave:e,onCancel:n,existingLot:s})=>{const[l,u]=ge.useState({name:"",supplierId:"",description:"",assignmentDate:new Date().toISOString().split("T")[0]});ge.useEffect(()=>{s&&u({name:s.name,supplierId:s.supplierId,description:s.description,assignmentDate:s.assignmentDate})},[s]);const f=y=>{u({...l,[y.target.name]:y.target.value})},g=y=>{if(y.preventDefault(),!l.supplierId){alert("الرجاء اختيار ممون.");return}e({...l,id:s==null?void 0:s.id})};return p.jsxs("form",{onSubmit:g,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الحصة"}),p.jsx("input",{name:"name",value:l.name,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الممون"}),p.jsxs("select",{name:"supplierId",value:l.supplierId,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[p.jsx("option",{value:"",children:"-- اختر ممون --"}),r.map(y=>p.jsxs("option",{value:y.id,children:[y.name," - ",y.company]},y.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),p.jsx("textarea",{name:"description",value:l.description,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الإسناد"}),p.jsx("input",{type:"date",name:"assignmentDate",value:l.assignmentDate,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[p.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),p.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},NN=({lots:r,onSave:e,onCancel:n,existingProduct:s})=>{const[l,u]=ge.useState({name:"",unit:"",price:"",lotId:""});ge.useEffect(()=>{s&&u({name:s.name,unit:s.unit,price:String(s.price),lotId:s.lotId})},[s]);const f=y=>{u({...l,[y.target.name]:y.target.value})},g=y=>{if(y.preventDefault(),!l.lotId){alert("الرجاء اختيار حصة.");return}e({...l,price:Number(l.price),id:s==null?void 0:s.id})};return p.jsxs("form",{onSubmit:g,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم المنتج"}),p.jsx("input",{name:"name",value:l.name,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوحدة"}),p.jsx("input",{name:"unit",value:l.unit,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"السعر"}),p.jsx("input",{type:"number",name:"price",value:l.price,onChange:f,step:"0.01",className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الحصة"}),p.jsxs("select",{name:"lotId",value:l.lotId,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[p.jsx("option",{value:"",children:"-- اختر حصة --"}),r.map(y=>p.jsx("option",{value:y.id,children:y.name},y.id))]})]}),p.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[p.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),p.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},CN=({onSave:r,onCancel:e,existingResidence:n})=>{const[s,l]=ge.useState({residenceName:"",directorate:"",address:"",capacity:0});ge.useEffect(()=>{n&&l({residenceName:n.residenceName,directorate:n.directorate,address:n.address,capacity:n.capacity})},[n]);const u=g=>{l({...s,[g.target.name]:g.target.value})},f=g=>{g.preventDefault(),r({...s,capacity:Number(s.capacity),id:n==null?void 0:n.id})};return p.jsxs("form",{onSubmit:f,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الإقامة"}),p.jsx("input",{name:"residenceName",value:s.residenceName,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المديرية"}),p.jsx("input",{name:"directorate",value:s.directorate,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),p.jsx("input",{name:"address",value:s.address,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الطاقة الاستيعابية"}),p.jsx("input",{type:"number",name:"capacity",value:String(s.capacity),onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[p.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),p.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:n?"تحديث":"حفظ"})]})]})},DN=({onSave:r,onCancel:e,residences:n,existingUser:s})=>{const[l,u]=ge.useState({id:(s==null?void 0:s.id)||"",username:(s==null?void 0:s.username)||"",email:(s==null?void 0:s.email)||"",residenceId:(s==null?void 0:s.residenceId)||"",role:"user"});ge.useEffect(()=>{s&&u({id:s.id,username:s.username,email:s.email,residenceId:s.residenceId||"",role:"user"})},[s]);const f=y=>{u({...l,[y.target.name]:y.target.value})},g=y=>{if(y.preventDefault(),!l.id.trim()||!l.email.trim()||!l.username.trim()){alert("الرجاء تعبئة الحقول المطلوبة: المعرف، اسم المستخدم، والبريد الإلكتروني.");return}r({...l,id:l.id.trim()})};return p.jsxs("form",{onSubmit:g,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف المستخدم (UID)"}),p.jsx("input",{name:"id",value:l.id,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md bg-gray-50",required:!0,disabled:!!s}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"يتم الحصول على هذا المعرف من لوحة تحكم Firebase Authentication بعد إنشاء المستخدم."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم المستخدم"}),p.jsx("input",{name:"username",value:l.username,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),p.jsx("input",{type:"email",name:"email",value:l.email,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الإقامة"}),p.jsxs("select",{name:"residenceId",value:l.residenceId,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",children:[p.jsx("option",{value:"",children:"-- عدم التعيين لإقامة --"}),n.map(y=>p.jsx("option",{value:y.id,children:y.residenceName},y.id))]})]}),p.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[p.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),p.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},Il=({headers:r})=>p.jsx("thead",{className:"bg-gray-100",children:p.jsx("tr",{children:r.map(e=>p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:e},e))})}),Nl=({title:r,onAdd:e,children:n,headerActions:s})=>p.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-8",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r}),p.jsxs("div",{className:"flex items-center gap-2",children:[s,p.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[p.jsx(Bm,{className:"w-5 h-5"}),p.jsx("span",{children:"إضافة جديد"})]})]})]}),p.jsx("div",{className:"overflow-x-auto",children:p.jsx("table",{className:"min-w-full bg-white",children:n})})]}),ON=({suppliers:r,setSuppliers:e,lots:n,setLots:s,products:l,setProducts:u,residences:f,setResidences:g,users:y,setUsers:_,onPrintLots:b,onPrintProducts:S})=>{const[I,k]=ge.useState(null),Z=async(Q,ue,de)=>{const{id:be,...ee}=ue;try{if(be){const se=On(Tt,Q,be);await sh(se,ee),de(w=>w.map(x=>x.id===be?{id:be,...ee}:x))}else{const se=await zm(Ja(Tt,Q),ee);de(w=>[...w,{id:se.id,...ee}])}}catch(se){console.error(`Error saving ${Q}:`,se)}k(null)},te=async(Q,ue,de)=>{if(window.confirm("هل أنت متأكد أنك تريد حذف هذا العنصر؟ لا يمكن التراجع عن هذا الإجراء."))try{await _b(On(Tt,Q,ue)),de(be=>be.filter(ee=>ee.id!==ue))}catch(be){console.error(`Error deleting from ${Q}:`,be)}},X=async Q=>{try{const ue=On(Tt,"users",Q.id),{id:de,...be}=Q;await AN(ue,be),_(ee=>ee.some(w=>w.id===de)?ee.map(w=>w.id===de?Q:w):[...ee,Q])}catch(ue){console.error("Error saving user data:",ue),alert("حدث خطأ أثناء حفظ بيانات المستخدم.")}k(null)};return p.jsxs("div",{className:"p-6 animate-fade-in-up",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"الإعدادات"}),p.jsxs(Nl,{title:"إدارة المستخدمين",onAdd:()=>k({type:"user",title:"إضافة مستخدم جديد"}),children:[p.jsx(Il,{headers:["اسم المستخدم","البريد الإلكتروني","الإقامة","إجراء"]}),p.jsx("tbody",{children:y.filter(Q=>Q.role==="user").map(Q=>{const ue=f.find(de=>de.id===Q.residenceId);return p.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[p.jsx("td",{className:"py-3 px-4",children:Q.username}),p.jsx("td",{className:"py-3 px-4",children:Q.email}),p.jsx("td",{className:"py-3 px-4",children:(ue==null?void 0:ue.residenceName)||"غير معين"}),p.jsx("td",{className:"py-3 px-4",children:p.jsx("button",{onClick:()=>k({type:"user",title:"تعديل مستخدم",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:p.jsx(Ks,{className:"w-5 h-5"})})})]},Q.id)})})]}),p.jsxs(Nl,{title:"إدارة الإقامات",onAdd:()=>k({type:"residence",title:"إضافة إقامة جديدة"}),children:[p.jsx(Il,{headers:["اسم الإقامة","المديرية","العنوان","الطاقة","إجراءات"]}),p.jsx("tbody",{children:f.map(Q=>p.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[p.jsx("td",{className:"py-3 px-4",children:Q.residenceName}),p.jsx("td",{className:"py-3 px-4",children:Q.directorate}),p.jsx("td",{className:"py-3 px-4",children:Q.address}),p.jsx("td",{className:"py-3 px-4",children:Q.capacity}),p.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[p.jsx("button",{onClick:()=>k({type:"residence",title:"تعديل إقامة",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:p.jsx(Ks,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>te("residences",Q.id,g),className:"text-gray-500 hover:text-red-600",title:"حذف",children:p.jsx(Wa,{className:"w-5 h-5"})})]})]},Q.id))})]}),p.jsxs(Nl,{title:"إدارة الممونين",onAdd:()=>k({type:"supplier",title:"إضافة ممون جديد"}),children:[p.jsx(Il,{headers:["الاسم","الشركة","الهاتف","الرقم التعريفي","إجراءات"]}),p.jsx("tbody",{children:r.map(Q=>p.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[p.jsx("td",{className:"py-3 px-4",children:Q.name}),p.jsx("td",{className:"py-3 px-4",children:Q.company}),p.jsx("td",{className:"py-3 px-4",children:Q.phone}),p.jsx("td",{className:"py-3 px-4",children:Q.nif}),p.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[p.jsx("button",{onClick:()=>k({type:"supplier",title:"تعديل ممون",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:p.jsx(Ks,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>te("suppliers",Q.id,e),className:"text-gray-500 hover:text-red-600",title:"حذف",children:p.jsx(Wa,{className:"w-5 h-5"})})]})]},Q.id))})]}),p.jsxs(Nl,{title:"إدارة الحصص",onAdd:()=>k({type:"lot",title:"إضافة حصة جديدة"}),headerActions:p.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:[p.jsx(oh,{className:"w-5 h-5"}),p.jsx("span",{children:"طباعة"})]}),children:[p.jsx(Il,{headers:["اسم الحصة","الممون","تاريخ الإسناد","إجراءات"]}),p.jsx("tbody",{children:n.map(Q=>{var ue;return p.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[p.jsx("td",{className:"py-3 px-4",children:Q.name}),p.jsx("td",{className:"py-3 px-4",children:((ue=r.find(de=>de.id===Q.supplierId))==null?void 0:ue.company)||"N/A"}),p.jsx("td",{className:"py-3 px-4",children:Q.assignmentDate}),p.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[p.jsx("button",{onClick:()=>k({type:"lot",title:"تعديل حصة",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:p.jsx(Ks,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>te("lots",Q.id,s),className:"text-gray-500 hover:text-red-600",title:"حذف",children:p.jsx(Wa,{className:"w-5 h-5"})})]})]},Q.id)})})]}),p.jsxs(Nl,{title:"إدارة المنتجات",onAdd:()=>k({type:"product",title:"إضافة منتج جديد"}),headerActions:p.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:[p.jsx(oh,{className:"w-5 h-5"}),p.jsx("span",{children:"طباعة"})]}),children:[p.jsx(Il,{headers:["اسم المنتج","الوحدة","السعر","الحصة","إجراءات"]}),p.jsx("tbody",{children:l.map(Q=>{var ue;return p.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[p.jsx("td",{className:"py-3 px-4",children:Q.name}),p.jsx("td",{className:"py-3 px-4",children:Q.unit}),p.jsxs("td",{className:"py-3 px-4",children:[Q.price.toFixed(2)," د.ج"]}),p.jsx("td",{className:"py-3 px-4",children:((ue=n.find(de=>de.id===Q.lotId))==null?void 0:ue.name)||"N/A"}),p.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[p.jsx("button",{onClick:()=>k({type:"product",title:"تعديل منتج",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:p.jsx(Ks,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>te("products",Q.id,u),className:"text-gray-500 hover:text-red-600",title:"حذف",children:p.jsx(Wa,{className:"w-5 h-5"})})]})]},Q.id)})})]}),I&&p.jsxs(xN,{onClose:()=>k(null),title:I.title,children:[I.type==="supplier"&&p.jsx(RN,{onSave:Q=>Z("suppliers",Q,e),onCancel:()=>k(null),existingSupplier:I.data}),I.type==="lot"&&p.jsx(IN,{suppliers:r,onSave:Q=>Z("lots",Q,s),onCancel:()=>k(null),existingLot:I.data}),I.type==="product"&&p.jsx(NN,{lots:n,onSave:Q=>Z("products",Q,u),onCancel:()=>k(null),existingProduct:I.data}),I.type==="residence"&&p.jsx(CN,{onSave:Q=>Z("residences",Q,g),onCancel:()=>k(null),existingResidence:I.data}),I.type==="user"&&p.jsx(DN,{residences:f,onSave:X,onCancel:()=>k(null),existingUser:I.data})]})]})},VN=({order:r,supplier:e,lot:n,products:s,residence:l})=>p.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[p.jsxs("header",{className:"flex justify-between items-start pb-4 mb-8 border-b-2 border-gray-800",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold",children:"سند طلب"}),p.jsxs("p",{className:"text-gray-600",children:["رقم: ",r.orderNumber]})]}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"font-bold",children:l.directorate}),p.jsx("p",{className:"font-semibold text-lg",children:l.residenceName}),p.jsx("p",{className:"text-gray-600 text-sm",children:l.address}),p.jsxs("div",{className:"mt-2",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"التاريخ:"})," ",new Date(r.date).toLocaleDateString("ar-DZ")]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"الحصة:"})," ",(n==null?void 0:n.name)||"غير محدد"]})]})]})]}),p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"معلومات الممون"}),e?p.jsxs("div",{className:"grid grid-cols-2 gap-x-8 text-sm",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"الشركة:"})," ",e.company]}),p.jsxs("p",{children:[p.jsx("strong",{children:"الاسم:"})," ",e.name]}),p.jsxs("p",{children:[p.jsx("strong",{children:"العنوان:"})," ",e.address]}),p.jsxs("p",{children:[p.jsx("strong",{children:"الهاتف:"})," ",e.phone]})]}):p.jsx("p",{children:"غير متوفر"})]}),p.jsxs("section",{children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"تفاصيل الطلب"}),p.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-gray-100",children:[p.jsx("th",{className:"p-2 border",children:"المادة"}),p.jsx("th",{className:"p-2 border",children:"الوحدة"}),p.jsx("th",{className:"p-2 border",children:"الكمية"}),p.jsx("th",{className:"p-2 border",children:"سعر الوحدة"}),p.jsx("th",{className:"p-2 border",children:"المجموع"})]})}),p.jsx("tbody",{children:r.details.map(u=>{const f=s.find(g=>g.id===u.productId);return p.jsxs("tr",{children:[p.jsx("td",{className:"p-2 border",children:(f==null?void 0:f.name)||"منتج غير معروف"}),p.jsx("td",{className:"p-2 border",children:f==null?void 0:f.unit}),p.jsx("td",{className:"p-2 border text-center",children:u.quantity}),p.jsxs("td",{className:"p-2 border",children:[u.price.toFixed(2)," د.ج"]}),p.jsxs("td",{className:"p-2 border",children:[(u.quantity*u.price).toFixed(2)," د.ج"]})]},u.productId)})}),p.jsx("tfoot",{children:p.jsxs("tr",{className:"font-bold bg-gray-100",children:[p.jsx("td",{colSpan:4,className:"p-3 text-left border",children:"المجموع الكلي"}),p.jsxs("td",{className:"p-3 border",children:[r.totalAmount.toFixed(2)," د.ج"]})]})})]})]}),p.jsxs("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800 flex justify-between",children:[p.jsx("div",{className:"text-center w-1/2",children:p.jsx("p",{className:"font-semibold",children:"رئيس المصلحة"})}),p.jsx("div",{className:"text-center w-1/2",children:p.jsx("p",{className:"font-semibold",children:"المدير"})})]})]}),MN=({note:r,purchaseOrder:e,lot:n,products:s,residence:l})=>p.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[p.jsxs("header",{className:"flex justify-between items-start pb-4 mb-8 border-b-2 border-gray-800",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold",children:"سند استلام"}),p.jsxs("p",{className:"text-gray-600",children:["رقم: ",r.noteNumber]})]}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"font-bold",children:l.directorate}),p.jsx("p",{className:"font-semibold text-lg",children:l.residenceName}),p.jsx("p",{className:"text-gray-600 text-sm",children:l.address}),p.jsxs("div",{className:"mt-2",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"التاريخ:"})," ",new Date(r.receptionDate).toLocaleDateString("ar-DZ")]}),p.jsxs("p",{children:[p.jsx("strong",{children:"سند الطلب المرتبط:"})," ",(e==null?void 0:e.orderNumber)||r.purchaseOrderId]})]})]})]}),p.jsxs("section",{className:"mb-8",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"معلومات الحصة"}),p.jsxs("p",{children:[p.jsx("strong",{children:"الحصة:"})," ",(n==null?void 0:n.name)||"غير محددة"]})]}),p.jsxs("section",{children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"المواد"}),p.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-gray-100",children:[p.jsx("th",{className:"p-2 border w-3/4",children:"المنتج"}),p.jsx("th",{className:"p-2 border w-1/4",children:"الكمية"})]})}),p.jsx("tbody",{children:e==null?void 0:e.details.map(u=>{const f=s.find(g=>g.id===u.productId);return p.jsxs("tr",{children:[p.jsx("td",{className:"p-2 border",children:(f==null?void 0:f.name)||"منتج غير معروف"}),p.jsx("td",{className:"p-2 border text-center",children:u.quantity})]},u.productId)})})]})]}),p.jsx("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800 flex justify-between",children:p.jsx("div",{className:"text-center w-1/2",children:p.jsx("p",{className:"font-semibold",children:"أمين المخزن"})})})]}),jN=({lots:r,suppliers:e})=>p.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[p.jsxs("header",{className:"pb-4 mb-8 border-b-2 border-gray-800",children:[p.jsx("h1",{className:"text-3xl font-bold",children:"قائمة الحصص"}),p.jsxs("p",{className:"text-gray-600",children:["تاريخ الطباعة: ",new Date().toLocaleDateString("ar-DZ")]})]}),p.jsx("section",{children:p.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-gray-100",children:[p.jsx("th",{className:"p-2 border",children:"اسم الحصة"}),p.jsx("th",{className:"p-2 border",children:"الممون"}),p.jsx("th",{className:"p-2 border",children:"تاريخ الإسناد"}),p.jsx("th",{className:"p-2 border",children:"الوصف"})]})}),p.jsx("tbody",{children:r.map(n=>{const s=e.find(l=>l.id===n.supplierId);return p.jsxs("tr",{children:[p.jsx("td",{className:"p-2 border",children:n.name}),p.jsx("td",{className:"p-2 border",children:(s==null?void 0:s.company)||"غير معروف"}),p.jsx("td",{className:"p-2 border",children:n.assignmentDate}),p.jsx("td",{className:"p-2 border",children:n.description})]},n.id)})})]})}),p.jsx("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800",children:p.jsx("p",{className:"text-center text-gray-500",children:"نهاية التقرير"})})]}),LN=({products:r,lots:e})=>p.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[p.jsxs("header",{className:"pb-4 mb-8 border-b-2 border-gray-800",children:[p.jsx("h1",{className:"text-3xl font-bold",children:"قائمة المنتجات"}),p.jsxs("p",{className:"text-gray-600",children:["تاريخ الطباعة: ",new Date().toLocaleDateString("ar-DZ")]})]}),p.jsx("section",{children:p.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-gray-100",children:[p.jsx("th",{className:"p-2 border",children:"اسم المنتج"}),p.jsx("th",{className:"p-2 border",children:"الوحدة"}),p.jsx("th",{className:"p-2 border",children:"السعر"}),p.jsx("th",{className:"p-2 border",children:"الحصة"})]})}),p.jsx("tbody",{children:r.map(n=>{const s=e.find(l=>l.id===n.lotId);return p.jsxs("tr",{children:[p.jsx("td",{className:"p-2 border",children:n.name}),p.jsx("td",{className:"p-2 border",children:n.unit}),p.jsxs("td",{className:"p-2 border",children:[n.price.toFixed(2)," د.ج"]}),p.jsx("td",{className:"p-2 border",children:(s==null?void 0:s.name)||"غير معروف"})]},n.id)})})]})}),p.jsx("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800",children:p.jsx("p",{className:"text-center text-gray-500",children:"نهاية التقرير"})})]}),kN=({onLogin:r})=>{const[e,n]=ge.useState(""),[s,l]=ge.useState(""),[u,f]=ge.useState(""),[g,y]=ge.useState(!1),_=async b=>{b.preventDefault(),y(!0),f("");const S=await r(e,s);S.success||f(S.error||"حدث خطأ غير متوقع."),y(!1)};return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:p.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg",children:[p.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800",children:"تسجيل الدخول"}),p.jsx("p",{className:"text-center text-gray-500",children:"نظام تسيير سندات الطلب والاستلام"}),p.jsx("p",{className:"text-sm text-center text-gray-600 px-4",children:"الرجاء استخدام بيانات الاعتماد التي قدمها المسؤول. للمساعدة، يرجى التواصل مع مشرف النظام."}),p.jsxs("form",{onSubmit:_,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),p.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:b=>n(b.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"البريد الإلكتروني"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),p.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:b=>l(b.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"كلمة المرور"})]}),u&&p.jsx("p",{className:"text-sm text-red-600 text-center",children:u}),p.jsx("div",{children:p.jsx("button",{type:"submit",disabled:g,className:"w-full px-4 py-2 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-300 disabled:bg-blue-300",children:g?"...جاري الدخول":"دخول"})})]}),p.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-md text-xs text-gray-600",children:[p.jsx("p",{className:"font-semibold text-center mb-1",children:".2025 DeepTech. All rights reserved ©"}),p.jsx("p",{className:"font-semibold text-center mb-1",children:"Built by ARAB Yassine"}),p.jsx("p",{className:"font-semibold text-center mb-1",children:"Email: deeptech333@gmail.com"}),p.jsx("p",{className:"font-semibold text-center mb-1",children:"Mobile: 0666498480"})]})]})})},PN=({settings:r,onSave:e})=>{const[n,s]=ge.useState(r),[l,u]=ge.useState(""),[f,g]=ge.useState(!1);ge.useEffect(()=>{s(r)},[r]);const y=b=>{const{name:S,value:I}=b.target;s(k=>({...k,[S]:I}))},_=async b=>{b.preventDefault(),g(!0);const S={...n,capacity:Number(n.capacity)||0};await e(S),g(!1),u("تم حفظ الإعدادات بنجاح!"),setTimeout(()=>u(""),3e3)};return p.jsx("div",{className:"p-6 animate-fade-in-up",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6 border-b pb-4",children:"إعدادات الإقامة"}),p.jsxs("form",{onSubmit:_,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"directorate",className:"block text-sm font-medium text-gray-700 mb-1",children:"المديرية"}),p.jsx("input",{type:"text",id:"directorate",name:"directorate",value:n.directorate,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"residenceName",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإقامة"}),p.jsx("input",{type:"text",id:"residenceName",name:"residenceName",value:n.residenceName,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),p.jsx("input",{type:"text",id:"address",name:"address",value:n.address,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"capacity",className:"block text-sm font-medium text-gray-700 mb-1",children:"الطاقة الاستيعابية"}),p.jsx("input",{type:"number",id:"capacity",name:"capacity",value:n.capacity,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0,min:"0"})]}),p.jsxs("div",{className:"pt-4 flex items-center justify-end",children:[l&&p.jsx("p",{className:"text-green-600 ml-4 transition-opacity duration-300",children:l}),p.jsx("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:bg-blue-300",children:f?"...جاري الحفظ":"حفظ التغييرات"})]})]})]})})},UN=()=>p.jsxs("div",{className:"bg-red-100 border-b-2 border-red-500 text-red-800 p-4 text-center fixed top-0 left-0 right-0 z-50",dir:"rtl",children:[p.jsx("p",{className:"font-bold",children:"وضع العرض التجريبي: التطبيق غير متصل بقاعدة البيانات."}),p.jsxs("p",{children:["لتفعيل كافة الميزات، يرجى إعداد بيانات اعتماد Firebase في الملف ",p.jsx("code",{className:"bg-red-200 px-1 rounded mx-1",dir:"ltr",children:"lib/firebase.ts"}),"."]})]}),dm=({pos:r,dns:e})=>p.jsxs("div",{className:"p-6 animate-fade-in-up",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"لوحة التحكم"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-blue-500",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"إجمالي سندات الطلب"}),p.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:r.length})]}),p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-green-500",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"إجمالي سندات الاستلام"}),p.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:e.length})]}),p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-yellow-500",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"طلبات في الانتظار"}),p.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:r.filter(n=>n.status===cn.OPEN||n.status===cn.PARTIALLY_RECEIVED).length})]})]})]}),zN=({purchaseOrders:r,lots:e,suppliers:n,residences:s,setView:l,onPrint:u,onEdit:f,onDelete:g,user:y})=>{const _=b=>{switch(b){case cn.OPEN:return"bg-yellow-100 text-yellow-800";case cn.PARTIALLY_RECEIVED:return"bg-blue-100 text-blue-800";case cn.FULLY_RECEIVED:return"bg-green-100 text-green-800";case cn.CANCELLED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return p.jsxs("div",{className:"p-6 animate-fade-in-up",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"سندات الطلب"}),(y==null?void 0:y.role)!=="admin"&&p.jsxs("button",{onClick:()=>l("newPurchaseOrder"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[p.jsx(Bm,{className:"w-5 h-5"}),p.jsx("span",{children:"سند طلب جديد"})]})]}),p.jsx("div",{className:"bg-white p-4 rounded-xl shadow-lg overflow-x-auto",children:p.jsxs("table",{className:"min-w-full bg-white",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"رقم السند"}),(y==null?void 0:y.role)==="admin"&&p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الإقامة"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"التاريخ"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الممون"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"المبلغ الإجمالي"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الحالة"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"إجراءات"})]})}),p.jsx("tbody",{children:r.map(b=>{const S=n.find(Z=>Z.id===b.supplierId),I=s.find(Z=>Z.id===b.residenceId),k=b.status===cn.OPEN;return p.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[p.jsx("td",{className:"py-3 px-4",children:b.orderNumber}),(y==null?void 0:y.role)==="admin"&&p.jsx("td",{className:"py-3 px-4",children:(I==null?void 0:I.residenceName)||"غير معروف"}),p.jsx("td",{className:"py-3 px-4",children:b.date}),p.jsx("td",{className:"py-3 px-4",children:(S==null?void 0:S.company)||"غير معروف"}),p.jsxs("td",{className:"py-3 px-4",children:[b.totalAmount.toFixed(2)," د.ج"]}),p.jsx("td",{className:"py-3 px-4",children:p.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${_(b.status)}`,children:b.status})}),p.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[p.jsx("button",{onClick:()=>u(b.id),className:"text-gray-500 hover:text-blue-600",title:"طباعة",children:p.jsx(oh,{className:"w-5 h-5"})}),(y==null?void 0:y.role)!=="admin"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>f(b),className:`text-gray-500 ${k?"hover:text-yellow-600":"opacity-50 cursor-not-allowed"}`,title:"تعديل",disabled:!k,children:p.jsx(Ks,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>g(b.id),className:"text-gray-500 hover:text-red-600",title:"حذف",children:p.jsx(Wa,{className:"w-5 h-5"})})]})]})]},b.id)})})]})})]})},qN=({deliveryNotes:r,purchaseOrders:e,residences:n,setView:s,onPrint:l,onEdit:u,onDelete:f,user:g})=>p.jsxs("div",{className:"p-6 animate-fade-in-up",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"سندات الاستلام"}),(g==null?void 0:g.role)!=="admin"&&p.jsxs("button",{onClick:()=>s("newDeliveryNote"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[p.jsx(Bm,{className:"w-5 h-5"}),p.jsx("span",{children:"سند استلام جديد"})]})]}),p.jsx("div",{className:"bg-white p-4 rounded-xl shadow-lg overflow-x-auto",children:p.jsxs("table",{className:"min-w-full bg-white",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"رقم السند"}),(g==null?void 0:g.role)==="admin"&&p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الإقامة"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"تاريخ الاستلام"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"سند الطلب المرتبط"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الحالة"}),p.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"إجراءات"})]})}),p.jsx("tbody",{children:r.map(y=>{const _=n.find(S=>S.id===y.residenceId),b=e.find(S=>S.id===y.purchaseOrderId);return p.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[p.jsx("td",{className:"py-3 px-4",children:y.noteNumber}),(g==null?void 0:g.role)==="admin"&&p.jsx("td",{className:"py-3 px-4",children:(_==null?void 0:_.residenceName)||"غير معروف"}),p.jsx("td",{className:"py-3 px-4",children:y.receptionDate}),p.jsx("td",{className:"py-3 px-4",children:(b==null?void 0:b.orderNumber)||y.purchaseOrderId}),p.jsx("td",{className:"py-3 px-4",children:p.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${y.status==="كامل"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:y.status})}),p.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[p.jsx("button",{onClick:()=>l(y.id),className:"text-gray-500 hover:text-green-600",title:"طباعة",children:p.jsx(oh,{className:"w-5 h-5"})}),(g==null?void 0:g.role)!=="admin"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>u(y),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:p.jsx(Ks,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>f(y),className:"text-gray-500 hover:text-red-600",title:"حذف",children:p.jsx(Wa,{className:"w-5 h-5"})})]})]})]},y.id)})})]})})]}),BN=()=>{const r=!vb,[e,n]=ge.useState("dashboard"),[s,l]=ge.useState(null),[u,f]=ge.useState(!r),[g,y]=ge.useState([]),[_,b]=ge.useState([]),[S,I]=ge.useState([]),[k,Z]=ge.useState([]),[te,X]=ge.useState([]),[Q,ue]=ge.useState([]),[de,be]=ge.useState([]),[ee,se]=ge.useState(null),[w,x]=ge.useState(null),[R,V]=ge.useState(null),D=(ie,ne)=>{l(ne||null),n(ie)};ge.useEffect(()=>{if(r)return;const ie=e2(ah,ne=>{se(ne)});return()=>ie()},[r]),ge.useEffect(()=>{if(r)return;(async()=>{if(ee){const ne=On(Tt,"users",ee.uid),he=await bN(ne);if(he.exists()){const xe=he.data();x({id:he.id,username:xe.username||"مستخدم",email:xe.email||ee.email||"",role:xe.role||"user",residenceId:xe.residenceId})}else console.error("User profile not found in Firestore"),x(null)}else x(null)})()},[ee,r]),ge.useEffect(()=>{if(r||!w){f(!1);return}(async()=>{f(!0);try{const ne=async(kt,je,zt=!1)=>{const tn=w.role!=="admin";if(zt&&tn&&!w.residenceId)return[];const bn=Ja(Tt,kt),Xn=[];let ht=!1;zt&&tn&&w.residenceId?(Xn.push(Qs("residenceId","==",w.residenceId)),ht=!0):je&&Xn.push(vN(je,"desc"));const gt=xl(bn,...Xn);let aa=(await Rl(gt)).docs.map(Hi=>({id:Hi.id,...Hi.data()}));return ht&&je&&aa.sort((Hi,Gt)=>{const fi=Hi[je],yr=Gt[je];return fi<yr?1:fi>yr?-1:0}),aa},[he,xe,Ee,Ne,St,fn]=await Promise.all([ne("suppliers"),ne("lots"),ne("products"),ne("residences"),ne("purchase_orders","date",!0),ne("delivery_notes","receptionDate",!0)]);if(y(he),b(xe),I(Ee),ue(Ne),Z(St),X(fn),w.role==="admin"){const kt=await ne("users");be(kt)}}catch(ne){console.error("Error fetching data:",ne),y([]),b([]),I([]),Z([]),X([]),ue([]),be([])}finally{f(!1)}})()},[w,r]),ge.useEffect(()=>{if(R){const ie=()=>V(null);window.addEventListener("afterprint",ie);const ne=setTimeout(()=>window.print(),100);return()=>{clearTimeout(ne),window.removeEventListener("afterprint",ie)}}},[R]);const L=async(ie,ne)=>{if(r)return alert("وضع العرض التجريبي: لا يمكن تسجيل الدخول لأن قاعدة البيانات غير معدة."),{success:!1,error:"قاعدة البيانات غير معدة. يرجى مراجعة التعليمات في الملف lib/firebase.ts"};try{return await Zw(ah,ie,ne),n("dashboard"),{success:!0}}catch(he){return console.error("Login error:",he),he.code==="auth/invalid-credential"||he.code==="auth/user-not-found"||he.code==="auth/wrong-password"?{success:!1,error:"بيانات الاعتماد غير صحيحة. يرجى التأكد من إنشاء المستخدمين التجريبيين (admin@example.com و user@example.com) في لوحة تحكم Firebase Authentication كما هو موضح في دليل الإعداد."}:{success:!1,error:"حدث خطأ غير متوقع أثناء تسجيل الدخول."}}},N=async()=>{r||(await t2(ah),x(null),se(null))},it=async ie=>{if(r){alert("وضع العرض التجريبي: لا يمكن حفظ البيانات.");return}if((w==null?void 0:w.role)==="admin"||!(w!=null&&w.residenceId)){alert("خطأ: يجب أن تكون مسجلاً كمستخدم إقامة لإدارة سندات الطلب.");return}const{id:ne,...he}=ie,xe={...he,residenceId:w.residenceId};try{if(ne){const Ee=On(Tt,"purchase_orders",ne);await sh(Ee,xe),Z(Ne=>Ne.map(St=>St.id===ne?{id:ne,...xe}:St))}else{const Ee=Ja(Tt,"purchase_orders"),Ne=xl(Ee,Qs("residenceId","==",w.residenceId),Qs("orderNumber","==",ie.orderNumber));if(!(await Rl(Ne)).empty){alert("يوجد سند طلب بنفس الرقم مسجل مسبقًا في هذه الإقامة.");return}const kt={id:(await zm(Ee,xe)).id,...xe};Z(je=>[kt,...je].sort((zt,tn)=>tn.date.localeCompare(zt.date)))}D("purchaseOrders")}catch(Ee){console.error("Error saving PO:",Ee)}},dt=async(ie,ne)=>{if(r){alert("وضع العرض التجريبي: لا يمكن حفظ البيانات.");return}if((w==null?void 0:w.role)==="admin"||!(w!=null&&w.residenceId)){alert("خطأ: يجب أن تكون مسجلاً كمستخدم إقامة لإنشاء سند استلام.");return}const{id:he,...xe}=ie,Ee={...xe,residenceId:w.residenceId};try{if(he){const Ne=F0(Tt),St=On(Tt,"delivery_notes",he),fn=On(Tt,"purchase_orders",Ee.purchaseOrderId);Ne.update(St,Ee),Ne.update(fn,{status:ne}),await Ne.commit(),X(kt=>kt.map(je=>je.id===he?{id:he,...Ee}:je)),Z(kt=>kt.map(je=>je.id===Ee.purchaseOrderId?{...je,status:ne}:je))}else{const Ne=Ja(Tt,"delivery_notes"),St=xl(Ne,Qs("residenceId","==",w.residenceId),Qs("noteNumber","==",ie.noteNumber));if(!(await Rl(St)).empty){alert("يوجد سند استلام بنفس الرقم مسجل مسبقًا في هذه الإقامة.");return}const je={id:(await zm(Ne,Ee)).id,...Ee};X(tn=>[je,...tn].sort((bn,Xn)=>Xn.receptionDate.localeCompare(bn.receptionDate)));const zt=On(Tt,"purchase_orders",Ee.purchaseOrderId);await sh(zt,{status:ne}),Z(tn=>tn.map(bn=>bn.id===Ee.purchaseOrderId?{...bn,status:ne}:bn))}D("deliveryNotes")}catch(Ne){console.error("Error saving DN:",Ne)}},F=async ie=>{if(r)return alert("وضع العرض التجريبي: لا يمكن حذف البيانات.");const ne=Ja(Tt,"delivery_notes"),he=xl(ne,Qs("purchaseOrderId","==",ie));if(!(await Rl(he)).empty){alert("لا يمكن حذف سند الطلب هذا لأنه يحتوي على سندات استلام مرتبطة به. يرجى حذف سندات الاستلام أولاً.");return}if(window.confirm("هل أنت متأكد أنك تريد حذف سند الطلب هذا؟"))try{await _b(On(Tt,"purchase_orders",ie)),Z(Ee=>Ee.filter(Ne=>Ne.id!==ie))}catch(Ee){console.error("Error deleting PO:",Ee)}},oe=async ie=>{if(r)return alert("وضع العرض التجريبي: لا يمكن حذف البيانات.");if(window.confirm("هل أنت متأكد أنك تريد حذف سند الاستلام هذا؟ سيتم تحديث حالة سند الطلب المرتبط."))try{const ne=Ja(Tt,"delivery_notes"),he=xl(ne,Qs("purchaseOrderId","==",ie.purchaseOrderId)),Ee=(await Rl(he)).docs.map(je=>({id:je.id,...je.data()})).filter(je=>je.id!==ie.id);let Ne=cn.OPEN;Ee.length>0&&(Ne=cn.PARTIALLY_RECEIVED);const St=F0(Tt),fn=On(Tt,"delivery_notes",ie.id);St.delete(fn);const kt=On(Tt,"purchase_orders",ie.purchaseOrderId);St.update(kt,{status:Ne}),await St.commit(),X(je=>je.filter(zt=>zt.id!==ie.id)),Z(je=>je.map(zt=>zt.id===ie.purchaseOrderId?{...zt,status:Ne}:zt))}catch(ne){console.error("Error deleting DN:",ne)}},ye=ie=>{const ne=k.find(he=>he.id===ie);if(ne){const he=Q.find(Ne=>Ne.id===ne.residenceId);if(!he)return alert("لم يتم العثور على بيانات الإقامة لهذا السند.");const xe=g.find(Ne=>Ne.id===ne.supplierId),Ee=_.find(Ne=>Ne.id===ne.lotId);V(p.jsx(VN,{order:ne,supplier:xe,lot:Ee,products:S,residence:he}))}},qe=ie=>{const ne=te.find(he=>he.id===ie);if(ne){const he=Q.find(Ne=>Ne.id===ne.residenceId);if(!he)return alert("لم يتم العثور على بيانات الإقامة لهذا السند.");const xe=k.find(Ne=>Ne.id===ne.purchaseOrderId),Ee=_.find(Ne=>Ne.id===(xe==null?void 0:xe.lotId));V(p.jsx(MN,{note:ne,purchaseOrder:xe,lot:Ee,products:S,residence:he}))}},Qe=()=>{V(p.jsx(jN,{lots:_,suppliers:g}))},M=()=>{V(p.jsx(LN,{products:S,lots:_}))},$=async ie=>{if(r){alert("وضع العرض التجريبي: لا يمكن حفظ البيانات.");return}try{const{id:ne,...he}=ie,xe=On(Tt,"residences",ne);await sh(xe,he),ue(Ee=>Ee.map(Ne=>Ne.id===ne?ie:Ne))}catch(ne){console.error("Error saving residence settings:",ne)}},ae=ge.useMemo(()=>k.filter(ie=>ie.status===cn.OPEN||ie.status===cn.PARTIALLY_RECEIVED),[k]);if(u)return p.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:p.jsx("div",{className:"text-xl font-semibold",children:"جاري تحميل البيانات..."})});if(!w)return p.jsxs("div",{className:"relative min-h-screen",children:[r&&p.jsx(UN,{}),p.jsx(kN,{onLogin:L})]});const ce=()=>{if(e==="settings"&&w.role!=="admin"||e==="residenceSettings"&&w.role!=="user")return D("dashboard"),p.jsx(dm,{pos:k,dns:te});switch(e){case"dashboard":return p.jsx(dm,{pos:k,dns:te});case"purchaseOrders":return p.jsx(zN,{purchaseOrders:k,lots:_,suppliers:g,residences:Q,setView:D,onPrint:ye,onEdit:ne=>D("editPurchaseOrder",ne),onDelete:F,user:w});case"deliveryNotes":return p.jsx(qN,{deliveryNotes:te,purchaseOrders:k,residences:Q,setView:D,onPrint:qe,onEdit:ne=>D("editDeliveryNote",ne),onDelete:oe,user:w});case"newPurchaseOrder":return p.jsx(fv,{lots:_,products:S,suppliers:g,onSave:it,onCancel:()=>D("purchaseOrders")});case"editPurchaseOrder":return p.jsx(fv,{lots:_,products:S,suppliers:g,onSave:it,onCancel:()=>D("purchaseOrders"),existingOrder:s});case"newDeliveryNote":return p.jsx(dv,{lots:_,openPurchaseOrders:ae,products:S,suppliers:g,onSave:dt,onCancel:()=>D("deliveryNotes")});case"editDeliveryNote":return p.jsx(dv,{lots:_,openPurchaseOrders:[...ae,k.find(ne=>ne.id===(s==null?void 0:s.purchaseOrderId))],products:S,suppliers:g,onSave:dt,onCancel:()=>D("deliveryNotes"),existingNote:s});case"settings":return p.jsx(ON,{suppliers:g,setSuppliers:y,lots:_,setLots:b,products:S,setProducts:I,residences:Q,setResidences:ue,users:de,setUsers:be,onPrintLots:Qe,onPrintProducts:M});case"residenceSettings":const ie=Q.find(ne=>ne.id===w.residenceId);return ie?p.jsx(PN,{settings:ie,onSave:$}):p.jsx("div",{children:"جاري تحميل إعدادات الإقامة..."});default:return p.jsx(dm,{pos:k,dns:te})}};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex bg-gray-100 min-h-screen font-sans",children:[p.jsx(d1,{currentView:e,setView:D,user:w,onLogout:N}),p.jsx("main",{className:"flex-1 pr-64",children:ce()})]}),R&&p.jsx("div",{className:"print-container",children:R})]})},Eb=document.getElementById("root");if(!Eb)throw new Error("Could not find root element to mount to");const HN=l1.createRoot(Eb);HN.render(p.jsx(e1.StrictMode,{children:p.jsx(BN,{})}));
