(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Gv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yd={exports:{}},wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function Z1(){if(t0)return wo;t0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return wo.Fragment=e,wo.jsx=n,wo.jsxs=n,wo}var n0;function J1(){return n0||(n0=1,Yd.exports=Z1()),Yd.exports}var m=J1(),Kd={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function W1(){if(i0)return we;i0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.iterator;function z(M){return M===null||typeof M!="object"?null:(M=N&&M[N]||M["@@iterator"],typeof M=="function"?M:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,J={};function ce(M,$,re){this.props=M,this.context=$,this.refs=J,this.updater=re||Y}ce.prototype.isReactComponent={},ce.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},ce.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Q(){}Q.prototype=ce.prototype;function te(M,$,re){this.props=M,this.context=$,this.refs=J,this.updater=re||Y}var pe=te.prototype=new Q;pe.constructor=te,ee(pe,ce.prototype),pe.isPureReactComponent=!0;var De=Array.isArray;function ge(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function w(M,$,re){var oe=re.ref;return{$$typeof:r,type:M,key:$,ref:oe!==void 0?oe:null,props:re}}function D(M,$){return w(M.type,$,M.props)}function O(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function j(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(re){return $[re]})}var R=/\/+/g;function Ze(M,$){return typeof M=="object"&&M!==null&&M.key!=null?j(""+M.key):$.toString(36)}function gt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ge,ge):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function F(M,$,re,oe,be){var Re=typeof M;(Re==="undefined"||Re==="boolean")&&(M=null);var ae=!1;if(M===null)ae=!0;else switch(Re){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(M.$$typeof){case r:case e:ae=!0;break;case T:return ae=M._init,F(ae(M._payload),$,re,oe,be)}}if(ae)return be=be(M),ae=oe===""?"."+Ze(M,0):oe,De(be)?(re="",ae!=null&&(re=ae.replace(R,"$&/")+"/"),F(be,$,re,"",function(Be){return Be})):be!=null&&(O(be)&&(be=D(be,re+(be.key==null||M&&M.key===be.key?"":(""+be.key).replace(R,"$&/")+"/")+ae)),$.push(be)),1;ae=0;var le=oe===""?".":oe+":";if(De(M))for(var fe=0;fe<M.length;fe++)oe=M[fe],Re=le+Ze(oe,fe),ae+=F(oe,$,re,Re,be);else if(fe=z(M),typeof fe=="function")for(M=fe.call(M),fe=0;!(oe=M.next()).done;)oe=oe.value,Re=le+Ze(oe,fe++),ae+=F(oe,$,re,Re,be);else if(Re==="object"){if(typeof M.then=="function")return F(gt(M),$,re,oe,be);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ae}function ie(M,$,re){if(M==null)return M;var oe=[],be=0;return F(M,oe,"","",function(Re){return $.call(re,Re,be++)}),oe}function ye(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(re){(M._status===0||M._status===-1)&&(M._status=1,M._result=re)},function(re){(M._status===0||M._status===-1)&&(M._status=2,M._result=re)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ke={map:ie,forEach:function(M,$,re){ie(M,function(){$.apply(this,arguments)},re)},count:function(M){var $=0;return ie(M,function(){$++}),$},toArray:function(M){return ie(M,function($){return $})||[]},only:function(M){if(!O(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return we.Activity=x,we.Children=Ke,we.Component=ce,we.Fragment=n,we.Profiler=o,we.PureComponent=te,we.StrictMode=s,we.Suspense=y,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,we.__COMPILER_RUNTIME={__proto__:null,c:function(M){return I.H.useMemoCache(M)}},we.cache=function(M){return function(){return M.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(M,$,re){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var oe=ee({},M.props),be=M.key;if($!=null)for(Re in $.key!==void 0&&(be=""+$.key),$)!A.call($,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&$.ref===void 0||(oe[Re]=$[Re]);var Re=arguments.length-2;if(Re===1)oe.children=re;else if(1<Re){for(var ae=Array(Re),le=0;le<Re;le++)ae[le]=arguments[le+2];oe.children=ae}return w(M.type,be,oe)},we.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},we.createElement=function(M,$,re){var oe,be={},Re=null;if($!=null)for(oe in $.key!==void 0&&(Re=""+$.key),$)A.call($,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(be[oe]=$[oe]);var ae=arguments.length-2;if(ae===1)be.children=re;else if(1<ae){for(var le=Array(ae),fe=0;fe<ae;fe++)le[fe]=arguments[fe+2];be.children=le}if(M&&M.defaultProps)for(oe in ae=M.defaultProps,ae)be[oe]===void 0&&(be[oe]=ae[oe]);return w(M,Re,be)},we.createRef=function(){return{current:null}},we.forwardRef=function(M){return{$$typeof:g,render:M}},we.isValidElement=O,we.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:ye}},we.memo=function(M,$){return{$$typeof:_,type:M,compare:$===void 0?null:$}},we.startTransition=function(M){var $=I.T,re={};I.T=re;try{var oe=M(),be=I.S;be!==null&&be(re,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ge,qe)}catch(Re){qe(Re)}finally{$!==null&&re.types!==null&&($.types=re.types),I.T=$}},we.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},we.use=function(M){return I.H.use(M)},we.useActionState=function(M,$,re){return I.H.useActionState(M,$,re)},we.useCallback=function(M,$){return I.H.useCallback(M,$)},we.useContext=function(M){return I.H.useContext(M)},we.useDebugValue=function(){},we.useDeferredValue=function(M,$){return I.H.useDeferredValue(M,$)},we.useEffect=function(M,$){return I.H.useEffect(M,$)},we.useEffectEvent=function(M){return I.H.useEffectEvent(M)},we.useId=function(){return I.H.useId()},we.useImperativeHandle=function(M,$,re){return I.H.useImperativeHandle(M,$,re)},we.useInsertionEffect=function(M,$){return I.H.useInsertionEffect(M,$)},we.useLayoutEffect=function(M,$){return I.H.useLayoutEffect(M,$)},we.useMemo=function(M,$){return I.H.useMemo(M,$)},we.useOptimistic=function(M,$){return I.H.useOptimistic(M,$)},we.useReducer=function(M,$,re){return I.H.useReducer(M,$,re)},we.useRef=function(M){return I.H.useRef(M)},we.useState=function(M){return I.H.useState(M)},we.useSyncExternalStore=function(M,$,re){return I.H.useSyncExternalStore(M,$,re)},we.useTransition=function(){return I.H.useTransition()},we.version="19.2.0",we}var r0;function qm(){return r0||(r0=1,Kd.exports=W1()),Kd.exports}var me=qm();const eA=Gv(me);var Xd={exports:{}},xo={},$d={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function tA(){return s0||(s0=1,(function(r){function e(F,ie){var ye=F.length;F.push(ie);e:for(;0<ye;){var qe=ye-1>>>1,Ke=F[qe];if(0<o(Ke,ie))F[qe]=ie,F[ye]=Ke,ye=qe;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var ie=F[0],ye=F.pop();if(ye!==ie){F[0]=ye;e:for(var qe=0,Ke=F.length,M=Ke>>>1;qe<M;){var $=2*(qe+1)-1,re=F[$],oe=$+1,be=F[oe];if(0>o(re,ye))oe<Ke&&0>o(be,re)?(F[qe]=be,F[oe]=ye,qe=oe):(F[qe]=re,F[$]=ye,qe=$);else if(oe<Ke&&0>o(be,ye))F[qe]=be,F[oe]=ye,qe=oe;else break e}}return ie}function o(F,ie){var ye=F.sortIndex-ie.sortIndex;return ye!==0?ye:F.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var y=[],_=[],T=1,x=null,N=3,z=!1,Y=!1,ee=!1,J=!1,ce=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function pe(F){for(var ie=n(_);ie!==null;){if(ie.callback===null)s(_);else if(ie.startTime<=F)s(_),ie.sortIndex=ie.expirationTime,e(y,ie);else break;ie=n(_)}}function De(F){if(ee=!1,pe(F),!Y)if(n(y)!==null)Y=!0,ge||(ge=!0,j());else{var ie=n(_);ie!==null&&gt(De,ie.startTime-F)}}var ge=!1,I=-1,A=5,w=-1;function D(){return J?!0:!(r.unstable_now()-w<A)}function O(){if(J=!1,ge){var F=r.unstable_now();w=F;var ie=!0;try{e:{Y=!1,ee&&(ee=!1,Q(I),I=-1),z=!0;var ye=N;try{t:{for(pe(F),x=n(y);x!==null&&!(x.expirationTime>F&&D());){var qe=x.callback;if(typeof qe=="function"){x.callback=null,N=x.priorityLevel;var Ke=qe(x.expirationTime<=F);if(F=r.unstable_now(),typeof Ke=="function"){x.callback=Ke,pe(F),ie=!0;break t}x===n(y)&&s(y),pe(F)}else s(y);x=n(y)}if(x!==null)ie=!0;else{var M=n(_);M!==null&&gt(De,M.startTime-F),ie=!1}}break e}finally{x=null,N=ye,z=!1}ie=void 0}}finally{ie?j():ge=!1}}}var j;if(typeof te=="function")j=function(){te(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ze=R.port2;R.port1.onmessage=O,j=function(){Ze.postMessage(null)}}else j=function(){ce(O,0)};function gt(F,ie){I=ce(function(){F(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(F){switch(N){case 1:case 2:case 3:var ie=3;break;default:ie=N}var ye=N;N=ie;try{return F()}finally{N=ye}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(F,ie){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ye=N;N=F;try{return ie()}finally{N=ye}},r.unstable_scheduleCallback=function(F,ie,ye){var qe=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?qe+ye:qe):ye=qe,F){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ye+Ke,F={id:T++,callback:ie,priorityLevel:F,startTime:ye,expirationTime:Ke,sortIndex:-1},ye>qe?(F.sortIndex=ye,e(_,F),n(y)===null&&F===n(_)&&(ee?(Q(I),I=-1):ee=!0,gt(De,ye-qe))):(F.sortIndex=Ke,e(y,F),Y||z||(Y=!0,ge||(ge=!0,j()))),F},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(F){var ie=N;return function(){var ye=N;N=ie;try{return F.apply(this,arguments)}finally{N=ye}}}})(Zd)),Zd}var a0;function nA(){return a0||(a0=1,$d.exports=tA()),$d.exports}var Jd={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function iA(){if(l0)return an;l0=1;var r=qm();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,_,T){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:y,containerInfo:_,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,an.createPortal=function(y,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(y,_,null,T)},an.flushSync=function(y){var _=f.T,T=s.p;try{if(f.T=null,s.p=2,y)return y()}finally{f.T=_,s.p=T,s.d.f()}},an.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(y,_))},an.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},an.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var T=_.as,x=g(T,_.crossOrigin),N=typeof _.integrity=="string"?_.integrity:void 0,z=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?s.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:x,integrity:N,fetchPriority:z}):T==="script"&&s.d.X(y,{crossOrigin:x,integrity:N,fetchPriority:z,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},an.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=g(_.as,_.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(y)},an.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,x=g(T,_.crossOrigin);s.d.L(y,T,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},an.preloadModule=function(y,_){if(typeof y=="string")if(_){var T=g(_.as,_.crossOrigin);s.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(y)},an.requestFormReset=function(y){s.d.r(y)},an.unstable_batchedUpdates=function(y,_){return y(_)},an.useFormState=function(y,_,T){return f.H.useFormState(y,_,T)},an.useFormStatus=function(){return f.H.useHostTransitionStatus()},an.version="19.2.0",an}var o0;function rA(){if(o0)return Jd.exports;o0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Jd.exports=iA(),Jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function sA(){if(u0)return xo;u0=1;var r=nA(),e=qm(),n=rA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(s(188))}function _(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===l)return y(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,b=h.child;b;){if(b===a){v=!0,a=h,l=d;break}if(b===l){v=!0,l=h,a=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===a){v=!0,a=d,l=h;break}if(b===l){v=!0,l=d,a=h;break}b=b.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var x=Object.assign,N=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),te=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ee:return"Fragment";case ce:return"Profiler";case J:return"StrictMode";case De:return"Suspense";case ge:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Y:return"Portal";case te:return t.displayName||"Context";case Q:return(t._context.displayName||"Context")+".Consumer";case pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:Ze(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return Ze(t(i))}catch{}}return null}var gt=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},qe=[],Ke=-1;function M(t){return{current:t}}function $(t){0>Ke||(t.current=qe[Ke],qe[Ke]=null,Ke--)}function re(t,i){Ke++,qe[Ke]=t.current,t.current=i}var oe=M(null),be=M(null),Re=M(null),ae=M(null);function le(t,i){switch(re(Re,i),re(be,t),re(oe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?S_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=S_(i),t=w_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(oe),re(oe,t)}function fe(){$(oe),$(be),$(Re)}function Be(t){t.memoizedState!==null&&re(ae,t);var i=oe.current,a=w_(i,t.type);i!==a&&(re(be,t),re(oe,a))}function je(t){be.current===t&&($(oe),$(be)),ae.current===t&&($(ae),bo._currentValue=ye)}var Oe,nt;function Bt(t){if(Oe===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Oe=i&&i[1]||"",nt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+t+nt}var Ht=!1;function Ge(t,i){if(!t||Ht)return"";Ht=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var q=H}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(H){q=H}t.call(Z.prototype)}}else{try{throw Error()}catch(H){q=H}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var C=v.split(`
`),U=b.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===U.length)for(l=C.length-1,h=U.length-1;1<=l&&0<=h&&C[l]!==U[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==U[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==U[h]){var G=`
`+C[l].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=l&&0<=h);break}}}finally{Ht=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Bt(a):""}function Ft(t,i){switch(t.tag){case 26:case 27:case 5:return Bt(t.type);case 16:return Bt("Lazy");case 13:return t.child!==i&&i!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return Ge(t.type,!1);case 11:return Ge(t.type.render,!1);case 1:return Ge(t.type,!0);case 31:return Bt("Activity");default:return""}}function mn(t){try{var i="",a=null;do i+=Ft(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var it=Object.prototype.hasOwnProperty,ct=r.unstable_scheduleCallback,Zn=r.unstable_cancelCallback,Al=r.unstable_shouldYield,Sl=r.unstable_requestPaint,Gt=r.unstable_now,jn=r.unstable_getCurrentPriorityLevel,ys=r.unstable_ImmediatePriority,yr=r.unstable_UserBlockingPriority,Jn=r.unstable_NormalPriority,Xh=r.unstable_LowPriority,mu=r.unstable_IdlePriority,pu=r.log,gu=r.unstable_setDisableYieldValue,Wn=null,$t=null;function Ln(t){if(typeof pu=="function"&&gu(t),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Wn,t)}catch{}}var Et=Math.clz32?Math.clz32:_u,yu=Math.log,la=Math.LN2;function _u(t){return t>>>=0,t===0?32:31-(yu(t)/la|0)|0}var pi=256,_s=262144,Rt=4194304;function gi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function yi(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=gi(l):(v&=b,v!==0?h=gi(v):a||(a=b&~t,a!==0&&(h=gi(a))))):(b=l&~d,b!==0?h=gi(b):v!==0?h=gi(v):a||(a=l&~t,a!==0&&(h=gi(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function ei(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function $h(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vu(){var t=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),t}function _i(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function vs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Zh(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,C=t.expirationTimes,U=t.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Et(a),Z=1<<G;b[G]=0,C[G]=-1;var q=U[G];if(q!==null)for(U[G]=null,G=0;G<q.length;G++){var H=q[G];H!==null&&(H.lane&=-536870913)}a&=~Z}l!==0&&Es(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Es(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Et(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function wl(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Et(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function xl(t,i){var a=i&-i;return a=(a&42)!==0?1:bs(a),(a&(t.suspendedLanes|i))!==0?0:a}function bs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Eu(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:K_(t.type))}function ti(t,i){var a=ie.p;try{return ie.p=t,i()}finally{ie.p=a}}var ni=Math.random().toString(36).slice(2),It="__reactFiber$"+ni,Qt="__reactProps$"+ni,vi="__reactContainer$"+ni,oa="__reactEvents$"+ni,Jh="__reactListeners$"+ni,bu="__reactHandles$"+ni,Tu="__reactResources$"+ni,Ei="__reactMarker$"+ni;function ua(t){delete t[It],delete t[Qt],delete t[oa],delete t[Jh],delete t[bu]}function bi(t){var i=t[It];if(i)return i;for(var a=t.parentNode;a;){if(i=a[vi]||a[It]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=O_(t);t!==null;){if(a=t[It])return a;t=O_(t)}return i}t=a,a=t.parentNode}return null}function kn(t){if(t=t[It]||t[vi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Sn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Ti(t){var i=t[Tu];return i||(i=t[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Nt(t){t[Ei]=!0}var Rl=new Set,Il={};function Ai(t,i){Si(t,i),Si(t+"Capture",i)}function Si(t,i){for(Il[t]=i,t=0;t<i.length;t++)Rl.add(i[t])}var Nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cl={},Dl={};function Au(t){return it.call(Dl,t)?!0:it.call(Cl,t)?!1:Nl.test(t)?Dl[t]=!0:(Cl[t]=!0,!1)}function ca(t,i,a){if(Au(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function wn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Ct(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Yt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _r(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ol(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function We(t){if(!t._valueTracker){var i=_r(t)?"checked":"value";t._valueTracker=Ol(t,i,""+t[i])}}function Ts(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=_r(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function wi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var As=/[\n"\\]/g;function pn(t){return t.replace(As,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ha(t,i,a,l,h,d,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Yt(i)):t.value!==""+Yt(i)&&(t.value=""+Yt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Vl(t,v,Yt(i)):a!=null?Vl(t,v,Yt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Yt(b):t.removeAttribute("name")}function Su(t,i,a,l,h,d,v,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){We(t);return}a=a!=null?""+Yt(a):"",i=i!=null?""+Yt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),We(t)}function Vl(t,i,a){i==="number"&&wi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function vr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Yt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function wu(t,i,a){if(i!=null&&(i=""+Yt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Yt(a):""}function Er(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(gt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Yt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),We(t)}function gn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ml(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||xu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function jl(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Ml(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Ml(t,d,i[d])}function fa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),br=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(t){return br.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ii(){}var Ll=null;function Pn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tr=null,xi=null;function Ss(t){var i=kn(t);if(i&&(t=i.stateNode)){var a=t[Qt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ha(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Qt]||null;if(!h)throw Error(s(90));ha(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ts(l)}break e;case"textarea":wu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&vr(t,!!a.multiple,i,!1)}}}var ma=!1;function Ar(t,i,a){if(ma)return t(i,a);ma=!0;try{var l=t(i);return l}finally{if(ma=!1,(Tr!==null||xi!==null)&&(Ec(),Tr&&(i=Tr,t=xi,xi=Tr=null,Ss(i),t)))for(i=0;i<t.length;i++)Ss(t[i])}}function ri(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Qt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ws=!1;if(Un)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){ws=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{ws=!1}var Ri=null,kl=null,xs=null;function Pl(){if(xs)return xs;var t,i=kl,a=i.length,l,h="value"in Ri?Ri.value:Ri.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return xs=h.slice(t,1<l?1-l:void 0)}function Rs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Gi(){return!0}function si(){return!1}function Zt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Gi:si,this.isPropagationStopped=si,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),i}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=Zt(Qi),Sr=x({},Qi,{view:0,detail:0}),Ul=Zt(Sr),wr,pa,Ni,ga=x({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ni&&(Ni&&t.type==="mousemove"?(wr=t.screenX-Ni.screenX,pa=t.screenY-Ni.screenY):pa=wr=0,Ni=t),wr)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),zl=Zt(ga),Is=x({},ga,{dataTransfer:0}),Iu=Zt(Is),Nu=x({},Sr,{relatedTarget:0}),Ns=Zt(Nu),ql=x({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Cu=Zt(ql),ya=x({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Du=Zt(ya),Ou=x({},Qi,{data:0}),Ci=Zt(Ou),Vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ju[t])?!!i[t]:!1}function xr(){return Lu}var hn=x({},Sr,{key:function(t){if(t.key){var i=Vu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Rs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(t){return t.type==="keypress"?Rs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ku=Zt(hn),Pu=x({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Zt(Pu),c=x({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),p=Zt(c),E=x({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Zt(E),k=x({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B=Zt(k),ne=x({},Qi,{newState:0,oldState:0}),Ie=Zt(ne),bt=[9,13,27,32],Xe=Un&&"CompositionEvent"in window,mt=null;Un&&"documentMode"in document&&(mt=document.documentMode);var zn=Un&&"TextEvent"in window&&!mt,Di=Un&&(!Xe||mt&&8<mt&&11>=mt),ai=" ",li=!1;function Cs(t,i){switch(t){case"keyup":return bt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _a(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var va=!1;function bT(t,i){switch(t){case"compositionend":return _a(i);case"keypress":return i.which!==32?null:(li=!0,ai);case"textInput":return t=i.data,t===ai&&li?null:t;default:return null}}function TT(t,i){if(va)return t==="compositionend"||!Xe&&Cs(t,i)?(t=Pl(),xs=kl=Ri=null,va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Di&&i.locale!=="ko"?null:i.data;default:return null}}var AT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!AT[t.type]:i==="textarea"}function Lp(t,i,a,l){Tr?xi?xi.push(l):xi=[l]:Tr=l,i=Rc(i,"onChange"),0<i.length&&(a=new Ii("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Bl=null,Hl=null;function ST(t){__(t,0)}function Uu(t){var i=Sn(t);if(Ts(i))return t}function kp(t,i){if(t==="change")return i}var Pp=!1;if(Un){var Wh;if(Un){var ef="oninput"in document;if(!ef){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),ef=typeof Up.oninput=="function"}Wh=ef}else Wh=!1;Pp=Wh&&(!document.documentMode||9<document.documentMode)}function zp(){Bl&&(Bl.detachEvent("onpropertychange",qp),Hl=Bl=null)}function qp(t){if(t.propertyName==="value"&&Uu(Hl)){var i=[];Lp(i,Hl,t,Pn(t)),Ar(ST,i)}}function wT(t,i,a){t==="focusin"?(zp(),Bl=i,Hl=a,Bl.attachEvent("onpropertychange",qp)):t==="focusout"&&zp()}function xT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu(Hl)}function RT(t,i){if(t==="click")return Uu(i)}function IT(t,i){if(t==="input"||t==="change")return Uu(i)}function NT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var xn=typeof Object.is=="function"?Object.is:NT;function Fl(t,i){if(xn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!it.call(i,h)||!xn(t[h],i[h]))return!1}return!0}function Bp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hp(t,i){var a=Bp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bp(a)}}function Fp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Fp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Gp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=wi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=wi(t.document)}return i}function tf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var CT=Un&&"documentMode"in document&&11>=document.documentMode,Ea=null,nf=null,Gl=null,rf=!1;function Qp(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;rf||Ea==null||Ea!==wi(l)||(l=Ea,"selectionStart"in l&&tf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Gl&&Fl(Gl,l)||(Gl=l,l=Rc(nf,"onSelect"),0<l.length&&(i=new Ii("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ea)))}function Ds(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ba={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionrun:Ds("Transition","TransitionRun"),transitionstart:Ds("Transition","TransitionStart"),transitioncancel:Ds("Transition","TransitionCancel"),transitionend:Ds("Transition","TransitionEnd")},sf={},Yp={};Un&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function Os(t){if(sf[t])return sf[t];if(!ba[t])return t;var i=ba[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Yp)return sf[t]=i[a];return t}var Kp=Os("animationend"),Xp=Os("animationiteration"),$p=Os("animationstart"),DT=Os("transitionrun"),OT=Os("transitionstart"),VT=Os("transitioncancel"),Zp=Os("transitionend"),Jp=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function oi(t,i){Jp.set(t,i),Ai(i,[t])}var zu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},qn=[],Ta=0,lf=0;function qu(){for(var t=Ta,i=lf=Ta=0;i<t;){var a=qn[i];qn[i++]=null;var l=qn[i];qn[i++]=null;var h=qn[i];qn[i++]=null;var d=qn[i];if(qn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Wp(a,h,d)}}function Bu(t,i,a,l){qn[Ta++]=t,qn[Ta++]=i,qn[Ta++]=a,qn[Ta++]=l,lf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function of(t,i,a,l){return Bu(t,i,a,l),Hu(t)}function Vs(t,i){return Bu(t,null,null,i),Hu(t)}function Wp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Et(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Hu(t){if(50<mo)throw mo=0,yd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Aa={};function MT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,i,a,l){return new MT(t,i,a,l)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ki(t,i){var a=t.alternate;return a===null?(a=Rn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function eg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Fu(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")uf(t)&&(v=1);else if(typeof t=="string")v=U1(t,a,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case w:return t=Rn(31,a,i,h),t.elementType=w,t.lanes=d,t;case ee:return Ms(a.children,h,d,i);case J:v=8,h|=24;break;case ce:return t=Rn(12,a,i,h|2),t.elementType=ce,t.lanes=d,t;case De:return t=Rn(13,a,i,h),t.elementType=De,t.lanes=d,t;case ge:return t=Rn(19,a,i,h),t.elementType=ge,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:v=10;break e;case Q:v=9;break e;case pe:v=11;break e;case I:v=14;break e;case A:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Rn(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Ms(t,i,a,l){return t=Rn(7,t,l,i),t.lanes=a,t}function cf(t,i,a){return t=Rn(6,t,null,i),t.lanes=a,t}function tg(t){var i=Rn(18,null,null,0);return i.stateNode=t,i}function hf(t,i,a){return i=Rn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ng=new WeakMap;function Bn(t,i){if(typeof t=="object"&&t!==null){var a=ng.get(t);return a!==void 0?a:(i={value:t,source:i,stack:mn(i)},ng.set(t,i),i)}return{value:t,source:i,stack:mn(i)}}var Sa=[],wa=0,Gu=null,Ql=0,Hn=[],Fn=0,Rr=null,Oi=1,Vi="";function Xi(t,i){Sa[wa++]=Ql,Sa[wa++]=Gu,Gu=t,Ql=i}function ig(t,i,a){Hn[Fn++]=Oi,Hn[Fn++]=Vi,Hn[Fn++]=Rr,Rr=t;var l=Oi;t=Vi;var h=32-Et(l)-1;l&=~(1<<h),a+=1;var d=32-Et(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Oi=1<<32-Et(i)+h|a<<h|l,Vi=d+t}else Oi=1<<d|a<<h|l,Vi=t}function ff(t){t.return!==null&&(Xi(t,1),ig(t,1,0))}function df(t){for(;t===Gu;)Gu=Sa[--wa],Sa[wa]=null,Ql=Sa[--wa],Sa[wa]=null;for(;t===Rr;)Rr=Hn[--Fn],Hn[Fn]=null,Vi=Hn[--Fn],Hn[Fn]=null,Oi=Hn[--Fn],Hn[Fn]=null}function rg(t,i){Hn[Fn++]=Oi,Hn[Fn++]=Vi,Hn[Fn++]=Rr,Oi=i.id,Vi=i.overflow,Rr=t}var Jt=null,ht=null,He=!1,Ir=null,Gn=!1,mf=Error(s(519));function Nr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yl(Bn(i,t)),mf}function sg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[It]=t,i[Qt]=l,a){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(a=0;a<go.length;a++)Me(go[a],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),Su(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),Er(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||T_(i.textContent,a)?(l.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),l.onScroll!=null&&Me("scroll",i),l.onScrollEnd!=null&&Me("scrollend",i),l.onClick!=null&&(i.onclick=ii),i=!0):i=!1,i||Nr(t,!0)}function ag(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Jt=Jt.return}}function xa(t){if(t!==Jt)return!1;if(!He)return ag(t),He=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Od(t.type,t.memoizedProps)),a=!a),a&&ht&&Nr(t),ag(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ht=D_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ht=D_(t)}else i===27?(i=ht,Hr(t.type)?(t=kd,kd=null,ht=t):ht=i):ht=Jt?Yn(t.stateNode.nextSibling):null;return!0}function js(){ht=Jt=null,He=!1}function pf(){var t=Ir;return t!==null&&(En===null?En=t:En.push.apply(En,t),Ir=null),t}function Yl(t){Ir===null?Ir=[t]:Ir.push(t)}var gf=M(null),Ls=null,$i=null;function Cr(t,i,a){re(gf,i._currentValue),i._currentValue=a}function Zi(t){t._currentValue=gf.current,$(gf)}function yf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function _f(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var C=0;C<i.length;C++)if(b.context===i[C]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),yf(d.return,a,t),l||(v=null);break e}d=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),yf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ra(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var b=h.type;xn(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===ae.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(bo):t=[bo])}h=h.return}t!==null&&_f(i,t,a,l),i.flags|=262144}function Qu(t){for(t=t.firstContext;t!==null;){if(!xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ks(t){Ls=t,$i=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wt(t){return lg(Ls,t)}function Yu(t,i){return Ls===null&&ks(t),lg(t,i)}function lg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},$i===null){if(t===null)throw Error(s(308));$i=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else $i=$i.next=i;return a}var jT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},LT=r.unstable_scheduleCallback,kT=r.unstable_NormalPriority,Dt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new jT,data:new Map,refCount:0}}function Kl(t){t.refCount--,t.refCount===0&&LT(kT,function(){t.controller.abort()})}var Xl=null,Ef=0,Ia=0,Na=null;function PT(t,i){if(Xl===null){var a=Xl=[];Ef=0,Ia=Ad(),Na={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ef++,i.then(og,og),i}function og(){if(--Ef===0&&Xl!==null){Na!==null&&(Na.status="fulfilled");var t=Xl;Xl=null,Ia=0,Na=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function UT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var ug=F.S;F.S=function(t,i){Qy=Gt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&PT(t,i),ug!==null&&ug(t,i)};var Ps=M(null);function bf(){var t=Ps.current;return t!==null?t:ot.pooledCache}function Ku(t,i){i===null?re(Ps,Ps.current):re(Ps,i.pool)}function cg(){var t=bf();return t===null?null:{parent:Dt._currentValue,pool:t}}var Ca=Error(s(460)),Tf=Error(s(474)),Xu=Error(s(542)),$u={then:function(){}};function hg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ii,ii),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t;default:if(typeof i.status=="string")i.then(ii,ii);else{if(t=ot,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t}throw zs=i,Ca}}function Us(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zs=a,Ca):a}}var zs=null;function dg(){if(zs===null)throw Error(s(459));var t=zs;return zs=null,t}function mg(t){if(t===Ca||t===Xu)throw Error(s(483))}var Da=null,$l=0;function Zu(t){var i=$l;return $l+=1,Da===null&&(Da=[]),fg(Da,t,i)}function Zl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ju(t,i){throw i.$$typeof===N?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function pg(t){function i(L,V){if(t){var P=L.deletions;P===null?(L.deletions=[V],L.flags|=16):P.push(V)}}function a(L,V){if(!t)return null;for(;V!==null;)i(L,V),V=V.sibling;return null}function l(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function h(L,V){return L=Ki(L,V),L.index=0,L.sibling=null,L}function d(L,V,P){return L.index=P,t?(P=L.alternate,P!==null?(P=P.index,P<V?(L.flags|=67108866,V):P):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function v(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function b(L,V,P,K){return V===null||V.tag!==6?(V=cf(P,L.mode,K),V.return=L,V):(V=h(V,P),V.return=L,V)}function C(L,V,P,K){var _e=P.type;return _e===ee?G(L,V,P.props.children,K,P.key):V!==null&&(V.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===A&&Us(_e)===V.type)?(V=h(V,P.props),Zl(V,P),V.return=L,V):(V=Fu(P.type,P.key,P.props,null,L.mode,K),Zl(V,P),V.return=L,V)}function U(L,V,P,K){return V===null||V.tag!==4||V.stateNode.containerInfo!==P.containerInfo||V.stateNode.implementation!==P.implementation?(V=hf(P,L.mode,K),V.return=L,V):(V=h(V,P.children||[]),V.return=L,V)}function G(L,V,P,K,_e){return V===null||V.tag!==7?(V=Ms(P,L.mode,K,_e),V.return=L,V):(V=h(V,P),V.return=L,V)}function Z(L,V,P){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=cf(""+V,L.mode,P),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return P=Fu(V.type,V.key,V.props,null,L.mode,P),Zl(P,V),P.return=L,P;case Y:return V=hf(V,L.mode,P),V.return=L,V;case A:return V=Us(V),Z(L,V,P)}if(gt(V)||j(V))return V=Ms(V,L.mode,P,null),V.return=L,V;if(typeof V.then=="function")return Z(L,Zu(V),P);if(V.$$typeof===te)return Z(L,Yu(L,V),P);Ju(L,V)}return null}function q(L,V,P,K){var _e=V!==null?V.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return _e!==null?null:b(L,V,""+P,K);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case z:return P.key===_e?C(L,V,P,K):null;case Y:return P.key===_e?U(L,V,P,K):null;case A:return P=Us(P),q(L,V,P,K)}if(gt(P)||j(P))return _e!==null?null:G(L,V,P,K,null);if(typeof P.then=="function")return q(L,V,Zu(P),K);if(P.$$typeof===te)return q(L,V,Yu(L,P),K);Ju(L,P)}return null}function H(L,V,P,K,_e){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return L=L.get(P)||null,b(V,L,""+K,_e);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case z:return L=L.get(K.key===null?P:K.key)||null,C(V,L,K,_e);case Y:return L=L.get(K.key===null?P:K.key)||null,U(V,L,K,_e);case A:return K=Us(K),H(L,V,P,K,_e)}if(gt(K)||j(K))return L=L.get(P)||null,G(V,L,K,_e,null);if(typeof K.then=="function")return H(L,V,P,Zu(K),_e);if(K.$$typeof===te)return H(L,V,P,Yu(V,K),_e);Ju(V,K)}return null}function he(L,V,P,K){for(var _e=null,Qe=null,de=V,Ce=V=0,ke=null;de!==null&&Ce<P.length;Ce++){de.index>Ce?(ke=de,de=null):ke=de.sibling;var Ye=q(L,de,P[Ce],K);if(Ye===null){de===null&&(de=ke);break}t&&de&&Ye.alternate===null&&i(L,de),V=d(Ye,V,Ce),Qe===null?_e=Ye:Qe.sibling=Ye,Qe=Ye,de=ke}if(Ce===P.length)return a(L,de),He&&Xi(L,Ce),_e;if(de===null){for(;Ce<P.length;Ce++)de=Z(L,P[Ce],K),de!==null&&(V=d(de,V,Ce),Qe===null?_e=de:Qe.sibling=de,Qe=de);return He&&Xi(L,Ce),_e}for(de=l(de);Ce<P.length;Ce++)ke=H(de,L,Ce,P[Ce],K),ke!==null&&(t&&ke.alternate!==null&&de.delete(ke.key===null?Ce:ke.key),V=d(ke,V,Ce),Qe===null?_e=ke:Qe.sibling=ke,Qe=ke);return t&&de.forEach(function(Kr){return i(L,Kr)}),He&&Xi(L,Ce),_e}function Ee(L,V,P,K){if(P==null)throw Error(s(151));for(var _e=null,Qe=null,de=V,Ce=V=0,ke=null,Ye=P.next();de!==null&&!Ye.done;Ce++,Ye=P.next()){de.index>Ce?(ke=de,de=null):ke=de.sibling;var Kr=q(L,de,Ye.value,K);if(Kr===null){de===null&&(de=ke);break}t&&de&&Kr.alternate===null&&i(L,de),V=d(Kr,V,Ce),Qe===null?_e=Kr:Qe.sibling=Kr,Qe=Kr,de=ke}if(Ye.done)return a(L,de),He&&Xi(L,Ce),_e;if(de===null){for(;!Ye.done;Ce++,Ye=P.next())Ye=Z(L,Ye.value,K),Ye!==null&&(V=d(Ye,V,Ce),Qe===null?_e=Ye:Qe.sibling=Ye,Qe=Ye);return He&&Xi(L,Ce),_e}for(de=l(de);!Ye.done;Ce++,Ye=P.next())Ye=H(de,L,Ce,Ye.value,K),Ye!==null&&(t&&Ye.alternate!==null&&de.delete(Ye.key===null?Ce:Ye.key),V=d(Ye,V,Ce),Qe===null?_e=Ye:Qe.sibling=Ye,Qe=Ye);return t&&de.forEach(function($1){return i(L,$1)}),He&&Xi(L,Ce),_e}function lt(L,V,P,K){if(typeof P=="object"&&P!==null&&P.type===ee&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case z:e:{for(var _e=P.key;V!==null;){if(V.key===_e){if(_e=P.type,_e===ee){if(V.tag===7){a(L,V.sibling),K=h(V,P.props.children),K.return=L,L=K;break e}}else if(V.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===A&&Us(_e)===V.type){a(L,V.sibling),K=h(V,P.props),Zl(K,P),K.return=L,L=K;break e}a(L,V);break}else i(L,V);V=V.sibling}P.type===ee?(K=Ms(P.props.children,L.mode,K,P.key),K.return=L,L=K):(K=Fu(P.type,P.key,P.props,null,L.mode,K),Zl(K,P),K.return=L,L=K)}return v(L);case Y:e:{for(_e=P.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===P.containerInfo&&V.stateNode.implementation===P.implementation){a(L,V.sibling),K=h(V,P.children||[]),K.return=L,L=K;break e}else{a(L,V);break}else i(L,V);V=V.sibling}K=hf(P,L.mode,K),K.return=L,L=K}return v(L);case A:return P=Us(P),lt(L,V,P,K)}if(gt(P))return he(L,V,P,K);if(j(P)){if(_e=j(P),typeof _e!="function")throw Error(s(150));return P=_e.call(P),Ee(L,V,P,K)}if(typeof P.then=="function")return lt(L,V,Zu(P),K);if(P.$$typeof===te)return lt(L,V,Yu(L,P),K);Ju(L,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,V!==null&&V.tag===6?(a(L,V.sibling),K=h(V,P),K.return=L,L=K):(a(L,V),K=cf(P,L.mode,K),K.return=L,L=K),v(L)):a(L,V)}return function(L,V,P,K){try{$l=0;var _e=lt(L,V,P,K);return Da=null,_e}catch(de){if(de===Ca||de===Xu)throw de;var Qe=Rn(29,de,null,L.mode);return Qe.lanes=K,Qe.return=L,Qe}finally{}}}var qs=pg(!0),gg=pg(!1),Dr=!1;function Af(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Or(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Hu(t),Wp(t,null,a),i}return Bu(t,l,i,a),Hu(t)}function Jl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,wl(t,a)}}function wf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var xf=!1;function Wl(){if(xf){var t=Na;if(t!==null)throw t}}function eo(t,i,a,l){xf=!1;var h=t.updateQueue;Dr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var C=b,U=C.next;C.next=null,v===null?d=U:v.next=U,v=C;var G=t.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==v&&(b===null?G.firstBaseUpdate=U:b.next=U,G.lastBaseUpdate=C))}if(d!==null){var Z=h.baseState;v=0,G=U=C=null,b=d;do{var q=b.lane&-536870913,H=q!==b.lane;if(H?(Le&q)===q:(l&q)===q){q!==0&&q===Ia&&(xf=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=t,Ee=b;q=i;var lt=a;switch(Ee.tag){case 1:if(he=Ee.payload,typeof he=="function"){Z=he.call(lt,Z,q);break e}Z=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ee.payload,q=typeof he=="function"?he.call(lt,Z,q):he,q==null)break e;Z=x({},Z,q);break e;case 2:Dr=!0}}q=b.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(U=G=H,C=Z):G=G.next=H,v|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;H=b,b=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);G===null&&(C=Z),h.baseState=C,h.firstBaseUpdate=U,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),Pr|=v,t.lanes=v,t.memoizedState=Z}}function yg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function _g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)yg(a[t],i)}var Oa=M(null),Wu=M(0);function vg(t,i){t=ar,re(Wu,t),re(Oa,i),ar=t|i.baseLanes}function Rf(){re(Wu,ar),re(Oa,Oa.current)}function If(){ar=Wu.current,$(Oa),$(Wu)}var In=M(null),Qn=null;function Mr(t){var i=t.alternate;re(Tt,Tt.current&1),re(In,t),Qn===null&&(i===null||Oa.current!==null||i.memoizedState!==null)&&(Qn=t)}function Nf(t){re(Tt,Tt.current),re(In,t),Qn===null&&(Qn=t)}function Eg(t){t.tag===22?(re(Tt,Tt.current),re(In,t),Qn===null&&(Qn=t)):jr()}function jr(){re(Tt,Tt.current),re(In,In.current)}function Nn(t){$(In),Qn===t&&(Qn=null),$(Tt)}var Tt=M(0);function ec(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||jd(a)||Ld(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ji=0,Ne=null,st=null,Ot=null,tc=!1,Va=!1,Bs=!1,nc=0,to=0,Ma=null,zT=0;function _t(){throw Error(s(321))}function Cf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!xn(t[a],i[a]))return!1;return!0}function Df(t,i,a,l,h,d){return Ji=d,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=t===null||t.memoizedState===null?iy:Qf,Bs=!1,d=a(l,h),Bs=!1,Va&&(d=Tg(i,a,l,h)),bg(t),d}function bg(t){F.H=ro;var i=st!==null&&st.next!==null;if(Ji=0,Ot=st=Ne=null,tc=!1,to=0,Ma=null,i)throw Error(s(300));t===null||Vt||(t=t.dependencies,t!==null&&Qu(t)&&(Vt=!0))}function Tg(t,i,a,l){Ne=t;var h=0;do{if(Va&&(Ma=null),to=0,Va=!1,25<=h)throw Error(s(301));if(h+=1,Ot=st=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=ry,d=i(a,l)}while(Va);return d}function qT(){var t=F.H,i=t.useState()[0];return i=typeof i.then=="function"?no(i):i,t=t.useState()[0],(st!==null?st.memoizedState:null)!==t&&(Ne.flags|=1024),i}function Of(){var t=nc!==0;return nc=0,t}function Vf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Mf(t){if(tc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}tc=!1}Ji=0,Ot=st=Ne=null,Va=!1,to=nc=0,Ma=null}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ne.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function At(){if(st===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var i=Ot===null?Ne.memoizedState:Ot.next;if(i!==null)Ot=i,st=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Ot===null?Ne.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function ic(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function no(t){var i=to;return to+=1,Ma===null&&(Ma=[]),t=fg(Ma,t,i),i=Ne,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?iy:Qf),t}function rc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return no(t);if(t.$$typeof===te)return Wt(t)}throw Error(s(438,String(t)))}function jf(t){var i=null,a=Ne.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ic(),Ne.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=D;return i.index++,a}function Wi(t,i){return typeof i=="function"?i(t):i}function sc(t){var i=At();return Lf(i,st,t)}function Lf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=v=null,C=null,U=i,G=!1;do{var Z=U.lane&-536870913;if(Z!==U.lane?(Le&Z)===Z:(Ji&Z)===Z){var q=U.revertLane;if(q===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),Z===Ia&&(G=!0);else if((Ji&q)===q){U=U.next,q===Ia&&(G=!0);continue}else Z={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(b=C=Z,v=d):C=C.next=Z,Ne.lanes|=q,Pr|=q;Z=U.action,Bs&&a(d,Z),d=U.hasEagerState?U.eagerState:a(d,Z)}else q={lane:Z,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(b=C=q,v=d):C=C.next=q,Ne.lanes|=Z,Pr|=Z;U=U.next}while(U!==null&&U!==i);if(C===null?v=d:C.next=b,!xn(d,t.memoizedState)&&(Vt=!0,G&&(a=Na,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=C,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function kf(t){var i=At(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);xn(d,i.memoizedState)||(Vt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Ag(t,i,a){var l=Ne,h=At(),d=He;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!xn((st||h).memoizedState,a);if(v&&(h.memoizedState=a,Vt=!0),h=h.queue,zf(xg.bind(null,l,h,t),[t]),h.getSnapshot!==i||v||Ot!==null&&Ot.memoizedState.tag&1){if(l.flags|=2048,ja(9,{destroy:void 0},wg.bind(null,l,h,a,i),null),ot===null)throw Error(s(349));d||(Ji&127)!==0||Sg(l,i,a)}return a}function Sg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ne.updateQueue,i===null?(i=ic(),Ne.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function wg(t,i,a,l){i.value=a,i.getSnapshot=l,Rg(i)&&Ig(t)}function xg(t,i,a){return a(function(){Rg(i)&&Ig(t)})}function Rg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!xn(t,a)}catch{return!0}}function Ig(t){var i=Vs(t,2);i!==null&&bn(i,t,2)}function Pf(t){var i=fn();if(typeof t=="function"){var a=t;if(t=a(),Bs){Ln(!0);try{a()}finally{Ln(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},i}function Ng(t,i,a,l){return t.baseState=a,Lf(t,st,typeof l=="function"?l:Wi)}function BT(t,i,a,l,h){if(oc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};F.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Cg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Cg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=F.T,v={};F.T=v;try{var b=a(h,l),C=F.S;C!==null&&C(v,b),Dg(t,i,b)}catch(U){Uf(t,i,U)}finally{d!==null&&v.types!==null&&(d.types=v.types),F.T=d}}else try{d=a(h,l),Dg(t,i,d)}catch(U){Uf(t,i,U)}}function Dg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Og(t,i,l)},function(l){return Uf(t,i,l)}):Og(t,i,a)}function Og(t,i,a){i.status="fulfilled",i.value=a,Vg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Cg(t,a)))}function Uf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Vg(i),i=i.next;while(i!==l)}t.action=null}function Vg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Mg(t,i){return i}function jg(t,i){if(He){var a=ot.formState;if(a!==null){e:{var l=Ne;if(He){if(ht){t:{for(var h=ht,d=Gn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Yn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ht=Yn(h.nextSibling),l=h.data==="F!";break e}}Nr(l)}l=!1}l&&(i=a[0])}}return a=fn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:i},a.queue=l,a=ey.bind(null,Ne,l),l.dispatch=a,l=Pf(!1),d=Gf.bind(null,Ne,!1,l.queue),l=fn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=BT.bind(null,Ne,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Lg(t){var i=At();return kg(i,st,t)}function kg(t,i,a){if(i=Lf(t,i,Mg)[0],t=sc(Wi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=no(i)}catch(v){throw v===Ca?Xu:v}else l=i;i=At();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ne.flags|=2048,ja(9,{destroy:void 0},HT.bind(null,h,a),null)),[l,d,t]}function HT(t,i){t.action=i}function Pg(t){var i=At(),a=st;if(a!==null)return kg(i,a,t);At(),i=i.memoizedState,a=At();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ja(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=ic(),Ne.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Ug(){return At().memoizedState}function ac(t,i,a,l){var h=fn();Ne.flags|=t,h.memoizedState=ja(1|i,{destroy:void 0},a,l===void 0?null:l)}function lc(t,i,a,l){var h=At();l=l===void 0?null:l;var d=h.memoizedState.inst;st!==null&&l!==null&&Cf(l,st.memoizedState.deps)?h.memoizedState=ja(i,d,a,l):(Ne.flags|=t,h.memoizedState=ja(1|i,d,a,l))}function zg(t,i){ac(8390656,8,t,i)}function zf(t,i){lc(2048,8,t,i)}function FT(t){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=ic(),Ne.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function qg(t){var i=At().memoizedState;return FT({ref:i,nextImpl:t}),function(){if(($e&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Bg(t,i){return lc(4,2,t,i)}function Hg(t,i){return lc(4,4,t,i)}function Fg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Gg(t,i,a){a=a!=null?a.concat([t]):null,lc(4,4,Fg.bind(null,i,t),a)}function qf(){}function Qg(t,i){var a=At();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Cf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Yg(t,i){var a=At();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Cf(i,l[1]))return l[0];if(l=t(),Bs){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,i],l}function Bf(t,i,a){return a===void 0||(Ji&1073741824)!==0&&(Le&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Ky(),Ne.lanes|=t,Pr|=t,a)}function Kg(t,i,a,l){return xn(a,i)?a:Oa.current!==null?(t=Bf(t,a,l),xn(t,i)||(Vt=!0),t):(Ji&42)===0||(Ji&1073741824)!==0&&(Le&261930)===0?(Vt=!0,t.memoizedState=a):(t=Ky(),Ne.lanes|=t,Pr|=t,i)}function Xg(t,i,a,l,h){var d=ie.p;ie.p=d!==0&&8>d?d:8;var v=F.T,b={};F.T=b,Gf(t,!1,i,a);try{var C=h(),U=F.S;if(U!==null&&U(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var G=UT(C,l);io(t,i,G,On(t))}else io(t,i,l,On(t))}catch(Z){io(t,i,{then:function(){},status:"rejected",reason:Z},On())}finally{ie.p=d,v!==null&&b.types!==null&&(v.types=b.types),F.T=v}}function GT(){}function Hf(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=$g(t).queue;Xg(t,h,i,ye,a===null?GT:function(){return Zg(t),a(l)})}function $g(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:ye},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Zg(t){var i=$g(t);i.next===null&&(i=t.alternate.memoizedState),io(t,i.next.queue,{},On())}function Ff(){return Wt(bo)}function Jg(){return At().memoizedState}function Wg(){return At().memoizedState}function QT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=On();t=Or(a);var l=Vr(i,t,a);l!==null&&(bn(l,i,a),Jl(l,i,a)),i={cache:vf()},t.payload=i;return}i=i.return}}function YT(t,i,a){var l=On();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},oc(t)?ty(i,a):(a=of(t,i,a,l),a!==null&&(bn(a,t,l),ny(a,i,l)))}function ey(t,i,a){var l=On();io(t,i,a,l)}function io(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(oc(t))ty(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,b=d(v,a);if(h.hasEagerState=!0,h.eagerState=b,xn(b,v))return Bu(t,i,h,0),ot===null&&qu(),!1}catch{}finally{}if(a=of(t,i,h,l),a!==null)return bn(a,t,l),ny(a,i,l),!0}return!1}function Gf(t,i,a,l){if(l={lane:2,revertLane:Ad(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},oc(t)){if(i)throw Error(s(479))}else i=of(t,a,l,2),i!==null&&bn(i,t,2)}function oc(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function ty(t,i){Va=tc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ny(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,wl(t,a)}}var ro={readContext:Wt,use:rc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};ro.useEffectEvent=_t;var iy={readContext:Wt,use:rc,useCallback:function(t,i){return fn().memoizedState=[t,i===void 0?null:i],t},useContext:Wt,useEffect:zg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,ac(4194308,4,Fg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return ac(4194308,4,t,i)},useInsertionEffect:function(t,i){ac(4,2,t,i)},useMemo:function(t,i){var a=fn();i=i===void 0?null:i;var l=t();if(Bs){Ln(!0);try{t()}finally{Ln(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=fn();if(a!==void 0){var h=a(i);if(Bs){Ln(!0);try{a(i)}finally{Ln(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=YT.bind(null,Ne,t),[l.memoizedState,t]},useRef:function(t){var i=fn();return t={current:t},i.memoizedState=t},useState:function(t){t=Pf(t);var i=t.queue,a=ey.bind(null,Ne,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:qf,useDeferredValue:function(t,i){var a=fn();return Bf(a,t,i)},useTransition:function(){var t=Pf(!1);return t=Xg.bind(null,Ne,t.queue,!0,!1),fn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ne,h=fn();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ot===null)throw Error(s(349));(Le&127)!==0||Sg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,zg(xg.bind(null,l,d,t),[t]),l.flags|=2048,ja(9,{destroy:void 0},wg.bind(null,l,d,a,i),null),a},useId:function(){var t=fn(),i=ot.identifierPrefix;if(He){var a=Vi,l=Oi;a=(l&~(1<<32-Et(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=nc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=zT++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Ff,useFormState:jg,useActionState:jg,useOptimistic:function(t){var i=fn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Gf.bind(null,Ne,!0,a),a.dispatch=i,[t,i]},useMemoCache:jf,useCacheRefresh:function(){return fn().memoizedState=QT.bind(null,Ne)},useEffectEvent:function(t){var i=fn(),a={impl:t};return i.memoizedState=a,function(){if(($e&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Qf={readContext:Wt,use:rc,useCallback:Qg,useContext:Wt,useEffect:zf,useImperativeHandle:Gg,useInsertionEffect:Bg,useLayoutEffect:Hg,useMemo:Yg,useReducer:sc,useRef:Ug,useState:function(){return sc(Wi)},useDebugValue:qf,useDeferredValue:function(t,i){var a=At();return Kg(a,st.memoizedState,t,i)},useTransition:function(){var t=sc(Wi)[0],i=At().memoizedState;return[typeof t=="boolean"?t:no(t),i]},useSyncExternalStore:Ag,useId:Jg,useHostTransitionStatus:Ff,useFormState:Lg,useActionState:Lg,useOptimistic:function(t,i){var a=At();return Ng(a,st,t,i)},useMemoCache:jf,useCacheRefresh:Wg};Qf.useEffectEvent=qg;var ry={readContext:Wt,use:rc,useCallback:Qg,useContext:Wt,useEffect:zf,useImperativeHandle:Gg,useInsertionEffect:Bg,useLayoutEffect:Hg,useMemo:Yg,useReducer:kf,useRef:Ug,useState:function(){return kf(Wi)},useDebugValue:qf,useDeferredValue:function(t,i){var a=At();return st===null?Bf(a,t,i):Kg(a,st.memoizedState,t,i)},useTransition:function(){var t=kf(Wi)[0],i=At().memoizedState;return[typeof t=="boolean"?t:no(t),i]},useSyncExternalStore:Ag,useId:Jg,useHostTransitionStatus:Ff,useFormState:Pg,useActionState:Pg,useOptimistic:function(t,i){var a=At();return st!==null?Ng(a,st,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:Wg};ry.useEffectEvent=qg;function Yf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:x({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=On(),h=Or(l);h.payload=i,a!=null&&(h.callback=a),i=Vr(t,h,l),i!==null&&(bn(i,t,l),Jl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=On(),h=Or(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Vr(t,h,l),i!==null&&(bn(i,t,l),Jl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=On(),l=Or(a);l.tag=2,i!=null&&(l.callback=i),i=Vr(t,l,a),i!==null&&(bn(i,t,a),Jl(i,t,a))}};function sy(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Fl(a,l)||!Fl(h,d):!0}function ay(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Kf.enqueueReplaceState(i,i.state,null)}function Hs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=x({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function ly(t){zu(t)}function oy(t){console.error(t)}function uy(t){zu(t)}function uc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function cy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xf(t,i,a){return a=Or(a),a.tag=3,a.payload={element:null},a.callback=function(){uc(t,i)},a}function hy(t){return t=Or(t),t.tag=3,t}function fy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){cy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){cy(i,a,l),typeof h!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function KT(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ra(i,a,h,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Qn===null?bc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===$u?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Ed(t,l,h)),!1;case 22:return a.flags|=65536,l===$u?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Ed(t,l,h)),!1}throw Error(s(435,a.tag))}return Ed(t,l,h),bc(),!1}if(He)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==mf&&(t=Error(s(422),{cause:l}),Yl(Bn(t,a)))):(l!==mf&&(i=Error(s(423),{cause:l}),Yl(Bn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Bn(l,a),h=Xf(t.stateNode,l,h),wf(t,h),vt!==4&&(vt=2)),!1;var d=Error(s(520),{cause:l});if(d=Bn(d,a),fo===null?fo=[d]:fo.push(d),vt!==4&&(vt=2),i===null)return!0;l=Bn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Xf(a.stateNode,l,t),wf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ur===null||!Ur.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=hy(h),fy(h,t,a,l),wf(a,h),!1}a=a.return}while(a!==null);return!1}var $f=Error(s(461)),Vt=!1;function en(t,i,a,l){i.child=t===null?gg(i,null,a,l):qs(i,t.child,a,l)}function dy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var b in l)b!=="ref"&&(v[b]=l[b])}else v=l;return ks(i),l=Df(t,i,a,v,d,h),b=Of(),t!==null&&!Vt?(Vf(t,i,h),er(t,i,h)):(He&&b&&ff(i),i.flags|=1,en(t,i,l,h),i.child)}function my(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!uf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,py(t,i,d,l,h)):(t=Fu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!rd(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fl,a(v,l)&&t.ref===i.ref)return er(t,i,h)}return i.flags|=1,t=Ki(d,l),t.ref=i.ref,t.return=i,i.child=t}function py(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Fl(d,l)&&t.ref===i.ref)if(Vt=!1,i.pendingProps=l=d,rd(t,h))(t.flags&131072)!==0&&(Vt=!0);else return i.lanes=t.lanes,er(t,i,h)}return Zf(t,i,a,l,h)}function gy(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return yy(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ku(i,d!==null?d.cachePool:null),d!==null?vg(i,d):Rf(),Eg(i);else return l=i.lanes=536870912,yy(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Ku(i,d.cachePool),vg(i,d),jr(),i.memoizedState=null):(t!==null&&Ku(i,null),Rf(),jr());return en(t,i,h,a),i.child}function so(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function yy(t,i,a,l,h){var d=bf();return d=d===null?null:{parent:Dt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Ku(i,null),Rf(),Eg(i),t!==null&&Ra(t,i,l,!0),i.childLanes=h,null}function cc(t,i){return i=fc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function _y(t,i,a){return qs(i,t.child,null,a),t=cc(i,i.pendingProps),t.flags|=2,Nn(i),i.memoizedState=null,t}function XT(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(He){if(l.mode==="hidden")return t=cc(i,l),i.lanes=536870912,so(null,t);if(Nf(i),(t=ht)?(t=C_(t,Gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Rr!==null?{id:Oi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,Jt=i,ht=null)):t=null,t===null)throw Nr(i);return i.lanes=536870912,null}return cc(i,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(Nf(i),h)if(i.flags&256)i.flags&=-257,i=_y(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Vt||Ra(t,i,a,!1),h=(a&t.childLanes)!==0,Vt||h){if(l=ot,l!==null&&(v=xl(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Vs(t,v),bn(l,t,v),$f;bc(),i=_y(t,i,a)}else t=d.treeContext,ht=Yn(v.nextSibling),Jt=i,He=!0,Ir=null,Gn=!1,t!==null&&rg(i,t),i=cc(i,l),i.flags|=4096;return i}return t=Ki(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function hc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Zf(t,i,a,l,h){return ks(i),a=Df(t,i,a,l,void 0,h),l=Of(),t!==null&&!Vt?(Vf(t,i,h),er(t,i,h)):(He&&l&&ff(i),i.flags|=1,en(t,i,a,h),i.child)}function vy(t,i,a,l,h,d){return ks(i),i.updateQueue=null,a=Tg(i,l,a,h),bg(t),l=Of(),t!==null&&!Vt?(Vf(t,i,d),er(t,i,d)):(He&&l&&ff(i),i.flags|=1,en(t,i,a,d),i.child)}function Ey(t,i,a,l,h){if(ks(i),i.stateNode===null){var d=Aa,v=a.contextType;typeof v=="object"&&v!==null&&(d=Wt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Af(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Wt(v):Aa,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Yf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Kf.enqueueReplaceState(d,d.state,null),eo(i,l,d,h),Wl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,C=Hs(a,b);d.props=C;var U=d.context,G=a.contextType;v=Aa,typeof G=="object"&&G!==null&&(v=Wt(G));var Z=a.getDerivedStateFromProps;G=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||U!==v)&&ay(i,d,l,v),Dr=!1;var q=i.memoizedState;d.state=q,eo(i,l,d,h),Wl(),U=i.memoizedState,b||q!==U||Dr?(typeof Z=="function"&&(Yf(i,a,Z,l),U=i.memoizedState),(C=Dr||sy(i,a,C,l,q,U,v))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=U),d.props=l,d.state=U,d.context=v,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Sf(t,i),v=i.memoizedProps,G=Hs(a,v),d.props=G,Z=i.pendingProps,q=d.context,U=a.contextType,C=Aa,typeof U=="object"&&U!==null&&(C=Wt(U)),b=a.getDerivedStateFromProps,(U=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Z||q!==C)&&ay(i,d,l,C),Dr=!1,q=i.memoizedState,d.state=q,eo(i,l,d,h),Wl();var H=i.memoizedState;v!==Z||q!==H||Dr||t!==null&&t.dependencies!==null&&Qu(t.dependencies)?(typeof b=="function"&&(Yf(i,a,b,l),H=i.memoizedState),(G=Dr||sy(i,a,G,l,q,H,C)||t!==null&&t.dependencies!==null&&Qu(t.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=C,l=G):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,hc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=qs(i,t.child,null,h),i.child=qs(i,null,a,h)):en(t,i,a,h),i.memoizedState=d.state,t=i.child):t=er(t,i,h),t}function by(t,i,a,l){return js(),i.flags|=256,en(t,i,a,l),i.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(t){return{baseLanes:t,cachePool:cg()}}function ed(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Dn),t}function Ty(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Tt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(He){if(h?Mr(i):jr(),(t=ht)?(t=C_(t,Gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Rr!==null?{id:Oi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,Jt=i,ht=null)):t=null,t===null)throw Nr(i);return Ld(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(jr(),h=i.mode,b=fc({mode:"hidden",children:b},h),l=Ms(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=Wf(a),l.childLanes=ed(t,v,a),i.memoizedState=Jf,so(null,l)):(Mr(i),td(i,b))}var C=t.memoizedState;if(C!==null&&(b=C.dehydrated,b!==null)){if(d)i.flags&256?(Mr(i),i.flags&=-257,i=nd(t,i,a)):i.memoizedState!==null?(jr(),i.child=t.child,i.flags|=128,i=null):(jr(),b=l.fallback,h=i.mode,l=fc({mode:"visible",children:l.children},h),b=Ms(b,h,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,qs(i,t.child,null,a),l=i.child,l.memoizedState=Wf(a),l.childLanes=ed(t,v,a),i.memoizedState=Jf,i=so(null,l));else if(Mr(i),Ld(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var U=v.dgst;v=U,l=Error(s(419)),l.stack="",l.digest=v,Yl({value:l,source:null,stack:null}),i=nd(t,i,a)}else if(Vt||Ra(t,i,a,!1),v=(a&t.childLanes)!==0,Vt||v){if(v=ot,v!==null&&(l=xl(v,a),l!==0&&l!==C.retryLane))throw C.retryLane=l,Vs(t,l),bn(v,t,l),$f;jd(b)||bc(),i=nd(t,i,a)}else jd(b)?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,ht=Yn(b.nextSibling),Jt=i,He=!0,Ir=null,Gn=!1,t!==null&&rg(i,t),i=td(i,l.children),i.flags|=4096);return i}return h?(jr(),b=l.fallback,h=i.mode,C=t.child,U=C.sibling,l=Ki(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,U!==null?b=Ki(U,b):(b=Ms(b,h,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,so(null,l),l=i.child,b=t.child.memoizedState,b===null?b=Wf(a):(h=b.cachePool,h!==null?(C=Dt._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=cg(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=ed(t,v,a),i.memoizedState=Jf,so(t.child,l)):(Mr(i),a=t.child,t=a.sibling,a=Ki(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function td(t,i){return i=fc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function fc(t,i){return t=Rn(22,t,null,i),t.lanes=0,t}function nd(t,i,a){return qs(i,t.child,null,a),t=td(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ay(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),yf(t.return,i,a)}function id(t,i,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function Sy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=Tt.current,b=(v&2)!==0;if(b?(v=v&1|2,i.flags|=128):v&=1,re(Tt,v),en(t,i,l,a),l=He?Ql:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ay(t,a,i);else if(t.tag===19)Ay(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&ec(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),id(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&ec(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}id(i,!0,a,null,d,l);break;case"together":id(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function er(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Pr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ra(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ki(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ki(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function rd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Qu(t)))}function $T(t,i,a){switch(i.tag){case 3:le(i,i.stateNode.containerInfo),Cr(i,Dt,t.memoizedState.cache),js();break;case 27:case 5:Be(i);break;case 4:le(i,i.stateNode.containerInfo);break;case 10:Cr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Nf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Mr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Ty(t,i,a):(Mr(i),t=er(t,i,a),t!==null?t.sibling:null);Mr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ra(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Sy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Tt,Tt.current),l)break;return null;case 22:return i.lanes=0,gy(t,i,a,i.pendingProps);case 24:Cr(i,Dt,t.memoizedState.cache)}return er(t,i,a)}function wy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Vt=!0;else{if(!rd(t,a)&&(i.flags&128)===0)return Vt=!1,$T(t,i,a);Vt=(t.flags&131072)!==0}else Vt=!1,He&&(i.flags&1048576)!==0&&ig(i,Ql,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Us(i.elementType),i.type=t,typeof t=="function")uf(t)?(l=Hs(t,l),i.tag=1,i=Ey(null,i,t,l,a)):(i.tag=0,i=Zf(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===pe){i.tag=11,i=dy(null,i,t,l,a);break e}else if(h===I){i.tag=14,i=my(null,i,t,l,a);break e}}throw i=Ze(t)||t,Error(s(306,i,""))}}return i;case 0:return Zf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Hs(l,i.pendingProps),Ey(t,i,l,h,a);case 3:e:{if(le(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Sf(t,i),eo(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Cr(i,Dt,l),l!==d.cache&&_f(i,[Dt],a,!0),Wl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=by(t,i,l,a);break e}else if(l!==h){h=Bn(Error(s(424)),i),Yl(h),i=by(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ht=Yn(t.firstChild),Jt=i,He=!0,Ir=null,Gn=!0,a=gg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(js(),l===h){i=er(t,i,a);break e}en(t,i,l,a)}i=i.child}return i;case 26:return hc(t,i),t===null?(a=L_(i.type,null,i.pendingProps,null))?i.memoizedState=a:He||(a=i.type,t=i.pendingProps,l=Ic(Re.current).createElement(a),l[It]=i,l[Qt]=t,tn(l,a,t),Nt(l),i.stateNode=l):i.memoizedState=L_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Be(i),t===null&&He&&(l=i.stateNode=V_(i.type,i.pendingProps,Re.current),Jt=i,Gn=!0,h=ht,Hr(i.type)?(kd=h,ht=Yn(l.firstChild)):ht=h),en(t,i,i.pendingProps.children,a),hc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&He&&((h=l=ht)&&(l=x1(l,i.type,i.pendingProps,Gn),l!==null?(i.stateNode=l,Jt=i,ht=Yn(l.firstChild),Gn=!1,h=!0):h=!1),h||Nr(i)),Be(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Od(h,d)?l=null:v!==null&&Od(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Df(t,i,qT,null,null,a),bo._currentValue=h),hc(t,i),en(t,i,l,a),i.child;case 6:return t===null&&He&&((t=a=ht)&&(a=R1(a,i.pendingProps,Gn),a!==null?(i.stateNode=a,Jt=i,ht=null,t=!0):t=!1),t||Nr(i)),null;case 13:return Ty(t,i,a);case 4:return le(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=qs(i,null,l,a):en(t,i,l,a),i.child;case 11:return dy(t,i,i.type,i.pendingProps,a);case 7:return en(t,i,i.pendingProps,a),i.child;case 8:return en(t,i,i.pendingProps.children,a),i.child;case 12:return en(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Cr(i,i.type,l.value),en(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,ks(i),h=Wt(h),l=l(h),i.flags|=1,en(t,i,l,a),i.child;case 14:return my(t,i,i.type,i.pendingProps,a);case 15:return py(t,i,i.type,i.pendingProps,a);case 19:return Sy(t,i,a);case 31:return XT(t,i,a);case 22:return gy(t,i,a,i.pendingProps);case 24:return ks(i),l=Wt(Dt),t===null?(h=bf(),h===null&&(h=ot,d=vf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Af(i),Cr(i,Dt,h)):((t.lanes&a)!==0&&(Sf(t,i),eo(i,null,null,a),Wl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Cr(i,Dt,l)):(l=d.cache,Cr(i,Dt,l),l!==h.cache&&_f(i,[Dt],a,!0))),en(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function tr(t){t.flags|=4}function sd(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Jy())t.flags|=8192;else throw zs=$u,Tf}else t.flags&=-16777217}function xy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!q_(i))if(Jy())t.flags|=8192;else throw zs=$u,Tf}function dc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?vu():536870912,t.lanes|=i,Ua|=i)}function ao(t,i){if(!He)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ft(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function ZT(t,i,a){var l=i.pendingProps;switch(df(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return ft(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Zi(Dt),fe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xa(i)?tr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pf())),ft(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(tr(i),d!==null?(ft(i),xy(i,d)):(ft(i),sd(i,h,null,l,a))):d?d!==t.memoizedState?(tr(i),ft(i),xy(i,d)):(ft(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&tr(i),ft(i),sd(i,h,t,l,a)),null;case 27:if(je(i),a=Re.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&tr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ft(i),null}t=oe.current,xa(i)?sg(i):(t=V_(h,l,a),i.stateNode=t,tr(i))}return ft(i),null;case 5:if(je(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&tr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ft(i),null}if(d=oe.current,xa(i))sg(i);else{var v=Ic(Re.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[It]=i,d[Qt]=l;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=d;e:switch(tn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&tr(i)}}return ft(i),sd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&tr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Re.current,xa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Jt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[It]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||T_(t.nodeValue,a)),t||Nr(i,!0)}else t=Ic(t).createTextNode(l),t[It]=i,i.stateNode=t}return ft(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=xa(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[It]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),t=!1}else a=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Nn(i),i):(Nn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ft(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=xa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[It]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),h=!1}else h=pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Nn(i),i):(Nn(i),null)}return Nn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),dc(i,i.updateQueue),ft(i),null);case 4:return fe(),t===null&&Rd(i.stateNode.containerInfo),ft(i),null;case 10:return Zi(i.type),ft(i),null;case 19:if($(Tt),l=i.memoizedState,l===null)return ft(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)ao(l,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=ec(t),d!==null){for(i.flags|=128,ao(l,!1),t=d.updateQueue,i.updateQueue=t,dc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)eg(a,t),a=a.sibling;return re(Tt,Tt.current&1|2),He&&Xi(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Gt()>_c&&(i.flags|=128,h=!0,ao(l,!1),i.lanes=4194304)}else{if(!h)if(t=ec(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,dc(i,t),ao(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!He)return ft(i),null}else 2*Gt()-l.renderingStartTime>_c&&a!==536870912&&(i.flags|=128,h=!0,ao(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Gt(),t.sibling=null,a=Tt.current,re(Tt,h?a&1|2:a&1),He&&Xi(i,l.treeForkCount),t):(ft(i),null);case 22:case 23:return Nn(i),If(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),a=i.updateQueue,a!==null&&dc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&$(Ps),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Zi(Dt),ft(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function JT(t,i){switch(df(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Zi(Dt),fe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return je(i),null;case 31:if(i.memoizedState!==null){if(Nn(i),i.alternate===null)throw Error(s(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Nn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return $(Tt),null;case 4:return fe(),null;case 10:return Zi(i.type),null;case 22:case 23:return Nn(i),If(),t!==null&&$(Ps),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Zi(Dt),null;case 25:return null;default:return null}}function Ry(t,i){switch(df(i),i.tag){case 3:Zi(Dt),fe();break;case 26:case 27:case 5:je(i);break;case 4:fe();break;case 31:i.memoizedState!==null&&Nn(i);break;case 13:Nn(i);break;case 19:$(Tt);break;case 10:Zi(i.type);break;case 22:case 23:Nn(i),If(),t!==null&&$(Ps);break;case 24:Zi(Dt)}}function lo(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(b){tt(i,i.return,b)}}function Lr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=i;var C=a,U=b;try{U()}catch(G){tt(h,C,G)}}}l=l.next}while(l!==d)}}catch(G){tt(i,i.return,G)}}function Iy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{_g(i,a)}catch(l){tt(t,t.return,l)}}}function Ny(t,i,a){a.props=Hs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){tt(t,i,l)}}function oo(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){tt(t,i,h)}}function Mi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){tt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){tt(t,i,h)}else a.current=null}function Cy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){tt(t,t.return,h)}}function ad(t,i,a){try{var l=t.stateNode;E1(l,t.type,a,i),l[Qt]=i}catch(h){tt(t,t.return,h)}}function Dy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hr(t.type)||t.tag===4}function ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function od(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ii));else if(l!==4&&(l===27&&Hr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(od(t,i,a),t=t.sibling;t!==null;)od(t,i,a),t=t.sibling}function mc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Hr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(mc(t,i,a),t=t.sibling;t!==null;)mc(t,i,a),t=t.sibling}function Oy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);tn(i,l,a),i[It]=t,i[Qt]=a}catch(d){tt(t,t.return,d)}}var nr=!1,Mt=!1,ud=!1,Vy=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function WT(t,i){if(t=t.containerInfo,Cd=jc,t=Gp(t),tf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,b=-1,C=-1,U=0,G=0,Z=t,q=null;t:for(;;){for(var H;Z!==a||h!==0&&Z.nodeType!==3||(b=v+h),Z!==d||l!==0&&Z.nodeType!==3||(C=v+l),Z.nodeType===3&&(v+=Z.nodeValue.length),(H=Z.firstChild)!==null;)q=Z,Z=H;for(;;){if(Z===t)break t;if(q===a&&++U===h&&(b=v),q===d&&++G===l&&(C=v),(H=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=H}a=b===-1||C===-1?null:{start:b,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dd={focusedElem:t,selectionRange:a},jc=!1,Kt=i;Kt!==null;)if(i=Kt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Kt=t;else for(;Kt!==null;){switch(i=Kt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var he=Hs(a.type,h);t=l.getSnapshotBeforeUpdate(he,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){tt(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Md(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Md(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Kt=t;break}Kt=i.return}}function My(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:rr(t,a),l&4&&lo(5,a);break;case 1:if(rr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){tt(a,a.return,v)}else{var h=Hs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){tt(a,a.return,v)}}l&64&&Iy(a),l&512&&oo(a,a.return);break;case 3:if(rr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{_g(t,i)}catch(v){tt(a,a.return,v)}}break;case 27:i===null&&l&4&&Oy(a);case 26:case 5:rr(t,a),i===null&&l&4&&Cy(a),l&512&&oo(a,a.return);break;case 12:rr(t,a);break;case 31:rr(t,a),l&4&&ky(t,a);break;case 13:rr(t,a),l&4&&Py(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=o1.bind(null,a),I1(t,a))));break;case 22:if(l=a.memoizedState!==null||nr,!l){i=i!==null&&i.memoizedState!==null||Mt,h=nr;var d=Mt;nr=l,(Mt=i)&&!d?sr(t,a,(a.subtreeFlags&8772)!==0):rr(t,a),nr=h,Mt=d}break;case 30:break;default:rr(t,a)}}function jy(t){var i=t.alternate;i!==null&&(t.alternate=null,jy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ua(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,yn=!1;function ir(t,i,a){for(a=a.child;a!==null;)Ly(t,i,a),a=a.sibling}function Ly(t,i,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:Mt||Mi(a,i),ir(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Mi(a,i);var l=pt,h=yn;Hr(a.type)&&(pt=a.stateNode,yn=!1),ir(t,i,a),_o(a.stateNode),pt=l,yn=h;break;case 5:Mt||Mi(a,i);case 6:if(l=pt,h=yn,pt=null,ir(t,i,a),pt=l,yn=h,pt!==null)if(yn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(d){tt(a,i,d)}else try{pt.removeChild(a.stateNode)}catch(d){tt(a,i,d)}break;case 18:pt!==null&&(yn?(t=pt,I_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ya(t)):I_(pt,a.stateNode));break;case 4:l=pt,h=yn,pt=a.stateNode.containerInfo,yn=!0,ir(t,i,a),pt=l,yn=h;break;case 0:case 11:case 14:case 15:Lr(2,a,i),Mt||Lr(4,a,i),ir(t,i,a);break;case 1:Mt||(Mi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ny(a,i,l)),ir(t,i,a);break;case 21:ir(t,i,a);break;case 22:Mt=(l=Mt)||a.memoizedState!==null,ir(t,i,a),Mt=l;break;default:ir(t,i,a)}}function ky(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ya(t)}catch(a){tt(i,i.return,a)}}}function Py(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ya(t)}catch(a){tt(i,i.return,a)}}function e1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Vy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Vy),i;default:throw Error(s(435,t.tag))}}function pc(t,i){var a=e1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=u1.bind(null,t,l);l.then(h,h)}})}function _n(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(Hr(b.type)){pt=b.stateNode,yn=!1;break e}break;case 5:pt=b.stateNode,yn=!1;break e;case 3:case 4:pt=b.stateNode.containerInfo,yn=!0;break e}b=b.return}if(pt===null)throw Error(s(160));Ly(d,v,h),pt=null,yn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Uy(i,t),i=i.sibling}var ui=null;function Uy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(i,t),vn(t),l&4&&(Lr(3,t,t.return),lo(3,t),Lr(5,t,t.return));break;case 1:_n(i,t),vn(t),l&512&&(Mt||a===null||Mi(a,a.return)),l&64&&nr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ui;if(_n(i,t),vn(t),l&512&&(Mt||a===null||Mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ei]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),tn(d,l,a),d[It]=t,Nt(d),l=d;break e;case"link":var v=U_("link","href",h).get(l+(a.href||""));if(v){for(var b=0;b<v.length;b++)if(d=v[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(b,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;case"meta":if(v=U_("meta","content",h).get(l+(a.content||""))){for(b=0;b<v.length;b++)if(d=v[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(b,1);break t}}d=h.createElement(l),tn(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[It]=t,Nt(d),l=d}t.stateNode=l}else z_(h,t.type,t.stateNode);else t.stateNode=P_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?z_(h,t.type,t.stateNode):P_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&ad(t,t.memoizedProps,a.memoizedProps)}break;case 27:_n(i,t),vn(t),l&512&&(Mt||a===null||Mi(a,a.return)),a!==null&&l&4&&ad(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_n(i,t),vn(t),l&512&&(Mt||a===null||Mi(a,a.return)),t.flags&32){h=t.stateNode;try{gn(h,"")}catch(he){tt(t,t.return,he)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,ad(t,h,a!==null?a.memoizedProps:h)),l&1024&&(ud=!0);break;case 6:if(_n(i,t),vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(he){tt(t,t.return,he)}}break;case 3:if(Dc=null,h=ui,ui=Nc(i.containerInfo),_n(i,t),ui=h,vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ya(i.containerInfo)}catch(he){tt(t,t.return,he)}ud&&(ud=!1,zy(t));break;case 4:l=ui,ui=Nc(t.stateNode.containerInfo),_n(i,t),vn(t),ui=l;break;case 12:_n(i,t),vn(t);break;case 31:_n(i,t),vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,pc(t,l)));break;case 13:_n(i,t),vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yc=Gt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,pc(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,U=nr,G=Mt;if(nr=U||h,Mt=G||C,_n(i,t),Mt=G,nr=U,vn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||nr||Mt||Fs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=C.stateNode;var Z=C.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(he){tt(C,C.return,he)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(he){tt(C,C.return,he)}}}else if(i.tag===18){if(a===null){C=i;try{var H=C.stateNode;h?N_(H,!0):N_(C.stateNode,!1)}catch(he){tt(C,C.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,pc(t,a))));break;case 19:_n(i,t),vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,pc(t,l)));break;case 30:break;case 21:break;default:_n(i,t),vn(t)}}function vn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Dy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=ld(t);mc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(gn(v,""),a.flags&=-33);var b=ld(t);mc(t,b,v);break;case 3:case 4:var C=a.stateNode.containerInfo,U=ld(t);od(t,U,C);break;default:throw Error(s(161))}}catch(G){tt(t,t.return,G)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function zy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;zy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function rr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)My(t,i.alternate,i),i=i.sibling}function Fs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Lr(4,i,i.return),Fs(i);break;case 1:Mi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ny(i,i.return,a),Fs(i);break;case 27:_o(i.stateNode);case 26:case 5:Mi(i,i.return),Fs(i);break;case 22:i.memoizedState===null&&Fs(i);break;case 30:Fs(i);break;default:Fs(i)}t=t.sibling}}function sr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:sr(h,d,a),lo(4,d);break;case 1:if(sr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){tt(l,l.return,U)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)yg(C[h],b)}catch(U){tt(l,l.return,U)}}a&&v&64&&Iy(d),oo(d,d.return);break;case 27:Oy(d);case 26:case 5:sr(h,d,a),a&&l===null&&v&4&&Cy(d),oo(d,d.return);break;case 12:sr(h,d,a);break;case 31:sr(h,d,a),a&&v&4&&ky(h,d);break;case 13:sr(h,d,a),a&&v&4&&Py(h,d);break;case 22:d.memoizedState===null&&sr(h,d,a),oo(d,d.return);break;case 30:break;default:sr(h,d,a)}i=i.sibling}}function cd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Kl(a))}function hd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Kl(t))}function ci(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)qy(t,i,a,l),i=i.sibling}function qy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ci(t,i,a,l),h&2048&&lo(9,i);break;case 1:ci(t,i,a,l);break;case 3:ci(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Kl(t)));break;case 12:if(h&2048){ci(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){tt(i,i.return,C)}}else ci(t,i,a,l);break;case 31:ci(t,i,a,l);break;case 13:ci(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ci(t,i,a,l):uo(t,i):d._visibility&2?ci(t,i,a,l):(d._visibility|=2,La(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&cd(v,i);break;case 24:ci(t,i,a,l),h&2048&&hd(i.alternate,i);break;default:ci(t,i,a,l)}}function La(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,v=i,b=a,C=l,U=v.flags;switch(v.tag){case 0:case 11:case 15:La(d,v,b,C,h),lo(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?La(d,v,b,C,h):uo(d,v):(G._visibility|=2,La(d,v,b,C,h)),h&&U&2048&&cd(v.alternate,v);break;case 24:La(d,v,b,C,h),h&&U&2048&&hd(v.alternate,v);break;default:La(d,v,b,C,h)}i=i.sibling}}function uo(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:uo(a,l),h&2048&&cd(l.alternate,l);break;case 24:uo(a,l),h&2048&&hd(l.alternate,l);break;default:uo(a,l)}i=i.sibling}}var co=8192;function ka(t,i,a){if(t.subtreeFlags&co)for(t=t.child;t!==null;)By(t,i,a),t=t.sibling}function By(t,i,a){switch(t.tag){case 26:ka(t,i,a),t.flags&co&&t.memoizedState!==null&&z1(a,ui,t.memoizedState,t.memoizedProps);break;case 5:ka(t,i,a);break;case 3:case 4:var l=ui;ui=Nc(t.stateNode.containerInfo),ka(t,i,a),ui=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=co,co=16777216,ka(t,i,a),co=l):ka(t,i,a));break;default:ka(t,i,a)}}function Hy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ho(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,Gy(l,t)}Hy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fy(t),t=t.sibling}function Fy(t){switch(t.tag){case 0:case 11:case 15:ho(t),t.flags&2048&&Lr(9,t,t.return);break;case 3:ho(t);break;case 12:ho(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,gc(t)):ho(t);break;default:ho(t)}}function gc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Kt=l,Gy(l,t)}Hy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Lr(8,i,i.return),gc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,gc(i));break;default:gc(i)}t=t.sibling}}function Gy(t,i){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:Lr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Kl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Kt=l;else e:for(a=t;Kt!==null;){l=Kt;var h=l.sibling,d=l.return;if(jy(l),l===a){Kt=null;break e}if(h!==null){h.return=d,Kt=h;break e}Kt=d}}}var t1={getCacheForType:function(t){var i=Wt(Dt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Wt(Dt).controller.signal}},n1=typeof WeakMap=="function"?WeakMap:Map,$e=0,ot=null,Ve=null,Le=0,et=0,Cn=null,kr=!1,Pa=!1,fd=!1,ar=0,vt=0,Pr=0,Gs=0,dd=0,Dn=0,Ua=0,fo=null,En=null,md=!1,yc=0,Qy=0,_c=1/0,vc=null,Ur=null,Ut=0,zr=null,za=null,lr=0,pd=0,gd=null,Yy=null,mo=0,yd=null;function On(){return($e&2)!==0&&Le!==0?Le&-Le:F.T!==null?Ad():Eu()}function Ky(){if(Dn===0)if((Le&536870912)===0||He){var t=_s;_s<<=1,(_s&3932160)===0&&(_s=262144),Dn=t}else Dn=536870912;return t=In.current,t!==null&&(t.flags|=32),Dn}function bn(t,i,a){(t===ot&&(et===2||et===9)||t.cancelPendingCommit!==null)&&(qa(t,0),qr(t,Le,Dn,!1)),vs(t,a),(($e&2)===0||t!==ot)&&(t===ot&&(($e&2)===0&&(Gs|=a),vt===4&&qr(t,Le,Dn,!1)),ji(t))}function Xy(t,i,a){if(($e&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||ei(t,i),h=l?s1(t,i):vd(t,i,!0),d=l;do{if(h===0){Pa&&!l&&qr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!i1(a)){h=vd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var b=t;h=fo;var C=b.current.memoizedState.isDehydrated;if(C&&(qa(b,v).flags|=256),v=vd(b,v,!1),v!==2){if(fd&&!C){b.errorRecoveryDisabledLanes|=d,Gs|=d,h=4;break e}d=En,En=h,d!==null&&(En===null?En=d:En.push.apply(En,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){qa(t,0),qr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:qr(l,i,Dn,!kr);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=yc+300-Gt(),10<h)){if(qr(l,i,Dn,!kr),yi(l,0,!0)!==0)break e;lr=i,l.timeoutHandle=x_($y.bind(null,l,a,En,vc,md,i,Dn,Gs,Ua,kr,d,"Throttled",-0,0),h);break e}$y(l,a,En,vc,md,i,Dn,Gs,Ua,kr,d,null,-0,0)}}break}while(!0);ji(t)}function $y(t,i,a,l,h,d,v,b,C,U,G,Z,q,H){if(t.timeoutHandle=-1,Z=i.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},By(i,d,Z);var he=(d&62914560)===d?yc-Gt():(d&4194048)===d?Qy-Gt():0;if(he=q1(Z,he),he!==null){lr=d,t.cancelPendingCommit=he(r_.bind(null,t,i,d,a,l,h,v,b,C,G,Z,null,q,H)),qr(t,d,v,!U);return}}r_(t,i,d,a,l,h,v,b,C)}function i1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!xn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qr(t,i,a,l){i&=~dd,i&=~Gs,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Et(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Es(t,a,i)}function Ec(){return($e&6)===0?(po(0),!1):!0}function _d(){if(Ve!==null){if(et===0)var t=Ve.return;else t=Ve,$i=Ls=null,Mf(t),Da=null,$l=0,t=Ve;for(;t!==null;)Ry(t.alternate,t),t=t.return;Ve=null}}function qa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,A1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),lr=0,_d(),ot=t,Ve=a=Ki(t.current,null),Le=i,et=0,Cn=null,kr=!1,Pa=ei(t,i),fd=!1,Ua=Dn=dd=Gs=Pr=vt=0,En=fo=null,md=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Et(l),d=1<<h;i|=t[h],l&=~d}return ar=i,qu(),a}function Zy(t,i){Ne=null,F.H=ro,i===Ca||i===Xu?(i=dg(),et=3):i===Tf?(i=dg(),et=4):et=i===$f?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,Ve===null&&(vt=1,uc(t,Bn(i,t.current)))}function Jy(){var t=In.current;return t===null?!0:(Le&4194048)===Le?Qn===null:(Le&62914560)===Le||(Le&536870912)!==0?t===Qn:!1}function Wy(){var t=F.H;return F.H=ro,t===null?ro:t}function e_(){var t=F.A;return F.A=t1,t}function bc(){vt=4,kr||(Le&4194048)!==Le&&In.current!==null||(Pa=!0),(Pr&134217727)===0&&(Gs&134217727)===0||ot===null||qr(ot,Le,Dn,!1)}function vd(t,i,a){var l=$e;$e|=2;var h=Wy(),d=e_();(ot!==t||Le!==i)&&(vc=null,qa(t,i)),i=!1;var v=vt;e:do try{if(et!==0&&Ve!==null){var b=Ve,C=Cn;switch(et){case 8:_d(),v=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var U=et;if(et=0,Cn=null,Ba(t,b,C,U),a&&Pa){v=0;break e}break;default:U=et,et=0,Cn=null,Ba(t,b,C,U)}}r1(),v=vt;break}catch(G){Zy(t,G)}while(!0);return i&&t.shellSuspendCounter++,$i=Ls=null,$e=l,F.H=h,F.A=d,Ve===null&&(ot=null,Le=0,qu()),v}function r1(){for(;Ve!==null;)t_(Ve)}function s1(t,i){var a=$e;$e|=2;var l=Wy(),h=e_();ot!==t||Le!==i?(vc=null,_c=Gt()+500,qa(t,i)):Pa=ei(t,i);e:do try{if(et!==0&&Ve!==null){i=Ve;var d=Cn;t:switch(et){case 1:et=0,Cn=null,Ba(t,i,d,1);break;case 2:case 9:if(hg(d)){et=0,Cn=null,n_(i);break}i=function(){et!==2&&et!==9||ot!==t||(et=7),ji(t)},d.then(i,i);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:hg(d)?(et=0,Cn=null,n_(i)):(et=0,Cn=null,Ba(t,i,d,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var b=Ve;if(v?q_(v):b.stateNode.complete){et=0,Cn=null;var C=b.sibling;if(C!==null)Ve=C;else{var U=b.return;U!==null?(Ve=U,Tc(U)):Ve=null}break t}}et=0,Cn=null,Ba(t,i,d,5);break;case 6:et=0,Cn=null,Ba(t,i,d,6);break;case 8:_d(),vt=6;break e;default:throw Error(s(462))}}a1();break}catch(G){Zy(t,G)}while(!0);return $i=Ls=null,F.H=l,F.A=h,$e=a,Ve!==null?0:(ot=null,Le=0,qu(),vt)}function a1(){for(;Ve!==null&&!Al();)t_(Ve)}function t_(t){var i=wy(t.alternate,t,ar);t.memoizedProps=t.pendingProps,i===null?Tc(t):Ve=i}function n_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=vy(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=vy(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:Mf(i);default:Ry(a,i),i=Ve=eg(i,ar),i=wy(a,i,ar)}t.memoizedProps=t.pendingProps,i===null?Tc(t):Ve=i}function Ba(t,i,a,l){$i=Ls=null,Mf(i),Da=null,$l=0;var h=i.return;try{if(KT(t,h,i,a,Le)){vt=1,uc(t,Bn(a,t.current)),Ve=null;return}}catch(d){if(h!==null)throw Ve=h,d;vt=1,uc(t,Bn(a,t.current)),Ve=null;return}i.flags&32768?(He||l===1?t=!0:Pa||(Le&536870912)!==0?t=!1:(kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),i_(i,t)):Tc(i)}function Tc(t){var i=t;do{if((i.flags&32768)!==0){i_(i,kr);return}t=i.return;var a=ZT(i.alternate,i,ar);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=t}while(i!==null);vt===0&&(vt=5)}function i_(t,i){do{var a=JT(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);vt=6,Ve=null}function r_(t,i,a,l,h,d,v,b,C){t.cancelPendingCommit=null;do Ac();while(Ut!==0);if(($e&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=lf,Zh(t,a,d,v,b,C),t===ot&&(Ve=ot=null,Le=0),za=i,zr=t,lr=a,pd=d,gd=h,Yy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,c1(Jn,function(){return u_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,h=ie.p,ie.p=2,v=$e,$e|=4;try{WT(t,i,a)}finally{$e=v,ie.p=h,F.T=l}}Ut=1,s_(),a_(),l_()}}function s_(){if(Ut===1){Ut=0;var t=zr,i=za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=ie.p;ie.p=2;var h=$e;$e|=4;try{Uy(i,t);var d=Dd,v=Gp(t.containerInfo),b=d.focusedElem,C=d.selectionRange;if(v!==b&&b&&b.ownerDocument&&Fp(b.ownerDocument.documentElement,b)){if(C!==null&&tf(b)){var U=C.start,G=C.end;if(G===void 0&&(G=U),"selectionStart"in b)b.selectionStart=U,b.selectionEnd=Math.min(G,b.value.length);else{var Z=b.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var H=q.getSelection(),he=b.textContent.length,Ee=Math.min(C.start,he),lt=C.end===void 0?Ee:Math.min(C.end,he);!H.extend&&Ee>lt&&(v=lt,lt=Ee,Ee=v);var L=Hp(b,Ee),V=Hp(b,lt);if(L&&V&&(H.rangeCount!==1||H.anchorNode!==L.node||H.anchorOffset!==L.offset||H.focusNode!==V.node||H.focusOffset!==V.offset)){var P=Z.createRange();P.setStart(L.node,L.offset),H.removeAllRanges(),Ee>lt?(H.addRange(P),H.extend(V.node,V.offset)):(P.setEnd(V.node,V.offset),H.addRange(P))}}}}for(Z=[],H=b;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var K=Z[b];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}jc=!!Cd,Dd=Cd=null}finally{$e=h,ie.p=l,F.T=a}}t.current=i,Ut=2}}function a_(){if(Ut===2){Ut=0;var t=zr,i=za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=ie.p;ie.p=2;var h=$e;$e|=4;try{My(t,i.alternate,i)}finally{$e=h,ie.p=l,F.T=a}}Ut=3}}function l_(){if(Ut===4||Ut===3){Ut=0,Sl();var t=zr,i=za,a=lr,l=Yy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,za=zr=null,o_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ur=null),Fi(a),i=i.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Wn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=F.T,h=ie.p,ie.p=2,F.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var b=l[v];d(b.value,{componentStack:b.stack})}}finally{F.T=i,ie.p=h}}(lr&3)!==0&&Ac(),ji(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===yd?mo++:(mo=0,yd=t):mo=0,po(0)}}function o_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Kl(i)))}function Ac(){return s_(),a_(),l_(),u_()}function u_(){if(Ut!==5)return!1;var t=zr,i=pd;pd=0;var a=Fi(lr),l=F.T,h=ie.p;try{ie.p=32>a?32:a,F.T=null,a=gd,gd=null;var d=zr,v=lr;if(Ut=0,za=zr=null,lr=0,($e&6)!==0)throw Error(s(331));var b=$e;if($e|=4,Fy(d.current),qy(d,d.current,v,a),$e=b,po(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Wn,d)}catch{}return!0}finally{ie.p=h,F.T=l,o_(t,i)}}function c_(t,i,a){i=Bn(a,i),i=Xf(t.stateNode,i,2),t=Vr(t,i,2),t!==null&&(vs(t,2),ji(t))}function tt(t,i,a){if(t.tag===3)c_(t,t,a);else for(;i!==null;){if(i.tag===3){c_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ur===null||!Ur.has(l))){t=Bn(a,t),a=hy(2),l=Vr(i,a,2),l!==null&&(fy(a,l,i,t),vs(l,2),ji(l));break}}i=i.return}}function Ed(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new n1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(fd=!0,h.add(a),t=l1.bind(null,t,i,a),i.then(t,t))}function l1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ot===t&&(Le&a)===a&&(vt===4||vt===3&&(Le&62914560)===Le&&300>Gt()-yc?($e&2)===0&&qa(t,0):dd|=a,Ua===Le&&(Ua=0)),ji(t)}function h_(t,i){i===0&&(i=vu()),t=Vs(t,i),t!==null&&(vs(t,i),ji(t))}function o1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),h_(t,a)}function u1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),h_(t,a)}function c1(t,i){return ct(t,i)}var Sc=null,Ha=null,bd=!1,wc=!1,Td=!1,Br=0;function ji(t){t!==Ha&&t.next===null&&(Ha===null?Sc=Ha=t:Ha=Ha.next=t),wc=!0,bd||(bd=!0,f1())}function po(t,i){if(!Td&&wc){Td=!0;do for(var a=!1,l=Sc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Et(42|t)+1)-1,d&=h&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,p_(l,d))}else d=Le,d=yi(l,l===ot?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ei(l,d)||(a=!0,p_(l,d));l=l.next}while(a);Td=!1}}function h1(){f_()}function f_(){wc=bd=!1;var t=0;Br!==0&&T1()&&(t=Br);for(var i=Gt(),a=null,l=Sc;l!==null;){var h=l.next,d=d_(l,i);d===0?(l.next=null,a===null?Sc=h:a.next=h,h===null&&(Ha=a)):(a=l,(t!==0||(d&3)!==0)&&(wc=!0)),l=h}Ut!==0&&Ut!==5||po(t),Br!==0&&(Br=0)}function d_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Et(d),b=1<<v,C=h[v];C===-1?((b&a)===0||(b&l)!==0)&&(h[v]=$h(b,i)):C<=i&&(t.expiredLanes|=b),d&=~b}if(i=ot,a=Le,a=yi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(et===2||et===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Zn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ei(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&Zn(l),Fi(a)){case 2:case 8:a=yr;break;case 32:a=Jn;break;case 268435456:a=mu;break;default:a=Jn}return l=m_.bind(null,t),a=ct(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&Zn(l),t.callbackPriority=2,t.callbackNode=null,2}function m_(t,i){if(Ut!==0&&Ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ac()&&t.callbackNode!==a)return null;var l=Le;return l=yi(t,t===ot?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Xy(t,l,i),d_(t,Gt()),t.callbackNode!=null&&t.callbackNode===a?m_.bind(null,t):null)}function p_(t,i){if(Ac())return null;Xy(t,i,!0)}function f1(){S1(function(){($e&6)!==0?ct(ys,h1):f_()})}function Ad(){if(Br===0){var t=Ia;t===0&&(t=pi,pi<<=1,(pi&261888)===0&&(pi=256)),Br=t}return Br}function g_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:da(""+t)}function y_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function d1(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=g_((h[Qt]||null).action),v=l.submitter;v&&(i=(i=v[Qt]||null)?g_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var b=new Ii("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Br!==0){var C=v?y_(h,v):new FormData(h);Hf(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(b.preventDefault(),C=v?y_(h,v):new FormData(h),Hf(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var Sd=0;Sd<af.length;Sd++){var wd=af[Sd],m1=wd.toLowerCase(),p1=wd[0].toUpperCase()+wd.slice(1);oi(m1,"on"+p1)}oi(Kp,"onAnimationEnd"),oi(Xp,"onAnimationIteration"),oi($p,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(DT,"onTransitionRun"),oi(OT,"onTransitionStart"),oi(VT,"onTransitionCancel"),oi(Zp,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(go));function __(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var b=l[v],C=b.instance,U=b.currentTarget;if(b=b.listener,C!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=U;try{d(h)}catch(G){zu(G)}h.currentTarget=null,d=C}else for(v=0;v<l.length;v++){if(b=l[v],C=b.instance,U=b.currentTarget,b=b.listener,C!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=U;try{d(h)}catch(G){zu(G)}h.currentTarget=null,d=C}}}}function Me(t,i){var a=i[oa];a===void 0&&(a=i[oa]=new Set);var l=t+"__bubble";a.has(l)||(v_(i,t,2,!1),a.add(l))}function xd(t,i,a){var l=0;i&&(l|=4),v_(a,t,l,i)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Rd(t){if(!t[xc]){t[xc]=!0,Rl.forEach(function(a){a!=="selectionchange"&&(g1.has(a)||xd(a,!1,t),xd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[xc]||(i[xc]=!0,xd("selectionchange",!1,i))}}function v_(t,i,a,l){switch(K_(i)){case 2:var h=F1;break;case 8:h=G1;break;default:h=Bd}a=h.bind(null,i,a,t),h=void 0,!ws||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Id(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var b=l.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=l.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=bi(b),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){l=d=v;continue e}b=b.parentNode}}l=l.return}Ar(function(){var U=d,G=Pn(a),Z=[];e:{var q=Jp.get(t);if(q!==void 0){var H=Ii,he=t;switch(t){case"keypress":if(Rs(a)===0)break e;case"keydown":case"keyup":H=ku;break;case"focusin":he="focus",H=Ns;break;case"focusout":he="blur",H=Ns;break;case"beforeblur":case"afterblur":H=Ns;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=p;break;case Kp:case Xp:case $p:H=Cu;break;case Zp:H=S;break;case"scroll":case"scrollend":H=Ul;break;case"wheel":H=B;break;case"copy":case"cut":case"paste":H=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Yi;break;case"toggle":case"beforetoggle":H=Ie}var Ee=(i&4)!==0,lt=!Ee&&(t==="scroll"||t==="scrollend"),L=Ee?q!==null?q+"Capture":null:q;Ee=[];for(var V=U,P;V!==null;){var K=V;if(P=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||P===null||L===null||(K=ri(V,L),K!=null&&Ee.push(yo(V,K,P))),lt)break;V=V.return}0<Ee.length&&(q=new H(q,he,null,a,G),Z.push({event:q,listeners:Ee}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Ll&&(he=a.relatedTarget||a.fromElement)&&(bi(he)||he[vi]))break e;if((H||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,H?(he=a.relatedTarget||a.toElement,H=U,he=he?bi(he):null,he!==null&&(lt=u(he),Ee=he.tag,he!==lt||Ee!==5&&Ee!==27&&Ee!==6)&&(he=null)):(H=null,he=U),H!==he)){if(Ee=zl,K="onMouseLeave",L="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=Yi,K="onPointerLeave",L="onPointerEnter",V="pointer"),lt=H==null?q:Sn(H),P=he==null?q:Sn(he),q=new Ee(K,V+"leave",H,a,G),q.target=lt,q.relatedTarget=P,K=null,bi(G)===U&&(Ee=new Ee(L,V+"enter",he,a,G),Ee.target=P,Ee.relatedTarget=lt,K=Ee),lt=K,H&&he)t:{for(Ee=y1,L=H,V=he,P=0,K=L;K;K=Ee(K))P++;K=0;for(var _e=V;_e;_e=Ee(_e))K++;for(;0<P-K;)L=Ee(L),P--;for(;0<K-P;)V=Ee(V),K--;for(;P--;){if(L===V||V!==null&&L===V.alternate){Ee=L;break t}L=Ee(L),V=Ee(V)}Ee=null}else Ee=null;H!==null&&E_(Z,q,H,Ee,!1),he!==null&&lt!==null&&E_(Z,lt,he,Ee,!0)}}e:{if(q=U?Sn(U):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var Qe=kp;else if(jp(q))if(Pp)Qe=IT;else{Qe=xT;var de=wT}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?U&&fa(U.elementType)&&(Qe=kp):Qe=RT;if(Qe&&(Qe=Qe(t,U))){Lp(Z,Qe,a,G);break e}de&&de(t,q,U),t==="focusout"&&U&&q.type==="number"&&U.memoizedProps.value!=null&&Vl(q,"number",q.value)}switch(de=U?Sn(U):window,t){case"focusin":(jp(de)||de.contentEditable==="true")&&(Ea=de,nf=U,Gl=null);break;case"focusout":Gl=nf=Ea=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Qp(Z,a,G);break;case"selectionchange":if(CT)break;case"keydown":case"keyup":Qp(Z,a,G)}var Ce;if(Xe)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else va?Cs(t,a)&&(ke="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Di&&a.locale!=="ko"&&(va||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&va&&(Ce=Pl()):(Ri=G,kl="value"in Ri?Ri.value:Ri.textContent,va=!0)),de=Rc(U,ke),0<de.length&&(ke=new Ci(ke,t,null,a,G),Z.push({event:ke,listeners:de}),Ce?ke.data=Ce:(Ce=_a(a),Ce!==null&&(ke.data=Ce)))),(Ce=zn?bT(t,a):TT(t,a))&&(ke=Rc(U,"onBeforeInput"),0<ke.length&&(de=new Ci("onBeforeInput","beforeinput",null,a,G),Z.push({event:de,listeners:ke}),de.data=Ce)),d1(Z,t,U,a,G)}__(Z,i)})}function yo(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Rc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ri(t,a),h!=null&&l.unshift(yo(t,h,d)),h=ri(t,i),h!=null&&l.push(yo(t,h,d))),t.tag===3)return l;t=t.return}return[]}function y1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function E_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var b=a,C=b.alternate,U=b.stateNode;if(b=b.tag,C!==null&&C===l)break;b!==5&&b!==26&&b!==27||U===null||(C=U,h?(U=ri(a,d),U!=null&&v.unshift(yo(a,U,C))):h||(U=ri(a,d),U!=null&&v.push(yo(a,U,C)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var _1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function b_(t){return(typeof t=="string"?t:""+t).replace(_1,`
`).replace(v1,"")}function T_(t,i){return i=b_(i),b_(t)===i}function at(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||gn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&gn(t,""+l);break;case"className":wn(t,"class",l);break;case"tabIndex":wn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(t,a,l);break;case"style":jl(t,l,d);break;case"data":if(i!=="object"){wn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=da(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&at(t,i,"name",h.name,h,null),at(t,i,"formEncType",h.formEncType,h,null),at(t,i,"formMethod",h.formMethod,h,null),at(t,i,"formTarget",h.formTarget,h,null)):(at(t,i,"encType",h.encType,h,null),at(t,i,"method",h.method,h,null),at(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=da(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ii);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=da(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),ca(t,"popover",l);break;case"xlinkActuate":Ct(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ct(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ct(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ct(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ct(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ct(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ca(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ru.get(a)||a,ca(t,a,l))}}function Nd(t,i,a,l,h,d){switch(a){case"style":jl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?gn(t,l):(typeof l=="number"||typeof l=="bigint")&&gn(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ca(t,a,l)}}}function tn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:at(t,i,d,v,a,null)}}h&&at(t,i,"srcSet",a.srcSet,a,null),l&&at(t,i,"src",a.src,a,null);return;case"input":Me("invalid",t);var b=d=v=h=null,C=null,U=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":h=G;break;case"type":v=G;break;case"checked":C=G;break;case"defaultChecked":U=G;break;case"value":d=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:at(t,i,l,G,a,null)}}Su(t,d,b,C,U,v,h,!1);return;case"select":Me("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":v=b;break;case"multiple":l=b;default:at(t,i,h,b,a,null)}i=d,a=v,t.multiple=!!l,i!=null?vr(t,!!l,i,!1):a!=null&&vr(t,!!l,a,!0);return;case"textarea":Me("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(b=a[v],b!=null))switch(v){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:at(t,i,v,b,a,null)}Er(t,l,h,d);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(t,i,C,l,a,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<go.length;l++)Me(go[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:at(t,i,U,l,a,null)}return;default:if(fa(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&Nd(t,i,G,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&at(t,i,b,l,a,null))}function E1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,b=null,C=null,U=null,G=null;for(H in a){var Z=a[H];if(a.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=Z;default:l.hasOwnProperty(H)||at(t,i,H,null,l,Z)}}for(var q in l){var H=l[q];if(Z=a[q],l.hasOwnProperty(q)&&(H!=null||Z!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":U=H;break;case"defaultChecked":G=H;break;case"value":v=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==Z&&at(t,i,q,H,l,Z)}}ha(t,v,b,C,U,G,d,h);return;case"select":H=v=b=q=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":H=C;default:l.hasOwnProperty(d)||at(t,i,d,null,l,C)}for(h in l)if(d=l[h],C=a[h],l.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":v=d;default:d!==C&&at(t,i,h,d,l,C)}i=b,a=v,l=H,q!=null?vr(t,!!a,q,!1):!!l!=!!a&&(i!=null?vr(t,!!a,i,!0):vr(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:at(t,i,b,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&at(t,i,v,h,l,d)}wu(t,q,H);return;case"option":for(var he in a)if(q=a[he],a.hasOwnProperty(he)&&q!=null&&!l.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:at(t,i,he,null,l,q)}for(C in l)if(q=l[C],H=a[C],l.hasOwnProperty(C)&&q!==H&&(q!=null||H!=null))switch(C){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:at(t,i,C,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)q=a[Ee],a.hasOwnProperty(Ee)&&q!=null&&!l.hasOwnProperty(Ee)&&at(t,i,Ee,null,l,q);for(U in l)if(q=l[U],H=a[U],l.hasOwnProperty(U)&&q!==H&&(q!=null||H!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:at(t,i,U,q,l,H)}return;default:if(fa(i)){for(var lt in a)q=a[lt],a.hasOwnProperty(lt)&&q!==void 0&&!l.hasOwnProperty(lt)&&Nd(t,i,lt,void 0,l,q);for(G in l)q=l[G],H=a[G],!l.hasOwnProperty(G)||q===H||q===void 0&&H===void 0||Nd(t,i,G,q,l,H);return}}for(var L in a)q=a[L],a.hasOwnProperty(L)&&q!=null&&!l.hasOwnProperty(L)&&at(t,i,L,null,l,q);for(Z in l)q=l[Z],H=a[Z],!l.hasOwnProperty(Z)||q===H||q==null&&H==null||at(t,i,Z,q,l,H)}function A_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function b1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,b=h.duration;if(d&&b&&A_(v)){for(v=0,b=h.responseEnd,l+=1;l<a.length;l++){var C=a[l],U=C.startTime;if(U>b)break;var G=C.transferSize,Z=C.initiatorType;G&&A_(Z)&&(C=C.responseEnd,v+=G*(C<b?1:(b-U)/(C-U)))}if(--l,i+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Cd=null,Dd=null;function Ic(t){return t.nodeType===9?t:t.ownerDocument}function S_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Od(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vd=null;function T1(){var t=window.event;return t&&t.type==="popstate"?t===Vd?!1:(Vd=t,!0):(Vd=null,!1)}var x_=typeof setTimeout=="function"?setTimeout:void 0,A1=typeof clearTimeout=="function"?clearTimeout:void 0,R_=typeof Promise=="function"?Promise:void 0,S1=typeof queueMicrotask=="function"?queueMicrotask:typeof R_<"u"?function(t){return R_.resolve(null).then(t).catch(w1)}:x_;function w1(t){setTimeout(function(){throw t})}function Hr(t){return t==="head"}function I_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Ya(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")_o(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,_o(a);for(var d=a.firstChild;d;){var v=d.nextSibling,b=d.nodeName;d[Ei]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&_o(t.ownerDocument.body);a=h}while(a);Ya(i)}function N_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Md(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Md(a),ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function x1(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ei])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Yn(t.nextSibling),t===null)break}return null}function R1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Yn(t.nextSibling),t===null))return null;return t}function C_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Yn(t.nextSibling),t===null))return null;return t}function jd(t){return t.data==="$?"||t.data==="$~"}function Ld(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function I1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Yn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var kd=null;function D_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Yn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function O_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function V_(t,i,a){switch(i=Ic(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function _o(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ua(t)}var Kn=new Map,M_=new Set;function Nc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var or=ie.d;ie.d={f:N1,r:C1,D:D1,C:O1,L:V1,m:M1,X:L1,S:j1,M:k1};function N1(){var t=or.f(),i=Ec();return t||i}function C1(t){var i=kn(t);i!==null&&i.tag===5&&i.type==="form"?Zg(i):or.r(t)}var Fa=typeof document>"u"?null:document;function j_(t,i,a){var l=Fa;if(l&&typeof i=="string"&&i){var h=pn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),M_.has(h)||(M_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),tn(i,"link",t),Nt(i),l.head.appendChild(i)))}}function D1(t){or.D(t),j_("dns-prefetch",t,null)}function O1(t,i){or.C(t,i),j_("preconnect",t,i)}function V1(t,i,a){or.L(t,i,a);var l=Fa;if(l&&t&&i){var h='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pn(a.imageSizes)+'"]')):h+='[href="'+pn(t)+'"]';var d=h;switch(i){case"style":d=Ga(t);break;case"script":d=Qa(t)}Kn.has(d)||(t=x({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Kn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(vo(d))||i==="script"&&l.querySelector(Eo(d))||(i=l.createElement("link"),tn(i,"link",t),Nt(i),l.head.appendChild(i)))}}function M1(t,i){or.m(t,i);var a=Fa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+pn(l)+'"][href="'+pn(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Qa(t)}if(!Kn.has(d)&&(t=x({rel:"modulepreload",href:t},i),Kn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Eo(d)))return}l=a.createElement("link"),tn(l,"link",t),Nt(l),a.head.appendChild(l)}}}function j1(t,i,a){or.S(t,i,a);var l=Fa;if(l&&t){var h=Ti(l).hoistableStyles,d=Ga(t);i=i||"default";var v=h.get(d);if(!v){var b={loading:0,preload:null};if(v=l.querySelector(vo(d)))b.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Kn.get(d))&&Pd(t,a);var C=v=l.createElement("link");Nt(C),tn(C,"link",t),C._p=new Promise(function(U,G){C.onload=U,C.onerror=G}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Cc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(d,v)}}}function L1(t,i){or.X(t,i);var a=Fa;if(a&&t){var l=Ti(a).hoistableScripts,h=Qa(t),d=l.get(h);d||(d=a.querySelector(Eo(h)),d||(t=x({src:t,async:!0},i),(i=Kn.get(h))&&Ud(t,i),d=a.createElement("script"),Nt(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function k1(t,i){or.M(t,i);var a=Fa;if(a&&t){var l=Ti(a).hoistableScripts,h=Qa(t),d=l.get(h);d||(d=a.querySelector(Eo(h)),d||(t=x({src:t,async:!0,type:"module"},i),(i=Kn.get(h))&&Ud(t,i),d=a.createElement("script"),Nt(d),tn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function L_(t,i,a,l){var h=(h=Re.current)?Nc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ga(a.href),a=Ti(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ga(a.href);var d=Ti(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(vo(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(t,a),d||P1(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Qa(a),a=Ti(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ga(t){return'href="'+pn(t)+'"'}function vo(t){return'link[rel="stylesheet"]['+t+"]"}function k_(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function P1(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),tn(i,"link",a),Nt(i),t.head.appendChild(i))}function Qa(t){return'[src="'+pn(t)+'"]'}function Eo(t){return"script[async]"+t}function P_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+pn(a.href)+'"]');if(l)return i.instance=l,Nt(l),l;var h=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Nt(l),tn(l,"style",h),Cc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Ga(a.href);var d=t.querySelector(vo(h));if(d)return i.state.loading|=4,i.instance=d,Nt(d),d;l=k_(a),(h=Kn.get(h))&&Pd(l,h),d=(t.ownerDocument||t).createElement("link"),Nt(d);var v=d;return v._p=new Promise(function(b,C){v.onload=b,v.onerror=C}),tn(d,"link",l),i.state.loading|=4,Cc(d,a.precedence,t),i.instance=d;case"script":return d=Qa(a.src),(h=t.querySelector(Eo(d)))?(i.instance=h,Nt(h),h):(l=a,(h=Kn.get(d))&&(l=x({},a),Ud(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Nt(h),tn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Cc(l,a.precedence,t));return i.instance}function Cc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var b=l[v];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Pd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Ud(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Dc=null;function U_(t,i,a){if(Dc===null){var l=new Map,h=Dc=new Map;h.set(a,l)}else h=Dc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ei]||d[It]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var b=l.get(v);b?b.push(d):l.set(v,[d])}}return l}function z_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function U1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function q_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function z1(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ga(l.href),d=i.querySelector(vo(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Oc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Nt(d);return}d=i.ownerDocument||i,l=k_(l),(h=Kn.get(h))&&Pd(l,h),d=d.createElement("link"),Nt(d);var v=d;v._p=new Promise(function(b,C){v.onload=b,v.onerror=C}),tn(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Oc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var zd=0;function q1(t,i){return t.stylesheets&&t.count===0&&Mc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Mc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&zd===0&&(zd=62500*b1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Mc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>zd?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Vc=null;function Mc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Vc=new Map,i.forEach(B1,t),Vc=null,Oc.call(t))}function B1(t,i){if(!(i.state.loading&4)){var a=Vc.get(t);if(a)var l=a.get(null);else{a=new Map,Vc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Oc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var bo={$$typeof:te,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function H1(t,i,a,l,h,d,v,b,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function B_(t,i,a,l,h,d,v,b,C,U,G,Z){return t=new H1(t,i,a,v,C,U,G,Z,b),i=1,d===!0&&(i|=24),d=Rn(3,null,null,i),t.current=d,d.stateNode=t,i=vf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Af(d),t}function H_(t){return t?(t=Aa,t):Aa}function F_(t,i,a,l,h,d){h=H_(h),l.context===null?l.context=h:l.pendingContext=h,l=Or(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Vr(t,l,i),a!==null&&(bn(a,t,i),Jl(a,t,i))}function G_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function qd(t,i){G_(t,i),(t=t.alternate)&&G_(t,i)}function Q_(t){if(t.tag===13||t.tag===31){var i=Vs(t,67108864);i!==null&&bn(i,t,67108864),qd(t,67108864)}}function Y_(t){if(t.tag===13||t.tag===31){var i=On();i=bs(i);var a=Vs(t,i);a!==null&&bn(a,t,i),qd(t,i)}}var jc=!0;function F1(t,i,a,l){var h=F.T;F.T=null;var d=ie.p;try{ie.p=2,Bd(t,i,a,l)}finally{ie.p=d,F.T=h}}function G1(t,i,a,l){var h=F.T;F.T=null;var d=ie.p;try{ie.p=8,Bd(t,i,a,l)}finally{ie.p=d,F.T=h}}function Bd(t,i,a,l){if(jc){var h=Hd(l);if(h===null)Id(t,i,l,Lc,a),X_(t,l);else if(Y1(h,t,i,a,l))l.stopPropagation();else if(X_(t,l),i&4&&-1<Q1.indexOf(t)){for(;h!==null;){var d=kn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=gi(d.pendingLanes);if(v!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var C=1<<31-Et(v);b.entanglements[1]|=C,v&=~C}ji(d),($e&6)===0&&(_c=Gt()+500,po(0))}}break;case 31:case 13:b=Vs(d,2),b!==null&&bn(b,d,2),Ec(),qd(d,2)}if(d=Hd(l),d===null&&Id(t,i,l,Lc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Id(t,i,l,null,a)}}function Hd(t){return t=Pn(t),Fd(t)}var Lc=null;function Fd(t){if(Lc=null,t=bi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=g(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Lc=t,null}function K_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jn()){case ys:return 2;case yr:return 8;case Jn:case Xh:return 32;case mu:return 268435456;default:return 32}default:return 32}}var Gd=!1,Fr=null,Gr=null,Qr=null,To=new Map,Ao=new Map,Yr=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(t,i){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":To.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(i.pointerId)}}function So(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=kn(i),i!==null&&Q_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function Y1(t,i,a,l,h){switch(i){case"focusin":return Fr=So(Fr,t,i,a,l,h),!0;case"dragenter":return Gr=So(Gr,t,i,a,l,h),!0;case"mouseover":return Qr=So(Qr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return To.set(d,So(To.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ao.set(d,So(Ao.get(d)||null,t,i,a,l,h)),!0}return!1}function $_(t){var i=bi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,ti(t.priority,function(){Y_(a)});return}}else if(i===31){if(i=g(a),i!==null){t.blockedOn=i,ti(t.priority,function(){Y_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Hd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ll=l,a.target.dispatchEvent(l),Ll=null}else return i=kn(a),i!==null&&Q_(i),t.blockedOn=a,!1;i.shift()}return!0}function Z_(t,i,a){kc(t)&&a.delete(i)}function K1(){Gd=!1,Fr!==null&&kc(Fr)&&(Fr=null),Gr!==null&&kc(Gr)&&(Gr=null),Qr!==null&&kc(Qr)&&(Qr=null),To.forEach(Z_),Ao.forEach(Z_)}function Pc(t,i){t.blockedOn===i&&(t.blockedOn=null,Gd||(Gd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,K1)))}var Uc=null;function J_(t){Uc!==t&&(Uc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Uc===t&&(Uc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Fd(l||a)===null)continue;break}var d=kn(a);d!==null&&(t.splice(i,3),i-=3,Hf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ya(t){function i(C){return Pc(C,t)}Fr!==null&&Pc(Fr,t),Gr!==null&&Pc(Gr,t),Qr!==null&&Pc(Qr,t),To.forEach(i),Ao.forEach(i);for(var a=0;a<Yr.length;a++){var l=Yr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Yr.length&&(a=Yr[0],a.blockedOn===null);)$_(a),a.blockedOn===null&&Yr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Qt]||null;if(typeof d=="function")v||J_(a);else if(v){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Qt]||null)b=v.formAction;else if(Fd(h)!==null)continue}else b=v.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),J_(a)}}}function W_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Qd(t){this._internalRoot=t}zc.prototype.render=Qd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=On();F_(a,l,t,i,null,null)},zc.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;F_(t.current,2,null,t,null,null),Ec(),i[vi]=null}};function zc(t){this._internalRoot=t}zc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Eu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Yr.length&&i!==0&&i<Yr[a].priority;a++);Yr.splice(a,0,t),a===0&&$_(t)}};var e0=e.version;if(e0!=="19.2.0")throw Error(s(527,e0,"19.2.0"));ie.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=_(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var X1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Wn=qc.inject(X1),$t=qc}catch{}}return xo.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=ly,d=oy,v=uy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=B_(t,1,!1,null,null,a,l,null,h,d,v,W_),t[vi]=i.current,Rd(t),new Qd(i)},xo.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=ly,v=oy,b=uy,C=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),i=B_(t,1,!0,i,a??null,l,h,C,d,v,b,W_),i.context=H_(null),a=i.current,l=On(),l=bs(l),h=Or(l),h.callback=null,Vr(a,h,l),a=l,i.current.lanes=a,vs(i,a),ji(i),t[vi]=i.current,Rd(t),new zc(i)},xo.version="19.2.0",xo}var c0;function aA(){if(c0)return Xd.exports;c0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Xd.exports=sA(),Xd.exports}var lA=aA();const oA=Gv(lA),uA=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),cA=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),hA=({className:r})=>m.jsxs("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{d:"M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m11 0a2 2 0 104 0m-4 0a2 2 0 114 0"})]}),Bm=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),h0=({className:r})=>m.jsxs("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),lh=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),fA=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Ks=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),Wa=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),dA=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),mA=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),pA=({className:r})=>m.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),gA=({currentView:r,setView:e,user:n,onLogout:s})=>{const u=[{id:"dashboard",label:"لوحة التحكم",icon:uA,roles:["admin","user"]},{id:"purchaseOrders",label:"سندات الطلب",icon:cA,roles:["admin","user"]},{id:"deliveryNotes",label:"سندات الاستلام",icon:hA,roles:["admin","user"]},{id:"settings",label:"الإعدادات",icon:h0,roles:["admin"]},{id:"residenceSettings",label:"إعدادات الإقامة",icon:h0,roles:["user"]}].filter(f=>n&&f.roles.includes(n.role));return m.jsxs("div",{className:"w-64 bg-gray-800 text-white h-screen p-4 flex flex-col fixed",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold mb-2 text-center",children:"نظام التسيير"}),n&&m.jsxs("p",{className:"text-center text-gray-400 text-sm mb-6 border-b border-gray-600 pb-4",children:["مرحبًا، ",n.username]})]}),m.jsx("nav",{className:"flex-grow",children:m.jsx("ul",{children:u.map(f=>m.jsx("li",{className:"mb-2",children:m.jsxs("button",{onClick:()=>e(f.id),className:`w-full flex items-center p-3 rounded-lg transition-colors duration-200 ${r===f.id?"bg-blue-600 text-white":"hover:bg-gray-700"}`,"aria-current":r===f.id?"page":void 0,children:[m.jsx(f.icon,{className:"w-6 h-6 ml-3"}),m.jsx("span",{children:f.label})]})},f.id))})}),m.jsx("div",{children:m.jsxs("button",{onClick:s,className:"w-full flex items-center p-3 rounded-lg transition-colors duration-200 hover:bg-red-700",children:[m.jsx(fA,{className:"w-6 h-6 ml-3"}),m.jsx("span",{children:"تسجيل الخروج"})]})})]})};var zt=(r=>(r.OPEN="قيد المعالجة",r.PARTIALLY_RECEIVED="تم الاستلام جزئياً",r.FULLY_RECEIVED="تم الاستلام كلياً",r.CANCELLED="ملغى",r))(zt||{}),$s=(r=>(r.FULL="كامل",r.PARTIAL="جزئي",r.REJECTED="مرفوض",r))($s||{});const yA=["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],f0=({lots:r,products:e,suppliers:n,onSave:s,onCancel:o,existingOrder:u,setNotification:f})=>{const[g,y]=me.useState(""),[_,T]=me.useState(""),[x,N]=me.useState(new Date().toISOString().split("T")[0]),[z,Y]=me.useState(""),[ee,J]=me.useState([]),ce=!!u,Q=me.useMemo(()=>r.find(A=>A.id===_),[r,_]),te=me.useMemo(()=>n.find(A=>A.id===(Q==null?void 0:Q.supplierId)),[n,Q]),pe=me.useMemo(()=>_?e.filter(A=>A.lotId===_):[],[e,_]);me.useEffect(()=>{ce&&u&&(y(u.orderNumber),N(u.date),T(u.lotId),J(u.details),Y(u.month))},[ce,u]),me.useEffect(()=>{if(_&&(!u||_!==u.lotId)){const A=pe.map(w=>({productId:w.id,quantity:0,price:w.price}));J(A)}else _||J([])},[_,pe,u]);const De=(A,w)=>{J(D=>D.map(O=>O.productId===A?{...O,quantity:Math.max(0,w)}:O))},ge=me.useMemo(()=>ee.reduce((A,w)=>A+w.price*w.quantity,0),[ee]),I=()=>{if(!g.trim()){f({message:"الرجاء إدخال رقم سند الطلب.",type:"error"});return}if(!z){f({message:"الرجاء اختيار الشهر.",type:"error"});return}if(!Q||!te){f({message:"الرجاء اختيار حصة صالحة.",type:"error"});return}const A={id:u==null?void 0:u.id,orderNumber:g.trim(),date:x,month:z,lotId:Q.id,supplierId:te.id,totalAmount:ge,details:ee.filter(w=>w.quantity>0),status:(u==null?void 0:u.status)||zt.OPEN};s(A)};return m.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg animate-fade-in-up",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:ce?"تعديل سند طلب":"إنشاء سند طلب جديد"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"orderNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم سند الطلب"}),m.jsx("input",{type:"text",id:"orderNumber",value:g,onChange:A=>y(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"month",className:"block text-sm font-medium text-gray-700 mb-1",children:"الشهر"}),m.jsxs("select",{id:"month",value:z,onChange:A=>Y(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0,children:[m.jsx("option",{value:"",children:"-- اختر الشهر --"}),yA.map(A=>m.jsx("option",{value:A,children:A},A))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"lot",className:"block text-sm font-medium text-gray-700 mb-1",children:"اختر الحصة"}),m.jsxs("select",{id:"lot",value:_,onChange:A=>T(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[m.jsx("option",{value:"",children:"-- اختر حصة --"}),r.map(A=>m.jsx("option",{value:A.id,children:A.name},A.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"التاريخ"}),m.jsx("input",{type:"date",id:"date",value:x,onChange:A=>N(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm"})]})]}),te&&m.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"معلومات الممون"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"الشركة:"})," ",te.company]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"العنوان:"})," ",te.address]})]}),_&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"تفاصيل المنتجات"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المنتج"}),m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الوحدة"}),m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"السعر الفردي"}),m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المطلوبة"}),m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المجموع الجزئي"})]})}),m.jsx("tbody",{children:ee.map(A=>{const w=e.find(D=>D.id===A.productId);return w?m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"py-2 px-4 border-b",children:w.name}),m.jsx("td",{className:"py-2 px-4 border-b",children:w.unit}),m.jsxs("td",{className:"py-2 px-4 border-b",children:[A.price.toFixed(2)," د.ج"]}),m.jsx("td",{className:"py-2 px-4 border-b",children:m.jsx("input",{type:"number",value:A.quantity,onChange:D=>De(A.productId,parseInt(D.target.value)||0),className:"w-24 p-1 border border-gray-300 rounded-md text-center",min:"0"})}),m.jsxs("td",{className:"py-2 px-4 border-b",children:[(A.price*A.quantity).toFixed(2)," د.ج"]})]},A.productId):null})}),m.jsx("tfoot",{className:"bg-gray-100 font-bold",children:m.jsxs("tr",{children:[m.jsx("td",{colSpan:4,className:"py-3 px-4 text-left text-lg",children:"المجموع الكلي"}),m.jsxs("td",{className:"py-3 px-4 text-right text-lg",children:[ge.toFixed(2)," د.ج"]})]})})]})}),m.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[m.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),m.jsx("button",{onClick:I,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:ce?"تحديث السند":"حفظ سند الطلب"})]})]})]})},_A=["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],d0=({lots:r,openPurchaseOrders:e,products:n,suppliers:s,onSave:o,onCancel:u,existingNote:f,setNotification:g})=>{const[y,_]=me.useState(""),[T,x]=me.useState(""),[N,z]=me.useState(new Date().toISOString().split("T")[0]),[Y,ee]=me.useState(""),[J,ce]=me.useState([]),Q=!!f;me.useEffect(()=>{Q&&f&&(_(f.noteNumber),x(f.purchaseOrderId),z(f.receptionDate),ce(f.details),ee(f.month))},[Q,f]);const te=me.useMemo(()=>e.find(A=>A.id===T),[e,T]),pe=me.useMemo(()=>s.find(A=>A.id===(te==null?void 0:te.supplierId)),[s,te]);me.useEffect(()=>{if(T&&(!f||T!==f.purchaseOrderId)){const A=e.find(w=>w.id===T);if(A){const w=A.details.map(D=>({productId:D.productId,quantityOrdered:D.quantity,quantityReceived:D.quantity}));ce(w)}}else T||ce([])},[T,e,f]);const De=(A,w)=>{var O;const D=((O=J.find(j=>j.productId===A))==null?void 0:O.quantityOrdered)||0;ce(j=>j.map(R=>R.productId===A?{...R,quantityReceived:Math.max(0,Math.min(w,D))}:R))},ge=me.useMemo(()=>te?J.reduce((A,w)=>{const D=te.details.find(O=>O.productId===w.productId);return A+((D==null?void 0:D.price)||0)*w.quantityReceived},0):0,[J,te]),I=()=>{if(!y.trim()){g({message:"الرجاء إدخال رقم سند الاستلام.",type:"error"});return}if(!Y){g({message:"الرجاء اختيار الشهر.",type:"error"});return}if(!te){g({message:"الرجاء اختيار سند طلب صالح.",type:"error"});return}const A=J.reduce((j,R)=>j+R.quantityReceived,0);let w,D;A===0?(w=$s.REJECTED,D=te.status):te.details.every(R=>{const Ze=J.find(gt=>gt.productId===R.productId);return R.quantity===((Ze==null?void 0:Ze.quantityReceived)||0)})?(w=$s.FULL,D=zt.FULLY_RECEIVED):(w=$s.PARTIAL,D=zt.PARTIALLY_RECEIVED);const O={id:f==null?void 0:f.id,noteNumber:y.trim(),receptionDate:N,month:Y,purchaseOrderId:te.id,totalAmount:ge,status:w,details:J.filter(j=>j.quantityReceived>0)};o(O,D)};return m.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg animate-fade-in-up",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:Q?"تعديل سند استلام":"إنشاء سند استلام جديد"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"noteNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم سند الاستلام"}),m.jsx("input",{type:"text",id:"noteNumber",value:y,onChange:A=>_(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"month",className:"block text-sm font-medium text-gray-700 mb-1",children:"الشهر"}),m.jsxs("select",{id:"month",value:Y,onChange:A=>ee(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0,children:[m.jsx("option",{value:"",children:"-- اختر الشهر --"}),_A.map(A=>m.jsx("option",{value:A,children:A},A))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"po",className:"block text-sm font-medium text-gray-700 mb-1",children:"اختر سند الطلب"}),m.jsxs("select",{id:"po",value:T,onChange:A=>x(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[m.jsx("option",{value:"",children:"-- اختر سند طلب --"}),e.map(A=>{const w=r.find(O=>O.id===A.lotId),D=w?`${w.name} - ${A.orderNumber} - ${A.date}`:`${A.orderNumber} - ${A.date}`;return m.jsx("option",{value:A.id,children:D},A.id)})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الاستلام"}),m.jsx("input",{type:"date",id:"date",value:N,onChange:A=>z(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm"})]})]}),pe&&te&&m.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"معلومات الممون وسند الطلب"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"الممون:"})," ",pe.company]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"رقم سند الطلب:"})," ",te.orderNumber]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"تاريخ سند الطلب:"})," ",te.date]})]}),T&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"تفاصيل الاستلام"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المنتج"}),m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الوحدة"}),m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المطلوبة"}),m.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المستلمة"})]})}),m.jsx("tbody",{children:J.map(A=>{const w=n.find(D=>D.id===A.productId);return w?m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"py-2 px-4 border-b",children:w.name}),m.jsx("td",{className:"py-2 px-4 border-b",children:w.unit}),m.jsx("td",{className:"py-2 px-4 border-b",children:A.quantityOrdered}),m.jsx("td",{className:"py-2 px-4 border-b",children:m.jsx("input",{type:"number",value:A.quantityReceived,onChange:D=>De(A.productId,parseInt(D.target.value)||0),className:"w-24 p-1 border border-gray-300 rounded-md text-center",min:"0",max:A.quantityOrdered})})]},A.productId):null})})]})}),m.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[m.jsx("button",{onClick:u,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),m.jsx("button",{onClick:I,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition",children:Q?"تحديث السند":"حفظ سند الاستلام"})]})]})]})},vA=()=>{};var m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},EA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],g=r[n++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},Yv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,g=f?r[o+1]:0,y=o+2<r.length,_=y?r[o+2]:0,T=u>>2,x=(u&3)<<4|g>>4;let N=(g&15)<<2|_>>6,z=_&63;y||(z=64,f||(N=64)),s.push(n[T],n[x],n[N],n[z])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Qv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):EA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],g=o<r.length?n[r.charAt(o)]:0;++o;const _=o<r.length?n[r.charAt(o)]:64;++o;const x=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||g==null||_==null||x==null)throw new bA;const N=u<<2|g>>4;if(s.push(N),_!==64){const z=g<<4&240|_>>2;if(s.push(z),x!==64){const Y=_<<6&192|x;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class bA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TA=function(r){const e=Qv(r);return Yv.encodeByteArray(e,!0)},oh=function(r){return TA(r).replace(/\./g,"")},Kv=function(r){try{return Yv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=()=>AA().__FIREBASE_DEFAULTS__,wA=()=>{if(typeof process>"u"||typeof m0>"u")return;const r=m0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},xA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Kv(r[1]);return e&&JSON.parse(e)},xh=()=>{try{return vA()||SA()||wA()||xA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Xv=r=>{var e,n;return(n=(e=xh())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},RA=r=>{const e=Xv(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},$v=()=>{var r;return(r=xh())==null?void 0:r.config},Zv=r=>{var e;return(e=xh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[oh(JSON.stringify(n)),oh(JSON.stringify(f)),""].join(".")}const ko={};function CA(){const r={prod:[],emulator:[]};for(const e of Object.keys(ko))ko[e]?r.emulator.push(e):r.prod.push(e);return r}function DA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let p0=!1;function Wv(r,e){if(typeof window>"u"||typeof document>"u"||!ml(window.location.host)||ko[r]===e||ko[r]||p0)return;ko[r]=e;function n(N){return`__firebase__banner__${N}`}const s="__firebase__banner",u=CA().prod.length>0;function f(){const N=document.getElementById(s);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function y(N,z){N.setAttribute("width","24"),N.setAttribute("id",z),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function _(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{p0=!0,f()},N}function T(N,z){N.setAttribute("id",z),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function x(){const N=DA(s),z=n("text"),Y=document.getElementById(z)||document.createElement("span"),ee=n("learnmore"),J=document.getElementById(ee)||document.createElement("a"),ce=n("preprendIcon"),Q=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const te=N.element;g(te),T(J,ee);const pe=_();y(Q,ce),te.append(Q,Y,J,pe),document.body.appendChild(te)}u?(Y.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function VA(){var e;const r=(e=xh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function LA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kA(){const r=cn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function PA(){return!VA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UA(){try{return typeof indexedDB=="object"}catch{return!1}}function zA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class gr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=qA,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?BA(u,s):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new gr(o,g,s)}}function BA(r,e){return r.replace(HA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const HA=/\{\$([^}]+)}/g;function FA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Js(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(g0(u)&&g0(f)){if(!Js(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function g0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Do(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Oo(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function GA(r,e){const n=new QA(r,e);return n.subscribe.bind(n)}class QA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");YA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Wd),o.error===void 0&&(o.error=Wd),o.complete===void 0&&(o.complete=Wd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(r){return r&&r._delegate?r._delegate:r}class Ws{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new IA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($A(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:XA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XA(r){return r===Ys?void 0:r}function $A(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const JA={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},WA=Pe.INFO,eS={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},tS=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=eS[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hm{constructor(e){this.name=e,this._logLevel=WA,this._logHandler=tS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const nS=(r,e)=>e.some(n=>r instanceof n);let y0,_0;function iS(){return y0||(y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rS(){return _0||(_0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,mm=new WeakMap,tE=new WeakMap,em=new WeakMap,Fm=new WeakMap;function sS(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(ts(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&eE.set(n,r)}).catch(()=>{}),Fm.set(e,r),e}function aS(r){if(mm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});mm.set(r,e)}let pm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return mm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||tE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function lS(r){pm=r(pm)}function oS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(tm(this),e,...n);return tE.set(s,e.sort?e.sort():[e]),ts(s)}:rS().includes(r)?function(...e){return r.apply(tm(this),e),ts(eE.get(this))}:function(...e){return ts(r.apply(tm(this),e))}}function uS(r){return typeof r=="function"?oS(r):(r instanceof IDBTransaction&&aS(r),nS(r,iS())?new Proxy(r,pm):r)}function ts(r){if(r instanceof IDBRequest)return sS(r);if(em.has(r))return em.get(r);const e=uS(r);return e!==r&&(em.set(r,e),Fm.set(e,r)),e}const tm=r=>Fm.get(r);function cS(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),g=ts(f);return s&&f.addEventListener("upgradeneeded",y=>{s(ts(f.result),y.oldVersion,y.newVersion,ts(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const hS=["get","getKey","getAll","getAllKeys","count"],fS=["put","add","delete","clear"],nm=new Map;function v0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(nm.get(e))return nm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=fS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||hS.includes(n)))return;const u=async function(f,...g){const y=this.transaction(f,o?"readwrite":"readonly");let _=y.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[n](...g),o&&y.done]))[0]};return nm.set(e,u),u}lS(r=>({...r,get:(e,n,s)=>v0(e,n)||r.get(e,n,s),has:(e,n)=>!!v0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function mS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gm="@firebase/app",E0="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Hm("@firebase/app"),pS="@firebase/app-compat",gS="@firebase/analytics-compat",yS="@firebase/analytics",_S="@firebase/app-check-compat",vS="@firebase/app-check",ES="@firebase/auth",bS="@firebase/auth-compat",TS="@firebase/database",AS="@firebase/data-connect",SS="@firebase/database-compat",wS="@firebase/functions",xS="@firebase/functions-compat",RS="@firebase/installations",IS="@firebase/installations-compat",NS="@firebase/messaging",CS="@firebase/messaging-compat",DS="@firebase/performance",OS="@firebase/performance-compat",VS="@firebase/remote-config",MS="@firebase/remote-config-compat",jS="@firebase/storage",LS="@firebase/storage-compat",kS="@firebase/firestore",PS="@firebase/ai",US="@firebase/firestore-compat",zS="firebase",qS="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="[DEFAULT]",BS={[gm]:"fire-core",[pS]:"fire-core-compat",[yS]:"fire-analytics",[gS]:"fire-analytics-compat",[vS]:"fire-app-check",[_S]:"fire-app-check-compat",[ES]:"fire-auth",[bS]:"fire-auth-compat",[TS]:"fire-rtdb",[AS]:"fire-data-connect",[SS]:"fire-rtdb-compat",[wS]:"fire-fn",[xS]:"fire-fn-compat",[RS]:"fire-iid",[IS]:"fire-iid-compat",[NS]:"fire-fcm",[CS]:"fire-fcm-compat",[DS]:"fire-perf",[OS]:"fire-perf-compat",[VS]:"fire-rc",[MS]:"fire-rc-compat",[jS]:"fire-gcs",[LS]:"fire-gcs-compat",[kS]:"fire-fst",[US]:"fire-fst-compat",[PS]:"fire-vertex","fire-js":"fire-js",[zS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new Map,HS=new Map,_m=new Map;function b0(r,e){try{r.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function al(r){const e=r.name;if(_m.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;_m.set(e,r);for(const n of Ho.values())b0(n,r);for(const n of HS.values())b0(n,r);return!0}function Gm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function hi(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new eu("app","Firebase",FS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=qS;function nE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:ym,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ns.create("bad-app-name",{appName:String(o)});if(n||(n=$v()),!n)throw ns.create("no-options");const u=Ho.get(o);if(u){if(Js(n,u.options)&&Js(s,u.config))return u;throw ns.create("duplicate-app",{appName:o})}const f=new ZA(o);for(const y of _m.values())f.addComponent(y);const g=new GS(n,s,f);return Ho.set(o,g),g}function Qm(r=ym){const e=Ho.get(r);if(!e&&r===ym&&$v())return nE();if(!e)throw ns.create("no-app",{appName:r});return e}function QS(){return Array.from(Ho.values())}function is(r,e,n){let s=BS[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(f.join(" "));return}al(new Ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firebase-heartbeat-database",KS=1,Fo="firebase-heartbeat-store";let im=null;function iE(){return im||(im=cS(YS,KS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Fo)}catch(n){console.warn(n)}}}}).catch(r=>{throw ns.create("idb-open",{originalErrorMessage:r.message})})),im}async function XS(r){try{const n=(await iE()).transaction(Fo),s=await n.objectStore(Fo).get(rE(r));return await n.done,s}catch(e){if(e instanceof gr)fr.warn(e.message);else{const n=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function T0(r,e){try{const s=(await iE()).transaction(Fo,"readwrite");await s.objectStore(Fo).put(e,rE(r)),await s.done}catch(n){if(n instanceof gr)fr.warn(n.message);else{const s=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(s.message)}}}function rE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=1024,ZS=30;class JS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ew(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=A0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>ZS){const f=tw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){fr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A0(),{heartbeatsToSend:s,unsentEntries:o}=WS(this._heartbeatsCache.heartbeats),u=oh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return fr.warn(n),""}}}function A0(){return new Date().toISOString().substring(0,10)}function WS(r,e=$S){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),S0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),S0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ew{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UA()?zA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function S0(r){return oh(JSON.stringify({version:2,heartbeats:r})).length}function tw(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(r){al(new Ws("platform-logger",e=>new dS(e),"PRIVATE")),al(new Ws("heartbeat",e=>new JS(e),"PRIVATE")),is(gm,E0,r),is(gm,E0,"esm2020"),is("fire-js","")}nw("");var iw="firebase",rw="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(iw,rw,"app");function sE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sw=sE,aE=new eu("auth","Firebase",sE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Hm("@firebase/auth");function aw(r,...e){uh.logLevel<=Pe.WARN&&uh.warn(`Auth (${pl}): ${r}`,...e)}function Xc(r,...e){uh.logLevel<=Pe.ERROR&&uh.error(`Auth (${pl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(r,...e){throw Ym(r,...e)}function ki(r,...e){return Ym(r,...e)}function lE(r,e,n){const s={...sw(),[e]:n};return new eu("auth","Firebase",s).create(e,{appName:r.name})}function rs(r){return lE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ym(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return aE.create(r,...e)}function Te(r,e,...n){if(!r)throw Ym(e,...n)}function ur(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Xc(e),new Error(e)}function dr(r,e){r||ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function lw(){return w0()==="http:"||w0()==="https:"}function w0(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lw()||jA()||"connection"in navigator)?navigator.onLine:!0}function uw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=OA()||LA()}get(){return ow()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(r,e){dr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fw=new nu(3e4,6e4);function ia(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ds(r,e,n,s,o={}){return uE(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const g=tu({key:r.config.apiKey,...f}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:y,...u};return MA()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&ml(r.emulatorConfig.host)&&(_.credentials="include"),oE.fetch()(await cE(r,r.config.apiHost,n,g),_)})}async function uE(r,e,n){r._canInitEmulator=!1;const s={...cw,...e};try{const o=new mw(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Bc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[y,_]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bc(r,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Bc(r,"email-already-in-use",f);if(y==="USER_DISABLED")throw Bc(r,"user-disabled",f);const T=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw lE(r,T,_);di(r,T)}}catch(o){if(o instanceof gr)throw o;di(r,"network-request-failed",{message:String(o)})}}async function Rh(r,e,n,s,o={}){const u=await ds(r,e,n,s,o);return"mfaPendingCredential"in u&&di(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function cE(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?Km(r.config,o):`${r.config.apiScheme}://${o}`;return hw.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function dw(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ki(this.auth,"network-request-failed")),fw.get())})}}function Bc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ki(r,e,s);return o.customData._tokenResponse=n,o}function x0(r){return r!==void 0&&r.enterprise!==void 0}class pw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dw(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gw(r,e){return ds(r,"GET","/v2/recaptchaConfig",ia(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(r,e){return ds(r,"POST","/v1/accounts:delete",e)}async function ch(r,e){return ds(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _w(r,e=!1){const n=Pt(r),s=await n.getIdToken(e),o=Xm(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Po(rm(o.auth_time)),issuedAtTime:Po(rm(o.iat)),expirationTime:Po(rm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function rm(r){return Number(r)*1e3}function Xm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Kv(n);return o?JSON.parse(o):(Xc("Failed to decode base64 JWT payload"),null)}catch(o){return Xc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function R0(r){const e=Xm(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gr&&vw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function vw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Po(this.lastLoginAt),this.creationTime=Po(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(r){var x;const e=r.auth,n=await r.getIdToken(),s=await Go(r,ch(e,{idToken:n}));Te(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=(x=o.providerUserInfo)!=null&&x.length?hE(o.providerUserInfo):[],f=Tw(r.providerData,u),g=r.isAnonymous,y=!(r.email&&o.passwordHash)&&!(f!=null&&f.length),_=g?y:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Em(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,T)}async function bw(r){const e=Pt(r);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tw(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function hE(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(r,e){const n=await uE(r,{},async()=>{const s=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await cE(r,o,"/v1/token",`key=${u}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return r.emulatorConfig&&ml(r.emulatorConfig.host)&&(y.credentials="include"),oE.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Sw(r,e){return ds(r,"POST","/v2/accounts:revokeToken",ia(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=R0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await Aw(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new tl;return s&&(Te(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Ew(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Em(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Go(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _w(this,e)}reload(){return bw(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(rs(this.auth));const e=await this.getIdToken();return await Go(this,yw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,y=n._redirectEventId??void 0,_=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:x,emailVerified:N,isAnonymous:z,providerData:Y,stsTokenManager:ee}=n;Te(x&&ee,e,"internal-error");const J=tl.fromJSON(this.name,ee);Te(typeof x=="string",e,"internal-error"),Xr(s,e.name),Xr(o,e.name),Te(typeof N=="boolean",e,"internal-error"),Te(typeof z=="boolean",e,"internal-error"),Xr(u,e.name),Xr(f,e.name),Xr(g,e.name),Xr(y,e.name),Xr(_,e.name),Xr(T,e.name);const ce=new fi({uid:x,auth:e,email:o,emailVerified:N,displayName:s,isAnonymous:z,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:J,createdAt:_,lastLoginAt:T});return Y&&Array.isArray(Y)&&(ce.providerData=Y.map(Q=>({...Q}))),y&&(ce._redirectEventId=y),ce}static async _fromIdTokenResponse(e,n,s=!1){const o=new tl;o.updateFromServerResponse(n);const u=new fi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await hh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?hE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new tl;g.updateFromIdToken(s);const y=new fi({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Em(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Map;function cr(r){dr(r instanceof Function,"Expected a class definition");let e=I0.get(r);return e?(dr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,I0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fE.type="NONE";const N0=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(r,e,n){return`firebase:${r}:${e}:${n}`}class nl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=$c(this.userKey,o.apiKey,u),this.fullPersistenceKey=$c("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ch(this.auth,{idToken:e}).catch(()=>{});return n?fi._fromGetAccountInfoResponse(this.auth,n,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new nl(cr(N0),e,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||cr(N0);const f=$c(s,e.config.apiKey,e.name);let g=null;for(const _ of n)try{const T=await _._get(f);if(T){let x;if(typeof T=="string"){const N=await ch(e,{idToken:T}).catch(()=>{});if(!N)break;x=await fi._fromGetAccountInfoResponse(e,N,T)}else x=fi._fromJSON(e,T);_!==u&&(g=x),u=_;break}}catch{}const y=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new nl(u,e,s):(u=y[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new nl(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(vE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||pE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function dE(r=cn()){return/firefox\//i.test(r)}function mE(r=cn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pE(r=cn()){return/crios\//i.test(r)}function gE(r=cn()){return/iemobile/i.test(r)}function yE(r=cn()){return/android/i.test(r)}function _E(r=cn()){return/blackberry/i.test(r)}function vE(r=cn()){return/webos/i.test(r)}function $m(r=cn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ww(r=cn()){var e;return $m(r)&&!!((e=window.navigator)!=null&&e.standalone)}function xw(){return kA()&&document.documentMode===10}function EE(r=cn()){return $m(r)||yE(r)||vE(r)||_E(r)||/windows phone/i.test(r)||gE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(r,e=[]){let n;switch(r){case"Browser":n=C0(cn());break;case"Worker":n=`${C0(cn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,g)=>{try{const y=e(u);f(y)}catch(y){g(y)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(r,e={}){return ds(r,"GET","/v2/passwordPolicy",ia(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=6;class Cw{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Nw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D0(this),this.idTokenSubscription=new D0(this),this.beforeStateQueue=new Rw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ch(this,{idToken:e}),s=await fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(hi(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=s==null?void 0:s._redirectEventId,y=await this.tryRedirectSignIn(e);(!f||f===g)&&(y!=null&&y.user)&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(f){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(rs(this));const n=e?Pt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Iw(this),n=new Cw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Sw(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,s,o);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&aw(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function gl(r){return Pt(r)}class D0{constructor(e){this.auth=e,this.observer=null,this.addObserver=GA(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ow(r){Ih=r}function TE(r){return Ih.loadJS(r)}function Vw(){return Ih.recaptchaEnterpriseScript}function Mw(){return Ih.gapiScript}function jw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Lw{constructor(){this.enterprise=new kw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class kw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Pw="recaptcha-enterprise",AE="NO_RECAPTCHA";class Uw{constructor(e){this.type=Pw,this.auth=gl(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{gw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const _=new pw(y);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(y=>{g(y)})})}function o(u,f,g){const y=window.grecaptcha;x0(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(_=>{f(_)}).catch(()=>{f(AE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Lw().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(g=>{if(!n&&x0(window.grecaptcha))o(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=Vw();y.length!==0&&(y+=g),TE(y).then(()=>{o(g,u,f)}).catch(_=>{f(_)})}}).catch(g=>{f(g)})})}}async function O0(r,e,n,s=!1,o=!1){const u=new Uw(r);let f;if(o)f=AE;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,_=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function V0(r,e,n,s,o){var u;if((u=r._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await O0(r,e,n,n==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await O0(r,e,n,n==="getOobCode");return s(r,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(r,e){const n=Gm(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Js(u,e??{}))return o;di(o,"already-initialized")}return n.initialize({options:e})}function qw(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(cr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Bw(r,e,n){const s=gl(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=SE(e),{host:f,port:g}=Hw(e),y=g===null?"":`:${g}`,_={url:`${u}//${f}${y}/`},T=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(Js(_,s.config.emulator)&&Js(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,ml(f)?(Jv(`${u}//${f}${y}`),Wv("Auth",!0)):Fw()}function SE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Hw(r){const e=SE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:M0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:M0(f)}}}function M0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Fw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ur("not implemented")}_getIdTokenResponse(e){return ur("not implemented")}_linkToIdToken(e,n){return ur("not implemented")}_getReauthenticationResolver(e){return ur("not implemented")}}async function Gw(r,e){return ds(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(r,e){return Rh(r,"POST","/v1/accounts:signInWithPassword",ia(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(r,e){return Rh(r,"POST","/v1/accounts:signInWithEmailLink",ia(r,e))}async function Kw(r,e){return Rh(r,"POST","/v1/accounts:signInWithEmailLink",ia(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends Zm{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Qo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Qo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V0(e,n,"signInWithPassword",Qw);case"emailLink":return Yw(e,{email:this._email,oobCode:this._password});default:di(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V0(e,s,"signUpPassword",Gw);case"emailLink":return Kw(e,{idToken:n,email:this._email,oobCode:this._password});default:di(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(r,e){return Rh(r,"POST","/v1/accounts:signInWithIdp",ia(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="http://localhost";class ea extends Zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ea(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return il(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,il(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,il(e,n)}buildRequest(){const e={requestUri:Xw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zw(r){const e=Do(Oo(r)).link,n=e?Do(Oo(e)).deep_link_id:null,s=Do(Oo(r)).deep_link_id;return(s?Do(Oo(s)).link:null)||s||n||e||r}class Jm{constructor(e){const n=Do(Oo(e)),s=n.apiKey??null,o=n.oobCode??null,u=$w(n.mode??null);Te(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Zw(e);try{return new Jm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.providerId=yl.PROVIDER_ID}static credential(e,n){return Qo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Jm.parseLink(n);return Te(s,"argument-error"),Qo._fromEmailAndCode(e,s.code,s.tenantId)}}yl.PROVIDER_ID="password";yl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends wE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends iu{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Zr.credential(n,s)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends iu{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends iu{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Wr.credential(n,s)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await fi._fromIdTokenResponse(e,s,o),f=j0(s);return new ll({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=j0(s);return new ll({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function j0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends gr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new fh(e,n,s,o)}}function xE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(r,u,e,s):u})}async function Jw(r,e,n=!1){const s=await Go(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return ll._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(r,e,n=!1){const{auth:s}=r;if(hi(s.app))return Promise.reject(rs(s));const o="reauthenticate";try{const u=await Go(r,xE(s,o,e,r),n);Te(u.idToken,s,"internal-error");const f=Xm(u.idToken);Te(f,s,"internal-error");const{sub:g}=f;return Te(r.uid===g,s,"user-mismatch"),ll._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&di(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(r,e,n=!1){if(hi(r.app))return Promise.reject(rs(r));const s="signIn",o=await xE(r,s,e),u=await ll._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function ex(r,e){return RE(gl(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(r){const e=gl(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function nx(r,e,n){return hi(r.app)?Promise.reject(rs(r)):ex(Pt(r),yl.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&tx(r),s})}function ix(r,e,n,s){return Pt(r).onIdTokenChanged(e,n,s)}function rx(r,e,n){return Pt(r).beforeAuthStateChanged(e,n)}function sx(r,e,n,s){return Pt(r).onAuthStateChanged(e,n,s)}function ax(r){return Pt(r).signOut()}const dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=1e3,ox=10;class NE extends IE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,y)=>{this.notifyListeners(f,y)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);xw()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ox):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},lx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NE.type="LOCAL";const ux=NE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends IE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CE.type="SESSION";const DE=CE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Nh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(f).map(async _=>_(n.origin,u)),y=await cx(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,y)=>{const _=Wm("",20);o.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(x){const N=x;if(N.data.eventId===_)switch(N.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(T),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function fx(r){Pi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function dx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mx(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function px(){return OE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebaseLocalStorageDb",gx=1,mh="firebaseLocalStorage",ME="fbase_key";class ru{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(r,e){return r.transaction([mh],e?"readwrite":"readonly").objectStore(mh)}function yx(){const r=indexedDB.deleteDatabase(VE);return new ru(r).toPromise()}function bm(){const r=indexedDB.open(VE,gx);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(mh,{keyPath:ME})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(mh)?e(s):(s.close(),await yx(),e(await bm()))})})}async function L0(r,e,n){const s=Ch(r,!0).put({[ME]:e,value:n});return new ru(s).toPromise()}async function _x(r,e){const n=Ch(r,!1).get(e),s=await new ru(n).toPromise();return s===void 0?null:s.value}function k0(r,e){const n=Ch(r,!0).delete(e);return new ru(n).toPromise()}const vx=800,Ex=3;class jE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Ex)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(px()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await dx(),!this.activeServiceWorker)return;this.sender=new hx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bm();return await L0(e,dh,"1"),await k0(e,dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>L0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>_x(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ch(o,!1).getAll();return new ru(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jE.type="LOCAL";const bx=jE;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(r,e){return e?cr(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends Zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return il(e,this._buildIdpRequest())}_linkToIdToken(e,n){return il(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return il(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ax(r){return RE(r.auth,new ep(r),r.bypassAuthState)}function Sx(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),Ww(n,new ep(r),r.bypassAuthState)}async function wx(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),Jw(n,new ep(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ax;case"linkViaPopup":case"linkViaRedirect":return wx;case"reauthViaPopup":case"reauthViaRedirect":return Sx;default:di(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new nu(2e3,1e4);class el extends LE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,el.currentPopupAction&&el.currentPopupAction.cancel(),el.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=Wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,el.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xx.get())};e()}}el.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="pendingRedirect",Zc=new Map;class Ix extends LE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const s=await Nx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nx(r,e){const n=Ox(e),s=Dx(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Cx(r,e){Zc.set(r._key(),e)}function Dx(r){return cr(r._redirectPersistence)}function Ox(r){return $c(Rx,r.config.apiKey,r.name)}async function Vx(r,e,n=!1){if(hi(r.app))return Promise.reject(rs(r));const s=gl(r),o=Tx(s,e),f=await new Ix(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=600*1e3;class jx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!kE(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(ki(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Mx&&this.cachedEventUids.clear(),this.cachedEventUids.has(P0(e))}saveEventToCache(e){this.cachedEventUids.add(P0(e)),this.lastProcessedEventTime=Date.now()}}function P0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function kE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Lx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(r,e={}){return ds(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ux=/^https?/;async function zx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await kx(r);for(const n of e)try{if(qx(n))return}catch{}di(r,"unauthorized-domain")}function qx(r){const e=vm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!Ux.test(n))return!1;if(Px.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=new nu(3e4,6e4);function U0(){const r=Pi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function Hx(r){return new Promise((e,n)=>{var o,u,f;function s(){U0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U0(),n(ki(r,"network-request-failed"))},timeout:Bx.get()})}if((u=(o=Pi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Pi().gapi)!=null&&f.load)s();else{const g=jw("iframefcb");return Pi()[g]=()=>{gapi.load?s():n(ki(r,"network-request-failed"))},TE(`${Mw()}?onload=${g}`).catch(y=>n(y))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function Fx(r){return Jc=Jc||Hx(r),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new nu(5e3,15e3),Qx="__/auth/iframe",Yx="emulator/auth/iframe",Kx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $x(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Km(e,Yx):`https://${r.config.authDomain}/${Qx}`,s={apiKey:e.apiKey,appName:r.name,v:pl},o=Xx.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${tu(s).slice(1)}`}async function Zx(r){const e=await Fx(r),n=Pi().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:$x(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kx,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=ki(r,"network-request-failed"),g=Pi().setTimeout(()=>{u(f)},Gx.get());function y(){Pi().clearTimeout(g),o(s)}s.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wx=500,e2=600,t2="_blank",n2="http://localhost";class z0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i2(r,e,n,s=Wx,o=e2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y={...Jx,width:s.toString(),height:o.toString(),top:u,left:f},_=cn().toLowerCase();n&&(g=pE(_)?t2:n),dE(_)&&(e=e||n2,y.scrollbars="yes");const T=Object.entries(y).reduce((N,[z,Y])=>`${N}${z}=${Y},`,"");if(ww(_)&&g!=="_self")return r2(e||"",g),new z0(null);const x=window.open(e||"",g,T);Te(x,r,"popup-blocked");try{x.focus()}catch{}return new z0(x)}function r2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="__/auth/handler",a2="emulator/auth/handler",l2=encodeURIComponent("fac");async function q0(r,e,n,s,o,u){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:pl,eventId:o};if(e instanceof wE){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",FA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,x]of Object.entries({}))f[T]=x}if(e instanceof iu){const T=e.getScopes().filter(x=>x!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const y=await r._getAppCheckToken(),_=y?`#${l2}=${encodeURIComponent(y)}`:"";return`${o2(r)}?${tu(g).slice(1)}${_}`}function o2({config:r}){return r.emulator?Km(r,a2):`https://${r.authDomain}/${s2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="webStorageSupport";class u2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DE,this._completeRedirectFn=Vx,this._overrideRedirectResult=Cx}async _openPopup(e,n,s,o){var f;dr((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await q0(e,n,s,vm(),o);return i2(e,u,Wm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await q0(e,n,s,vm(),o);return fx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(dr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Zx(e),s=new jx(e);return n.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sm,{type:sm},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[sm];u!==void 0&&n(!!u),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EE()||mE()||$m()}}const c2=u2;var B0="@firebase/auth",H0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d2(r){al(new Ws("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;Te(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bE(r)},_=new Dw(s,o,u,y);return qw(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),al(new Ws("auth-internal",e=>{const n=gl(e.getProvider("auth").getImmediate());return(s=>new h2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(B0,H0,f2(r)),is(B0,H0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=300,p2=Zv("authIdTokenMaxAge")||m2;let F0=null;const g2=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>p2)return;const o=n==null?void 0:n.token;F0!==o&&(F0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function y2(r=Qm()){const e=Gm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=zw(r,{popupRedirectResolver:c2,persistence:[bx,ux,DE]}),s=Zv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=g2(u.toString());rx(n,f,()=>f(n.currentUser)),ix(n,g=>f(g))}}const o=Xv("auth");return o&&Bw(n,`http://${o}`),n}function _2(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Ow({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=ki("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",_2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d2("Browser");var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,PE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function w(){}w.prototype=A.prototype,I.F=A.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(D,O,j){for(var R=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)R[Ze-2]=arguments[Ze];return A.prototype[O].apply(D,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,A,w){w||(w=0);const D=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)D[O]=A.charCodeAt(w++)|A.charCodeAt(w++)<<8|A.charCodeAt(w++)<<16|A.charCodeAt(w++)<<24;else for(O=0;O<16;++O)D[O]=A[w++]|A[w++]<<8|A[w++]<<16|A[w++]<<24;A=I.g[0],w=I.g[1],O=I.g[2];let j=I.g[3],R;R=A+(j^w&(O^j))+D[0]+3614090360&4294967295,A=w+(R<<7&4294967295|R>>>25),R=j+(O^A&(w^O))+D[1]+3905402710&4294967295,j=A+(R<<12&4294967295|R>>>20),R=O+(w^j&(A^w))+D[2]+606105819&4294967295,O=j+(R<<17&4294967295|R>>>15),R=w+(A^O&(j^A))+D[3]+3250441966&4294967295,w=O+(R<<22&4294967295|R>>>10),R=A+(j^w&(O^j))+D[4]+4118548399&4294967295,A=w+(R<<7&4294967295|R>>>25),R=j+(O^A&(w^O))+D[5]+1200080426&4294967295,j=A+(R<<12&4294967295|R>>>20),R=O+(w^j&(A^w))+D[6]+2821735955&4294967295,O=j+(R<<17&4294967295|R>>>15),R=w+(A^O&(j^A))+D[7]+4249261313&4294967295,w=O+(R<<22&4294967295|R>>>10),R=A+(j^w&(O^j))+D[8]+1770035416&4294967295,A=w+(R<<7&4294967295|R>>>25),R=j+(O^A&(w^O))+D[9]+2336552879&4294967295,j=A+(R<<12&4294967295|R>>>20),R=O+(w^j&(A^w))+D[10]+4294925233&4294967295,O=j+(R<<17&4294967295|R>>>15),R=w+(A^O&(j^A))+D[11]+2304563134&4294967295,w=O+(R<<22&4294967295|R>>>10),R=A+(j^w&(O^j))+D[12]+1804603682&4294967295,A=w+(R<<7&4294967295|R>>>25),R=j+(O^A&(w^O))+D[13]+4254626195&4294967295,j=A+(R<<12&4294967295|R>>>20),R=O+(w^j&(A^w))+D[14]+2792965006&4294967295,O=j+(R<<17&4294967295|R>>>15),R=w+(A^O&(j^A))+D[15]+1236535329&4294967295,w=O+(R<<22&4294967295|R>>>10),R=A+(O^j&(w^O))+D[1]+4129170786&4294967295,A=w+(R<<5&4294967295|R>>>27),R=j+(w^O&(A^w))+D[6]+3225465664&4294967295,j=A+(R<<9&4294967295|R>>>23),R=O+(A^w&(j^A))+D[11]+643717713&4294967295,O=j+(R<<14&4294967295|R>>>18),R=w+(j^A&(O^j))+D[0]+3921069994&4294967295,w=O+(R<<20&4294967295|R>>>12),R=A+(O^j&(w^O))+D[5]+3593408605&4294967295,A=w+(R<<5&4294967295|R>>>27),R=j+(w^O&(A^w))+D[10]+38016083&4294967295,j=A+(R<<9&4294967295|R>>>23),R=O+(A^w&(j^A))+D[15]+3634488961&4294967295,O=j+(R<<14&4294967295|R>>>18),R=w+(j^A&(O^j))+D[4]+3889429448&4294967295,w=O+(R<<20&4294967295|R>>>12),R=A+(O^j&(w^O))+D[9]+568446438&4294967295,A=w+(R<<5&4294967295|R>>>27),R=j+(w^O&(A^w))+D[14]+3275163606&4294967295,j=A+(R<<9&4294967295|R>>>23),R=O+(A^w&(j^A))+D[3]+4107603335&4294967295,O=j+(R<<14&4294967295|R>>>18),R=w+(j^A&(O^j))+D[8]+1163531501&4294967295,w=O+(R<<20&4294967295|R>>>12),R=A+(O^j&(w^O))+D[13]+2850285829&4294967295,A=w+(R<<5&4294967295|R>>>27),R=j+(w^O&(A^w))+D[2]+4243563512&4294967295,j=A+(R<<9&4294967295|R>>>23),R=O+(A^w&(j^A))+D[7]+1735328473&4294967295,O=j+(R<<14&4294967295|R>>>18),R=w+(j^A&(O^j))+D[12]+2368359562&4294967295,w=O+(R<<20&4294967295|R>>>12),R=A+(w^O^j)+D[5]+4294588738&4294967295,A=w+(R<<4&4294967295|R>>>28),R=j+(A^w^O)+D[8]+2272392833&4294967295,j=A+(R<<11&4294967295|R>>>21),R=O+(j^A^w)+D[11]+1839030562&4294967295,O=j+(R<<16&4294967295|R>>>16),R=w+(O^j^A)+D[14]+4259657740&4294967295,w=O+(R<<23&4294967295|R>>>9),R=A+(w^O^j)+D[1]+2763975236&4294967295,A=w+(R<<4&4294967295|R>>>28),R=j+(A^w^O)+D[4]+1272893353&4294967295,j=A+(R<<11&4294967295|R>>>21),R=O+(j^A^w)+D[7]+4139469664&4294967295,O=j+(R<<16&4294967295|R>>>16),R=w+(O^j^A)+D[10]+3200236656&4294967295,w=O+(R<<23&4294967295|R>>>9),R=A+(w^O^j)+D[13]+681279174&4294967295,A=w+(R<<4&4294967295|R>>>28),R=j+(A^w^O)+D[0]+3936430074&4294967295,j=A+(R<<11&4294967295|R>>>21),R=O+(j^A^w)+D[3]+3572445317&4294967295,O=j+(R<<16&4294967295|R>>>16),R=w+(O^j^A)+D[6]+76029189&4294967295,w=O+(R<<23&4294967295|R>>>9),R=A+(w^O^j)+D[9]+3654602809&4294967295,A=w+(R<<4&4294967295|R>>>28),R=j+(A^w^O)+D[12]+3873151461&4294967295,j=A+(R<<11&4294967295|R>>>21),R=O+(j^A^w)+D[15]+530742520&4294967295,O=j+(R<<16&4294967295|R>>>16),R=w+(O^j^A)+D[2]+3299628645&4294967295,w=O+(R<<23&4294967295|R>>>9),R=A+(O^(w|~j))+D[0]+4096336452&4294967295,A=w+(R<<6&4294967295|R>>>26),R=j+(w^(A|~O))+D[7]+1126891415&4294967295,j=A+(R<<10&4294967295|R>>>22),R=O+(A^(j|~w))+D[14]+2878612391&4294967295,O=j+(R<<15&4294967295|R>>>17),R=w+(j^(O|~A))+D[5]+4237533241&4294967295,w=O+(R<<21&4294967295|R>>>11),R=A+(O^(w|~j))+D[12]+1700485571&4294967295,A=w+(R<<6&4294967295|R>>>26),R=j+(w^(A|~O))+D[3]+2399980690&4294967295,j=A+(R<<10&4294967295|R>>>22),R=O+(A^(j|~w))+D[10]+4293915773&4294967295,O=j+(R<<15&4294967295|R>>>17),R=w+(j^(O|~A))+D[1]+2240044497&4294967295,w=O+(R<<21&4294967295|R>>>11),R=A+(O^(w|~j))+D[8]+1873313359&4294967295,A=w+(R<<6&4294967295|R>>>26),R=j+(w^(A|~O))+D[15]+4264355552&4294967295,j=A+(R<<10&4294967295|R>>>22),R=O+(A^(j|~w))+D[6]+2734768916&4294967295,O=j+(R<<15&4294967295|R>>>17),R=w+(j^(O|~A))+D[13]+1309151649&4294967295,w=O+(R<<21&4294967295|R>>>11),R=A+(O^(w|~j))+D[4]+4149444226&4294967295,A=w+(R<<6&4294967295|R>>>26),R=j+(w^(A|~O))+D[11]+3174756917&4294967295,j=A+(R<<10&4294967295|R>>>22),R=O+(A^(j|~w))+D[2]+718787259&4294967295,O=j+(R<<15&4294967295|R>>>17),R=w+(j^(O|~A))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+j&4294967295}s.prototype.v=function(I,A){A===void 0&&(A=I.length);const w=A-this.blockSize,D=this.C;let O=this.h,j=0;for(;j<A;){if(O==0)for(;j<=w;)o(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<A;)if(D[O++]=I.charCodeAt(j++),O==this.blockSize){o(this,D),O=0;break}}else for(;j<A;)if(D[O++]=I[j++],O==this.blockSize){o(this,D),O=0;break}}this.h=O,this.o+=A},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,w=0;w<4;++w)for(let D=0;D<32;D+=8)I[A++]=this.g[w]>>>D&255;return I};function u(I,A){var w=g;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=A(I)}function f(I,A){this.h=A;const w=[];let D=!0;for(let O=I.length-1;O>=0;O--){const j=I[O]|0;D&&j==A||(w[O]=j,D=!1)}this.g=w}var g={};function y(I){return-128<=I&&I<128?u(I,function(A){return new f([A|0],A<0?-1:0)}):new f([I|0],I<0?-1:0)}function _(I){if(isNaN(I)||!isFinite(I))return x;if(I<0)return J(_(-I));const A=[];let w=1;for(let D=0;I>=w;D++)A[D]=I/w|0,w*=4294967296;return new f(A,0)}function T(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return J(T(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=_(Math.pow(A,8));let D=x;for(let j=0;j<I.length;j+=8){var O=Math.min(8,I.length-j);const R=parseInt(I.substring(j,j+O),A);O<8?(O=_(Math.pow(A,O)),D=D.j(O).add(_(R))):(D=D.j(w),D=D.add(_(R)))}return D}var x=y(0),N=y(1),z=y(16777216);r=f.prototype,r.m=function(){if(ee(this))return-J(this).m();let I=0,A=1;for(let w=0;w<this.g.length;w++){const D=this.i(w);I+=(D>=0?D:4294967296+D)*A,A*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(Y(this))return"0";if(ee(this))return"-"+J(this).toString(I);const A=_(Math.pow(I,6));var w=this;let D="";for(;;){const O=pe(w,A).g;w=ce(w,O.j(A));let j=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=O,Y(w))return j+D;for(;j.length<6;)j="0"+j;D=j+D}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function Y(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function ee(I){return I.h==-1}r.l=function(I){return I=ce(this,I),ee(I)?-1:Y(I)?0:1};function J(I){const A=I.g.length,w=[];for(let D=0;D<A;D++)w[D]=~I.g[D];return new f(w,~I.h).add(N)}r.abs=function(){return ee(this)?J(this):this},r.add=function(I){const A=Math.max(this.g.length,I.g.length),w=[];let D=0;for(let O=0;O<=A;O++){let j=D+(this.i(O)&65535)+(I.i(O)&65535),R=(j>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);D=R>>>16,j&=65535,R&=65535,w[O]=R<<16|j}return new f(w,w[w.length-1]&-2147483648?-1:0)};function ce(I,A){return I.add(J(A))}r.j=function(I){if(Y(this)||Y(I))return x;if(ee(this))return ee(I)?J(this).j(J(I)):J(J(this).j(I));if(ee(I))return J(this.j(J(I)));if(this.l(z)<0&&I.l(z)<0)return _(this.m()*I.m());const A=this.g.length+I.g.length,w=[];for(var D=0;D<2*A;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(let O=0;O<I.g.length;O++){const j=this.i(D)>>>16,R=this.i(D)&65535,Ze=I.i(O)>>>16,gt=I.i(O)&65535;w[2*D+2*O]+=R*gt,Q(w,2*D+2*O),w[2*D+2*O+1]+=j*gt,Q(w,2*D+2*O+1),w[2*D+2*O+1]+=R*Ze,Q(w,2*D+2*O+1),w[2*D+2*O+2]+=j*Ze,Q(w,2*D+2*O+2)}for(I=0;I<A;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=A;I<2*A;I++)w[I]=0;return new f(w,0)};function Q(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function te(I,A){this.g=I,this.h=A}function pe(I,A){if(Y(A))throw Error("division by zero");if(Y(I))return new te(x,x);if(ee(I))return A=pe(J(I),A),new te(J(A.g),J(A.h));if(ee(A))return A=pe(I,J(A)),new te(J(A.g),A.h);if(I.g.length>30){if(ee(I)||ee(A))throw Error("slowDivide_ only works with positive integers.");for(var w=N,D=A;D.l(I)<=0;)w=De(w),D=De(D);var O=ge(w,1),j=ge(D,1);for(D=ge(D,2),w=ge(w,2);!Y(D);){var R=j.add(D);R.l(I)<=0&&(O=O.add(w),j=R),D=ge(D,1),w=ge(w,1)}return A=ce(I,O.j(A)),new te(O,A)}for(O=x;I.l(A)>=0;){for(w=Math.max(1,Math.floor(I.m()/A.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),j=_(w),R=j.j(A);ee(R)||R.l(I)>0;)w-=D,j=_(w),R=j.j(A);Y(j)&&(j=N),O=O.add(j),I=ce(I,R)}return new te(O,I)}r.B=function(I){return pe(this,I).h},r.and=function(I){const A=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<A;D++)w[D]=this.i(D)&I.i(D);return new f(w,this.h&I.h)},r.or=function(I){const A=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<A;D++)w[D]=this.i(D)|I.i(D);return new f(w,this.h|I.h)},r.xor=function(I){const A=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<A;D++)w[D]=this.i(D)^I.i(D);return new f(w,this.h^I.h)};function De(I){const A=I.g.length+1,w=[];for(let D=0;D<A;D++)w[D]=I.i(D)<<1|I.i(D-1)>>>31;return new f(w,I.h)}function ge(I,A){const w=A>>5;A%=32;const D=I.g.length-w,O=[];for(let j=0;j<D;j++)O[j]=A>0?I.i(j+w)>>>A|I.i(j+w+1)<<32-A:I.i(j+w);return new f(O,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,PE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=T,ss=f}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UE,Vo,zE,Wc,Tm,qE,BE,HE;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hc=="object"&&Hc];for(var p=0;p<c.length;++p){var E=c[p];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(c,p){if(p)e:{var E=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var k=c[S];if(!(k in E))break e;E=E[k]}c=c[c.length-1],S=E[c],p=p(S),p!=S&&p!=null&&e(E,c,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(p){var E=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&E.push([S,p[S]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function y(c,p,E){return c.call.apply(c.bind,arguments)}function _(c,p,E){return _=y,_.apply(null,arguments)}function T(c,p){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function x(c,p){function E(){}E.prototype=p.prototype,c.Z=p.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(S,k,B){for(var ne=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)ne[Ie-2]=arguments[Ie];return p.prototype[k].apply(S,ne)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function z(c){const p=c.length;if(p>0){const E=Array(p);for(let S=0;S<p;S++)E[S]=c[S];return E}return[]}function Y(c,p){for(let S=1;S<arguments.length;S++){const k=arguments[S];var E=typeof k;if(E=E!="object"?E:k?Array.isArray(k)?"array":E:"null",E=="array"||E=="object"&&typeof k.length=="number"){E=c.length||0;const B=k.length||0;c.length=E+B;for(let ne=0;ne<B;ne++)c[E+ne]=k[ne]}else c.push(k)}}class ee{constructor(p,E){this.i=p,this.j=E,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function J(c){f.setTimeout(()=>{throw c},0)}function ce(){var c=I;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Q{constructor(){this.h=this.g=null}add(p,E){const S=te.get();S.set(p,E),this.h?this.h.next=S:this.g=S,this.h=S}}var te=new ee(()=>new pe,c=>c.reset());class pe{constructor(){this.next=this.g=this.h=null}set(p,E){this.h=p,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let De,ge=!1,I=new Q,A=()=>{const c=Promise.resolve(void 0);De=()=>{c.then(w)}};function w(){for(var c;c=ce();){try{c.h.call(c.g)}catch(E){J(E)}var p=te;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}ge=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};f.addEventListener("test",E,p),f.removeEventListener("test",E,p)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function Ze(c,p){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}x(Ze,O),Ze.prototype.init=function(c,p){const E=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(E=="mouseover"?p=c.fromElement:E=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),F=0;function ie(c,p,E,S,k){this.listener=c,this.proxy=null,this.src=p,this.type=E,this.capture=!!S,this.ha=k,this.key=++F,this.da=this.fa=!1}function ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qe(c,p,E){for(const S in c)p.call(E,c[S],S,c)}function Ke(c,p){for(const E in c)p.call(void 0,c[E],E,c)}function M(c){const p={};for(const E in c)p[E]=c[E];return p}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,p){let E,S;for(let k=1;k<arguments.length;k++){S=arguments[k];for(E in S)c[E]=S[E];for(let B=0;B<$.length;B++)E=$[B],Object.prototype.hasOwnProperty.call(S,E)&&(c[E]=S[E])}}function oe(c){this.src=c,this.g={},this.h=0}oe.prototype.add=function(c,p,E,S,k){const B=c.toString();c=this.g[B],c||(c=this.g[B]=[],this.h++);const ne=Re(c,p,S,k);return ne>-1?(p=c[ne],E||(p.fa=!1)):(p=new ie(p,this.src,B,!!S,k),p.fa=E,c.push(p)),p};function be(c,p){const E=p.type;if(E in c.g){var S=c.g[E],k=Array.prototype.indexOf.call(S,p,void 0),B;(B=k>=0)&&Array.prototype.splice.call(S,k,1),B&&(ye(p),c.g[E].length==0&&(delete c.g[E],c.h--))}}function Re(c,p,E,S){for(let k=0;k<c.length;++k){const B=c[k];if(!B.da&&B.listener==p&&B.capture==!!E&&B.ha==S)return k}return-1}var ae="closure_lm_"+(Math.random()*1e6|0),le={};function fe(c,p,E,S,k){if(Array.isArray(p)){for(let B=0;B<p.length;B++)fe(c,p[B],E,S,k);return null}return E=mn(E),c&&c[gt]?c.J(p,E,g(S)?!!S.capture:!1,k):Be(c,p,E,!1,S,k)}function Be(c,p,E,S,k,B){if(!p)throw Error("Invalid event type");const ne=g(k)?!!k.capture:!!k;let Ie=Ge(c);if(Ie||(c[ae]=Ie=new oe(c)),E=Ie.add(p,E,S,ne,B),E.proxy)return E;if(S=je(),E.proxy=S,S.src=c,S.listener=E,c.addEventListener)j||(k=ne),k===void 0&&(k=!1),c.addEventListener(p.toString(),S,k);else if(c.attachEvent)c.attachEvent(Bt(p.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function je(){function c(E){return p.call(c.src,c.listener,E)}const p=Ht;return c}function Oe(c,p,E,S,k){if(Array.isArray(p))for(var B=0;B<p.length;B++)Oe(c,p[B],E,S,k);else S=g(S)?!!S.capture:!!S,E=mn(E),c&&c[gt]?(c=c.i,B=String(p).toString(),B in c.g&&(p=c.g[B],E=Re(p,E,S,k),E>-1&&(ye(p[E]),Array.prototype.splice.call(p,E,1),p.length==0&&(delete c.g[B],c.h--)))):c&&(c=Ge(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Re(p,E,S,k)),(E=c>-1?p[c]:null)&&nt(E))}function nt(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[gt])be(p.i,c);else{var E=c.type,S=c.proxy;p.removeEventListener?p.removeEventListener(E,S,c.capture):p.detachEvent?p.detachEvent(Bt(E),S):p.addListener&&p.removeListener&&p.removeListener(S),(E=Ge(p))?(be(E,c),E.h==0&&(E.src=null,p[ae]=null)):ye(c)}}}function Bt(c){return c in le?le[c]:le[c]="on"+c}function Ht(c,p){if(c.da)c=!0;else{p=new Ze(p,this);const E=c.listener,S=c.ha||c.src;c.fa&&nt(c),c=E.call(S,p)}return c}function Ge(c){return c=c[ae],c instanceof oe?c:null}var Ft="__closure_events_fn_"+(Math.random()*1e9>>>0);function mn(c){return typeof c=="function"?c:(c[Ft]||(c[Ft]=function(p){return c.handleEvent(p)}),c[Ft])}function it(){D.call(this),this.i=new oe(this),this.M=this,this.G=null}x(it,D),it.prototype[gt]=!0,it.prototype.removeEventListener=function(c,p,E,S){Oe(this,c,p,E,S)};function ct(c,p){var E,S=c.G;if(S)for(E=[];S;S=S.G)E.push(S);if(c=c.M,S=p.type||p,typeof p=="string")p=new O(p,c);else if(p instanceof O)p.target=p.target||c;else{var k=p;p=new O(S,c),re(p,k)}k=!0;let B,ne;if(E)for(ne=E.length-1;ne>=0;ne--)B=p.g=E[ne],k=Zn(B,S,!0,p)&&k;if(B=p.g=c,k=Zn(B,S,!0,p)&&k,k=Zn(B,S,!1,p)&&k,E)for(ne=0;ne<E.length;ne++)B=p.g=E[ne],k=Zn(B,S,!1,p)&&k}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const E=c.g[p];for(let S=0;S<E.length;S++)ye(E[S]);delete c.g[p],c.h--}}this.G=null},it.prototype.J=function(c,p,E,S){return this.i.add(String(c),p,!1,E,S)},it.prototype.K=function(c,p,E,S){return this.i.add(String(c),p,!0,E,S)};function Zn(c,p,E,S){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let k=!0;for(let B=0;B<p.length;++B){const ne=p[B];if(ne&&!ne.da&&ne.capture==E){const Ie=ne.listener,bt=ne.ha||ne.src;ne.fa&&be(c.i,ne),k=Ie.call(bt,S)!==!1&&k}}return k&&!S.defaultPrevented}function Al(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:f.setTimeout(c,p||0)}function Sl(c){c.g=Al(()=>{c.g=null,c.i&&(c.i=!1,Sl(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Gt extends D{constructor(p,E){super(),this.m=p,this.l=E,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Sl(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jn(c){D.call(this),this.h=c,this.g={}}x(jn,D);var ys=[];function yr(c){qe(c.g,function(p,E){this.g.hasOwnProperty(E)&&nt(p)},c),c.g={}}jn.prototype.N=function(){jn.Z.N.call(this),yr(this)},jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jn=f.JSON.stringify,Xh=f.JSON.parse,mu=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function pu(){}function gu(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){O.call(this,"d")}x($t,O);function Ln(){O.call(this,"c")}x(Ln,O);var Et={},yu=null;function la(){return yu=yu||new it}Et.Ia="serverreachability";function _u(c){O.call(this,Et.Ia,c)}x(_u,O);function pi(c){const p=la();ct(p,new _u(p))}Et.STAT_EVENT="statevent";function _s(c,p){O.call(this,Et.STAT_EVENT,c),this.stat=p}x(_s,O);function Rt(c){const p=la();ct(p,new _s(p,c))}Et.Ja="timingevent";function gi(c,p){O.call(this,Et.Ja,c),this.size=p}x(gi,O);function yi(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},p)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function $h(c,p,E,S,k,B){c.info(function(){if(c.g)if(B){var ne="",Ie=B.split("&");for(let Xe=0;Xe<Ie.length;Xe++){var bt=Ie[Xe].split("=");if(bt.length>1){const mt=bt[0];bt=bt[1];const zn=mt.split("_");ne=zn.length>=2&&zn[1]=="type"?ne+(mt+"="+bt+"&"):ne+(mt+"=redacted&")}}}else ne=null;else ne=B;return"XMLHTTP REQ ("+S+") [attempt "+k+"]: "+p+`
`+E+`
`+ne})}function vu(c,p,E,S,k,B,ne){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+k+"]: "+p+`
`+E+`
`+B+" "+ne})}function _i(c,p,E,S){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Zh(c,E)+(S?" "+S:"")})}function vs(c,p){c.info(function(){return"TIMEOUT: "+p})}ei.prototype.info=function(){};function Zh(c,p){if(!c.g)return p;if(!p)return null;try{const B=JSON.parse(p);if(B){for(c=0;c<B.length;c++)if(Array.isArray(B[c])){var E=B[c];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var k=S[0];if(k!="noop"&&k!="stop"&&k!="close")for(let ne=1;ne<S.length;ne++)S[ne]=""}}}}return Jn(B)}catch{return p}}var Es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xl;function bs(){}x(bs,pu),bs.prototype.g=function(){return new XMLHttpRequest},xl=new bs;function Fi(c){return encodeURIComponent(String(c))}function Eu(c){var p=1;c=c.split(":");const E=[];for(;p>0&&c.length;)E.push(c.shift()),p--;return c.length&&E.push(c.join(":")),E}function ti(c,p,E,S){this.j=c,this.i=p,this.l=E,this.S=S||1,this.V=new jn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}var It={},Qt={};function vi(c,p,E){c.M=1,c.A=Ts(Ct(p)),c.u=E,c.R=!0,oa(c,null)}function oa(c,p){c.F=Date.now(),Ei(c),c.B=Ct(c.A);var E=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),fa(E.i,"t",S),c.C=0,E=c.j.L,c.h=new ni,c.g=ju(c.j,E?p:null,!c.u),c.P>0&&(c.O=new Gt(_(c.Y,c,c.g),c.P)),p=c.V,E=c.g,S=c.ba;var k="readystatechange";Array.isArray(k)||(k&&(ys[0]=k.toString()),k=ys);for(let B=0;B<k.length;B++){const ne=fe(E,k[B],S||p.handleEvent,!1,p.h||p);if(!ne)break;p.g[ne.key]=ne}p=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),pi(),$h(c.i,c.v,c.B,c.l,c.S,c.u)}ti.prototype.ba=function(c){c=c.target;const p=this.O;p&&si(c)==3?p.j():this.Y(c)},ti.prototype.Y=function(c){try{if(c==this.g)e:{const Ie=si(this.g),bt=this.g.ya(),Xe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||Ie!=4||bt==7||(bt==8||Xe<=0?pi(3):pi(2)),bi(this);var p=this.g.ca();this.X=p;var E=Jh(this);if(this.o=p==200,vu(this.i,this.v,this.B,this.l,this.S,Ie,p),this.o){if(this.U&&!this.L){t:{if(this.g){var S,k=this.g;if((S=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var B=S;break t}}B=null}if(c=B)_i(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ti(this,c);else{this.o=!1,this.m=3,Rt(12),Sn(this),kn(this);break e}}if(this.R){c=!0;let mt;for(;!this.K&&this.C<E.length;)if(mt=Tu(this,E),mt==Qt){Ie==4&&(this.m=4,Rt(14),c=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==It){this.m=4,Rt(15),_i(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else _i(this.i,this.l,mt,null),Ti(this,mt);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||E.length!=0||this.h.h||(this.m=1,Rt(16),c=!1),this.o=this.o&&c,!c)_i(this.i,this.l,E,"[Invalid Chunked Response]"),Sn(this),kn(this);else if(E.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ql(ne),ne.P=!0,Rt(11))}}else _i(this.i,this.l,E,null),Ti(this,E);Ie==4&&Sn(this),this.o&&!this.K&&(Ie==4?Du(this.j,this):(this.o=!1,Ei(this)))}else Qi(this.g),p==400&&E.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Sn(this),kn(this)}}}catch{}finally{}};function Jh(c){if(!bu(c))return c.g.la();const p=Zt(c.g);if(p==="")return"";let E="";const S=p.length,k=si(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Sn(c),kn(c),"";c.h.i=new f.TextDecoder}for(let B=0;B<S;B++)c.h.h=!0,E+=c.h.i.decode(p[B],{stream:!(k&&B==S-1)});return p.length=0,c.h.g+=E,c.C=0,c.h.g}function bu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Tu(c,p){var E=c.C,S=p.indexOf(`
`,E);return S==-1?Qt:(E=Number(p.substring(E,S)),isNaN(E)?It:(S+=1,S+E>p.length?Qt:(p=p.slice(S,S+E),c.C=S+E,p)))}ti.prototype.cancel=function(){this.K=!0,Sn(this)};function Ei(c){c.T=Date.now()+c.H,ua(c,c.H)}function ua(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=yi(_(c.aa,c),p)}function bi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}ti.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(vs(this.i,this.B),this.M!=2&&(pi(),Rt(17)),Sn(this),this.m=2,kn(this)):ua(this,this.T-c)};function kn(c){c.j.I==0||c.K||Du(c.j,c)}function Sn(c){bi(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,yr(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function Ti(c,p){try{var E=c.j;if(E.I!=0&&(E.g==c||Si(E.h,c))){if(!c.L&&Si(E.h,c)&&E.I==3){try{var S=E.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var k=S;if(k[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)ya(E),wr(E);else break e;Ns(E),Rt(18)}}else E.xa=k[1],0<E.xa-E.K&&k[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=yi(_(E.Va,E),6e3));Ai(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ci(E,11)}else if((c.L||E.g==c)&&ya(E),!R(p))for(k=E.Ba.g.parse(p),p=0;p<k.length;p++){let Xe=k[p];const mt=Xe[0];if(!(mt<=E.K))if(E.K=mt,Xe=Xe[1],E.I==2)if(Xe[0]=="c"){E.M=Xe[1],E.ba=Xe[2];const zn=Xe[3];zn!=null&&(E.ka=zn,E.j.info("VER="+E.ka));const Di=Xe[4];Di!=null&&(E.za=Di,E.j.info("SVER="+E.za));const ai=Xe[5];ai!=null&&typeof ai=="number"&&ai>0&&(S=1.5*ai,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const li=c.g;if(li){const Cs=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var B=S.h;B.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Nl(B,B.h),B.h=null))}if(S.G){const _a=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;_a&&(S.wa=_a,We(S.J,S.G,_a))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var ne=c;if(S.na=Mu(S,S.L?S.ba:null,S.W),ne.L){Cl(S.h,ne);var Ie=ne,bt=S.O;bt&&(Ie.H=bt),Ie.D&&(bi(Ie),Ei(Ie)),S.g=ne}else Nu(S);E.i.length>0&&Ni(E)}else Xe[0]!="stop"&&Xe[0]!="close"||Ci(E,7);else E.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Ci(E,7):Ul(E):Xe[0]!="noop"&&E.l&&E.l.qa(Xe),E.A=0)}}pi(4)}catch{}}var Nt=class{constructor(c,p){this.g=c,this.map=p}};function Rl(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Il(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ai(c){return c.h?1:c.g?c.g.size:0}function Si(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Nl(c,p){c.g?c.g.add(p):c.h=p}function Cl(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Rl.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Dl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const E of c.g.values())p=p.concat(E.G);return p}return z(c.i)}var Au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(c,p){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const S=c[E].indexOf("=");let k,B=null;S>=0?(k=c[E].substring(0,S),B=c[E].substring(S+1)):k=c[E],p(k,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function wn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof wn?(this.l=c.l,Yt(this,c.j),this.o=c.o,this.g=c.g,_r(this,c.u),this.h=c.h,Ol(this,Ru(c.i)),this.m=c.m):c&&(p=String(c).match(Au))?(this.l=!1,Yt(this,p[1]||"",!0),this.o=wi(p[2]||""),this.g=wi(p[3]||"",!0),_r(this,p[4]),this.h=wi(p[5]||"",!0),Ol(this,p[6]||"",!0),this.m=wi(p[7]||"")):(this.l=!1,this.i=new Er(null,this.l))}wn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(As(p,ha,!0),":");var E=this.g;return(E||p=="file")&&(c.push("//"),(p=this.o)&&c.push(As(p,ha,!0),"@"),c.push(Fi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(As(E,E.charAt(0)=="/"?Vl:Su,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",As(E,wu)),c.join("")},wn.prototype.resolve=function(c){const p=Ct(this);let E=!!c.j;E?Yt(p,c.j):E=!!c.o,E?p.o=c.o:E=!!c.g,E?p.g=c.g:E=c.u!=null;var S=c.h;if(E)_r(p,c.u);else if(E=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var k=p.h.lastIndexOf("/");k!=-1&&(S=p.h.slice(0,k+1)+S)}if(k=S,k==".."||k==".")S="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){S=k.lastIndexOf("/",0)==0,k=k.split("/");const B=[];for(let ne=0;ne<k.length;){const Ie=k[ne++];Ie=="."?S&&ne==k.length&&B.push(""):Ie==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),S&&ne==k.length&&B.push("")):(B.push(Ie),S=!0)}S=B.join("/")}else S=k}return E?p.h=S:E=c.i.toString()!=="",E?Ol(p,Ru(c.i)):E=!!c.m,E&&(p.m=c.m),p};function Ct(c){return new wn(c)}function Yt(c,p,E){c.j=E?wi(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function _r(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function Ol(c,p,E){p instanceof Er?(c.i=p,da(c.i,c.l)):(E||(p=As(p,vr)),c.i=new Er(p,c.l))}function We(c,p,E){c.i.set(p,E)}function Ts(c){return We(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function wi(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function As(c,p,E){return typeof c=="string"?(c=encodeURI(c).replace(p,pn),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ha=/[#\/\?@]/g,Su=/[#\?:]/g,Vl=/[#\?]/g,vr=/[#\?@]/g,wu=/#/g;function Er(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function gn(c){c.g||(c.g=new Map,c.h=0,c.i&&ca(c.i,function(p,E){c.add(decodeURIComponent(p.replace(/\+/g," ")),E)}))}r=Er.prototype,r.add=function(c,p){gn(this),this.i=null,c=br(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(p),this.h+=1,this};function xu(c,p){gn(c),p=br(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Ml(c,p){return gn(c),p=br(c,p),c.g.has(p)}r.forEach=function(c,p){gn(this),this.g.forEach(function(E,S){E.forEach(function(k){c.call(p,k,S,this)},this)},this)};function jl(c,p){gn(c);let E=[];if(typeof p=="string")Ml(c,p)&&(E=E.concat(c.g.get(br(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)E=E.concat(c[p]);return E}r.set=function(c,p){return gn(this),this.i=null,c=br(this,c),Ml(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=jl(this,c),c.length>0?String(c[0]):p):p};function fa(c,p,E){xu(c,p),E.length>0&&(c.i=null,c.g.set(br(c,p),z(E)),c.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var E=p[S];const k=Fi(E);E=jl(this,E);for(let B=0;B<E.length;B++){let ne=k;E[B]!==""&&(ne+="="+Fi(E[B])),c.push(ne)}}return this.i=c.join("&")};function Ru(c){const p=new Er;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function br(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function da(c,p){p&&!c.j&&(gn(c),c.i=null,c.g.forEach(function(E,S){const k=S.toLowerCase();S!=k&&(xu(this,S),fa(this,k,E))},c)),c.j=p}function ii(c,p){const E=new ei;if(f.Image){const S=new Image;S.onload=T(Pn,E,"TestLoadImage: loaded",!0,p,S),S.onerror=T(Pn,E,"TestLoadImage: error",!1,p,S),S.onabort=T(Pn,E,"TestLoadImage: abort",!1,p,S),S.ontimeout=T(Pn,E,"TestLoadImage: timeout",!1,p,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else p(!1)}function Ll(c,p){const E=new ei,S=new AbortController,k=setTimeout(()=>{S.abort(),Pn(E,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:S.signal}).then(B=>{clearTimeout(k),B.ok?Pn(E,"TestPingServer: ok",!0,p):Pn(E,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(k),Pn(E,"TestPingServer: error",!1,p)})}function Pn(c,p,E,S,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),S(E)}catch{}}function Tr(){this.g=new mu}function xi(c){this.i=c.Sb||null,this.h=c.ab||!1}x(xi,pu),xi.prototype.g=function(){return new Ss(this.i,this.h)};function Ss(c,p){it.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Ss,it),r=Ss.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ri(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||f).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ma(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ma(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ar(this):ri(this),this.readyState==3&&ma(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Ar(this))},r.Na=function(c){this.g&&(this.response=c,Ar(this))},r.ga=function(){this.g&&Ar(this)};function Ar(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ri(c)}r.setRequestHeader=function(c,p){this.A.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var E=p.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=p.next();return c.join(`\r
`)};function ri(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Un(c){let p="";return qe(c,function(E,S){p+=S,p+=":",p+=E,p+=`\r
`}),p}function ws(c,p,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Un(E),typeof c=="string"?E!=null&&Fi(E):We(c,p,E))}function rt(c){it.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(rt,it);var Ri=/^https?$/i,kl=["POST","PUT"];r=rt.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,p,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xl.g(),this.g.onreadystatechange=N(_(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(B){xs(this,B);return}if(c=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var k in S)E.set(k,S[k]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const B of S.keys())E.set(B,S.get(B));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(B=>B.toLowerCase()=="content-type"),k=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(kl,p,void 0)>=0)||S||k||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ne]of E)this.g.setRequestHeader(B,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(B){xs(this,B)}};function xs(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,Pl(c),Gi(c)}function Pl(c){c.A||(c.A=!0,ct(c,"complete"),ct(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,ct(this,"complete"),ct(this,"abort"),Gi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),rt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Rs(this):this.Xa())},r.Xa=function(){Rs(this)};function Rs(c){if(c.h&&typeof u<"u"){if(c.v&&si(c)==4)setTimeout(c.Ca.bind(c),0);else if(ct(c,"readystatechange"),si(c)==4){c.h=!1;try{const B=c.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var E;if(!(E=p)){var S;if(S=B===0){let ne=String(c.D).match(Au)[1]||null;!ne&&f.self&&f.self.location&&(ne=f.self.location.protocol.slice(0,-1)),S=!Ri.test(ne?ne.toLowerCase():"")}E=S}if(E)ct(c,"complete"),ct(c,"success");else{c.o=6;try{var k=si(c)>2?c.g.statusText:""}catch{k=""}c.l=k+" ["+c.ca()+"]",Pl(c)}}finally{Gi(c)}}}}function Gi(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,p||ct(c,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function si(c){return c.g?c.g.readyState:0}r.ca=function(){try{return si(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Xh(p)}};function Zt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(c){const p={};c=(c.g&&si(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(R(c[S]))continue;var E=Eu(c[S]);const k=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const B=p[k]||[];p[k]=B,B.push(E)}Ke(p,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(c,p,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||p}function Sr(c){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ii("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ii("baseRetryDelayMs",5e3,c),this.Za=Ii("retryDelaySeedMs",1e4,c),this.Ta=Ii("forwardChannelMaxRetries",2,c),this.va=Ii("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Rl(c&&c.concurrentRequestLimit),this.Ba=new Tr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Sr.prototype,r.ka=8,r.I=1,r.connect=function(c,p,E,S){Rt(0),this.W=c,this.H=p||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=Mu(this,null,this.W),Ni(this)};function Ul(c){if(pa(c),c.I==3){var p=c.V++,E=Ct(c.J);if(We(E,"SID",c.M),We(E,"RID",p),We(E,"TYPE","terminate"),Is(c,E),p=new ti(c,c.j,p),p.M=2,p.A=Ts(Ct(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(p.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=p.A,E=!0),E||(p.g=ju(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ei(p)}Vu(c)}function wr(c){c.g&&(ql(c),c.g.cancel(),c.g=null)}function pa(c){wr(c),c.v&&(f.clearTimeout(c.v),c.v=null),ya(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Ni(c){if(!Il(c.h)&&!c.m){c.m=!0;var p=c.Ea;De||A(),ge||(De(),ge=!0),I.add(p,c),c.D=0}}function ga(c,p){return Ai(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=yi(_(c.Ea,c,p),Ou(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const k=new ti(this,this.j,c);let B=this.o;if(this.U&&(B?(B=M(B),re(B,this.U)):B=this.U),this.u!==null||this.R||(k.J=B,B=null),this.S)e:{for(var p=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=E;break e}if(p===4096||E===this.i.length-1){p=E+1;break e}}p=1e3}else p=1e3;p=Iu(this,k,p),E=Ct(this.J),We(E,"RID",c),We(E,"CVER",22),this.G&&We(E,"X-HTTP-Session-Id",this.G),Is(this,E),B&&(this.R?p="headers="+Fi(Un(B))+"&"+p:this.u&&ws(E,this.u,B)),Nl(this.h,k),this.Ra&&We(E,"TYPE","init"),this.S?(We(E,"$req",p),We(E,"SID","null"),k.U=!0,vi(k,E,null)):vi(k,E,p),this.I=2}}else this.I==3&&(c?zl(this,c):this.i.length==0||Il(this.h)||zl(this))};function zl(c,p){var E;p?E=p.l:E=c.V++;const S=Ct(c.J);We(S,"SID",c.M),We(S,"RID",E),We(S,"AID",c.K),Is(c,S),c.u&&c.o&&ws(S,c.u,c.o),E=new ti(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Iu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Nl(c.h,E),vi(E,S,p)}function Is(c,p){c.H&&qe(c.H,function(E,S){We(p,S,E)}),c.l&&qe({},function(E,S){We(p,S,E)})}function Iu(c,p,E){E=Math.min(c.i.length,E);const S=c.l?_(c.l.Ka,c.l,c):null;e:{var k=c.i;let Ie=-1;for(;;){const bt=["count="+E];Ie==-1?E>0?(Ie=k[0].g,bt.push("ofs="+Ie)):Ie=0:bt.push("ofs="+Ie);let Xe=!0;for(let mt=0;mt<E;mt++){var B=k[mt].g;const zn=k[mt].map;if(B-=Ie,B<0)Ie=Math.max(0,k[mt].g-100),Xe=!1;else try{B="req"+B+"_"||"";try{var ne=zn instanceof Map?zn:Object.entries(zn);for(const[Di,ai]of ne){let li=ai;g(ai)&&(li=Jn(ai)),bt.push(B+Di+"="+encodeURIComponent(li))}}catch(Di){throw bt.push(B+"type="+encodeURIComponent("_badmap")),Di}}catch{S&&S(zn)}}if(Xe){ne=bt.join("&");break e}}ne=void 0}return c=c.i.splice(0,E),p.G=c,ne}function Nu(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;De||A(),ge||(De(),ge=!0),I.add(p,c),c.A=0}}function Ns(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=yi(_(c.Da,c),Ou(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Cu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=yi(_(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),wr(this),Cu(this))};function ql(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Cu(c){c.g=new ti(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Ct(c.na);We(p,"RID","rpc"),We(p,"SID",c.M),We(p,"AID",c.K),We(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&We(p,"TO",c.ia),We(p,"TYPE","xmlhttp"),Is(c,p),c.u&&c.o&&ws(p,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=Ts(Ct(p)),E.u=null,E.R=!0,oa(E,c)}r.Va=function(){this.C!=null&&(this.C=null,wr(this),Ns(this),Rt(19))};function ya(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Du(c,p){var E=null;if(c.g==p){ya(c),ql(c),c.g=null;var S=2}else if(Si(c.h,p))E=p.G,Cl(c.h,p),S=1;else return;if(c.I!=0){if(p.o)if(S==1){E=p.u?p.u.length:0,p=Date.now()-p.F;var k=c.D;S=la(),ct(S,new gi(S,E)),Ni(c)}else Nu(c);else if(k=p.m,k==3||k==0&&p.X>0||!(S==1&&ga(c,p)||S==2&&Ns(c)))switch(E&&E.length>0&&(p=c.h,p.i=p.i.concat(E)),k){case 1:Ci(c,5);break;case 4:Ci(c,10);break;case 3:Ci(c,6);break;default:Ci(c,2)}}}function Ou(c,p){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*p}function Ci(c,p){if(c.j.info("Error code "+p),p==2){var E=_(c.bb,c),S=c.Ua;const k=!S;S=new wn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Yt(S,"https"),Ts(S),k?ii(S.toString(),E):Ll(S.toString(),E)}else Rt(2);c.I=0,c.l&&c.l.pa(p),Vu(c),pa(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Vu(c){if(c.I=0,c.ja=[],c.l){const p=Dl(c.h);(p.length!=0||c.i.length!=0)&&(Y(c.ja,p),Y(c.ja,c.i),c.h.i.length=0,z(c.i),c.i.length=0),c.l.oa()}}function Mu(c,p,E){var S=E instanceof wn?Ct(E):new wn(E);if(S.g!="")p&&(S.g=p+"."+S.g),_r(S,S.u);else{var k=f.location;S=k.protocol,p=p?p+"."+k.hostname:k.hostname,k=+k.port;const B=new wn(null);S&&Yt(B,S),p&&(B.g=p),k&&_r(B,k),E&&(B.h=E),S=B}return E=c.G,p=c.wa,E&&p&&We(S,E,p),We(S,"VER",c.ka),Is(c,S),S}function ju(c,p,E){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new rt(new xi({ab:E})):new rt(c.ma),p.Fa(c.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lu(){}r=Lu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function xr(){}xr.prototype.g=function(c,p){return new hn(c,p)};function hn(c,p){it.call(this),this.g=new Sr(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!R(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Yi(this)}x(hn,it),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ul(this.g)},hn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=Jn(c),c=E);p.i.push(new Nt(p.Ya++,c)),p.I==3&&Ni(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,hn.Z.N.call(this)};function ku(c){$t.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const E in p){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}x(ku,$t);function Pu(){Ln.call(this),this.status=1}x(Pu,Ln);function Yi(c){this.g=c}x(Yi,Lu),Yi.prototype.ra=function(){ct(this.g,"a")},Yi.prototype.qa=function(c){ct(this.g,new ku(c))},Yi.prototype.pa=function(c){ct(this.g,new Pu)},Yi.prototype.oa=function(){ct(this.g,"b")},xr.prototype.createWebChannel=xr.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,HE=function(){return new xr},BE=function(){return la()},qE=Et,Tm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,Wc=Es,wl.COMPLETE="complete",zE=wl,gu.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",it.prototype.listen=it.prototype.J,Vo=gu,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,UE=rt}).apply(typeof Hc<"u"?Hc:typeof self<"u"?self:typeof window<"u"?window:{});const Q0="@firebase/firestore",Y0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new Hm("@firebase/firestore");function Ka(){return ta.logLevel}function ue(r,...e){if(ta.logLevel<=Pe.DEBUG){const n=e.map(tp);ta.debug(`Firestore (${_l}): ${r}`,...n)}}function mr(r,...e){if(ta.logLevel<=Pe.ERROR){const n=e.map(tp);ta.error(`Firestore (${_l}): ${r}`,...n)}}function ol(r,...e){if(ta.logLevel<=Pe.WARN){const n=e.map(tp);ta.warn(`Firestore (${_l}): ${r}`,...n)}}function tp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,FE(r,s,n)}function FE(r,e,n){let s=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw mr(s),new Error(s)}function Je(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||FE(e,o,s)}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class v2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(on.UNAUTHENTICATED)))}shutdown(){}}class E2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class b2{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let u=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},g=y=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new hr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string",31837,{l:s}),new GE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class T2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class A2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new T2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class K0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Je(this.o===void 0,3512);const s=u=>{u.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ue("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new K0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new K0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=w2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ue(r,e){return r<e?-1:r>e?1:0}function Am(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return am(o)===am(u)?Ue(o,u):am(o)?1:-1}return Ue(r.length,e.length)}const x2=55296,R2=57343;function am(r){const e=r.charCodeAt(0);return e>=x2&&e<=R2}function ul(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="__name__";class Li{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Li.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const s=Li.isNumericId(e),o=Li.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Li.extractNumericId(e).compare(Li.extractNumericId(n)):Am(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ss.fromString(e.substring(4,e.length-2))}}class ut extends Li{construct(e,n,s){return new ut(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ut(n)}static emptyPath(){return new ut([])}}const I2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Li{construct(e,n,s){return new rn(e,n,s)}static isValidIdentifier(e){return I2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X0}static keyField(){return new rn([X0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new se(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new se(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(s+=g,o++):(u(),o++)}if(u(),f)throw new se(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ut.fromString(e))}static fromName(e){return new ve(ut.fromString(e).popFirst(5))}static empty(){return new ve(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(r,e,n){if(!n)throw new se(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function N2(r,e,n,s){if(e===!0&&s===!0)throw new se(X.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function $0(r){if(!ve.isDocumentKey(r))throw new se(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Z0(r){if(ve.isDocumentKey(r))throw new se(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function YE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Dh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function $n(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dh(r);throw new se(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(r,e){const n={typeString:r};return e&&(n.value=e),n}function su(r,e){if(!YE(r))throw new se(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new se(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=-62135596800,W0=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*W0);return new dt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J0)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:kt("string",dt._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new dt(0,0))}static max(){return new Se(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=-1;function C2(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new dt(n+1,0):new dt(n,s));return new ls(o,ve.empty(),e)}function D2(r){return new ls(r.readTime,r.key,Yo)}class ls{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ls(Se.min(),ve.empty(),Yo)}static max(){return new ls(Se.max(),ve.empty(),Yo)}}function O2(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:Ue(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==V2)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,s)=>{n(e)}))}static reject(e){return new W(((n,s)=>{s(e)}))}static waitFor(e){return new W(((n,s)=>{let o=0,u=0,f=!1;e.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&n()}),(y=>s(y)))})),f=!0,u===o&&n()}))}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next((o=>o?W.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new W(((s,o)=>{const u=e.length,f=new Array(u);let g=0;for(let y=0;y<u;y++){const _=y;n(e[_]).next((T=>{f[_]=T,++g,g===u&&s(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new W(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function j2(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function El(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=-1;function Vh(r){return r==null}function ph(r){return r===0&&1/r==-1/0}function L2(r){return typeof r=="number"&&Number.isInteger(r)&&!ph(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="";function k2(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=ev(e)),e=P2(r.get(n),e);return ev(e)}function P2(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case KE:n+="";break;default:n+=u}}return n}function ev(r){return r+KE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function ms(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function XE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new nn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nv(this.data.getIterator())}getIteratorFrom(e){return new nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Mn([])}unionWith(e){let n=new qt(rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $E("Invalid base64 string: "+u):u}})(e);return new sn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const U2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(r){if(Je(!!r,39018),typeof r=="string"){let e=0;const n=U2.exec(r);if(Je(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(r.seconds),nanos:wt(r.nanos)}}function wt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function us(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="server_timestamp",JE="__type__",WE="__previous_value__",eb="__local_write_time__";function rp(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[JE])==null?void 0:s.stringValue)===ZE}function Mh(r){const e=r.mapValue.fields[WE];return rp(e)?Mh(e):e}function Ko(r){const e=os(r.mapValue.fields[eb].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,s,o,u,f,g,y,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=T}}const gh="(default)";class Xo{constructor(e,n){this.projectId=e,this.database=n||gh}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===gh}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="__type__",q2="__max__",Gc={mapValue:{}},nb="__vector__",yh="value";function cs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?rp(r)?4:H2(r)?9007199254740991:B2(r)?10:11:Ae(28295,{value:r})}function Hi(r,e){if(r===e)return!0;const n=cs(r);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ko(r).isEqual(Ko(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=os(o.timestampValue),g=os(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return us(o.bytesValue).isEqual(us(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return wt(o.geoPointValue.latitude)===wt(u.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return wt(o.integerValue)===wt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=wt(o.doubleValue),g=wt(u.doubleValue);return f===g?ph(f)===ph(g):isNaN(f)&&isNaN(g)}return!1})(r,e);case 9:return ul(r.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(tv(f)!==tv(g))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(g[y]===void 0||!Hi(f[y],g[y])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function $o(r,e){return(r.values||[]).find((n=>Hi(n,e)))!==void 0}function cl(r,e){if(r===e)return 0;const n=cs(r),s=cs(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=wt(u.integerValue||u.doubleValue),y=wt(f.integerValue||f.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(r,e);case 3:return iv(r.timestampValue,e.timestampValue);case 4:return iv(Ko(r),Ko(e));case 5:return Am(r.stringValue,e.stringValue);case 6:return(function(u,f){const g=us(u),y=us(f);return g.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),y=f.split("/");for(let _=0;_<g.length&&_<y.length;_++){const T=Ue(g[_],y[_]);if(T!==0)return T}return Ue(g.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=Ue(wt(u.latitude),wt(f.latitude));return g!==0?g:Ue(wt(u.longitude),wt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return rv(r.arrayValue,e.arrayValue);case 10:return(function(u,f){var N,z,Y,ee;const g=u.fields||{},y=f.fields||{},_=(N=g[yh])==null?void 0:N.arrayValue,T=(z=y[yh])==null?void 0:z.arrayValue,x=Ue(((Y=_==null?void 0:_.values)==null?void 0:Y.length)||0,((ee=T==null?void 0:T.values)==null?void 0:ee.length)||0);return x!==0?x:rv(_,T)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Gc.mapValue&&f===Gc.mapValue)return 0;if(u===Gc.mapValue)return 1;if(f===Gc.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),_=f.fields||{},T=Object.keys(_);y.sort(),T.sort();for(let x=0;x<y.length&&x<T.length;++x){const N=Am(y[x],T[x]);if(N!==0)return N;const z=cl(g[y[x]],_[T[x]]);if(z!==0)return z}return Ue(y.length,T.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function iv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ue(r,e);const n=os(r),s=os(e),o=Ue(n.seconds,s.seconds);return o!==0?o:Ue(n.nanos,s.nanos)}function rv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=cl(n[o],s[o]);if(u)return u}return Ue(n.length,s.length)}function hl(r){return Sm(r)}function Sm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=os(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return us(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ve.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Sm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Sm(n.fields[f])}`;return o+"}"})(r.mapValue):Ae(61005,{value:r})}function eh(r){switch(cs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(r);return e?16+eh(e):16;case 5:return 2*r.stringValue.length;case 6:return us(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+eh(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return ms(s.fields,((u,f)=>{o+=u.length+eh(f)})),o})(r.mapValue);default:throw Ae(13486,{value:r})}}function sv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function wm(r){return!!r&&"integerValue"in r}function sp(r){return!!r&&"arrayValue"in r}function av(r){return!!r&&"nullValue"in r}function lv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function th(r){return!!r&&"mapValue"in r}function B2(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[tb])==null?void 0:s.stringValue)===nb}function Uo(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ms(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Uo(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uo(r.arrayValue.values[n]);return e}return{...r}}function H2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===q2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uo(n)}setAll(e){let n=rn.emptyPath(),s={},o=[];e.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,s,o),s={},o=[],n=g.popLast()}f?s[g.lastSegment()]=Uo(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];th(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ms(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new An(Uo(this.value))}}function ib(r){const e=[];return ms(r.fields,((n,s)=>{const o=new rn([n]);if(th(s)){const u=ib(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,s,o,u,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new un(e,0,Se.min(),Se.min(),Se.min(),An.empty(),0)}static newFoundDocument(e,n,s,o){return new un(e,1,n,Se.min(),s,o,0)}static newNoDocument(e,n){return new un(e,2,n,Se.min(),Se.min(),An.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Se.min(),Se.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.position=e,this.inclusive=n}}function ov(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(f.referenceValue),n.key):s=cl(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function uv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Hi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n="asc"){this.field=e,this.dir=n}}function F2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{}class Lt extends rb{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Q2(e,n,s):n==="array-contains"?new X2(e,s):n==="in"?new $2(e,s):n==="not-in"?new Z2(e,s):n==="array-contains-any"?new J2(e,s):new Lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Y2(e,s):new K2(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cl(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(cl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends rb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new mi(e,n)}matches(e){return sb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sb(r){return r.op==="and"}function ab(r){return G2(r)&&sb(r)}function G2(r){for(const e of r.filters)if(e instanceof mi)return!1;return!0}function xm(r){if(r instanceof Lt)return r.field.canonicalString()+r.op.toString()+hl(r.value);if(ab(r))return r.filters.map((e=>xm(e))).join(",");{const e=r.filters.map((n=>xm(n))).join(",");return`${r.op}(${e})`}}function lb(r,e){return r instanceof Lt?(function(s,o){return o instanceof Lt&&s.op===o.op&&s.field.isEqual(o.field)&&Hi(s.value,o.value)})(r,e):r instanceof mi?(function(s,o){return o instanceof mi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,g)=>u&&lb(f,o.filters[g])),!0):!1})(r,e):void Ae(19439)}function ob(r){return r instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${hl(n.value)}`})(r):r instanceof mi?(function(n){return n.op.toString()+" {"+n.getFilters().map(ob).join(" ,")+"}"})(r):"Filter"}class Q2 extends Lt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y2 extends Lt{constructor(e,n){super(e,"in",n),this.keys=ub("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class K2 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=ub("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ub(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class X2 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sp(n)&&$o(n.arrayValue,this.value)}}class $2 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$o(this.value.arrayValue,n)}}class Z2 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$o(this.value.arrayValue,n)}}class J2 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>$o(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n=null,s=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function cv(r,e=null,n=[],s=[],o=null,u=null,f=null){return new W2(r,e,n,s,o,u,f)}function ap(r){const e=xe(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>xm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>hl(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>hl(s))).join(",")),e.Te=n}return e.Te}function lp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!F2(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!lb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!uv(r.startAt,e.startAt)&&uv(r.endAt,e.endAt)}function Rm(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n=null,s=[],o=[],u=null,f="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function eR(r,e,n,s,o,u,f,g){return new bl(r,e,n,s,o,u,f,g)}function op(r){return new bl(r)}function hv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function cb(r){return r.collectionGroup!==null}function zo(r){const e=xe(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new qt(rn.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Zo(u,s))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new Zo(rn.keyField(),s))}return e.Ie}function Ui(r){const e=xe(r);return e.Ee||(e.Ee=tR(e,zo(r))),e.Ee}function tR(r,e){if(r.limitType==="F")return cv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Zo(o.field,u)}));const n=r.endAt?new _h(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new _h(r.startAt.position,r.startAt.inclusive):null;return cv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Im(r,e){const n=r.filters.concat([e]);return new bl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Nm(r,e,n){return new bl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function jh(r,e){return lp(Ui(r),Ui(e))&&r.limitType===e.limitType}function hb(r){return`${ap(Ui(r))}|lt:${r.limitType}`}function Xa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>ob(o))).join(", ")}]`),Vh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>hl(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>hl(o))).join(",")),`Target(${s})`})(Ui(r))}; limitType=${r.limitType})`}function Lh(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of zo(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,g,y){const _=ov(f,g,y);return f.inclusive?_<=0:_<0})(s.startAt,zo(s),o)||s.endAt&&!(function(f,g,y){const _=ov(f,g,y);return f.inclusive?_>=0:_>0})(s.endAt,zo(s),o))})(r,e)}function nR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fb(r){return(e,n)=>{let s=!1;for(const o of zo(r)){const u=iR(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function iR(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,f,g){const y=f.data.field(u),_=g.data.field(u);return y!==null&&_!==null?cl(y,_):Ae(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return XE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new yt(ve.comparator);function pr(){return rR}const db=new yt(ve.comparator);function Mo(...r){let e=db;for(const n of r)e=e.insert(n.key,n);return e}function mb(r){let e=db;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Xs(){return qo()}function pb(){return qo()}function qo(){return new ra((r=>r.toString()),((r,e)=>r.isEqual(e)))}const sR=new yt(ve.comparator),aR=new qt(ve.comparator);function ze(...r){let e=aR;for(const n of r)e=e.add(n);return e}const lR=new qt(Ue);function oR(){return lR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function gb(r){return{integerValue:""+r}}function uR(r,e){return L2(e)?gb(e):up(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function cR(r,e,n){return r instanceof vh?(function(o,u){const f={fields:{[JE]:{stringValue:ZE},[eb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&rp(u)&&(u=Mh(u)),u&&(f.fields[WE]=u),{mapValue:f}})(n,e):r instanceof Jo?_b(r,e):r instanceof Wo?vb(r,e):(function(o,u){const f=yb(o,u),g=fv(f)+fv(o.Ae);return wm(f)&&wm(o.Ae)?gb(g):up(o.serializer,g)})(r,e)}function hR(r,e,n){return r instanceof Jo?_b(r,e):r instanceof Wo?vb(r,e):n}function yb(r,e){return r instanceof Eh?(function(s){return wm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class vh extends kh{}class Jo extends kh{constructor(e){super(),this.elements=e}}function _b(r,e){const n=Eb(e);for(const s of r.elements)n.some((o=>Hi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Wo extends kh{constructor(e){super(),this.elements=e}}function vb(r,e){let n=Eb(e);for(const s of r.elements)n=n.filter((o=>!Hi(o,s)));return{arrayValue:{values:n}}}class Eh extends kh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fv(r){return wt(r.integerValue||r.doubleValue)}function Eb(r){return sp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function fR(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Jo&&o instanceof Jo||s instanceof Wo&&o instanceof Wo?ul(s.elements,o.elements,Hi):s instanceof Eh&&o instanceof Eh?Hi(s.Ae,o.Ae):s instanceof vh&&o instanceof vh})(r.transform,e.transform)}class dR{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ph{}function bb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Uh(r.key,dn.none()):new au(r.key,r.data,dn.none());{const n=r.data,s=An.empty();let o=new qt(rn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new ps(r.key,s,new Mn(o.toArray()),dn.none())}}function mR(r,e,n){r instanceof au?(function(o,u,f){const g=o.value.clone(),y=mv(o.fieldTransforms,u,f.transformResults);g.setAll(y),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):r instanceof ps?(function(o,u,f){if(!nh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=mv(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(Tb(o)),y.setAll(g),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Bo(r,e,n,s){return r instanceof au?(function(u,f,g,y){if(!nh(u.precondition,f))return g;const _=u.value.clone(),T=pv(u.fieldTransforms,y,f);return _.setAll(T),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(r,e,n,s):r instanceof ps?(function(u,f,g,y){if(!nh(u.precondition,f))return g;const _=pv(u.fieldTransforms,y,f),T=f.data;return T.setAll(Tb(u)),T.setAll(_),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(r,e,n,s):(function(u,f,g){return nh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(r,e,n)}function pR(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=yb(s.transform,o||null);u!=null&&(n===null&&(n=An.empty()),n.set(s.field,u))}return n||null}function dv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ul(s,o,((u,f)=>fR(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class au extends Ph{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ps extends Ph{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Tb(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function mv(r,e,n){const s=new Map;Je(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,g=e.data.field(u.field);s.set(u.field,hR(f,g,n[o]))}return s}function pv(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,cR(u,f,e))}return s}class Uh extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gR extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&mR(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Bo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Bo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=pb();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const y=bb(f,g);y!==null&&s.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,((n,s)=>dv(n,s)))&&ul(this.baseMutations,e.baseMutations,((n,s)=>dv(n,s)))}}class cp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return sR})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new cp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Fe;function ER(r){switch(r){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function Ab(r){if(r===void 0)return mr("GRPC error has no .code"),X.UNKNOWN;switch(r){case jt.OK:return X.OK;case jt.CANCELLED:return X.CANCELLED;case jt.UNKNOWN:return X.UNKNOWN;case jt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case jt.INTERNAL:return X.INTERNAL;case jt.UNAVAILABLE:return X.UNAVAILABLE;case jt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case jt.NOT_FOUND:return X.NOT_FOUND;case jt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case jt.ABORTED:return X.ABORTED;case jt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case jt.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:r})}}(Fe=jt||(jt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new ss([4294967295,4294967295],0);function gv(r){const e=bR().encode(r),n=new PE;return n.update(e),new Uint8Array(n.digest())}function yv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ss([n,s],0),new ss([o,u],0)]}class hp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new jo(`Invalid padding: ${n}`);if(s<0)throw new jo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new jo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new jo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ss.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(ss.fromNumber(s)));return o.compare(TR)===1&&(o=new ss([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gv(e),[s,o]=yv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new hp(u,o,n);return s.forEach((g=>f.insert(g))),f}insert(e){if(this.ge===0)return;const n=gv(e),[s,o]=yv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new zh(Se.min(),o,new yt(Ue),pr(),ze())}}class lu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new lu(s,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class Sb{constructor(e,n){this.targetId=e,this.Ce=n}}class wb{constructor(e,n,s=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class _v{constructor(){this.ve=0,this.Fe=vv(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),s=ze();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}})),new lu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=vv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AR{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=Qc(),this.He=Qc(),this.Ye=new yt(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Rm(u))if(s===0){const f=new ve(u.path);this.et(n,f,un.newNoDocument(f,Se.min()))}else Je(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const g=this.ut(e),y=g?this.ct(g,e,f):1;if(y!==0){this.it(n);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=us(s).toUint8Array()}catch(y){if(y instanceof $E)return ol("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new hp(f,o,u)}catch(y){return ol(y instanceof jo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&Rm(g.target)){const y=new ve(g.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,un.newNoDocument(y,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=ze();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new zh(e,n,this.Ye,this.je,s);return this.je=pr(),this.Je=Qc(),this.He=Qc(),this.Ye=new yt(Ue),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new _v,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _v),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qc(){return new yt(ve.comparator)}function vv(){return new yt(ve.comparator)}const SR={asc:"ASCENDING",desc:"DESCENDING"},wR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xR={and:"AND",or:"OR"};class RR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(r,e){return r.useProto3Json||Vh(e)?e:{value:e}}function bh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IR(r,e){return bh(r,e.toTimestamp())}function zi(r){return Je(!!r,49232),Se.fromTimestamp((function(n){const s=os(n);return new dt(s.seconds,s.nanos)})(r))}function fp(r,e){return Dm(r,e).canonicalString()}function Dm(r,e){const n=(function(o){return new ut(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Rb(r){const e=ut.fromString(r);return Je(Ob(e),10190,{key:e.toString()}),e}function Om(r,e){return fp(r.databaseId,e.path)}function lm(r,e){const n=Rb(e);if(n.get(1)!==r.databaseId.projectId)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(Nb(n))}function Ib(r,e){return fp(r.databaseId,e)}function NR(r){const e=Rb(r);return e.length===4?ut.emptyPath():Nb(e)}function Vm(r){return new ut(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Nb(r){return Je(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ev(r,e,n){return{name:Om(r,e),fields:n.value.mapValue.fields}}function CR(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ae(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,T){return _.useProto3Json?(Je(T===void 0||typeof T=="string",58123),sn.fromBase64String(T||"")):(Je(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),sn.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(_){const T=_.code===void 0?X.UNKNOWN:Ab(_.code);return new se(T,_.message||"")})(f);n=new wb(s,o,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=lm(r,s.document.name),u=zi(s.document.updateTime),f=s.document.createTime?zi(s.document.createTime):Se.min(),g=new An({mapValue:{fields:s.document.fields}}),y=un.newFoundDocument(o,u,f,g),_=s.targetIds||[],T=s.removedTargetIds||[];n=new ih(_,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=lm(r,s.document),u=s.readTime?zi(s.readTime):Se.min(),f=un.newNoDocument(o,u),g=s.removedTargetIds||[];n=new ih([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=lm(r,s.document),u=s.removedTargetIds||[];n=new ih([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new vR(o,u),g=s.targetId;n=new Sb(g,f)}}return n}function DR(r,e){let n;if(e instanceof au)n={update:Ev(r,e.key,e.value)};else if(e instanceof Uh)n={delete:Om(r,e.key)};else if(e instanceof ps)n={update:Ev(r,e.key,e.data),updateMask:zR(e.fieldMask)};else{if(!(e instanceof gR))return Ae(16599,{Vt:e.type});n={verify:Om(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const g=f.transform;if(g instanceof vh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Jo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Wo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Eh)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Ae(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:IR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(r,e.precondition)),n}function OR(r,e){return r&&r.length>0?(Je(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?zi(o.updateTime):zi(u);return f.isEqual(Se.min())&&(f=zi(u)),new dR(f,o.transformResults||[])})(n,e)))):[]}function VR(r,e){return{documents:[Ib(r,e.path)]}}function MR(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ib(r,o);const u=(function(_){if(_.length!==0)return Db(mi.create(_,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(_){if(_.length!==0)return _.map((T=>(function(N){return{field:$a(N.field),direction:kR(N.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=Cm(r,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function jR(r){let e=NR(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Je(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(x){const N=Cb(x);return N instanceof mi&&ab(N)?N.getFilters():[N]})(n.where));let f=[];n.orderBy&&(f=(function(x){return x.map((N=>(function(Y){return new Zo(Za(Y.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(N)))})(n.orderBy));let g=null;n.limit&&(g=(function(x){let N;return N=typeof x=="object"?x.value:x,Vh(N)?null:N})(n.limit));let y=null;n.startAt&&(y=(function(x){const N=!!x.before,z=x.values||[];return new _h(z,N)})(n.startAt));let _=null;return n.endAt&&(_=(function(x){const N=!x.before,z=x.values||[];return new _h(z,N)})(n.endAt)),eR(e,o,f,u,g,"F",y,_)}function LR(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Cb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Za(n.unaryFilter.field);return Lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Za(n.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Za(n.unaryFilter.field);return Lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Za(n.unaryFilter.field);return Lt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Lt.create(Za(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return mi.create(n.compositeFilter.filters.map((s=>Cb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(r):Ae(30097,{filter:r})}function kR(r){return SR[r]}function PR(r){return wR[r]}function UR(r){return xR[r]}function $a(r){return{fieldPath:r.canonicalString()}}function Za(r){return rn.fromServerFormat(r.fieldPath)}function Db(r){return r instanceof Lt?(function(n){if(n.op==="=="){if(lv(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(av(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lv(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(av(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:PR(n.op),value:n.value}}})(r):r instanceof mi?(function(n){const s=n.getFilters().map((o=>Db(o)));return s.length===1?s[0]:{compositeFilter:{op:UR(n.op),filters:s}}})(r):Ae(54877,{filter:r})}function zR(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Ob(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,s,o,u=Se.min(),f=Se.min(),g=sn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.yt=e}}function BR(r){const e=jR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Nm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Cn=new FR}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(ls.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class FR{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new qt(ut.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new qt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vb=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(Vb,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fl(0)}static cr(){return new fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="LruGarbageCollector",GR=1048576;function Av([r,e],[n,s]){const o=Ue(r,n);return o===0?Ue(e,s):o}class QR{constructor(e){this.Ir=e,this.buffer=new qt(Av),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Av(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YR{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Tv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){El(n)?ue(Tv,"Ignoring IndexedDB error during garbage collection: ",n):await vl(n)}await this.Vr(3e5)}))}}class KR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Oh.ce);const s=new QR(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(bv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,g,y,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,f=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(s=x,g=Date.now(),this.removeTargets(e,s,n)))).next((x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((x=>(_=Date.now(),Ka()<=Pe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${x} documents in `+(_-y)+`ms
Total Duration: ${_-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function XR(r,e){return new KR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.changes=new ra((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Bo(s.mutation,o,Mn.empty(),dt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ze()){const o=Xs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Mo();return u.forEach(((g,y)=>{f=f.insert(g,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Xs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ze())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(e,n,s,o){let u=pr();const f=qo(),g=(function(){return qo()})();return n.forEach(((y,_)=>{const T=s.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof ps)?u=u.insert(_.key,_):T!==void 0?(f.set(_.key,T.mutation.getFieldMask()),Bo(T.mutation,_,T.mutation.getFieldMask(),dt.now())):f.set(_.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((_,T)=>f.set(_,T))),n.forEach(((_,T)=>g.set(_,new ZR(T,f.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,n){const s=qo();let o=new yt(((f,g)=>f-g)),u=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const g of f)g.keys().forEach((y=>{const _=n.get(y);if(_===null)return;let T=s.get(y)||Mn.empty();T=g.applyToLocalView(_,T),s.set(y,T);const x=(o.get(g.batchId)||ze()).add(y);o=o.insert(g.batchId,x)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,T=y.value,x=pb();T.forEach((N=>{if(!u.has(N)){const z=bb(n.get(N),s.get(N));z!==null&&x.set(N,z),u=u.add(N)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,x))}return W.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):W.resolve(Xs());let g=Yo,y=u;return f.next((_=>W.forEach(_,((T,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),u.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((N=>{y=y.insert(T,N)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,y,_,ze()))).next((T=>({batchId:g,changes:mb(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let o=Mo();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Mo();return this.indexManager.getCollectionParents(e,u).next((g=>W.forEach(g,(y=>{const _=(function(x,N){return new bl(N,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next((T=>{T.forEach(((x,N)=>{f=f.insert(x,N)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((y,_)=>{const T=_.getKey();f.get(T)===null&&(f=f.insert(T,un.newInvalidDocument(T)))}));let g=Mo();return f.forEach(((y,_)=>{const T=u.get(y);T!==void 0&&Bo(T.mutation,_,Mn.empty(),dt.now()),Lh(n,_)&&(g=g.insert(y,_))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:zi(o.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:BR(o.bundledQuery),readTime:zi(o.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.overlays=new yt(ve.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Xs();return W.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const o=Xs(),u=n.length+1,f=new ve(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&y.largestBatchId>s&&o.set(y.getKey(),y)}return W.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new yt(((_,T)=>_-T));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let T=u.get(_.largestBatchId);T===null&&(T=Xs(),u=u.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const g=Xs(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,T)=>g.set(_,T))),!(g.size()>=o)););return W.resolve(g)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new _R(n,s));let u=this.qr.get(n);u===void 0&&(u=ze(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.Qr=new qt(Xt.$r),this.Ur=new qt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Xt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Xt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new ut([])),s=new Xt(n,e),o=new Xt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new ut([])),s=new Xt(n,e),o=new Xt(n,e+1);let u=ze();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Xt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Xt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new yR(u,n,s,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new Xt(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ip:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Xt(n,0),o=new Xt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new qt(Ue);return n.forEach((o=>{const u=new Xt(o,0),f=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{s=s.add(g.Yr)}))})),W.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const f=new Xt(new ve(u),0);let g=new qt(Ue);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(g=g.add(y.Yr)),!0)}),f),W.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return W.forEach(n.mutations,(o=>{const u=new Xt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Xt(n,0),o=this.Zr.firstAfterOrEqual(s);return W.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.ri=e,this.docs=(function(){return new yt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let s=pr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():un.newInvalidDocument(o))})),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=pr();const f=n.path,g=new ve(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:T}}=y.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||O2(D2(T),s)<=0||(o.has(T.key)||Lh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}ii(e,n){return W.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new rI(this)}getSize(e){return W.resolve(this.size)}}class rI extends $R{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.persistence=e,this.si=new ra((n=>ap(n)),lp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new dp,this.targetCount=0,this.ai=fl.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),W.waitFor(u).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Oh(0),this.li=!1,this.li=!0,this.hi=new tI,this.referenceDelegate=e(this),this.Pi=new sI(this),this.indexManager=new HR,this.remoteDocumentCache=(function(o){return new iI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new qR(n),this.Ii=new WR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new nI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ue("MemoryPersistence","Starting transaction:",e);const o=new aI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return W.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class aI extends M2{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new dp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(s=>{const o=ve.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Th{constructor(e,n){this.persistence=e,this.pi=new ra((s=>k2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=XR(this,n)}static mi(e,n){return new Th(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?W.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((g=>{g||(s++,u.removeEntry(f,Se.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}br(e,n,s){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return W.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=ze(),o=ze();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new pp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PA()?8:j2(cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new lI;return this.Ss(e,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,f,g.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Ka()<=Pe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Ka()<=Pe.DEBUG&&ue("QueryEngine","Query:",Xa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Ka()<=Pe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(n))):W.resolve())}ys(e,n){if(hv(n))return W.resolve(null);let s=Ui(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Nm(n,null,"F"),s=Ui(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=ze(...u);return this.ps.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,s).next((y=>{const _=this.Ds(n,g);return this.Cs(n,_,f,y.readTime)?this.ys(e,Nm(n,null,"F")):this.vs(e,_,n,y)}))))})))))}ws(e,n,s,o){return hv(n)||o.isEqual(Se.min())?W.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?W.resolve(null):(Ka()<=Pe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xa(n)),this.vs(e,f,n,C2(o,Yo)).next((g=>g)))}))}Ds(e,n){let s=new qt(fb(e));return n.forEach(((o,u)=>{Lh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Ka()<=Pe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Xa(n)),this.ps.getDocumentsMatchingQuery(e,n,ls.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="LocalStore",uI=3e8;class cI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new yt(Ue),this.xs=new ra((u=>ap(u)),lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function hI(r,e,n,s){return new cI(r,e,n,s)}async function jb(r,e){const n=xe(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],g=[];let y=ze();for(const _ of o){f.push(_.batchId);for(const T of _.mutations)y=y.add(T.key)}for(const _ of u){g.push(_.batchId);for(const T of _.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(s,y).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:g})))}))}))}function fI(r,e){const n=xe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,_,T){const x=_.batch,N=x.keys();let z=W.resolve();return N.forEach((Y=>{z=z.next((()=>T.getEntry(y,Y))).next((ee=>{const J=_.docVersions.get(Y);Je(J!==null,48541),ee.version.compareTo(J)<0&&(x.applyToRemoteDocument(ee,_),ee.isValidDocument()&&(ee.setReadTime(_.commitVersion),T.addEntry(ee)))}))})),z.next((()=>g.mutationQueue.removeMutationBatch(y,x)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let y=ze();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Lb(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function dI(r,e){const n=xe(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((T,x)=>{const N=o.get(x);if(!N)return;g.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,x))));let z=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?z=z.withResumeToken(sn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,s)),o=o.insert(x,z),(function(ee,J,ce){return ee.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=uI?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(N,z,T)&&g.push(n.Pi.updateTargetData(u,z))}));let y=pr(),_=ze();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),g.push(mI(u,f,e.documentUpdates).next((T=>{y=T.ks,_=T.qs}))),!s.isEqual(Se.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((x=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(T)}return W.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,y,_))).next((()=>y))})).then((u=>(n.Ms=o,u)))}function mI(r,e,n){let s=ze(),o=ze();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=pr();return n.forEach(((g,y)=>{const _=u.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(g,y.readTime),f=f.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),f=f.insert(g,y)):ue(gp,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)})),{ks:f,qs:o}}))}function pI(r,e){const n=xe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ip),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function gI(r,e){const n=xe(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,W.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new es(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Mm(r,e,n){const s=xe(r),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!El(f))throw f;ue(gp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Sv(r,e,n){const s=xe(r);let o=Se.min(),u=ze();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,_,T){const x=xe(y),N=x.xs.get(T);return N!==void 0?W.resolve(x.Ms.get(N)):x.Pi.getTargetData(_,T)})(s,f,Ui(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,g.targetId).next((y=>{u=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Se.min(),n?u:ze()))).next((g=>(yI(s,nR(e),g),{documents:g,Qs:u})))))}function yI(r,e,n){let s=r.Os.get(e)||Se.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class wv{constructor(){this.activeTargetIds=oR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _I{constructor(){this.Mo=new wv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="ConnectivityMonitor";class Rv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(xv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(xv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc=null;function jm(){return Yc===null?Yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yc++,"0x"+Yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="RestConnection",EI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===gh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=jm(),g=this.zo(e,n.toUriEncodedString());ue(om,`Sending RPC '${e}' ${f}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:_}=new URL(g),T=ml(_);return this.Jo(e,g,y,s,T).then((x=>(ue(om,`Received RPC '${e}' ${f}: `,x),x)),(x=>{throw ol(om,`RPC '${e}' ${f} failed with error: `,x,"url: ",g,"request:",s),x}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=EI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class AI extends bI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=jm();return new Promise(((g,y)=>{const _=new UE;_.setWithCredentials(!0),_.listenOnce(zE.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Wc.NO_ERROR:const x=_.getResponseJson();ue(ln,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(x)),g(x);break;case Wc.TIMEOUT:ue(ln,`RPC '${e}' ${f} timed out`),y(new se(X.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const N=_.getStatus();if(ue(ln,`RPC '${e}' ${f} failed with status:`,N,"response text:",_.getResponseText()),N>0){let z=_.getResponseJson();Array.isArray(z)&&(z=z[0]);const Y=z==null?void 0:z.error;if(Y&&Y.status&&Y.message){const ee=(function(ce){const Q=ce.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(Q)>=0?Q:X.UNKNOWN})(Y.status);y(new se(ee,Y.message))}else y(new se(X.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new se(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ue(ln,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(o);ue(ln,`RPC '${e}' ${f} sending request:`,o),_.send(n,"POST",T,s,15)}))}T_(e,n,s){const o=jm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=HE(),g=BE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const T=u.join("");ue(ln,`Creating RPC '${e}' stream ${o}: ${T}`,y);const x=f.createWebChannel(T,y);this.I_(x);let N=!1,z=!1;const Y=new TI({Yo:J=>{z?ue(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,J):(N||(ue(ln,`Opening RPC '${e}' stream ${o} transport.`),x.open(),N=!0),ue(ln,`RPC '${e}' stream ${o} sending:`,J),x.send(J))},Zo:()=>x.close()}),ee=(J,ce,Q)=>{J.listen(ce,(te=>{try{Q(te)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return ee(x,Vo.EventType.OPEN,(()=>{z||(ue(ln,`RPC '${e}' stream ${o} transport opened.`),Y.o_())})),ee(x,Vo.EventType.CLOSE,(()=>{z||(z=!0,ue(ln,`RPC '${e}' stream ${o} transport closed`),Y.a_(),this.E_(x))})),ee(x,Vo.EventType.ERROR,(J=>{z||(z=!0,ol(ln,`RPC '${e}' stream ${o} transport errored. Name:`,J.name,"Message:",J.message),Y.a_(new se(X.UNAVAILABLE,"The operation could not be completed")))})),ee(x,Vo.EventType.MESSAGE,(J=>{var ce;if(!z){const Q=J.data[0];Je(!!Q,16349);const te=Q,pe=(te==null?void 0:te.error)||((ce=te[0])==null?void 0:ce.error);if(pe){ue(ln,`RPC '${e}' stream ${o} received error:`,pe);const De=pe.status;let ge=(function(w){const D=jt[w];if(D!==void 0)return Ab(D)})(De),I=pe.message;ge===void 0&&(ge=X.INTERNAL,I="Unknown error status: "+De+" with message "+pe.message),z=!0,Y.a_(new se(ge,I)),x.close()}else ue(ln,`RPC '${e}' stream ${o} received:`,Q),Y.u_(Q)}})),ee(g,qE.STAT_EVENT,(J=>{J.stat===Tm.PROXY?ue(ln,`RPC '${e}' stream ${o} detected buffering proxy`):J.stat===Tm.NOPROXY&&ue(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r){return new RR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="PersistentStream";class Pb{constructor(e,n,s,o,u,f,g,y){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new se(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(Iv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ue(Iv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SI extends Pb{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=CR(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Se.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Se.min():f.readTime?zi(f.readTime):Se.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Vm(this.serializer),n.addTarget=(function(u,f){let g;const y=f.target;if(g=Rm(y)?{documents:VR(u,y)}:{query:MR(u,y).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=xb(u,f.resumeToken);const _=Cm(u,f.expectedCount);_!==null&&(g.expectedCount=_)}else if(f.snapshotVersion.compareTo(Se.min())>0){g.readTime=bh(u,f.snapshotVersion.toTimestamp());const _=Cm(u,f.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const s=LR(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Vm(this.serializer),n.removeTarget=e,this.q_(n)}}class wI extends Pb{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=OR(e.writeResults,e.commitTime),s=zi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Vm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>DR(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{}class RI extends xI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,Dm(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new se(X.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(e,Dm(n,s),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new se(X.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class II{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mr(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="RemoteStore";class NI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{sa(this)&&(ue(na,"Restarting streams for network reachability change."),await(async function(y){const _=xe(y);_.Ea.add(4),await ou(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Bh(_)})(this))}))})),this.Ra=new II(s,o)}}async function Bh(r){if(sa(r))for(const e of r.da)await e(!0)}async function ou(r){for(const e of r.da)await e(!1)}function Ub(r,e){const n=xe(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ep(n)?vp(n):Tl(n).O_()&&_p(n,e))}function yp(r,e){const n=xe(r),s=Tl(n);n.Ia.delete(e),s.O_()&&zb(n,e),n.Ia.size===0&&(s.O_()?s.L_():sa(n)&&n.Ra.set("Unknown"))}function _p(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Tl(r).Y_(e)}function zb(r,e){r.Va.Ue(e),Tl(r).Z_(e)}function vp(r){r.Va=new AR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Tl(r).start(),r.Ra.ua()}function Ep(r){return sa(r)&&!Tl(r).x_()&&r.Ia.size>0}function sa(r){return xe(r).Ea.size===0}function qb(r){r.Va=void 0}async function CI(r){r.Ra.set("Online")}async function DI(r){r.Ia.forEach(((e,n)=>{_p(r,e)}))}async function OI(r,e){qb(r),Ep(r)?(r.Ra.ha(e),vp(r)):r.Ra.set("Unknown")}async function VI(r,e,n){if(r.Ra.set("Online"),e instanceof wb&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(r,e)}catch(s){ue(na,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ah(r,s)}else if(e instanceof ih?r.Va.Ze(e):e instanceof Sb?r.Va.st(e):r.Va.tt(e),!n.isEqual(Se.min()))try{const s=await Lb(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const T=u.Ia.get(_);T&&u.Ia.set(_,T.withResumeToken(y.resumeToken,f))}})),g.targetMismatches.forEach(((y,_)=>{const T=u.Ia.get(y);if(!T)return;u.Ia.set(y,T.withResumeToken(sn.EMPTY_BYTE_STRING,T.snapshotVersion)),zb(u,y);const x=new es(T.target,y,_,T.sequenceNumber);_p(u,x)})),u.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(s){ue(na,"Failed to raise snapshot:",s),await Ah(r,s)}}async function Ah(r,e,n){if(!El(e))throw e;r.Ea.add(1),await ou(r),r.Ra.set("Offline"),n||(n=()=>Lb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(na,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Bh(r)}))}function Bb(r,e){return e().catch((n=>Ah(r,n,e)))}async function Hh(r){const e=xe(r),n=hs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ip;for(;MI(e);)try{const o=await pI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,jI(e,o)}catch(o){await Ah(e,o)}Hb(e)&&Fb(e)}function MI(r){return sa(r)&&r.Ta.length<10}function jI(r,e){r.Ta.push(e);const n=hs(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Hb(r){return sa(r)&&!hs(r).x_()&&r.Ta.length>0}function Fb(r){hs(r).start()}async function LI(r){hs(r).ra()}async function kI(r){const e=hs(r);for(const n of r.Ta)e.ea(n.mutations)}async function PI(r,e,n){const s=r.Ta.shift(),o=cp.from(s,e,n);await Bb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Hh(r)}async function UI(r,e){e&&hs(r).X_&&await(async function(s,o){if((function(f){return ER(f)&&f!==X.ABORTED})(o.code)){const u=s.Ta.shift();hs(s).B_(),await Bb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Hh(s)}})(r,e),Hb(r)&&Fb(r)}async function Nv(r,e){const n=xe(r);n.asyncQueue.verifyOperationInProgress(),ue(na,"RemoteStore received new credentials");const s=sa(n);n.Ea.add(3),await ou(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function zI(r,e){const n=xe(r);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await ou(n),n.Ra.set("Unknown"))}function Tl(r){return r.ma||(r.ma=(function(n,s,o){const u=xe(n);return u.sa(),new SI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:CI.bind(null,r),t_:DI.bind(null,r),r_:OI.bind(null,r),H_:VI.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Ep(r)?vp(r):r.Ra.set("Unknown")):(await r.ma.stop(),qb(r))}))),r.ma}function hs(r){return r.fa||(r.fa=(function(n,s,o){const u=xe(n);return u.sa(),new wI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:LI.bind(null,r),r_:UI.bind(null,r),ta:kI.bind(null,r),na:PI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Hh(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(na,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,g=new bp(e,n,f,o,u);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(r,e){if(mr("AsyncQueue",`${e}: ${r}`),El(r))return new se(X.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{static emptySet(e){return new rl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Mo(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof rl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new rl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.ga=new yt(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class dl{constructor(e,n,s,o,u,f,g,y,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new dl(e,n,rl.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class BI{constructor(){this.queries=Dv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=xe(n),u=o.queries;o.queries=Dv(),u.forEach(((f,g)=>{for(const y of g.Sa)y.onError(s)}))})(this,new se(X.ABORTED,"Firestore shutting down"))}}function Dv(){return new ra((r=>hb(r)),jh)}async function Gb(r,e){const n=xe(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new qI,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=Tp(f,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Ap(n)}async function Qb(r,e){const n=xe(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function HI(r,e){const n=xe(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(s=!0);f.wa=o}}s&&Ap(n)}function FI(r,e,n){const s=xe(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Ap(r){r.Ca.forEach((e=>{e.next()}))}var Lm,Ov;(Ov=Lm||(Lm={})).Ma="default",Ov.Cache="cache";class Yb{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new dl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.key=e}}class Xb{constructor(e){this.key=e}}class GI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=fb(e),this.tu=new rl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Cv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,x)=>{const N=o.get(T),z=Lh(this.query,x)?x:null,Y=!!N&&this.mutatedKeys.has(N.key),ee=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let J=!1;N&&z?N.data.isEqual(z.data)?Y!==ee&&(s.track({type:3,doc:z}),J=!0):this.su(N,z)||(s.track({type:2,doc:z}),J=!0,(y&&this.eu(z,y)>0||_&&this.eu(z,_)<0)&&(g=!0)):!N&&z?(s.track({type:0,doc:z}),J=!0):N&&!z&&(s.track({type:1,doc:N}),J=!0,(y||_)&&(g=!0)),J&&(z?(f=f.add(z),u=ee?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{tu:f,iu:s,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,x)=>(function(z,Y){const ee=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:J})}};return ee(z)-ee(Y)})(T.type,x.type)||this.eu(T.doc,x.doc))),this.ou(s),o=o??!1;const g=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,_=y!==this.Za;return this.Za=y,f.length!==0||_?{snapshot:new dl(this.query,e.tu,u,f,e.mutatedKeys,y===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new Xb(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new Kb(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return dl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sp="SyncEngine";class QI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class YI{constructor(e){this.key=e,this.hu=!1}}class KI{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ra((g=>hb(g)),jh),this.Iu=new Map,this.Eu=new Set,this.du=new yt(ve.comparator),this.Au=new Map,this.Ru=new dp,this.Vu={},this.mu=new Map,this.fu=fl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XI(r,e,n=!0){const s=tT(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await $b(s,e,n,!0),o}async function $I(r,e){const n=tT(r);await $b(n,e,!0,!1)}async function $b(r,e,n,s){const o=await gI(r.localStore,Ui(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await ZI(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&Ub(r.remoteStore,o),g}async function ZI(r,e,n,s,o){r.pu=(x,N,z)=>(async function(ee,J,ce,Q){let te=J.view.ru(ce);te.Cs&&(te=await Sv(ee.localStore,J.query,!1).then((({documents:I})=>J.view.ru(I,te))));const pe=Q&&Q.targetChanges.get(J.targetId),De=Q&&Q.targetMismatches.get(J.targetId)!=null,ge=J.view.applyChanges(te,ee.isPrimaryClient,pe,De);return Mv(ee,J.targetId,ge.au),ge.snapshot})(r,x,N,z);const u=await Sv(r.localStore,e,!0),f=new GI(e,u.Qs),g=f.ru(u.documents),y=lu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),_=f.applyChanges(g,r.isPrimaryClient,y);Mv(r,n,_.au);const T=new QI(e,n,f);return r.Tu.set(e,T),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),_.snapshot}async function JI(r,e,n){const s=xe(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!jh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Mm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&yp(s.remoteStore,o.targetId),km(s,o.targetId)})).catch(vl)):(km(s,o.targetId),await Mm(s.localStore,o.targetId,!0))}async function WI(r,e){const n=xe(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),yp(n.remoteStore,s.targetId))}async function eN(r,e,n){const s=lN(r);try{const o=await(function(f,g){const y=xe(f),_=dt.now(),T=g.reduce(((z,Y)=>z.add(Y.key)),ze());let x,N;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let Y=pr(),ee=ze();return y.Ns.getEntries(z,T).next((J=>{Y=J,Y.forEach(((ce,Q)=>{Q.isValidDocument()||(ee=ee.add(ce))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,Y))).next((J=>{x=J;const ce=[];for(const Q of g){const te=pR(Q,x.get(Q.key).overlayedDocument);te!=null&&ce.push(new ps(Q.key,te,ib(te.value.mapValue),dn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,_,ce,g)})).next((J=>{N=J;const ce=J.applyToLocalDocumentSet(x,ee);return y.documentOverlayCache.saveOverlays(z,J.batchId,ce)}))})).then((()=>({batchId:N.batchId,changes:mb(x)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,g,y){let _=f.Vu[f.currentUser.toKey()];_||(_=new yt(Ue)),_=_.insert(g,y),f.Vu[f.currentUser.toKey()]=_})(s,o.batchId,n),await uu(s,o.changes),await Hh(s.remoteStore)}catch(o){const u=Tp(o,"Failed to persist write");n.reject(u)}}async function Zb(r,e){const n=xe(r);try{const s=await dI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Je(f.hu,14607):o.removedDocuments.size>0&&(Je(f.hu,42227),f.hu=!1))})),await uu(n,s,e)}catch(s){await vl(s)}}function Vv(r,e,n){const s=xe(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const y=xe(f);y.onlineState=g;let _=!1;y.queries.forEach(((T,x)=>{for(const N of x.Sa)N.va(g)&&(_=!0)})),_&&Ap(y)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tN(r,e,n){const s=xe(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new yt(ve.comparator);f=f.insert(u,un.newNoDocument(u,Se.min()));const g=ze().add(u),y=new zh(Se.min(),new Map,new yt(Ue),f,g);await Zb(s,y),s.du=s.du.remove(u),s.Au.delete(e),wp(s)}else await Mm(s.localStore,e,!1).then((()=>km(s,e,n))).catch(vl)}async function nN(r,e){const n=xe(r),s=e.batch.batchId;try{const o=await fI(n.localStore,e);Wb(n,s,null),Jb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await uu(n,o)}catch(o){await vl(o)}}async function iN(r,e,n){const s=xe(r);try{const o=await(function(f,g){const y=xe(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return y.mutationQueue.lookupMutationBatch(_,g).next((x=>(Je(x!==null,37113),T=x.keys(),y.mutationQueue.removeMutationBatch(_,x)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,T,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>y.localDocuments.getDocuments(_,T)))}))})(s.localStore,e);Wb(s,e,n),Jb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await uu(s,o)}catch(o){await vl(o)}}function Jb(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function Wb(r,e,n){const s=xe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function km(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||eT(r,s)}))}function eT(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(yp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),wp(r))}function Mv(r,e,n){for(const s of n)s instanceof Kb?(r.Ru.addReference(s.key,e),rN(r,s)):s instanceof Xb?(ue(Sp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||eT(r,s.key)):Ae(19791,{wu:s})}function rN(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ue(Sp,"New document in limbo: "+n),r.Eu.add(s),wp(r))}function wp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ve(ut.fromString(e)),s=r.fu.next();r.Au.set(s,new YI(n)),r.du=r.du.insert(n,s),Ub(r.remoteStore,new es(Ui(op(n.path)),s,"TargetPurposeLimboResolution",Oh.ce))}}async function uu(r,e,n){const s=xe(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,y)=>{f.push(s.pu(y,e,n).then((_=>{var T;if((_||n)&&s.isPrimaryClient){const x=_?!_.fromCache:(T=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(y.targetId,x?"current":"not-current")}if(_){o.push(_);const x=pp.As(y.targetId,_);u.push(x)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(y,_){const T=xe(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>W.forEach(_,(N=>W.forEach(N.Es,(z=>T.persistence.referenceDelegate.addReference(x,N.targetId,z))).next((()=>W.forEach(N.ds,(z=>T.persistence.referenceDelegate.removeReference(x,N.targetId,z)))))))))}catch(x){if(!El(x))throw x;ue(gp,"Failed to update sequence numbers: "+x)}for(const x of _){const N=x.targetId;if(!x.fromCache){const z=T.Ms.get(N),Y=z.snapshotVersion,ee=z.withLastLimboFreeSnapshotVersion(Y);T.Ms=T.Ms.insert(N,ee)}}})(s.localStore,u))}async function sN(r,e){const n=xe(r);if(!n.currentUser.isEqual(e)){ue(Sp,"User change. New user:",e.toKey());const s=await jb(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((g=>{g.forEach((y=>{y.reject(new se(X.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await uu(n,s.Ls)}}function aN(r,e){const n=xe(r),s=n.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let o=ze();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const g=n.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function tT(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tN.bind(null,e),e.Pu.H_=HI.bind(null,e.eventManager),e.Pu.yu=FI.bind(null,e.eventManager),e}function lN(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iN.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return hI(this.persistence,new oI,e.initialUser,this.serializer)}Cu(e){return new Mb(mp.mi,this.serializer)}Du(e){return new _I}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class oN extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Je(this.persistence.referenceDelegate instanceof Th,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new YR(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new Mb((s=>Th.mi(s,n)),this.serializer)}}class Pm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Vv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sN.bind(null,this.syncEngine),await zI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new BI})()}createDatastore(e){const n=qh(e.databaseInfo.databaseId),s=(function(u){return new AI(u)})(e.databaseInfo);return(function(u,f,g,y){return new RI(u,f,g,y)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,g){return new NI(s,o,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>Vv(this.syncEngine,n,0)),(function(){return Rv.v()?new Rv:new vI})())}createSyncEngine(e,n){return(function(o,u,f,g,y,_,T){const x=new KI(o,u,f,g,y,_);return T&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=xe(o);ue(na,"RemoteStore shutting down."),u.Ea.add(5),await ou(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Pm.provider={build:()=>new Pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="FirestoreClient";class uN{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{ue(fs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(ue(fs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Tp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cm(r,e){r.asyncQueue.verifyOperationInProgress(),ue(fs,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await jb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function jv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await cN(r);ue(fs,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Nv(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Nv(e.remoteStore,o))),r._onlineComponents=e}async function cN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(fs,"Using user provided OfflineComponentProvider");try{await cm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ol("Error using user provided cache. Falling back to memory cache: "+n),await cm(r,new Sh)}}else ue(fs,"Using default OfflineComponentProvider"),await cm(r,new oN(void 0));return r._offlineComponents}async function iT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(fs,"Using user provided OnlineComponentProvider"),await jv(r,r._uninitializedComponentsProvider._online)):(ue(fs,"Using default OnlineComponentProvider"),await jv(r,new Pm))),r._onlineComponents}function hN(r){return iT(r).then((e=>e.syncEngine))}async function rT(r){const e=await iT(r),n=e.eventManager;return n.onListen=XI.bind(null,e.syncEngine),n.onUnlisten=JI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$I.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WI.bind(null,e.syncEngine),n}function fN(r,e,n={}){const s=new hr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,y,_){const T=new nT({next:N=>{T.Nu(),f.enqueueAndForget((()=>Qb(u,x)));const z=N.docs.has(g);!z&&N.fromCache?_.reject(new se(X.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&N.fromCache&&y&&y.source==="server"?_.reject(new se(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),x=new Yb(op(g.path),T,{includeMetadataChanges:!0,qa:!0});return Gb(u,x)})(await rT(r),r.asyncQueue,e,n,s))),s.promise}function dN(r,e,n={}){const s=new hr;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,y,_){const T=new nT({next:N=>{T.Nu(),f.enqueueAndForget((()=>Qb(u,x))),N.fromCache&&y.source==="server"?_.reject(new se(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),x=new Yb(g,T,{includeMetadataChanges:!0,qa:!0});return Gb(u,x)})(await rT(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="firestore.googleapis.com",kv=!0;class Pv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aT,this.ssl=kv}else this.host=e.host,this.ssl=e.ssl??kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Vb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GR)throw new se(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new v2;switch(s.type){case"firstParty":return new A2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Lv.get(n);s&&(ue("ComponentProvider","Removing Datastore"),Lv.delete(n),s.terminate())})(this),Promise.resolve()}}function mN(r,e,n,s={}){var _;r=$n(r,Fh);const o=ml(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${n}`;o&&(Jv(`https://${g}`),Wv("Firestore",!0)),u.host!==aT&&u.host!==g&&ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:g,ssl:o,emulatorOptions:s};if(!Js(y,f)&&(r._setSettings(y),s.mockUserToken)){let T,x;if(typeof s.mockUserToken=="string")T=s.mockUserToken,x=on.MOCK_USER;else{T=NA(s.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const N=s.mockUserToken.sub||s.mockUserToken.user_id;if(!N)throw new se(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new on(N)}r._authCredentials=new E2(new GE(T,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class xt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(su(n,xt._jsonSchema))return new xt(e,s||null,new ve(ut.fromString(n.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:kt("string",xt._jsonSchemaVersion),referencePath:kt("string")};class as extends aa{constructor(e,n,s){super(e,n,op(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new ve(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function Ja(r,e,...n){if(r=Pt(r),QE("collection","path",e),r instanceof Fh){const s=ut.fromString(e,...n);return Z0(s),new as(r,null,s)}{if(!(r instanceof xt||r instanceof as))throw new se(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ut.fromString(e,...n));return Z0(s),new as(r.firestore,null,s)}}function Vn(r,e,...n){if(r=Pt(r),arguments.length===1&&(e=np.newId()),QE("doc","path",e),r instanceof Fh){const s=ut.fromString(e,...n);return $0(s),new xt(r,null,new ve(s))}{if(!(r instanceof xt||r instanceof as))throw new se(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ut.fromString(e,...n));return $0(s),new xt(r.firestore,r instanceof as?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="AsyncQueue";class zv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kb(this,"async_queue_retry"),this._c=()=>{const s=um();s&&ue(Uv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!El(e))throw e;ue(Uv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,mr("INTERNAL UNHANDLED ERROR: ",qv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=bp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function qv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class gs extends Fh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new zv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zv(e),this._firestoreClient=void 0,await e}}}function pN(r,e){const n=typeof r=="object"?r:Qm(),s=typeof r=="string"?r:gh,o=Gm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=RA("firestore");u&&mN(o,...u)}return o}function Gh(r){if(r._terminated)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||gN(r),r._firestoreClient}function gN(r){var s,o,u;const e=r._freezeSettings(),n=(function(g,y,_,T){return new z2(g,y,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,sT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new uN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(sn.fromBase64String(e))}catch(n){throw new se(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xn(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:kt("string",Xn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qi._jsonSchemaVersion}}static fromJSON(e){if(su(e,qi._jsonSchema))return new qi(e.latitude,e.longitude)}}qi._jsonSchemaVersion="firestore/geoPoint/1.0",qi._jsonSchema={type:kt("string",qi._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,Bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Bi(e.vectorValues);throw new se(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bi._jsonSchemaVersion="firestore/vectorValue/1.0",Bi._jsonSchema={type:kt("string",Bi._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=/^__.*__$/;class _N{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new au(e,this.data,n,this.fieldTransforms)}}class lT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class Rp{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oT(this.Ac)&&yN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||qh(e)}Cc(e,n,s,o=!1){return new Rp({Ac:e,methodName:n,Dc:s,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hu(r){const e=r._freezeSettings(),n=qh(r._databaseId);return new vN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Ip(r,e,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);Np("Data must be an object, but it was:",f,s);const g=hT(s,f);let y,_;if(u.merge)y=new Mn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const x of u.mergeFields){const N=Um(e,x,n);if(!f.contains(N))throw new se(X.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);dT(T,N)||T.push(N)}y=new Mn(T),_=f.fieldTransforms.filter((x=>y.covers(x.field)))}else y=null,_=f.fieldTransforms;return new _N(new An(g),y,_)}class Qh extends xp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qh}}function uT(r,e,n,s){const o=r.Cc(1,e,n);Np("Data must be an object, but it was:",o,s);const u=[],f=An.empty();ms(s,((y,_)=>{const T=Cp(e,y,n);_=Pt(_);const x=o.yc(T);if(_ instanceof Qh)u.push(T);else{const N=fu(_,x);N!=null&&(u.push(T),f.set(T,N))}}));const g=new Mn(u);return new lT(f,g,o.fieldTransforms)}function cT(r,e,n,s,o,u){const f=r.Cc(1,e,n),g=[Um(e,s,n)],y=[o];if(u.length%2!=0)throw new se(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)g.push(Um(e,u[N])),y.push(u[N+1]);const _=[],T=An.empty();for(let N=g.length-1;N>=0;--N)if(!dT(_,g[N])){const z=g[N];let Y=y[N];Y=Pt(Y);const ee=f.yc(z);if(Y instanceof Qh)_.push(z);else{const J=fu(Y,ee);J!=null&&(_.push(z),T.set(z,J))}}const x=new Mn(_);return new lT(T,x,f.fieldTransforms)}function EN(r,e,n,s=!1){return fu(n,r.Cc(s?4:3,e))}function fu(r,e){if(fT(r=Pt(r)))return Np("Unsupported field value:",e,r),hT(r,e);if(r instanceof xp)return(function(s,o){if(!oT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const g of s){let y=fu(g,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=Pt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return uR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=dt.fromDate(s);return{timestampValue:bh(o.serializer,u)}}if(s instanceof dt){const u=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:bh(o.serializer,u)}}if(s instanceof qi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xn)return{bytesValue:xb(o.serializer,s._byteString)};if(s instanceof xt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:fp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Bi)return(function(f,g){return{mapValue:{fields:{[tb]:{stringValue:nb},[yh]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return up(g.serializer,_)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Dh(s)}`)})(r,e)}function hT(r,e){const n={};return XE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(r,((s,o)=>{const u=fu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function fT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof qi||r instanceof Xn||r instanceof xt||r instanceof xp||r instanceof Bi)}function Np(r,e,n){if(!fT(n)||!YE(n)){const s=Dh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Um(r,e,n){if((e=Pt(e))instanceof cu)return e._internalPath;if(typeof e=="string")return Cp(r,e);throw wh("Field path arguments must be of type string or ",r,!1,void 0,n)}const bN=new RegExp("[~\\*/\\[\\]]");function Cp(r,e,n){if(e.search(bN)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new cu(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function wh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${s}`),f&&(y+=` in document ${o}`),y+=")"),new se(X.INVALID_ARGUMENT,g+r+y)}function dT(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TN extends mT{data(){return super.data()}}function Yh(r,e){return typeof e=="string"?Cp(r,e):e instanceof cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class pT extends Dp{}function Ro(r,e,...n){let s=[];e instanceof Dp&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((y=>y instanceof Op)).length,g=u.filter((y=>y instanceof Kh)).length;if(f>1||f>0&&g>0)throw new se(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Kh extends pT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Kh(e,n,s)}_apply(e){const n=this._parse(e);return gT(e._query,n),new aa(e.firestore,e.converter,Im(e._query,n))}_parse(e){const n=hu(e.firestore);return(function(u,f,g,y,_,T,x){let N;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new se(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Hv(x,T);const Y=[];for(const ee of x)Y.push(Bv(y,u,ee));N={arrayValue:{values:Y}}}else N=Bv(y,u,x)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Hv(x,T),N=EN(g,f,x,T==="in"||T==="not-in");return Lt.create(_,T,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qs(r,e,n){const s=e,o=Yh("where",r);return Kh._create(o,s,n)}class Op extends Dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Op(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:mi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const g=u.getFlattenedFilters();for(const y of g)gT(f,y),f=Im(f,y)})(e._query,n),new aa(e.firestore,e.converter,Im(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vp extends pT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vp(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new se(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new se(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zo(u,f)})(e._query,this._field,this._direction);return new aa(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new bl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function SN(r,e="asc"){const n=e,s=Yh("orderBy",r);return Vp._create(s,n)}function Bv(r,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new se(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cb(e)&&n.indexOf("/")!==-1)throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ut.fromString(n));if(!ve.isDocumentKey(s))throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return sv(r,new ve(s))}if(n instanceof xt)return sv(r,n._key);throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dh(n)}.`)}function Hv(r,e){if(!Array.isArray(r)||r.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gT(r,e){const n=(function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wN{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ms(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,o,u;const n=(u=(o=(s=e.fields)==null?void 0:s[yh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>wt(f.doubleValue)));return new Bi(n)}convertGeoPoint(e){return new qi(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Mh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ko(e));default:return null}}convertTimestamp(e){const n=os(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ut.fromString(e);Je(Ob(s),9688,{name:e});const o=new Xo(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||mr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class Lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zs extends mT{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Yh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zs._jsonSchema={type:kt("string",Zs._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class rh extends Zs{data(e={}){return super.data(e)}}class sl{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Lo(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new rh(this._firestore,this._userDataWriter,s.key,s,new Lo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const y=new rh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Lo(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const y=new rh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Lo(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return g.type!==0&&(_=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),T=f.indexOf(g.doc.key)),{type:xN(g.type),doc:y,oldIndex:_,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(r){r=$n(r,xt);const e=$n(r.firestore,gs);return fN(Gh(e),r._key).then((n=>NN(e,r,n)))}sl._jsonSchemaVersion="firestore/querySnapshot/1.0",sl._jsonSchema={type:kt("string",sl._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class yT extends wN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Io(r){r=$n(r,aa);const e=$n(r.firestore,gs),n=Gh(e),s=new yT(e);return AN(r._query),dN(n,r._query).then((o=>new sl(e,s,r,o)))}function IN(r,e,n){r=$n(r,xt);const s=$n(r.firestore,gs),o=Mp(r.converter,e,n);return du(s,[Ip(hu(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,dn.none())])}function sh(r,e,n,...s){r=$n(r,xt);const o=$n(r.firestore,gs),u=hu(o);let f;return f=typeof(e=Pt(e))=="string"||e instanceof cu?cT(u,"updateDoc",r._key,e,n,s):uT(u,"updateDoc",r._key,e),du(o,[f.toMutation(r._key,dn.exists(!0))])}function _T(r){return du($n(r.firestore,gs),[new Uh(r._key,dn.none())])}function zm(r,e){const n=$n(r.firestore,gs),s=Vn(r),o=Mp(r.converter,e);return du(n,[Ip(hu(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,dn.exists(!1))]).then((()=>s))}function du(r,e){return(function(s,o){const u=new hr;return s.asyncQueue.enqueueAndForget((async()=>eN(await hN(s),o,u))),u.promise})(Gh(r),e)}function NN(r,e,n){const s=n.docs.get(e._key),o=new yT(r);return new Zs(r,o,e._key,s,new Lo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=hu(e)}set(e,n,s){this._verifyNotCommitted();const o=hm(e,this._firestore),u=Mp(o.converter,n,s),f=Ip(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(f.toMutation(o._key,dn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=hm(e,this._firestore);let f;return f=typeof(n=Pt(n))=="string"||n instanceof cu?cT(this._dataReader,"WriteBatch.update",u._key,n,s,o):uT(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hm(e,this._firestore);return this._mutations=this._mutations.concat(new Uh(n._key,dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hm(r,e){if((r=Pt(r)).firestore!==e)throw new se(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(r){return Gh(r=$n(r,gs)),new CN(r,(e=>du(r,e)))}(function(e,n=!0){(function(o){_l=o})(pl),al(new Ws("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),g=new gs(new b2(s.getProvider("auth-internal")),new S2(f,s.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new se(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(_.options.projectId,T)})(f,o),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),is(Q0,Y0,e),is(Q0,Y0,"esm2020")})();const fm={apiKey:"AIzaSyC9DO5rZ4_7h-WP77T1OzETxTgMa4xmk9U",authDomain:"mybcbl.firebaseapp.com",projectId:"mybcbl",storageBucket:"mybcbl.firebasestorage.app",messagingSenderId:"28767389623",appId:"1:28767389623:web:36bc808db4e1d894870a32"};let Kc,ah,St,vT=!1;try{if(fm.apiKey==="YOUR_API_KEY"||fm.projectId==="YOUR_PROJECT_ID")throw new Error("بيانات اعتماد Firebase غير معدة. الرجاء تحديث ملف lib/firebase.ts");QS().length?Kc=Qm():Kc=nE(fm),ah=y2(Kc),St=pN(Kc),vT=!0}catch(r){console.error("خطأ في تهيئة Firebase:",r.message)}const DN=({children:r,onClose:e,title:n})=>m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start pt-20",onClick:e,role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[m.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl","aria-label":"Close modal",children:"×"})]}),m.jsx("div",{className:"p-6",children:r})]})}),ON=({onSave:r,onCancel:e,existingSupplier:n})=>{const[s,o]=me.useState({name:"",company:"",address:"",phone:"",nif:"",bankAccount:""});me.useEffect(()=>{n&&o({name:n.name,company:n.company,address:n.address,phone:n.phone,nif:n.nif,bankAccount:n.bankAccount})},[n]);const u=g=>{o({...s,[g.target.name]:g.target.value})},f=g=>{g.preventDefault(),r({...s,id:n==null?void 0:n.id})};return m.jsxs("form",{onSubmit:f,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الاسم"}),m.jsx("input",{name:"name",value:s.name,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الشركة"}),m.jsx("input",{name:"company",value:s.company,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),m.jsx("input",{name:"address",value:s.address,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الهاتف"}),m.jsx("input",{name:"phone",value:s.phone,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الرقم التعريفي الجبائي (NIF)"}),m.jsx("input",{name:"nif",value:s.nif,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الحساب البنكي"}),m.jsx("input",{name:"bankAccount",value:s.bankAccount,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),m.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:n?"تحديث":"حفظ"})]})]})},VN=({suppliers:r,onSave:e,onCancel:n,existingLot:s,setNotification:o})=>{const[u,f]=me.useState({name:"",supplierId:"",description:"",assignmentDate:new Date().toISOString().split("T")[0]});me.useEffect(()=>{s&&f({name:s.name,supplierId:s.supplierId,description:s.description,assignmentDate:s.assignmentDate})},[s]);const g=_=>{f({...u,[_.target.name]:_.target.value})},y=_=>{if(_.preventDefault(),!u.supplierId){o({message:"الرجاء اختيار ممون.",type:"error"});return}e({...u,id:s==null?void 0:s.id})};return m.jsxs("form",{onSubmit:y,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الحصة"}),m.jsx("input",{name:"name",value:u.name,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الممون"}),m.jsxs("select",{name:"supplierId",value:u.supplierId,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[m.jsx("option",{value:"",children:"-- اختر ممون --"}),r.map(_=>m.jsxs("option",{value:_.id,children:[_.name," - ",_.company]},_.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),m.jsx("textarea",{name:"description",value:u.description,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الإسناد"}),m.jsx("input",{type:"date",name:"assignmentDate",value:u.assignmentDate,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[m.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),m.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},MN=({lots:r,onSave:e,onCancel:n,existingProduct:s,setNotification:o})=>{const[u,f]=me.useState({name:"",unit:"",price:"",lotId:""});me.useEffect(()=>{s&&f({name:s.name,unit:s.unit,price:String(s.price),lotId:s.lotId})},[s]);const g=_=>{f({...u,[_.target.name]:_.target.value})},y=_=>{if(_.preventDefault(),!u.lotId){o({message:"الرجاء اختيار حصة.",type:"error"});return}e({...u,price:Number(u.price),id:s==null?void 0:s.id})};return m.jsxs("form",{onSubmit:y,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم المنتج"}),m.jsx("input",{name:"name",value:u.name,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوحدة"}),m.jsx("input",{name:"unit",value:u.unit,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"السعر"}),m.jsx("input",{type:"number",name:"price",value:u.price,onChange:g,step:"0.01",className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الحصة"}),m.jsxs("select",{name:"lotId",value:u.lotId,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[m.jsx("option",{value:"",children:"-- اختر حصة --"}),r.map(_=>m.jsx("option",{value:_.id,children:_.name},_.id))]})]}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[m.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),m.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},jN=({onSave:r,onCancel:e,existingResidence:n})=>{const[s,o]=me.useState({residenceName:"",directorate:"",address:"",capacity:0});me.useEffect(()=>{n&&o({residenceName:n.residenceName,directorate:n.directorate,address:n.address,capacity:n.capacity})},[n]);const u=g=>{o({...s,[g.target.name]:g.target.value})},f=g=>{g.preventDefault(),r({...s,capacity:Number(s.capacity),id:n==null?void 0:n.id})};return m.jsxs("form",{onSubmit:f,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الإقامة"}),m.jsx("input",{name:"residenceName",value:s.residenceName,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المديرية"}),m.jsx("input",{name:"directorate",value:s.directorate,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),m.jsx("input",{name:"address",value:s.address,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الطاقة الاستيعابية"}),m.jsx("input",{type:"number",name:"capacity",value:String(s.capacity),onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),m.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:n?"تحديث":"حفظ"})]})]})},LN=({onSave:r,onCancel:e,residences:n,existingUser:s,setNotification:o})=>{const[u,f]=me.useState({id:(s==null?void 0:s.id)||"",username:(s==null?void 0:s.username)||"",email:(s==null?void 0:s.email)||"",residenceId:(s==null?void 0:s.residenceId)||"",role:"user"});me.useEffect(()=>{s&&f({id:s.id,username:s.username,email:s.email,residenceId:s.residenceId||"",role:"user"})},[s]);const g=_=>{f({...u,[_.target.name]:_.target.value})},y=_=>{if(_.preventDefault(),!u.id.trim()||!u.email.trim()||!u.username.trim()){o({message:"الرجاء تعبئة الحقول المطلوبة: المعرف، اسم المستخدم، والبريد الإلكتروني.",type:"error"});return}r({...u,id:u.id.trim()})};return m.jsxs("form",{onSubmit:y,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف المستخدم (UID)"}),m.jsx("input",{name:"id",value:u.id,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md bg-gray-50",required:!0,disabled:!!s}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"يتم الحصول على هذا المعرف من لوحة تحكم Firebase Authentication بعد إنشاء المستخدم."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم المستخدم"}),m.jsx("input",{name:"username",value:u.username,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),m.jsx("input",{type:"email",name:"email",value:u.email,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الإقامة"}),m.jsxs("select",{name:"residenceId",value:u.residenceId,onChange:g,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",children:[m.jsx("option",{value:"",children:"-- عدم التعيين لإقامة --"}),n.map(_=>m.jsx("option",{value:_.id,children:_.residenceName},_.id))]})]}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),m.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},No=({headers:r})=>m.jsx("thead",{className:"bg-gray-100",children:m.jsx("tr",{children:r.map(e=>m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:e},e))})}),Co=({title:r,onAdd:e,children:n,headerActions:s})=>m.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-8",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r}),m.jsxs("div",{className:"flex items-center gap-2",children:[s,m.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[m.jsx(Bm,{className:"w-5 h-5"}),m.jsx("span",{children:"إضافة جديد"})]})]})]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsx("table",{className:"min-w-full bg-white",children:n})})]}),kN=({suppliers:r,setSuppliers:e,lots:n,setLots:s,products:o,setProducts:u,residences:f,setResidences:g,users:y,setUsers:_,onPrintLots:T,onPrintProducts:x,setNotification:N})=>{const[z,Y]=me.useState(null),ee=async(Q,te,pe,De)=>{const{id:ge,...I}=te;try{if(ge){const A=Vn(St,Q,ge);await sh(A,I),pe(w=>w.map(D=>D.id===ge?{id:ge,...I}:D))}else{const A=await zm(Ja(St,Q),I);pe(w=>[...w,{id:A.id,...I}])}N({message:`تم حفظ ${De} بنجاح.`,type:"success"})}catch(A){console.error(`Error saving ${Q}:`,A),N({message:`فشل حفظ ${De}.`,type:"error"})}Y(null)},J=async(Q,te,pe,De)=>{if(window.confirm("هل أنت متأكد أنك تريد حذف هذا العنصر؟ لا يمكن التراجع عن هذا الإجراء."))try{await _T(Vn(St,Q,te)),pe(ge=>ge.filter(I=>I.id!==te)),N({message:`تم حذف ${De} بنجاح.`,type:"success"})}catch(ge){console.error(`Error deleting from ${Q}:`,ge),N({message:`فشل حذف ${De}.`,type:"error"})}},ce=async Q=>{try{const te=Vn(St,"users",Q.id),{id:pe,...De}=Q;await IN(te,De),_(ge=>ge.some(A=>A.id===pe)?ge.map(A=>A.id===pe?Q:A):[...ge,Q]),N({message:"تم حفظ بيانات المستخدم بنجاح.",type:"success"})}catch(te){console.error("Error saving user data:",te),N({message:"حدث خطأ أثناء حفظ بيانات المستخدم.",type:"error"})}Y(null)};return m.jsxs("div",{className:"p-6 animate-fade-in-up",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"الإعدادات"}),m.jsxs(Co,{title:"إدارة المستخدمين",onAdd:()=>Y({type:"user",title:"إضافة مستخدم جديد"}),children:[m.jsx(No,{headers:["اسم المستخدم","البريد الإلكتروني","الإقامة","إجراء"]}),m.jsx("tbody",{children:y.filter(Q=>Q.role==="user").map(Q=>{const te=f.find(pe=>pe.id===Q.residenceId);return m.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-4",children:Q.username}),m.jsx("td",{className:"py-3 px-4",children:Q.email}),m.jsx("td",{className:"py-3 px-4",children:(te==null?void 0:te.residenceName)||"غير معين"}),m.jsx("td",{className:"py-3 px-4",children:m.jsx("button",{onClick:()=>Y({type:"user",title:"تعديل مستخدم",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:m.jsx(Ks,{className:"w-5 h-5"})})})]},Q.id)})})]}),m.jsxs(Co,{title:"إدارة الإقامات",onAdd:()=>Y({type:"residence",title:"إضافة إقامة جديدة"}),children:[m.jsx(No,{headers:["اسم الإقامة","المديرية","العنوان","الطاقة","إجراءات"]}),m.jsx("tbody",{children:f.map(Q=>m.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-4",children:Q.residenceName}),m.jsx("td",{className:"py-3 px-4",children:Q.directorate}),m.jsx("td",{className:"py-3 px-4",children:Q.address}),m.jsx("td",{className:"py-3 px-4",children:Q.capacity}),m.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[m.jsx("button",{onClick:()=>Y({type:"residence",title:"تعديل إقامة",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:m.jsx(Ks,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>J("residences",Q.id,g,"الإقامة"),className:"text-gray-500 hover:text-red-600",title:"حذف",children:m.jsx(Wa,{className:"w-5 h-5"})})]})]},Q.id))})]}),m.jsxs(Co,{title:"إدارة الممونين",onAdd:()=>Y({type:"supplier",title:"إضافة ممون جديد"}),children:[m.jsx(No,{headers:["الاسم","الشركة","الهاتف","الرقم التعريفي","إجراءات"]}),m.jsx("tbody",{children:r.map(Q=>m.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-4",children:Q.name}),m.jsx("td",{className:"py-3 px-4",children:Q.company}),m.jsx("td",{className:"py-3 px-4",children:Q.phone}),m.jsx("td",{className:"py-3 px-4",children:Q.nif}),m.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[m.jsx("button",{onClick:()=>Y({type:"supplier",title:"تعديل ممون",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:m.jsx(Ks,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>J("suppliers",Q.id,e,"الممون"),className:"text-gray-500 hover:text-red-600",title:"حذف",children:m.jsx(Wa,{className:"w-5 h-5"})})]})]},Q.id))})]}),m.jsxs(Co,{title:"إدارة الحصص",onAdd:()=>Y({type:"lot",title:"إضافة حصة جديدة"}),headerActions:m.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:[m.jsx(lh,{className:"w-5 h-5"}),m.jsx("span",{children:"طباعة"})]}),children:[m.jsx(No,{headers:["اسم الحصة","الممون","تاريخ الإسناد","إجراءات"]}),m.jsx("tbody",{children:n.map(Q=>{var te;return m.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-4",children:Q.name}),m.jsx("td",{className:"py-3 px-4",children:((te=r.find(pe=>pe.id===Q.supplierId))==null?void 0:te.company)||"N/A"}),m.jsx("td",{className:"py-3 px-4",children:Q.assignmentDate}),m.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[m.jsx("button",{onClick:()=>Y({type:"lot",title:"تعديل حصة",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:m.jsx(Ks,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>J("lots",Q.id,s,"الحصة"),className:"text-gray-500 hover:text-red-600",title:"حذف",children:m.jsx(Wa,{className:"w-5 h-5"})})]})]},Q.id)})})]}),m.jsxs(Co,{title:"إدارة المنتجات",onAdd:()=>Y({type:"product",title:"إضافة منتج جديد"}),headerActions:m.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:[m.jsx(lh,{className:"w-5 h-5"}),m.jsx("span",{children:"طباعة"})]}),children:[m.jsx(No,{headers:["اسم المنتج","الوحدة","السعر","الحصة","إجراءات"]}),m.jsx("tbody",{children:o.map(Q=>{var te;return m.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-4",children:Q.name}),m.jsx("td",{className:"py-3 px-4",children:Q.unit}),m.jsxs("td",{className:"py-3 px-4",children:[Q.price.toFixed(2)," د.ج"]}),m.jsx("td",{className:"py-3 px-4",children:((te=n.find(pe=>pe.id===Q.lotId))==null?void 0:te.name)||"N/A"}),m.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[m.jsx("button",{onClick:()=>Y({type:"product",title:"تعديل منتج",data:Q}),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:m.jsx(Ks,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>J("products",Q.id,u,"المنتج"),className:"text-gray-500 hover:text-red-600",title:"حذف",children:m.jsx(Wa,{className:"w-5 h-5"})})]})]},Q.id)})})]}),z&&m.jsxs(DN,{onClose:()=>Y(null),title:z.title,children:[z.type==="supplier"&&m.jsx(ON,{onSave:Q=>ee("suppliers",Q,e,"الممون"),onCancel:()=>Y(null),existingSupplier:z.data}),z.type==="lot"&&m.jsx(VN,{suppliers:r,onSave:Q=>ee("lots",Q,s,"الحصة"),onCancel:()=>Y(null),existingLot:z.data,setNotification:N}),z.type==="product"&&m.jsx(MN,{lots:n,onSave:Q=>ee("products",Q,u,"المنتج"),onCancel:()=>Y(null),existingProduct:z.data,setNotification:N}),z.type==="residence"&&m.jsx(jN,{onSave:Q=>ee("residences",Q,g,"الإقامة"),onCancel:()=>Y(null),existingResidence:z.data}),z.type==="user"&&m.jsx(LN,{residences:f,onSave:ce,onCancel:()=>Y(null),existingUser:z.data,setNotification:N})]})]})},PN=({order:r,supplier:e,lot:n,products:s,residence:o})=>m.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("p",{className:"font-semibold text-lg",children:"الجمهورية الجزائرية الديمقراطية الشعبية"}),m.jsx("p",{className:"font-semibold text-lg",children:"وزارة التعليم العالي والبحث العلمي"}),m.jsx("p",{className:"font-semibold text-lg",children:"الديوان الوطني للخدمات الجامعية"})]}),m.jsxs("header",{className:"flex justify-between items-start pb-4 mb-8 border-b-2 border-gray-800",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"font-bold",children:o.directorate}),m.jsx("p",{className:"font-semibold text-lg",children:o.residenceName}),m.jsx("p",{className:"text-gray-600 text-sm",children:o.address}),m.jsxs("div",{className:"mt-2",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"التاريخ:"})," ",new Date(r.date).toLocaleDateString("ar-DZ")]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"الحصة:"})," ",(n==null?void 0:n.name)||"غير محدد"]})]})]}),m.jsxs("div",{className:"text-left",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"سند طلب"}),m.jsx("p",{className:"font-semibold text-lg",children:r.month}),m.jsxs("p",{className:"text-gray-600",children:["رقم: ",r.orderNumber]})]})]}),m.jsxs("section",{className:"mb-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"معلومات الممون"}),e?m.jsxs("div",{className:"grid grid-cols-2 gap-x-8 text-sm",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"الشركة:"})," ",e.company]}),m.jsxs("p",{children:[m.jsx("strong",{children:"الاسم:"})," ",e.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"العنوان:"})," ",e.address]}),m.jsxs("p",{children:[m.jsx("strong",{children:"الهاتف:"})," ",e.phone]})]}):m.jsx("p",{children:"غير متوفر"})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"تفاصيل الطلب"}),m.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100",children:[m.jsx("th",{className:"p-2 border",children:"المادة"}),m.jsx("th",{className:"p-2 border",children:"الوحدة"}),m.jsx("th",{className:"p-2 border",children:"الكمية"}),m.jsx("th",{className:"p-2 border",children:"سعر الوحدة"}),m.jsx("th",{className:"p-2 border",children:"المجموع"})]})}),m.jsx("tbody",{children:r.details.map(u=>{const f=s.find(g=>g.id===u.productId);return m.jsxs("tr",{children:[m.jsx("td",{className:"p-2 border",children:(f==null?void 0:f.name)||"منتج غير معروف"}),m.jsx("td",{className:"p-2 border",children:f==null?void 0:f.unit}),m.jsx("td",{className:"p-2 border text-center",children:u.quantity}),m.jsxs("td",{className:"p-2 border",children:[u.price.toFixed(2)," د.ج"]}),m.jsxs("td",{className:"p-2 border",children:[(u.quantity*u.price).toFixed(2)," د.ج"]})]},u.productId)})}),m.jsx("tfoot",{children:m.jsxs("tr",{className:"font-bold bg-gray-100",children:[m.jsx("td",{colSpan:4,className:"p-3 text-left border",children:"المجموع الكلي"}),m.jsxs("td",{className:"p-3 border",children:[r.totalAmount.toFixed(2)," د.ج"]})]})})]})]}),m.jsxs("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800 flex justify-between",children:[m.jsx("div",{className:"text-center w-1/2",children:m.jsx("p",{className:"font-semibold",children:"رئيس المصلحة"})}),m.jsx("div",{className:"text-center w-1/2",children:m.jsx("p",{className:"font-semibold",children:"المدير"})})]})]}),UN=({note:r,purchaseOrder:e,lot:n,products:s,residence:o,supplier:u})=>m.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("p",{className:"font-semibold text-lg",children:"الجمهورية الجزائرية الديمقراطية الشعبية"}),m.jsx("p",{className:"font-semibold text-lg",children:"وزارة التعليم العالي والبحث العلمي"}),m.jsx("p",{className:"font-semibold text-lg",children:"الديوان الوطني للخدمات الجامعية"})]}),m.jsxs("header",{className:"flex justify-between items-start pb-4 mb-8 border-b-2 border-gray-800",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"font-bold",children:o.directorate}),m.jsx("p",{className:"font-semibold text-lg",children:o.residenceName}),m.jsx("p",{className:"text-gray-600 text-sm",children:o.address}),m.jsxs("div",{className:"mt-2",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"التاريخ:"})," ",new Date(r.receptionDate).toLocaleDateString("ar-DZ")]}),m.jsxs("p",{children:[m.jsx("strong",{children:"سند الطلب المرتبط:"})," ",(e==null?void 0:e.orderNumber)||r.purchaseOrderId]})]})]}),m.jsxs("div",{className:"text-left",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"سند استلام"}),m.jsx("p",{className:"font-semibold text-lg",children:r.month}),m.jsxs("p",{className:"text-gray-600",children:["رقم: ",r.noteNumber]})]})]}),m.jsxs("section",{className:"mb-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"معلومات الممون"}),u?m.jsxs("div",{className:"grid grid-cols-2 gap-x-8 text-sm",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"الشركة:"})," ",u.company]}),m.jsxs("p",{children:[m.jsx("strong",{children:"الاسم:"})," ",u.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"العنوان:"})," ",u.address]}),m.jsxs("p",{children:[m.jsx("strong",{children:"الهاتف:"})," ",u.phone]})]}):m.jsx("p",{children:"غير متوفر"}),m.jsxs("p",{className:"mt-2",children:[m.jsx("strong",{children:"الحصة:"})," ",(n==null?void 0:n.name)||"غير محددة"]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"المواد المستلمة"}),m.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100",children:[m.jsx("th",{className:"p-2 border w-2/4",children:"المنتج"}),m.jsx("th",{className:"p-2 border",children:"الوحدة"}),m.jsx("th",{className:"p-2 border",children:"الكمية"}),m.jsx("th",{className:"p-2 border",children:"الملاحظة"})]})}),m.jsx("tbody",{children:r.details.map(f=>{const g=s.find(y=>y.id===f.productId);return m.jsxs("tr",{children:[m.jsx("td",{className:"p-2 border",children:(g==null?void 0:g.name)||"منتج غير معروف"}),m.jsx("td",{className:"p-2 border",children:g==null?void 0:g.unit}),m.jsx("td",{className:"p-2 border text-center",children:f.quantityOrdered}),m.jsx("td",{className:"p-2 border text-center"})]},f.productId)})})]})]}),m.jsx("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800 flex justify-between",children:m.jsx("div",{className:"text-center w-1/3",children:m.jsx("p",{className:"font-semibold",children:"أمين المخزن"})})})]}),zN=({lots:r,suppliers:e})=>m.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[m.jsxs("header",{className:"pb-4 mb-8 border-b-2 border-gray-800",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"قائمة الحصص"}),m.jsxs("p",{className:"text-gray-600",children:["تاريخ الطباعة: ",new Date().toLocaleDateString("ar-DZ")]})]}),m.jsx("section",{children:m.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100",children:[m.jsx("th",{className:"p-2 border",children:"اسم الحصة"}),m.jsx("th",{className:"p-2 border",children:"الممون"}),m.jsx("th",{className:"p-2 border",children:"تاريخ الإسناد"}),m.jsx("th",{className:"p-2 border",children:"الوصف"})]})}),m.jsx("tbody",{children:r.map(n=>{const s=e.find(o=>o.id===n.supplierId);return m.jsxs("tr",{children:[m.jsx("td",{className:"p-2 border",children:n.name}),m.jsx("td",{className:"p-2 border",children:(s==null?void 0:s.company)||"غير معروف"}),m.jsx("td",{className:"p-2 border",children:n.assignmentDate}),m.jsx("td",{className:"p-2 border",children:n.description})]},n.id)})})]})}),m.jsx("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800",children:m.jsx("p",{className:"text-center text-gray-500",children:"نهاية التقرير"})})]}),qN=({products:r,lots:e})=>m.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[m.jsxs("header",{className:"pb-4 mb-8 border-b-2 border-gray-800",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"قائمة المنتجات"}),m.jsxs("p",{className:"text-gray-600",children:["تاريخ الطباعة: ",new Date().toLocaleDateString("ar-DZ")]})]}),m.jsx("section",{children:m.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100",children:[m.jsx("th",{className:"p-2 border",children:"اسم المنتج"}),m.jsx("th",{className:"p-2 border",children:"الوحدة"}),m.jsx("th",{className:"p-2 border",children:"السعر"}),m.jsx("th",{className:"p-2 border",children:"الحصة"})]})}),m.jsx("tbody",{children:r.map(n=>{const s=e.find(o=>o.id===n.lotId);return m.jsxs("tr",{children:[m.jsx("td",{className:"p-2 border",children:n.name}),m.jsx("td",{className:"p-2 border",children:n.unit}),m.jsxs("td",{className:"p-2 border",children:[n.price.toFixed(2)," د.ج"]}),m.jsx("td",{className:"p-2 border",children:(s==null?void 0:s.name)||"غير معروف"})]},n.id)})})]})}),m.jsx("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800",children:m.jsx("p",{className:"text-center text-gray-500",children:"نهاية التقرير"})})]}),BN=({onLogin:r})=>{const[e,n]=me.useState(""),[s,o]=me.useState(""),[u,f]=me.useState(""),[g,y]=me.useState(!1),_=async T=>{T.preventDefault(),y(!0),f("");const x=await r(e,s);x.success||f(x.error||"حدث خطأ غير متوقع."),y(!1)};return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:m.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg",children:[m.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800",children:"تسجيل الدخول"}),m.jsx("p",{className:"text-center text-gray-500",children:"نظام تسيير سندات الطلب والاستلام"}),m.jsx("p",{className:"text-sm text-center text-gray-600 px-4",children:"الرجاء استخدام بيانات الاعتماد التي قدمها المسؤول. للمساعدة، يرجى التواصل مع مشرف النظام."}),m.jsxs("form",{onSubmit:_,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),m.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:T=>n(T.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"البريد الإلكتروني"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),m.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"كلمة المرور"})]}),u&&m.jsx("p",{className:"text-sm text-red-600 text-center",children:u}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:g,className:"w-full px-4 py-2 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-300 disabled:bg-blue-300",children:g?"...جاري الدخول":"دخول"})})]}),m.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-md text-xs text-gray-600",children:[m.jsx("p",{className:"font-semibold text-center mb-1",children:".2025 DeepTech. All rights reserved ©"}),m.jsx("p",{className:"font-semibold text-center mb-1",children:"Built by ARAB Yassine"}),m.jsx("p",{className:"font-semibold text-center mb-1",children:"Email: deeptech333@gmail.com"}),m.jsx("p",{className:"font-semibold text-center mb-1",children:"Mobile: 0666498480"})]})]})})},HN=({settings:r,onSave:e})=>{const[n,s]=me.useState(r),[o,u]=me.useState(""),[f,g]=me.useState(!1);me.useEffect(()=>{s(r)},[r]);const y=T=>{const{name:x,value:N}=T.target;s(z=>({...z,[x]:N}))},_=async T=>{T.preventDefault(),g(!0);const x={...n,capacity:Number(n.capacity)||0};await e(x),g(!1),u("تم حفظ الإعدادات بنجاح!"),setTimeout(()=>u(""),3e3)};return m.jsx("div",{className:"p-6 animate-fade-in-up",children:m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6 border-b pb-4",children:"إعدادات الإقامة"}),m.jsxs("form",{onSubmit:_,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"directorate",className:"block text-sm font-medium text-gray-700 mb-1",children:"المديرية"}),m.jsx("input",{type:"text",id:"directorate",name:"directorate",value:n.directorate,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"residenceName",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإقامة"}),m.jsx("input",{type:"text",id:"residenceName",name:"residenceName",value:n.residenceName,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),m.jsx("input",{type:"text",id:"address",name:"address",value:n.address,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"capacity",className:"block text-sm font-medium text-gray-700 mb-1",children:"الطاقة الاستيعابية"}),m.jsx("input",{type:"number",id:"capacity",name:"capacity",value:n.capacity,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0,min:"0"})]}),m.jsxs("div",{className:"pt-4 flex items-center justify-end",children:[o&&m.jsx("p",{className:"text-green-600 ml-4 transition-opacity duration-300",children:o}),m.jsx("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:bg-blue-300",children:f?"...جاري الحفظ":"حفظ التغييرات"})]})]})]})})},FN=({message:r,type:e,onClose:n})=>{me.useEffect(()=>{const f=setTimeout(()=>{n()},4e3);return()=>clearTimeout(f)},[n]);const s=e==="success"?"bg-green-100 border-green-500":"bg-red-100 border-red-500",o=e==="success"?"text-green-800":"text-red-800",u=e==="success"?dA:mA;return m.jsxs("div",{className:`fixed top-5 right-5 max-w-sm w-full p-4 rounded-lg shadow-lg border-l-4 z-50 flex items-center animate-fade-in-right ${s} ${o}`,role:"alert",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(u,{className:"w-6 h-6"})}),m.jsx("div",{className:"mr-3 flex-grow font-medium",children:r}),m.jsx("button",{onClick:n,className:"mr-auto -mx-1.5 -my-1.5 p-1.5 rounded-lg focus:ring-2 inline-flex h-8 w-8","aria-label":"Dismiss",children:m.jsx(pA,{className:"w-5 h-5"})}),m.jsx("style",{children:`
        @keyframes fade-in-right {
          from {
            opacity: 0;
            transform: translateX(100%);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        .animate-fade-in-right {
          animation: fade-in-right 0.5s ease-out forwards;
        }
      `})]})},GN=()=>m.jsxs("div",{className:"bg-red-100 border-b-2 border-red-500 text-red-800 p-4 text-center fixed top-0 left-0 right-0 z-50",dir:"rtl",children:[m.jsx("p",{className:"font-bold",children:"وضع العرض التجريبي: التطبيق غير متصل بقاعدة البيانات."}),m.jsxs("p",{children:["لتفعيل كافة الميزات، يرجى إعداد بيانات اعتماد Firebase في الملف ",m.jsx("code",{className:"bg-red-200 px-1 rounded mx-1",dir:"ltr",children:"lib/firebase.ts"}),"."]})]}),dm=({pos:r,dns:e,setView:n})=>{const s=u=>{switch(u){case zt.OPEN:return"bg-yellow-100 text-yellow-800";case zt.PARTIALLY_RECEIVED:return"bg-blue-100 text-blue-800";case zt.FULLY_RECEIVED:return"bg-green-100 text-green-800";case zt.CANCELLED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=u=>{switch(u){case $s.FULL:return"bg-green-100 text-green-800";case $s.PARTIAL:return"bg-blue-100 text-blue-800";case $s.REJECTED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return m.jsxs("div",{className:"p-6 animate-fade-in-up",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"لوحة التحكم"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-blue-500",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"إجمالي سندات الطلب"}),m.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:r.length})]}),m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-green-500",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"إجمالي سندات الاستلام"}),m.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:e.length})]}),m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-yellow-500",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"طلبات في الانتظار"}),m.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:r.filter(u=>u.status===zt.OPEN||u.status===zt.PARTIALLY_RECEIVED).length})]})]}),m.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4 border-b pb-2",children:"أحدث سندات الطلب"}),m.jsx("div",{className:"space-y-3 flex-grow",children:r.length>0?r.slice(0,5).map(u=>m.jsxs("div",{className:"flex justify-between items-center p-2 rounded-md hover:bg-gray-50",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-gray-800",children:u.orderNumber}),m.jsx("p",{className:"text-sm text-gray-500",children:u.date})]}),m.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${s(u.status)}`,children:u.status})]},u.id)):m.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا توجد سندات طلب لعرضها."})}),r.length>0&&m.jsx("button",{onClick:()=>n("purchaseOrders"),className:"w-full mt-4 py-2 text-sm font-semibold text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition",children:"عرض كل سندات الطلب"})]}),m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4 border-b pb-2",children:"أحدث سندات الاستلام"}),m.jsx("div",{className:"space-y-3 flex-grow",children:e.length>0?e.slice(0,5).map(u=>m.jsxs("div",{className:"flex justify-between items-center p-2 rounded-md hover:bg-gray-50",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-gray-800",children:u.noteNumber}),m.jsx("p",{className:"text-sm text-gray-500",children:u.receptionDate})]}),m.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${o(u.status)}`,children:u.status})]},u.id)):m.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا توجد سندات استلام لعرضها."})}),e.length>0&&m.jsx("button",{onClick:()=>n("deliveryNotes"),className:"w-full mt-4 py-2 text-sm font-semibold text-green-600 bg-green-50 rounded-lg hover:bg-green-100 transition",children:"عرض كل سندات الاستلام"})]})]})]})},QN=({purchaseOrders:r,lots:e,suppliers:n,residences:s,setView:o,onPrint:u,onEdit:f,onDelete:g,user:y})=>{const _=T=>{switch(T){case zt.OPEN:return"bg-yellow-100 text-yellow-800";case zt.PARTIALLY_RECEIVED:return"bg-blue-100 text-blue-800";case zt.FULLY_RECEIVED:return"bg-green-100 text-green-800";case zt.CANCELLED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return m.jsxs("div",{className:"p-6 animate-fade-in-up",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"سندات الطلب"}),(y==null?void 0:y.role)!=="admin"&&m.jsxs("button",{onClick:()=>o("newPurchaseOrder"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[m.jsx(Bm,{className:"w-5 h-5"}),m.jsx("span",{children:"سند طلب جديد"})]})]}),m.jsx("div",{className:"bg-white p-4 rounded-xl shadow-lg overflow-x-auto",children:m.jsxs("table",{className:"min-w-full bg-white",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"رقم السند"}),(y==null?void 0:y.role)==="admin"&&m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الإقامة"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"التاريخ"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الممون"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"المبلغ الإجمالي"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الحالة"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"إجراءات"})]})}),m.jsx("tbody",{children:r.map(T=>{const x=n.find(Y=>Y.id===T.supplierId),N=s.find(Y=>Y.id===T.residenceId),z=T.status===zt.OPEN;return m.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-4",children:T.orderNumber}),(y==null?void 0:y.role)==="admin"&&m.jsx("td",{className:"py-3 px-4",children:(N==null?void 0:N.residenceName)||"غير معروف"}),m.jsx("td",{className:"py-3 px-4",children:T.date}),m.jsx("td",{className:"py-3 px-4",children:(x==null?void 0:x.company)||"غير معروف"}),m.jsxs("td",{className:"py-3 px-4",children:[T.totalAmount.toFixed(2)," د.ج"]}),m.jsx("td",{className:"py-3 px-4",children:m.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${_(T.status)}`,children:T.status})}),m.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[m.jsx("button",{onClick:()=>u(T.id),className:"text-gray-500 hover:text-blue-600",title:"طباعة",children:m.jsx(lh,{className:"w-5 h-5"})}),(y==null?void 0:y.role)!=="admin"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>f(T),className:`text-gray-500 ${z?"hover:text-yellow-600":"opacity-50 cursor-not-allowed"}`,title:"تعديل",disabled:!z,children:m.jsx(Ks,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>g(T.id),className:"text-gray-500 hover:text-red-600",title:"حذف",children:m.jsx(Wa,{className:"w-5 h-5"})})]})]})]},T.id)})})]})})]})},YN=({deliveryNotes:r,purchaseOrders:e,residences:n,setView:s,onPrint:o,onEdit:u,onDelete:f,user:g})=>m.jsxs("div",{className:"p-6 animate-fade-in-up",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"سندات الاستلام"}),(g==null?void 0:g.role)!=="admin"&&m.jsxs("button",{onClick:()=>s("newDeliveryNote"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[m.jsx(Bm,{className:"w-5 h-5"}),m.jsx("span",{children:"سند استلام جديد"})]})]}),m.jsx("div",{className:"bg-white p-4 rounded-xl shadow-lg overflow-x-auto",children:m.jsxs("table",{className:"min-w-full bg-white",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"رقم السند"}),(g==null?void 0:g.role)==="admin"&&m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الإقامة"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"تاريخ الاستلام"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"سند الطلب المرتبط"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الحالة"}),m.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"إجراءات"})]})}),m.jsx("tbody",{children:r.map(y=>{const _=n.find(x=>x.id===y.residenceId),T=e.find(x=>x.id===y.purchaseOrderId);return m.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-4",children:y.noteNumber}),(g==null?void 0:g.role)==="admin"&&m.jsx("td",{className:"py-3 px-4",children:(_==null?void 0:_.residenceName)||"غير معروف"}),m.jsx("td",{className:"py-3 px-4",children:y.receptionDate}),m.jsx("td",{className:"py-3 px-4",children:(T==null?void 0:T.orderNumber)||y.purchaseOrderId}),m.jsx("td",{className:"py-3 px-4",children:m.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${y.status==="كامل"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:y.status})}),m.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[m.jsx("button",{onClick:()=>o(y.id),className:"text-gray-500 hover:text-green-600",title:"طباعة",children:m.jsx(lh,{className:"w-5 h-5"})}),(g==null?void 0:g.role)!=="admin"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>u(y),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:m.jsx(Ks,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>f(y),className:"text-gray-500 hover:text-red-600",title:"حذف",children:m.jsx(Wa,{className:"w-5 h-5"})})]})]})]},y.id)})})]})})]}),KN=()=>{const r=!vT,[e,n]=me.useState("dashboard"),[s,o]=me.useState(null),[u,f]=me.useState(!r),[g,y]=me.useState(null),[_,T]=me.useState([]),[x,N]=me.useState([]),[z,Y]=me.useState([]),[ee,J]=me.useState([]),[ce,Q]=me.useState([]),[te,pe]=me.useState([]),[De,ge]=me.useState([]),[I,A]=me.useState(null),[w,D]=me.useState(null),[O,j]=me.useState(null),R=(ae,le)=>{o(le||null),n(ae)};me.useEffect(()=>{if(r)return;const ae=sx(ah,le=>{A(le)});return()=>ae()},[r]),me.useEffect(()=>{if(r)return;(async()=>{if(I){const le=Vn(St,"users",I.uid),fe=await RN(le);if(fe.exists()){const Be=fe.data();D({id:fe.id,username:Be.username||"مستخدم",email:Be.email||I.email||"",role:Be.role||"user",residenceId:Be.residenceId})}else console.error("User profile not found in Firestore"),D(null)}else D(null)})()},[I,r]),me.useEffect(()=>{if(r||!w){f(!1);return}(async()=>{f(!0);try{const le=async(Ht,Ge,Ft=!1)=>{const mn=w.role!=="admin";if(Ft&&mn&&!w.residenceId)return[];const it=Ja(St,Ht),ct=[];let Zn=!1;Ft&&mn&&w.residenceId?(ct.push(Qs("residenceId","==",w.residenceId)),Zn=!0):Ge&&ct.push(SN(Ge,"desc"));const Al=Ro(it,...ct);let Gt=(await Io(Al)).docs.map(jn=>({id:jn.id,...jn.data()}));return Zn&&Ge&&Gt.sort((jn,ys)=>{const yr=jn[Ge],Jn=ys[Ge];return yr<Jn?1:yr>Jn?-1:0}),Gt},[fe,Be,je,Oe,nt,Bt]=await Promise.all([le("suppliers"),le("lots"),le("products"),le("residences"),le("purchase_orders","date",!0),le("delivery_notes","receptionDate",!0)]);if(T(fe),N(Be),Y(je),pe(Oe),J(nt),Q(Bt),w.role==="admin"){const Ht=await le("users");ge(Ht)}}catch(le){console.error("Error fetching data:",le),T([]),N([]),Y([]),J([]),Q([]),pe([]),ge([])}finally{f(!1)}})()},[w,r]),me.useEffect(()=>{if(O){const ae=()=>j(null);window.addEventListener("afterprint",ae);const le=setTimeout(()=>window.print(),100);return()=>{clearTimeout(le),window.removeEventListener("afterprint",ae)}}},[O]);const Ze=async(ae,le)=>{if(r)return y({message:"وضع العرض التجريبي: لا يمكن تسجيل الدخول.",type:"error"}),{success:!1,error:"قاعدة البيانات غير معدة. يرجى مراجعة التعليمات في الملف lib/firebase.ts"};try{return await nx(ah,ae,le),n("dashboard"),{success:!0}}catch(fe){return console.error("Login error:",fe),fe.code==="auth/invalid-credential"||fe.code==="auth/user-not-found"||fe.code==="auth/wrong-password"?{success:!1,error:"الرجاء التأكد من البريد الإلكتروني أو كلمة المرور."}:{success:!1,error:"حدث خطأ غير متوقع أثناء تسجيل الدخول."}}},gt=async()=>{r||(await ax(ah),D(null),A(null))},F=async ae=>{if(r){y({message:"وضع العرض التجريبي: لا يمكن حفظ البيانات.",type:"error"});return}if((w==null?void 0:w.role)==="admin"||!(w!=null&&w.residenceId)){y({message:"خطأ: يجب أن تكون مسجلاً كمستخدم إقامة لإدارة سندات الطلب.",type:"error"});return}const{id:le,...fe}=ae,Be={...fe,residenceId:w.residenceId};try{if(le){const je=Vn(St,"purchase_orders",le);await sh(je,Be),J(Oe=>Oe.map(nt=>nt.id===le?{id:le,...Be}:nt))}else{const je=Ja(St,"purchase_orders"),Oe=Ro(je,Qs("residenceId","==",w.residenceId),Qs("orderNumber","==",ae.orderNumber));if(!(await Io(Oe)).empty){y({message:"يوجد سند طلب بنفس الرقم مسجل مسبقًا في هذه الإقامة.",type:"error"});return}const Ht={id:(await zm(je,Be)).id,...Be};J(Ge=>[Ht,...Ge].sort((Ft,mn)=>mn.date.localeCompare(Ft.date)))}R("purchaseOrders"),y({message:"تم حفظ سند الطلب بنجاح!",type:"success"})}catch(je){console.error("Error saving PO:",je),y({message:"فشل حفظ سند الطلب.",type:"error"})}},ie=async(ae,le)=>{if(r){y({message:"وضع العرض التجريبي: لا يمكن حفظ البيانات.",type:"error"});return}if((w==null?void 0:w.role)==="admin"||!(w!=null&&w.residenceId)){y({message:"خطأ: يجب أن تكون مسجلاً كمستخدم إقامة لإنشاء سند استلام.",type:"error"});return}const{id:fe,...Be}=ae,je={...Be,residenceId:w.residenceId};try{if(fe){const Oe=Fv(St),nt=Vn(St,"delivery_notes",fe),Bt=Vn(St,"purchase_orders",je.purchaseOrderId);Oe.update(nt,je),Oe.update(Bt,{status:le}),await Oe.commit(),Q(Ht=>Ht.map(Ge=>Ge.id===fe?{id:fe,...je}:Ge)),J(Ht=>Ht.map(Ge=>Ge.id===je.purchaseOrderId?{...Ge,status:le}:Ge))}else{const Oe=Ja(St,"delivery_notes"),nt=Ro(Oe,Qs("residenceId","==",w.residenceId),Qs("noteNumber","==",ae.noteNumber));if(!(await Io(nt)).empty){y({message:"يوجد سند استلام بنفس الرقم مسجل مسبقًا في هذه الإقامة.",type:"error"});return}const Ge={id:(await zm(Oe,je)).id,...je};Q(mn=>[Ge,...mn].sort((it,ct)=>ct.receptionDate.localeCompare(it.receptionDate)));const Ft=Vn(St,"purchase_orders",je.purchaseOrderId);await sh(Ft,{status:le}),J(mn=>mn.map(it=>it.id===je.purchaseOrderId?{...it,status:le}:it))}R("deliveryNotes"),y({message:"تم حفظ سند الاستلام بنجاح!",type:"success"})}catch(Oe){console.error("Error saving DN:",Oe),y({message:"فشل حفظ سند الاستلام.",type:"error"})}},ye=async ae=>{if(r)return y({message:"وضع العرض التجريبي: لا يمكن حذف البيانات.",type:"error"});const le=Ja(St,"delivery_notes"),fe=Ro(le,Qs("purchaseOrderId","==",ae));if(!(await Io(fe)).empty){y({message:"لا يمكن حذف سند الطلب هذا لأنه يحتوي على سندات استلام مرتبطة به.",type:"error"});return}if(window.confirm("هل أنت متأكد أنك تريد حذف سند الطلب هذا؟"))try{await _T(Vn(St,"purchase_orders",ae)),J(je=>je.filter(Oe=>Oe.id!==ae)),y({message:"تم حذف سند الطلب بنجاح.",type:"success"})}catch(je){console.error("Error deleting PO:",je),y({message:"فشل حذف سند الطلب.",type:"error"})}},qe=async ae=>{if(r)return y({message:"وضع العرض التجريبي: لا يمكن حذف البيانات.",type:"error"});if(window.confirm("هل أنت متأكد أنك تريد حذف سند الاستلام هذا؟ سيتم تحديث حالة سند الطلب المرتبط."))try{const le=Ja(St,"delivery_notes"),fe=Ro(le,Qs("purchaseOrderId","==",ae.purchaseOrderId)),je=(await Io(fe)).docs.map(Ge=>({id:Ge.id,...Ge.data()})).filter(Ge=>Ge.id!==ae.id);let Oe=zt.OPEN;je.length>0&&(Oe=zt.PARTIALLY_RECEIVED);const nt=Fv(St),Bt=Vn(St,"delivery_notes",ae.id);nt.delete(Bt);const Ht=Vn(St,"purchase_orders",ae.purchaseOrderId);nt.update(Ht,{status:Oe}),await nt.commit(),Q(Ge=>Ge.filter(Ft=>Ft.id!==ae.id)),J(Ge=>Ge.map(Ft=>Ft.id===ae.purchaseOrderId?{...Ft,status:Oe}:Ft)),y({message:"تم حذف سند الاستلام بنجاح.",type:"success"})}catch(le){console.error("Error deleting DN:",le),y({message:"فشل حذف سند الاستلام.",type:"error"})}},Ke=ae=>{const le=ee.find(fe=>fe.id===ae);if(le){const fe=te.find(Oe=>Oe.id===le.residenceId);if(!fe)return y({message:"لم يتم العثور على بيانات الإقامة لهذا السند.",type:"error"});const Be=_.find(Oe=>Oe.id===le.supplierId),je=x.find(Oe=>Oe.id===le.lotId);j(m.jsx(PN,{order:le,supplier:Be,lot:je,products:z,residence:fe}))}},M=ae=>{const le=ce.find(fe=>fe.id===ae);if(le){const fe=te.find(nt=>nt.id===le.residenceId);if(!fe)return y({message:"لم يتم العثور على بيانات الإقامة لهذا السند.",type:"error"});const Be=ee.find(nt=>nt.id===le.purchaseOrderId),je=_.find(nt=>nt.id===(Be==null?void 0:Be.supplierId)),Oe=x.find(nt=>nt.id===(Be==null?void 0:Be.lotId));j(m.jsx(UN,{note:le,purchaseOrder:Be,lot:Oe,products:z,residence:fe,supplier:je}))}},$=()=>{j(m.jsx(zN,{lots:x,suppliers:_}))},re=()=>{j(m.jsx(qN,{products:z,lots:x}))},oe=async ae=>{if(r){y({message:"وضع العرض التجريبي: لا يمكن حفظ البيانات.",type:"error"});return}try{const{id:le,...fe}=ae,Be=Vn(St,"residences",le);await sh(Be,fe),pe(je=>je.map(Oe=>Oe.id===le?ae:Oe))}catch(le){console.error("Error saving residence settings:",le)}},be=me.useMemo(()=>ee.filter(ae=>ae.status===zt.OPEN||ae.status===zt.PARTIALLY_RECEIVED),[ee]);if(u)return m.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:m.jsx("div",{className:"text-xl font-semibold",children:"جاري تحميل البيانات..."})});if(!w)return m.jsxs("div",{className:"relative min-h-screen",children:[r&&m.jsx(GN,{}),m.jsx(BN,{onLogin:Ze})]});const Re=()=>{if(e==="settings"&&w.role!=="admin"||e==="residenceSettings"&&w.role!=="user")return R("dashboard"),m.jsx(dm,{pos:ee,dns:ce,setView:R});switch(e){case"dashboard":return m.jsx(dm,{pos:ee,dns:ce,setView:R});case"purchaseOrders":return m.jsx(QN,{purchaseOrders:ee,lots:x,suppliers:_,residences:te,setView:R,onPrint:Ke,onEdit:fe=>R("editPurchaseOrder",fe),onDelete:ye,user:w});case"deliveryNotes":return m.jsx(YN,{deliveryNotes:ce,purchaseOrders:ee,residences:te,setView:R,onPrint:M,onEdit:fe=>R("editDeliveryNote",fe),onDelete:qe,user:w});case"newPurchaseOrder":return m.jsx(f0,{lots:x,products:z,suppliers:_,onSave:F,onCancel:()=>R("purchaseOrders"),setNotification:y});case"editPurchaseOrder":return m.jsx(f0,{lots:x,products:z,suppliers:_,onSave:F,onCancel:()=>R("purchaseOrders"),existingOrder:s,setNotification:y});case"newDeliveryNote":return m.jsx(d0,{lots:x,openPurchaseOrders:be,products:z,suppliers:_,onSave:ie,onCancel:()=>R("deliveryNotes"),setNotification:y});case"editDeliveryNote":const ae=Array.from(new Set([...be,...ee]));return m.jsx(d0,{lots:x,openPurchaseOrders:ae,products:z,suppliers:_,onSave:ie,onCancel:()=>R("deliveryNotes"),existingNote:s,setNotification:y});case"settings":return m.jsx(kN,{suppliers:_,setSuppliers:T,lots:x,setLots:N,products:z,setProducts:Y,residences:te,setResidences:pe,users:De,setUsers:ge,onPrintLots:$,onPrintProducts:re,setNotification:y});case"residenceSettings":const le=te.find(fe=>fe.id===w.residenceId);return le?m.jsx(HN,{settings:le,onSave:oe}):m.jsx("div",{children:"جاري تحميل إعدادات الإقامة..."});default:return m.jsx(dm,{pos:ee,dns:ce,setView:R})}};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex bg-gray-100 min-h-screen font-sans",children:[g&&m.jsx(FN,{message:g.message,type:g.type,onClose:()=>y(null)}),m.jsx(gA,{currentView:e,setView:R,user:w,onLogout:gt}),m.jsx("main",{className:"flex-1 pr-64",children:Re()})]}),O&&m.jsx("div",{className:"print-container",children:O})]})},ET=document.getElementById("root");if(!ET)throw new Error("Could not find root element to mount to");const XN=oA.createRoot(ET);XN.render(m.jsx(eA.StrictMode,{children:m.jsx(KN,{})}));
