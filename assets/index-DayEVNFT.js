(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function q0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hd={exports:{}},bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function Z1(){if(Z_)return bl;Z_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:u}}return bl.Fragment=e,bl.jsx=n,bl.jsxs=n,bl}var J_;function J1(){return J_||(J_=1,Hd.exports=Z1()),Hd.exports}var y=J1(),Fd={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function W1(){if(W_)return Re;W_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),C=Symbol.iterator;function z(V){return V===null||typeof V!="object"?null:(V=C&&V[C]||V["@@iterator"],typeof V=="function"?V:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,G={};function le(V,J,Z){this.props=V,this.context=J,this.refs=G,this.updater=Z||ee}le.prototype.isReactComponent={},le.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},le.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function fe(){}fe.prototype=le.prototype;function de(V,J,Z){this.props=V,this.context=J,this.refs=G,this.updater=Z||ee}var Se=de.prototype=new fe;Se.constructor=de,q(Se,le.prototype),Se.isPureReactComponent=!0;var ne=Array.isArray;function se(){}var w={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(V,J,Z){var Q=Z.ref;return{$$typeof:r,type:V,key:J,ref:Q!==void 0?Q:null,props:Z}}function M(V,J){return I(V.type,J,V.props)}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function L(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Z){return J[Z]})}var x=/\/+/g;function nt(V,J){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):J.toString(36)}function dt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(se,se):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,J,Z,Q,ae){var ue=typeof V;(ue==="undefined"||ue==="boolean")&&(V=null);var me=!1;if(V===null)me=!0;else switch(ue){case"bigint":case"string":case"number":me=!0;break;case"object":switch(V.$$typeof){case r:case e:me=!0;break;case T:return me=V._init,Y(me(V._payload),J,Z,Q,ae)}}if(me)return ae=ae(V),me=Q===""?"."+nt(V,0):Q,ne(ae)?(Z="",me!=null&&(Z=me.replace(x,"$&/")+"/"),Y(ae,J,Z,"",function(Ut){return Ut})):ae!=null&&(D(ae)&&(ae=M(ae,Z+(ae.key==null||V&&V.key===ae.key?"":(""+ae.key).replace(x,"$&/")+"/")+me)),J.push(ae)),1;me=0;var Te=Q===""?".":Q+":";if(ne(V))for(var Ue=0;Ue<V.length;Ue++)Q=V[Ue],ue=Te+nt(Q,Ue),me+=Y(Q,J,Z,ue,ae);else if(Ue=z(V),typeof Ue=="function")for(V=Ue.call(V),Ue=0;!(Q=V.next()).done;)Q=Q.value,ue=Te+nt(Q,Ue++),me+=Y(Q,J,Z,ue,ae);else if(ue==="object"){if(typeof V.then=="function")return Y(dt(V),J,Z,Q,ae);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return me}function re(V,J,Z){if(V==null)return V;var Q=[],ae=0;return Y(V,Q,"","",function(ue){return J.call(Z,ue,ae++)}),Q}function ye(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(Z){(V._status===0||V._status===-1)&&(V._status=1,V._result=Z)},function(Z){(V._status===0||V._status===-1)&&(V._status=2,V._result=Z)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var Pe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Fe={map:re,forEach:function(V,J,Z){re(V,function(){J.apply(this,arguments)},Z)},count:function(V){var J=0;return re(V,function(){J++}),J},toArray:function(V){return re(V,function(J){return J})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Re.Activity=S,Re.Children=Fe,Re.Component=le,Re.Fragment=n,Re.Profiler=l,Re.PureComponent=de,Re.StrictMode=s,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Re.__COMPILER_RUNTIME={__proto__:null,c:function(V){return w.H.useMemoCache(V)}},Re.cache=function(V){return function(){return V.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(V,J,Z){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Q=q({},V.props),ae=V.key;if(J!=null)for(ue in J.key!==void 0&&(ae=""+J.key),J)!R.call(J,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&J.ref===void 0||(Q[ue]=J[ue]);var ue=arguments.length-2;if(ue===1)Q.children=Z;else if(1<ue){for(var me=Array(ue),Te=0;Te<ue;Te++)me[Te]=arguments[Te+2];Q.children=me}return I(V.type,ae,Q)},Re.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Re.createElement=function(V,J,Z){var Q,ae={},ue=null;if(J!=null)for(Q in J.key!==void 0&&(ue=""+J.key),J)R.call(J,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ae[Q]=J[Q]);var me=arguments.length-2;if(me===1)ae.children=Z;else if(1<me){for(var Te=Array(me),Ue=0;Ue<me;Ue++)Te[Ue]=arguments[Ue+2];ae.children=Te}if(V&&V.defaultProps)for(Q in me=V.defaultProps,me)ae[Q]===void 0&&(ae[Q]=me[Q]);return I(V,ue,ae)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(V){return{$$typeof:p,render:V}},Re.isValidElement=D,Re.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:ye}},Re.memo=function(V,J){return{$$typeof:v,type:V,compare:J===void 0?null:J}},Re.startTransition=function(V){var J=w.T,Z={};w.T=Z;try{var Q=V(),ae=w.S;ae!==null&&ae(Z,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(se,Pe)}catch(ue){Pe(ue)}finally{J!==null&&Z.types!==null&&(J.types=Z.types),w.T=J}},Re.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Re.use=function(V){return w.H.use(V)},Re.useActionState=function(V,J,Z){return w.H.useActionState(V,J,Z)},Re.useCallback=function(V,J){return w.H.useCallback(V,J)},Re.useContext=function(V){return w.H.useContext(V)},Re.useDebugValue=function(){},Re.useDeferredValue=function(V,J){return w.H.useDeferredValue(V,J)},Re.useEffect=function(V,J){return w.H.useEffect(V,J)},Re.useEffectEvent=function(V){return w.H.useEffectEvent(V)},Re.useId=function(){return w.H.useId()},Re.useImperativeHandle=function(V,J,Z){return w.H.useImperativeHandle(V,J,Z)},Re.useInsertionEffect=function(V,J){return w.H.useInsertionEffect(V,J)},Re.useLayoutEffect=function(V,J){return w.H.useLayoutEffect(V,J)},Re.useMemo=function(V,J){return w.H.useMemo(V,J)},Re.useOptimistic=function(V,J){return w.H.useOptimistic(V,J)},Re.useReducer=function(V,J,Z){return w.H.useReducer(V,J,Z)},Re.useRef=function(V){return w.H.useRef(V)},Re.useState=function(V){return w.H.useState(V)},Re.useSyncExternalStore=function(V,J,Z){return w.H.useSyncExternalStore(V,J,Z)},Re.useTransition=function(){return w.H.useTransition()},Re.version="19.2.0",Re}var ev;function Pm(){return ev||(ev=1,Fd.exports=W1()),Fd.exports}var ge=Pm();const eA=q0(ge);var Gd={exports:{}},Al={},Qd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function tA(){return tv||(tv=1,(function(r){function e(Y,re){var ye=Y.length;Y.push(re);e:for(;0<ye;){var Pe=ye-1>>>1,Fe=Y[Pe];if(0<l(Fe,re))Y[Pe]=re,Y[ye]=Fe,ye=Pe;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var re=Y[0],ye=Y.pop();if(ye!==re){Y[0]=ye;e:for(var Pe=0,Fe=Y.length,V=Fe>>>1;Pe<V;){var J=2*(Pe+1)-1,Z=Y[J],Q=J+1,ae=Y[Q];if(0>l(Z,ye))Q<Fe&&0>l(ae,Z)?(Y[Pe]=ae,Y[Q]=ye,Pe=Q):(Y[Pe]=Z,Y[J]=ye,Pe=J);else if(Q<Fe&&0>l(ae,ye))Y[Pe]=ae,Y[Q]=ye,Pe=Q;else break e}}return re}function l(Y,re){var ye=Y.sortIndex-re.sortIndex;return ye!==0?ye:Y.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var g=[],v=[],T=1,S=null,C=3,z=!1,ee=!1,q=!1,G=!1,le=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,de=typeof setImmediate<"u"?setImmediate:null;function Se(Y){for(var re=n(v);re!==null;){if(re.callback===null)s(v);else if(re.startTime<=Y)s(v),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(v)}}function ne(Y){if(q=!1,Se(Y),!ee)if(n(g)!==null)ee=!0,se||(se=!0,L());else{var re=n(v);re!==null&&dt(ne,re.startTime-Y)}}var se=!1,w=-1,R=5,I=-1;function M(){return G?!0:!(r.unstable_now()-I<R)}function D(){if(G=!1,se){var Y=r.unstable_now();I=Y;var re=!0;try{e:{ee=!1,q&&(q=!1,fe(w),w=-1),z=!0;var ye=C;try{t:{for(Se(Y),S=n(g);S!==null&&!(S.expirationTime>Y&&M());){var Pe=S.callback;if(typeof Pe=="function"){S.callback=null,C=S.priorityLevel;var Fe=Pe(S.expirationTime<=Y);if(Y=r.unstable_now(),typeof Fe=="function"){S.callback=Fe,Se(Y),re=!0;break t}S===n(g)&&s(g),Se(Y)}else s(g);S=n(g)}if(S!==null)re=!0;else{var V=n(v);V!==null&&dt(ne,V.startTime-Y),re=!1}}break e}finally{S=null,C=ye,z=!1}re=void 0}}finally{re?L():se=!1}}}var L;if(typeof de=="function")L=function(){de(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,nt=x.port2;x.port1.onmessage=D,L=function(){nt.postMessage(null)}}else L=function(){le(D,0)};function dt(Y,re){w=le(function(){Y(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(Y){switch(C){case 1:case 2:case 3:var re=3;break;default:re=C}var ye=C;C=re;try{return Y()}finally{C=ye}},r.unstable_requestPaint=function(){G=!0},r.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=C;C=Y;try{return re()}finally{C=ye}},r.unstable_scheduleCallback=function(Y,re,ye){var Pe=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Pe+ye:Pe):ye=Pe,Y){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=ye+Fe,Y={id:T++,callback:re,priorityLevel:Y,startTime:ye,expirationTime:Fe,sortIndex:-1},ye>Pe?(Y.sortIndex=ye,e(v,Y),n(g)===null&&Y===n(v)&&(q?(fe(w),w=-1):q=!0,dt(ne,ye-Pe))):(Y.sortIndex=Fe,e(g,Y),ee||z||(ee=!0,se||(se=!0,L()))),Y},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(Y){var re=C;return function(){var ye=C;C=re;try{return Y.apply(this,arguments)}finally{C=ye}}}})(Yd)),Yd}var nv;function nA(){return nv||(nv=1,Qd.exports=tA()),Qd.exports}var Kd={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function iA(){if(iv)return en;iv=1;var r=Pm();function e(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,v,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:g,containerInfo:v,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(g,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return u(g,v,null,T)},en.flushSync=function(g){var v=f.T,T=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=v,s.p=T,s.d.f()}},en.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(g,v))},en.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},en.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var T=v.as,S=p(T,v.crossOrigin),C=typeof v.integrity=="string"?v.integrity:void 0,z=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?s.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:S,integrity:C,fetchPriority:z}):T==="script"&&s.d.X(g,{crossOrigin:S,integrity:C,fetchPriority:z,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},en.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=p(v.as,v.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(g)},en.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,S=p(T,v.crossOrigin);s.d.L(g,T,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},en.preloadModule=function(g,v){if(typeof g=="string")if(v){var T=p(v.as,v.crossOrigin);s.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(g)},en.requestFormReset=function(g){s.d.r(g)},en.unstable_batchedUpdates=function(g,v){return g(v)},en.useFormState=function(g,v,T){return f.H.useFormState(g,v,T)},en.useFormStatus=function(){return f.H.useHostTransitionStatus()},en.version="19.2.0",en}var rv;function rA(){if(rv)return Kd.exports;rv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kd.exports=iA(),Kd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function sA(){if(sv)return Al;sv=1;var r=nA(),e=Pm(),n=rA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function v(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===o)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,o=d;break}if(b===o){_=!0,o=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,o=h;break}if(b===o){_=!0,o=d,a=h;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,C=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),de=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function nt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case le:return"Profiler";case G:return"StrictMode";case ne:return"Suspense";case se:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ee:return"Portal";case de:return t.displayName||"Context";case fe:return(t._context.displayName||"Context")+".Consumer";case Se:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w:return i=t.displayName||null,i!==null?i:nt(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return nt(t(i))}catch{}}return null}var dt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Pe=[],Fe=-1;function V(t){return{current:t}}function J(t){0>Fe||(t.current=Pe[Fe],Pe[Fe]=null,Fe--)}function Z(t,i){Fe++,Pe[Fe]=t.current,t.current=i}var Q=V(null),ae=V(null),ue=V(null),me=V(null);function Te(t,i){switch(Z(ue,i),Z(ae,t),Z(Q,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?E_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=E_(i),t=T_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(Q),Z(Q,t)}function Ue(){J(Q),J(ae),J(ue)}function Ut(t){t.memoizedState!==null&&Z(me,t);var i=Q.current,a=T_(i,t.type);i!==a&&(Z(ae,t),Z(Q,a))}function it(t){ae.current===t&&(J(Q),J(ae)),me.current===t&&(J(me),_l._currentValue=ye)}var Ke,an;function Lt(t){if(Ke===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ke=i&&i[1]||"",an=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ke+t+an}var Ui=!1;function Yn(t,i){if(!t||Ui)return"";Ui=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(F){var B=F}Reflect.construct(t,[],W)}else{try{W.call()}catch(F){B=F}t.call(W.prototype)}}else{try{throw Error()}catch(F){B=F}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(F){if(F&&B&&typeof F.stack=="string")return[F.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),U=b.split(`
`);for(h=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(o===N.length||h===U.length)for(o=N.length-1,h=U.length-1;1<=o&&0<=h&&N[o]!==U[h];)h--;for(;1<=o&&0<=h;o--,h--)if(N[o]!==U[h]){if(o!==1||h!==1)do if(o--,h--,0>h||N[o]!==U[h]){var K=`
`+N[o].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=o&&0<=h);break}}}finally{Ui=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Lt(a):""}function dr(t,i){switch(t.tag){case 26:case 27:case 5:return Lt(t.type);case 16:return Lt("Lazy");case 13:return t.child!==i&&i!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return Yn(t.type,!1);case 11:return Yn(t.type.render,!1);case 1:return Yn(t.type,!0);case 31:return Lt("Activity");default:return""}}function ps(t){try{var i="",a=null;do i+=dr(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var yt=Object.prototype.hasOwnProperty,mt=r.unstable_scheduleCallback,En=r.unstable_cancelCallback,Eo=r.unstable_shouldYield,gs=r.unstable_requestPaint,zt=r.unstable_now,ys=r.unstable_getCurrentPriorityLevel,To=r.unstable_ImmediatePriority,bo=r.unstable_UserBlockingPriority,mr=r.unstable_NormalPriority,Gh=r.unstable_LowPriority,cu=r.unstable_IdlePriority,hu=r.log,fu=r.unstable_setDisableYieldValue,Kn=null,Gt=null;function On(t){if(typeof hu=="function"&&fu(t),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Kn,t)}catch{}}var _t=Math.clz32?Math.clz32:mu,du=Math.log,sa=Math.LN2;function mu(t){return t>>>=0,t===0?32:31-(du(t)/sa|0)|0}var ci=256,_s=262144,St=4194304;function hi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fi(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=o&134217727;return b!==0?(o=b&~d,o!==0?h=hi(o):(_&=b,_!==0?h=hi(_):a||(a=b&~t,a!==0&&(h=hi(a))))):(b=o&~d,b!==0?h=hi(b):_!==0?h=hi(_):a||(a=o&~t,a!==0&&(h=hi(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Xn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Qh(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pu(){var t=St;return St<<=1,(St&62914560)===0&&(St=4194304),t}function di(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function vs(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Yh(t,i,a,o,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,U=t.hiddenUpdates;for(a=_&~a;0<a;){var K=31-_t(a),W=1<<K;b[K]=0,N[K]=-1;var B=U[K];if(B!==null)for(U[K]=null,K=0;K<B.length;K++){var F=B[K];F!==null&&(F.lane&=-536870913)}a&=~W}o!==0&&Es(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function Es(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-_t(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Ao(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-_t(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function So(t,i){var a=i&-i;return a=(a&42)!==0?1:Ts(a),(a&(t.suspendedLanes|i))!==0?0:a}function Ts(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function zi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function gu(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:F_(t.type))}function $n(t,i){var a=re.p;try{return re.p=t,i()}finally{re.p=a}}var Zn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Zn,qt="__reactProps$"+Zn,mi="__reactContainer$"+Zn,aa="__reactEvents$"+Zn,Kh="__reactListeners$"+Zn,yu="__reactHandles$"+Zn,_u="__reactResources$"+Zn,pi="__reactMarker$"+Zn;function oa(t){delete t[wt],delete t[qt],delete t[aa],delete t[Kh],delete t[yu]}function gi(t){var i=t[wt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[mi]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=x_(t);t!==null;){if(a=t[wt])return a;t=x_(t)}return i}t=a,a=t.parentNode}return null}function Vn(t){if(t=t[wt]||t[mi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Tn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function yi(t){var i=t[_u];return i||(i=t[_u]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(t){t[pi]=!0}var wo=new Set,Ro={};function _i(t,i){vi(t,i),vi(t+"Capture",i)}function vi(t,i){for(Ro[t]=i,t=0;t<i.length;t++)wo.add(i[t])}var Io=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xo={},No={};function vu(t){return yt.call(No,t)?!0:yt.call(xo,t)?!1:Io.test(t)?No[t]=!0:(xo[t]=!0,!1)}function la(t,i,a){if(vu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function bn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function It(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function Bt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Co(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Xe(t){if(!t._valueTracker){var i=pr(t)?"checked":"value";t._valueTracker=Co(t,i,""+t[i])}}function bs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=pr(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function Ei(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var As=/[\n"\\]/g;function hn(t){return t.replace(As,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ua(t,i,a,o,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Bt(i)):t.value!==""+Bt(i)&&(t.value=""+Bt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Do(t,_,Bt(i)):a!=null?Do(t,_,Bt(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Bt(b):t.removeAttribute("name")}function Eu(t,i,a,o,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Xe(t);return}a=a!=null?""+Bt(a):"",i=i!=null?""+Bt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=b?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Xe(t)}function Do(t,i,a){i==="number"&&Ei(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function gr(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Bt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Tu(t,i,a){if(i!=null&&(i=""+Bt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Bt(a):""}function yr(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(dt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Bt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),Xe(t)}function fn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oo(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||bu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Vo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Oo(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Oo(t,d,i[d])}function ca(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_r=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ha(t){return _r.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Jn(){}var Mo=null;function Mn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vr=null,Ti=null;function Ss(t){var i=Vn(t);if(i&&(t=i.stateNode)){var a=t[qt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ua(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[qt]||null;if(!h)throw Error(s(90));ua(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&bs(o)}break e;case"textarea":Tu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&gr(t,!!a.multiple,i,!1)}}}var fa=!1;function Er(t,i,a){if(fa)return t(i,a);fa=!0;try{var o=t(i);return o}finally{if(fa=!1,(vr!==null||Ti!==null)&&(gc(),vr&&(i=vr,t=Ti,Ti=vr=null,Ss(i),t)))for(i=0;i<t.length;i++)Ss(t[i])}}function Wn(t,i){var a=t.stateNode;if(a===null)return null;var o=a[qt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ws=!1;if(jn)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){ws=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{ws=!1}var bi=null,jo=null,Rs=null;function Lo(){if(Rs)return Rs;var t,i=jo,a=i.length,o,h="value"in bi?bi.value:bi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[d-o];o++);return Rs=h.slice(t,1<o?1-o:void 0)}function Is(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function qi(){return!0}function ei(){return!1}function Qt(t){function i(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?qi:ei,this.isPropagationStopped=ei,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),i}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=Qt(Bi),Tr=S({},Bi,{view:0,detail:0}),ko=Qt(Tr),br,da,Si,ma=S({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Si&&(Si&&t.type==="mousemove"?(br=t.screenX-Si.screenX,da=t.screenY-Si.screenY):da=br=0,Si=t),br)},movementY:function(t){return"movementY"in t?t.movementY:da}}),Po=Qt(ma),xs=S({},ma,{dataTransfer:0}),Su=Qt(xs),wu=S({},Tr,{relatedTarget:0}),Ns=Qt(wu),Uo=S({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ru=Qt(Uo),pa=S({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Iu=Qt(pa),xu=S({},Bi,{data:0}),wi=Qt(xu),Nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ou(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Du[t])?!!i[t]:!1}function Ar(){return Ou}var on=S({},Tr,{key:function(t){if(t.key){var i=Nu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Is(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(t){return t.type==="keypress"?Is(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Is(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vu=Qt(on),Mu=S({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=Qt(Mu),c=S({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar}),m=Qt(c),E=S({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Qt(E),k=S({},ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Qt(k),ie=S({},Bi,{newState:0,oldState:0}),xe=Qt(ie),vt=[9,13,27,32],Ge=jn&&"CompositionEvent"in window,ut=null;jn&&"documentMode"in document&&(ut=document.documentMode);var Ln=jn&&"TextEvent"in window&&!ut,Ri=jn&&(!Ge||ut&&8<ut&&11>=ut),ti=" ",ni=!1;function Cs(t,i){switch(t){case"keyup":return vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ga(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ya=!1;function Tb(t,i){switch(t){case"compositionend":return ga(i);case"keypress":return i.which!==32?null:(ni=!0,ti);case"textInput":return t=i.data,t===ti&&ni?null:t;default:return null}}function bb(t,i){if(ya)return t==="compositionend"||!Ge&&Cs(t,i)?(t=Lo(),Rs=jo=bi=null,ya=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var Ab={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ab[t.type]:i==="textarea"}function Op(t,i,a,o){vr?Ti?Ti.push(o):Ti=[o]:vr=o,i=Ac(i,"onChange"),0<i.length&&(a=new Ai("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var zo=null,qo=null;function Sb(t){m_(t,0)}function ju(t){var i=Tn(t);if(bs(i))return t}function Vp(t,i){if(t==="change")return i}var Mp=!1;if(jn){var Xh;if(jn){var $h="oninput"in document;if(!$h){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),$h=typeof jp.oninput=="function"}Xh=$h}else Xh=!1;Mp=Xh&&(!document.documentMode||9<document.documentMode)}function Lp(){zo&&(zo.detachEvent("onpropertychange",kp),qo=zo=null)}function kp(t){if(t.propertyName==="value"&&ju(qo)){var i=[];Op(i,qo,t,Mn(t)),Er(Sb,i)}}function wb(t,i,a){t==="focusin"?(Lp(),zo=i,qo=a,zo.attachEvent("onpropertychange",kp)):t==="focusout"&&Lp()}function Rb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(qo)}function Ib(t,i){if(t==="click")return ju(i)}function xb(t,i){if(t==="input"||t==="change")return ju(i)}function Nb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var An=typeof Object.is=="function"?Object.is:Nb;function Bo(t,i){if(An(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!yt.call(i,h)||!An(t[h],i[h]))return!1}return!0}function Pp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Up(t,i){var a=Pp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pp(a)}}function zp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?zp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function qp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ei(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ei(t.document)}return i}function Zh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Cb=jn&&"documentMode"in document&&11>=document.documentMode,_a=null,Jh=null,Ho=null,Wh=!1;function Bp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wh||_a==null||_a!==Ei(o)||(o=_a,"selectionStart"in o&&Zh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ho&&Bo(Ho,o)||(Ho=o,o=Ac(Jh,"onSelect"),0<o.length&&(i=new Ai("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=_a)))}function Ds(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var va={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionrun:Ds("Transition","TransitionRun"),transitionstart:Ds("Transition","TransitionStart"),transitioncancel:Ds("Transition","TransitionCancel"),transitionend:Ds("Transition","TransitionEnd")},ef={},Hp={};jn&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Os(t){if(ef[t])return ef[t];if(!va[t])return t;var i=va[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hp)return ef[t]=i[a];return t}var Fp=Os("animationend"),Gp=Os("animationiteration"),Qp=Os("animationstart"),Db=Os("transitionrun"),Ob=Os("transitionstart"),Vb=Os("transitioncancel"),Yp=Os("transitionend"),Kp=new Map,tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tf.push("scrollEnd");function ii(t,i){Kp.set(t,i),_i(i,[t])}var Lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},kn=[],Ea=0,nf=0;function ku(){for(var t=Ea,i=nf=Ea=0;i<t;){var a=kn[i];kn[i++]=null;var o=kn[i];kn[i++]=null;var h=kn[i];kn[i++]=null;var d=kn[i];if(kn[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&Xp(a,h,d)}}function Pu(t,i,a,o){kn[Ea++]=t,kn[Ea++]=i,kn[Ea++]=a,kn[Ea++]=o,nf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function rf(t,i,a,o){return Pu(t,i,a,o),Uu(t)}function Vs(t,i){return Pu(t,null,null,i),Uu(t)}function Xp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-_t(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Uu(t){if(50<hl)throw hl=0,dd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ta={};function Mb(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,i,a,o){return new Mb(t,i,a,o)}function sf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fi(t,i){var a=t.alternate;return a===null?(a=Sn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function $p(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function zu(t,i,a,o,h,d){var _=0;if(o=t,typeof t=="function")sf(t)&&(_=1);else if(typeof t=="string")_=U1(t,a,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Sn(31,a,i,h),t.elementType=I,t.lanes=d,t;case q:return Ms(a.children,h,d,i);case G:_=8,h|=24;break;case le:return t=Sn(12,a,i,h|2),t.elementType=le,t.lanes=d,t;case ne:return t=Sn(13,a,i,h),t.elementType=ne,t.lanes=d,t;case se:return t=Sn(19,a,i,h),t.elementType=se,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case de:_=10;break e;case fe:_=9;break e;case Se:_=11;break e;case w:_=14;break e;case R:_=16,o=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=Sn(_,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Ms(t,i,a,o){return t=Sn(7,t,o,i),t.lanes=a,t}function af(t,i,a){return t=Sn(6,t,null,i),t.lanes=a,t}function Zp(t){var i=Sn(18,null,null,0);return i.stateNode=t,i}function of(t,i,a){return i=Sn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Jp=new WeakMap;function Pn(t,i){if(typeof t=="object"&&t!==null){var a=Jp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ps(i)},Jp.set(t,i),i)}return{value:t,source:i,stack:ps(i)}}var ba=[],Aa=0,qu=null,Fo=0,Un=[],zn=0,Sr=null,Ii=1,xi="";function Gi(t,i){ba[Aa++]=Fo,ba[Aa++]=qu,qu=t,Fo=i}function Wp(t,i,a){Un[zn++]=Ii,Un[zn++]=xi,Un[zn++]=Sr,Sr=t;var o=Ii;t=xi;var h=32-_t(o)-1;o&=~(1<<h),a+=1;var d=32-_t(i)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Ii=1<<32-_t(i)+h|a<<h|o,xi=d+t}else Ii=1<<d|a<<h|o,xi=t}function lf(t){t.return!==null&&(Gi(t,1),Wp(t,1,0))}function uf(t){for(;t===qu;)qu=ba[--Aa],ba[Aa]=null,Fo=ba[--Aa],ba[Aa]=null;for(;t===Sr;)Sr=Un[--zn],Un[zn]=null,xi=Un[--zn],Un[zn]=null,Ii=Un[--zn],Un[zn]=null}function eg(t,i){Un[zn++]=Ii,Un[zn++]=xi,Un[zn++]=Sr,Ii=i.id,xi=i.overflow,Sr=t}var Yt=null,at=null,ze=!1,wr=null,qn=!1,cf=Error(s(519));function Rr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Go(Pn(i,t)),cf}function tg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[wt]=t,i[qt]=o,a){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(a=0;a<dl.length;a++)Oe(dl[a],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),Eu(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),yr(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||__(i.textContent,a)?(o.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),o.onScroll!=null&&Oe("scroll",i),o.onScrollEnd!=null&&Oe("scrollend",i),o.onClick!=null&&(i.onclick=Jn),i=!0):i=!1,i||Rr(t,!0)}function ng(t){for(Yt=t.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Yt=Yt.return}}function Sa(t){if(t!==Yt)return!1;if(!ze)return ng(t),ze=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||xd(t.type,t.memoizedProps)),a=!a),a&&at&&Rr(t),ng(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=I_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=I_(t)}else i===27?(i=at,zr(t.type)?(t=Vd,Vd=null,at=t):at=i):at=Yt?Hn(t.stateNode.nextSibling):null;return!0}function js(){at=Yt=null,ze=!1}function hf(){var t=wr;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),wr=null),t}function Go(t){wr===null?wr=[t]:wr.push(t)}var ff=V(null),Ls=null,Qi=null;function Ir(t,i,a){Z(ff,i._currentValue),i._currentValue=a}function Yi(t){t._currentValue=ff.current,J(ff)}function df(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function mf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),df(d.return,a,t),o||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),df(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function wa(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=h.type;An(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===me.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(_l):t=[_l])}h=h.return}t!==null&&mf(i,t,a,o),i.flags|=262144}function Bu(t){for(t=t.firstContext;t!==null;){if(!An(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ks(t){Ls=t,Qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return ig(Ls,t)}function Hu(t,i){return Ls===null&&ks(t),ig(t,i)}function ig(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Qi===null){if(t===null)throw Error(s(308));Qi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Qi=Qi.next=i;return a}var jb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Lb=r.unstable_scheduleCallback,kb=r.unstable_NormalPriority,xt={$$typeof:de,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new jb,data:new Map,refCount:0}}function Qo(t){t.refCount--,t.refCount===0&&Lb(kb,function(){t.controller.abort()})}var Yo=null,gf=0,Ra=0,Ia=null;function Pb(t,i){if(Yo===null){var a=Yo=[];gf=0,Ra=vd(),Ia={status:"pending",value:void 0,then:function(o){a.push(o)}}}return gf++,i.then(rg,rg),i}function rg(){if(--gf===0&&Yo!==null){Ia!==null&&(Ia.status="fulfilled");var t=Yo;Yo=null,Ra=0,Ia=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Ub(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var sg=Y.S;Y.S=function(t,i){By=zt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Pb(t,i),sg!==null&&sg(t,i)};var Ps=V(null);function yf(){var t=Ps.current;return t!==null?t:rt.pooledCache}function Fu(t,i){i===null?Z(Ps,Ps.current):Z(Ps,i.pool)}function ag(){var t=yf();return t===null?null:{parent:xt._currentValue,pool:t}}var xa=Error(s(460)),_f=Error(s(474)),Gu=Error(s(542)),Qu={then:function(){}};function og(t){return t=t.status,t==="fulfilled"||t==="rejected"}function lg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Jn,Jn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,cg(t),t;default:if(typeof i.status=="string")i.then(Jn,Jn);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,cg(t),t}throw zs=i,xa}}function Us(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zs=a,xa):a}}var zs=null;function ug(){if(zs===null)throw Error(s(459));var t=zs;return zs=null,t}function cg(t){if(t===xa||t===Gu)throw Error(s(483))}var Na=null,Ko=0;function Yu(t){var i=Ko;return Ko+=1,Na===null&&(Na=[]),lg(Na,t,i)}function Xo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ku(t,i){throw i.$$typeof===C?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function hg(t){function i(j,O){if(t){var P=j.deletions;P===null?(j.deletions=[O],j.flags|=16):P.push(O)}}function a(j,O){if(!t)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function o(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function h(j,O){return j=Fi(j,O),j.index=0,j.sibling=null,j}function d(j,O,P){return j.index=P,t?(P=j.alternate,P!==null?(P=P.index,P<O?(j.flags|=67108866,O):P):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function _(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function b(j,O,P,X){return O===null||O.tag!==6?(O=af(P,j.mode,X),O.return=j,O):(O=h(O,P),O.return=j,O)}function N(j,O,P,X){var _e=P.type;return _e===q?K(j,O,P.props.children,X,P.key):O!==null&&(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Us(_e)===O.type)?(O=h(O,P.props),Xo(O,P),O.return=j,O):(O=zu(P.type,P.key,P.props,null,j.mode,X),Xo(O,P),O.return=j,O)}function U(j,O,P,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==P.containerInfo||O.stateNode.implementation!==P.implementation?(O=of(P,j.mode,X),O.return=j,O):(O=h(O,P.children||[]),O.return=j,O)}function K(j,O,P,X,_e){return O===null||O.tag!==7?(O=Ms(P,j.mode,X,_e),O.return=j,O):(O=h(O,P),O.return=j,O)}function W(j,O,P){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=af(""+O,j.mode,P),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case z:return P=zu(O.type,O.key,O.props,null,j.mode,P),Xo(P,O),P.return=j,P;case ee:return O=of(O,j.mode,P),O.return=j,O;case R:return O=Us(O),W(j,O,P)}if(dt(O)||L(O))return O=Ms(O,j.mode,P,null),O.return=j,O;if(typeof O.then=="function")return W(j,Yu(O),P);if(O.$$typeof===de)return W(j,Hu(j,O),P);Ku(j,O)}return null}function B(j,O,P,X){var _e=O!==null?O.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return _e!==null?null:b(j,O,""+P,X);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case z:return P.key===_e?N(j,O,P,X):null;case ee:return P.key===_e?U(j,O,P,X):null;case R:return P=Us(P),B(j,O,P,X)}if(dt(P)||L(P))return _e!==null?null:K(j,O,P,X,null);if(typeof P.then=="function")return B(j,O,Yu(P),X);if(P.$$typeof===de)return B(j,O,Hu(j,P),X);Ku(j,P)}return null}function F(j,O,P,X,_e){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return j=j.get(P)||null,b(O,j,""+X,_e);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case z:return j=j.get(X.key===null?P:X.key)||null,N(O,j,X,_e);case ee:return j=j.get(X.key===null?P:X.key)||null,U(O,j,X,_e);case R:return X=Us(X),F(j,O,P,X,_e)}if(dt(X)||L(X))return j=j.get(P)||null,K(O,j,X,_e,null);if(typeof X.then=="function")return F(j,O,P,Yu(X),_e);if(X.$$typeof===de)return F(j,O,P,Hu(O,X),_e);Ku(O,X)}return null}function he(j,O,P,X){for(var _e=null,Be=null,pe=O,Ce=O=0,Me=null;pe!==null&&Ce<P.length;Ce++){pe.index>Ce?(Me=pe,pe=null):Me=pe.sibling;var He=B(j,pe,P[Ce],X);if(He===null){pe===null&&(pe=Me);break}t&&pe&&He.alternate===null&&i(j,pe),O=d(He,O,Ce),Be===null?_e=He:Be.sibling=He,Be=He,pe=Me}if(Ce===P.length)return a(j,pe),ze&&Gi(j,Ce),_e;if(pe===null){for(;Ce<P.length;Ce++)pe=W(j,P[Ce],X),pe!==null&&(O=d(pe,O,Ce),Be===null?_e=pe:Be.sibling=pe,Be=pe);return ze&&Gi(j,Ce),_e}for(pe=o(pe);Ce<P.length;Ce++)Me=F(pe,j,Ce,P[Ce],X),Me!==null&&(t&&Me.alternate!==null&&pe.delete(Me.key===null?Ce:Me.key),O=d(Me,O,Ce),Be===null?_e=Me:Be.sibling=Me,Be=Me);return t&&pe.forEach(function(Gr){return i(j,Gr)}),ze&&Gi(j,Ce),_e}function Ee(j,O,P,X){if(P==null)throw Error(s(151));for(var _e=null,Be=null,pe=O,Ce=O=0,Me=null,He=P.next();pe!==null&&!He.done;Ce++,He=P.next()){pe.index>Ce?(Me=pe,pe=null):Me=pe.sibling;var Gr=B(j,pe,He.value,X);if(Gr===null){pe===null&&(pe=Me);break}t&&pe&&Gr.alternate===null&&i(j,pe),O=d(Gr,O,Ce),Be===null?_e=Gr:Be.sibling=Gr,Be=Gr,pe=Me}if(He.done)return a(j,pe),ze&&Gi(j,Ce),_e;if(pe===null){for(;!He.done;Ce++,He=P.next())He=W(j,He.value,X),He!==null&&(O=d(He,O,Ce),Be===null?_e=He:Be.sibling=He,Be=He);return ze&&Gi(j,Ce),_e}for(pe=o(pe);!He.done;Ce++,He=P.next())He=F(pe,j,Ce,He.value,X),He!==null&&(t&&He.alternate!==null&&pe.delete(He.key===null?Ce:He.key),O=d(He,O,Ce),Be===null?_e=He:Be.sibling=He,Be=He);return t&&pe.forEach(function($1){return i(j,$1)}),ze&&Gi(j,Ce),_e}function tt(j,O,P,X){if(typeof P=="object"&&P!==null&&P.type===q&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case z:e:{for(var _e=P.key;O!==null;){if(O.key===_e){if(_e=P.type,_e===q){if(O.tag===7){a(j,O.sibling),X=h(O,P.props.children),X.return=j,j=X;break e}}else if(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Us(_e)===O.type){a(j,O.sibling),X=h(O,P.props),Xo(X,P),X.return=j,j=X;break e}a(j,O);break}else i(j,O);O=O.sibling}P.type===q?(X=Ms(P.props.children,j.mode,X,P.key),X.return=j,j=X):(X=zu(P.type,P.key,P.props,null,j.mode,X),Xo(X,P),X.return=j,j=X)}return _(j);case ee:e:{for(_e=P.key;O!==null;){if(O.key===_e)if(O.tag===4&&O.stateNode.containerInfo===P.containerInfo&&O.stateNode.implementation===P.implementation){a(j,O.sibling),X=h(O,P.children||[]),X.return=j,j=X;break e}else{a(j,O);break}else i(j,O);O=O.sibling}X=of(P,j.mode,X),X.return=j,j=X}return _(j);case R:return P=Us(P),tt(j,O,P,X)}if(dt(P))return he(j,O,P,X);if(L(P)){if(_e=L(P),typeof _e!="function")throw Error(s(150));return P=_e.call(P),Ee(j,O,P,X)}if(typeof P.then=="function")return tt(j,O,Yu(P),X);if(P.$$typeof===de)return tt(j,O,Hu(j,P),X);Ku(j,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,O!==null&&O.tag===6?(a(j,O.sibling),X=h(O,P),X.return=j,j=X):(a(j,O),X=af(P,j.mode,X),X.return=j,j=X),_(j)):a(j,O)}return function(j,O,P,X){try{Ko=0;var _e=tt(j,O,P,X);return Na=null,_e}catch(pe){if(pe===xa||pe===Gu)throw pe;var Be=Sn(29,pe,null,j.mode);return Be.lanes=X,Be.return=j,Be}finally{}}}var qs=hg(!0),fg=hg(!1),xr=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ef(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Nr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Cr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Qe&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Uu(t),Xp(t,null,a),i}return Pu(t,o,i,a),Uu(t)}function $o(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Ao(t,a)}}function Tf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var bf=!1;function Zo(){if(bf){var t=Ia;if(t!==null)throw t}}function Jo(t,i,a,o){bf=!1;var h=t.updateQueue;xr=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,U=N.next;N.next=null,_===null?d=U:_.next=U,_=N;var K=t.alternate;K!==null&&(K=K.updateQueue,b=K.lastBaseUpdate,b!==_&&(b===null?K.firstBaseUpdate=U:b.next=U,K.lastBaseUpdate=N))}if(d!==null){var W=h.baseState;_=0,K=U=N=null,b=d;do{var B=b.lane&-536870913,F=B!==b.lane;if(F?(Ve&B)===B:(o&B)===B){B!==0&&B===Ra&&(bf=!0),K!==null&&(K=K.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=t,Ee=b;B=i;var tt=a;switch(Ee.tag){case 1:if(he=Ee.payload,typeof he=="function"){W=he.call(tt,W,B);break e}W=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ee.payload,B=typeof he=="function"?he.call(tt,W,B):he,B==null)break e;W=S({},W,B);break e;case 2:xr=!0}}B=b.callback,B!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[B]:F.push(B))}else F={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},K===null?(U=K=F,N=W):K=K.next=F,_|=B;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;F=b,b=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);K===null&&(N=W),h.baseState=N,h.firstBaseUpdate=U,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),jr|=_,t.lanes=_,t.memoizedState=W}}function dg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function mg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)dg(a[t],i)}var Ca=V(null),Xu=V(0);function pg(t,i){t=nr,Z(Xu,t),Z(Ca,i),nr=t|i.baseLanes}function Af(){Z(Xu,nr),Z(Ca,Ca.current)}function Sf(){nr=Xu.current,J(Ca),J(Xu)}var wn=V(null),Bn=null;function Dr(t){var i=t.alternate;Z(Et,Et.current&1),Z(wn,t),Bn===null&&(i===null||Ca.current!==null||i.memoizedState!==null)&&(Bn=t)}function wf(t){Z(Et,Et.current),Z(wn,t),Bn===null&&(Bn=t)}function gg(t){t.tag===22?(Z(Et,Et.current),Z(wn,t),Bn===null&&(Bn=t)):Or()}function Or(){Z(Et,Et.current),Z(wn,wn.current)}function Rn(t){J(wn),Bn===t&&(Bn=null),J(Et)}var Et=V(0);function $u(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Dd(a)||Od(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ki=0,Ne=null,We=null,Nt=null,Zu=!1,Da=!1,Bs=!1,Ju=0,Wo=0,Oa=null,zb=0;function pt(){throw Error(s(321))}function Rf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!An(t[a],i[a]))return!1;return!0}function If(t,i,a,o,h,d){return Ki=d,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=t===null||t.memoizedState===null?Wg:Bf,Bs=!1,d=a(o,h),Bs=!1,Da&&(d=_g(i,a,o,h)),yg(t),d}function yg(t){Y.H=nl;var i=We!==null&&We.next!==null;if(Ki=0,Nt=We=Ne=null,Zu=!1,Wo=0,Oa=null,i)throw Error(s(300));t===null||Ct||(t=t.dependencies,t!==null&&Bu(t)&&(Ct=!0))}function _g(t,i,a,o){Ne=t;var h=0;do{if(Da&&(Oa=null),Wo=0,Da=!1,25<=h)throw Error(s(301));if(h+=1,Nt=We=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=ey,d=i(a,o)}while(Da);return d}function qb(){var t=Y.H,i=t.useState()[0];return i=typeof i.then=="function"?el(i):i,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(Ne.flags|=1024),i}function xf(){var t=Ju!==0;return Ju=0,t}function Nf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Cf(t){if(Zu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Zu=!1}Ki=0,Nt=We=Ne=null,Da=!1,Wo=Ju=0,Oa=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ne.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Tt(){if(We===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var i=Nt===null?Ne.memoizedState:Nt.next;if(i!==null)Nt=i,We=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Nt===null?Ne.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(t){var i=Wo;return Wo+=1,Oa===null&&(Oa=[]),t=lg(Oa,t,i),i=Ne,(Nt===null?i.memoizedState:Nt.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Wg:Bf),t}function ec(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return el(t);if(t.$$typeof===de)return Kt(t)}throw Error(s(438,String(t)))}function Df(t){var i=null,a=Ne.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Wu(),Ne.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=M;return i.index++,a}function Xi(t,i){return typeof i=="function"?i(t):i}function tc(t){var i=Tt();return Of(i,We,t)}function Of(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=_=null,N=null,U=i,K=!1;do{var W=U.lane&-536870913;if(W!==U.lane?(Ve&W)===W:(Ki&W)===W){var B=U.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),W===Ra&&(K=!0);else if((Ki&B)===B){U=U.next,B===Ra&&(K=!0);continue}else W={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(b=N=W,_=d):N=N.next=W,Ne.lanes|=B,jr|=B;W=U.action,Bs&&a(d,W),d=U.hasEagerState?U.eagerState:a(d,W)}else B={lane:W,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(b=N=B,_=d):N=N.next=B,Ne.lanes|=W,jr|=W;U=U.next}while(U!==null&&U!==i);if(N===null?_=d:N.next=b,!An(d,t.memoizedState)&&(Ct=!0,K&&(a=Ia,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Vf(t){var i=Tt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);An(d,i.memoizedState)||(Ct=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function vg(t,i,a){var o=Ne,h=Tt(),d=ze;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!An((We||h).memoizedState,a);if(_&&(h.memoizedState=a,Ct=!0),h=h.queue,Lf(bg.bind(null,o,h,t),[t]),h.getSnapshot!==i||_||Nt!==null&&Nt.memoizedState.tag&1){if(o.flags|=2048,Va(9,{destroy:void 0},Tg.bind(null,o,h,a,i),null),rt===null)throw Error(s(349));d||(Ki&127)!==0||Eg(o,i,a)}return a}function Eg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ne.updateQueue,i===null?(i=Wu(),Ne.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Tg(t,i,a,o){i.value=a,i.getSnapshot=o,Ag(i)&&Sg(t)}function bg(t,i,a){return a(function(){Ag(i)&&Sg(t)})}function Ag(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!An(t,a)}catch{return!0}}function Sg(t){var i=Vs(t,2);i!==null&&yn(i,t,2)}function Mf(t){var i=ln();if(typeof t=="function"){var a=t;if(t=a(),Bs){On(!0);try{a()}finally{On(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:t},i}function wg(t,i,a,o){return t.baseState=a,Of(t,We,typeof o=="function"?o:Xi)}function Bb(t,i,a,o,h){if(rc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Y.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Rg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Rg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=Y.T,_={};Y.T=_;try{var b=a(h,o),N=Y.S;N!==null&&N(_,b),Ig(t,i,b)}catch(U){jf(t,i,U)}finally{d!==null&&_.types!==null&&(d.types=_.types),Y.T=d}}else try{d=a(h,o),Ig(t,i,d)}catch(U){jf(t,i,U)}}function Ig(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){xg(t,i,o)},function(o){return jf(t,i,o)}):xg(t,i,a)}function xg(t,i,a){i.status="fulfilled",i.value=a,Ng(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Rg(t,a)))}function jf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Ng(i),i=i.next;while(i!==o)}t.action=null}function Ng(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Cg(t,i){return i}function Dg(t,i){if(ze){var a=rt.formState;if(a!==null){e:{var o=Ne;if(ze){if(at){t:{for(var h=at,d=qn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Hn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){at=Hn(h.nextSibling),o=h.data==="F!";break e}}Rr(o)}o=!1}o&&(i=a[0])}}return a=ln(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cg,lastRenderedState:i},a.queue=o,a=$g.bind(null,Ne,o),o.dispatch=a,o=Mf(!1),d=qf.bind(null,Ne,!1,o.queue),o=ln(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=Bb.bind(null,Ne,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Og(t){var i=Tt();return Vg(i,We,t)}function Vg(t,i,a){if(i=Of(t,i,Cg)[0],t=tc(Xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=el(i)}catch(_){throw _===xa?Gu:_}else o=i;i=Tt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ne.flags|=2048,Va(9,{destroy:void 0},Hb.bind(null,h,a),null)),[o,d,t]}function Hb(t,i){t.action=i}function Mg(t){var i=Tt(),a=We;if(a!==null)return Vg(i,a,t);Tt(),i=i.memoizedState,a=Tt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Va(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=Wu(),Ne.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function jg(){return Tt().memoizedState}function nc(t,i,a,o){var h=ln();Ne.flags|=t,h.memoizedState=Va(1|i,{destroy:void 0},a,o===void 0?null:o)}function ic(t,i,a,o){var h=Tt();o=o===void 0?null:o;var d=h.memoizedState.inst;We!==null&&o!==null&&Rf(o,We.memoizedState.deps)?h.memoizedState=Va(i,d,a,o):(Ne.flags|=t,h.memoizedState=Va(1|i,d,a,o))}function Lg(t,i){nc(8390656,8,t,i)}function Lf(t,i){ic(2048,8,t,i)}function Fb(t){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=Wu(),Ne.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function kg(t){var i=Tt().memoizedState;return Fb({ref:i,nextImpl:t}),function(){if((Qe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Pg(t,i){return ic(4,2,t,i)}function Ug(t,i){return ic(4,4,t,i)}function zg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function qg(t,i,a){a=a!=null?a.concat([t]):null,ic(4,4,zg.bind(null,i,t),a)}function kf(){}function Bg(t,i){var a=Tt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Rf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Hg(t,i){var a=Tt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Rf(i,o[1]))return o[0];if(o=t(),Bs){On(!0);try{t()}finally{On(!1)}}return a.memoizedState=[o,i],o}function Pf(t,i,a){return a===void 0||(Ki&1073741824)!==0&&(Ve&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Fy(),Ne.lanes|=t,jr|=t,a)}function Fg(t,i,a,o){return An(a,i)?a:Ca.current!==null?(t=Pf(t,a,o),An(t,i)||(Ct=!0),t):(Ki&42)===0||(Ki&1073741824)!==0&&(Ve&261930)===0?(Ct=!0,t.memoizedState=a):(t=Fy(),Ne.lanes|=t,jr|=t,i)}function Gg(t,i,a,o,h){var d=re.p;re.p=d!==0&&8>d?d:8;var _=Y.T,b={};Y.T=b,qf(t,!1,i,a);try{var N=h(),U=Y.S;if(U!==null&&U(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var K=Ub(N,o);tl(t,i,K,Nn(t))}else tl(t,i,o,Nn(t))}catch(W){tl(t,i,{then:function(){},status:"rejected",reason:W},Nn())}finally{re.p=d,_!==null&&b.types!==null&&(_.types=b.types),Y.T=_}}function Gb(){}function Uf(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=Qg(t).queue;Gg(t,h,i,ye,a===null?Gb:function(){return Yg(t),a(o)})}function Qg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:ye},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Yg(t){var i=Qg(t);i.next===null&&(i=t.alternate.memoizedState),tl(t,i.next.queue,{},Nn())}function zf(){return Kt(_l)}function Kg(){return Tt().memoizedState}function Xg(){return Tt().memoizedState}function Qb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Nn();t=Nr(a);var o=Cr(i,t,a);o!==null&&(yn(o,i,a),$o(o,i,a)),i={cache:pf()},t.payload=i;return}i=i.return}}function Yb(t,i,a){var o=Nn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},rc(t)?Zg(i,a):(a=rf(t,i,a,o),a!==null&&(yn(a,t,o),Jg(a,i,o)))}function $g(t,i,a){var o=Nn();tl(t,i,a,o)}function tl(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(rc(t))Zg(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,An(b,_))return Pu(t,i,h,0),rt===null&&ku(),!1}catch{}finally{}if(a=rf(t,i,h,o),a!==null)return yn(a,t,o),Jg(a,i,o),!0}return!1}function qf(t,i,a,o){if(o={lane:2,revertLane:vd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},rc(t)){if(i)throw Error(s(479))}else i=rf(t,a,o,2),i!==null&&yn(i,t,2)}function rc(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function Zg(t,i){Da=Zu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Jg(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Ao(t,a)}}var nl={readContext:Kt,use:ec,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};nl.useEffectEvent=pt;var Wg={readContext:Kt,use:ec,useCallback:function(t,i){return ln().memoizedState=[t,i===void 0?null:i],t},useContext:Kt,useEffect:Lg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,nc(4194308,4,zg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return nc(4194308,4,t,i)},useInsertionEffect:function(t,i){nc(4,2,t,i)},useMemo:function(t,i){var a=ln();i=i===void 0?null:i;var o=t();if(Bs){On(!0);try{t()}finally{On(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=ln();if(a!==void 0){var h=a(i);if(Bs){On(!0);try{a(i)}finally{On(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Yb.bind(null,Ne,t),[o.memoizedState,t]},useRef:function(t){var i=ln();return t={current:t},i.memoizedState=t},useState:function(t){t=Mf(t);var i=t.queue,a=$g.bind(null,Ne,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:kf,useDeferredValue:function(t,i){var a=ln();return Pf(a,t,i)},useTransition:function(){var t=Mf(!1);return t=Gg.bind(null,Ne,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Ne,h=ln();if(ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),rt===null)throw Error(s(349));(Ve&127)!==0||Eg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Lg(bg.bind(null,o,d,t),[t]),o.flags|=2048,Va(9,{destroy:void 0},Tg.bind(null,o,d,a,i),null),a},useId:function(){var t=ln(),i=rt.identifierPrefix;if(ze){var a=xi,o=Ii;a=(o&~(1<<32-_t(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Ju++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=zb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:zf,useFormState:Dg,useActionState:Dg,useOptimistic:function(t){var i=ln();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=qf.bind(null,Ne,!0,a),a.dispatch=i,[t,i]},useMemoCache:Df,useCacheRefresh:function(){return ln().memoizedState=Qb.bind(null,Ne)},useEffectEvent:function(t){var i=ln(),a={impl:t};return i.memoizedState=a,function(){if((Qe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Bf={readContext:Kt,use:ec,useCallback:Bg,useContext:Kt,useEffect:Lf,useImperativeHandle:qg,useInsertionEffect:Pg,useLayoutEffect:Ug,useMemo:Hg,useReducer:tc,useRef:jg,useState:function(){return tc(Xi)},useDebugValue:kf,useDeferredValue:function(t,i){var a=Tt();return Fg(a,We.memoizedState,t,i)},useTransition:function(){var t=tc(Xi)[0],i=Tt().memoizedState;return[typeof t=="boolean"?t:el(t),i]},useSyncExternalStore:vg,useId:Kg,useHostTransitionStatus:zf,useFormState:Og,useActionState:Og,useOptimistic:function(t,i){var a=Tt();return wg(a,We,t,i)},useMemoCache:Df,useCacheRefresh:Xg};Bf.useEffectEvent=kg;var ey={readContext:Kt,use:ec,useCallback:Bg,useContext:Kt,useEffect:Lf,useImperativeHandle:qg,useInsertionEffect:Pg,useLayoutEffect:Ug,useMemo:Hg,useReducer:Vf,useRef:jg,useState:function(){return Vf(Xi)},useDebugValue:kf,useDeferredValue:function(t,i){var a=Tt();return We===null?Pf(a,t,i):Fg(a,We.memoizedState,t,i)},useTransition:function(){var t=Vf(Xi)[0],i=Tt().memoizedState;return[typeof t=="boolean"?t:el(t),i]},useSyncExternalStore:vg,useId:Kg,useHostTransitionStatus:zf,useFormState:Mg,useActionState:Mg,useOptimistic:function(t,i){var a=Tt();return We!==null?wg(a,We,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Df,useCacheRefresh:Xg};ey.useEffectEvent=kg;function Hf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ff={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Nn(),h=Nr(o);h.payload=i,a!=null&&(h.callback=a),i=Cr(t,h,o),i!==null&&(yn(i,t,o),$o(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Nn(),h=Nr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Cr(t,h,o),i!==null&&(yn(i,t,o),$o(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Nn(),o=Nr(a);o.tag=2,i!=null&&(o.callback=i),i=Cr(t,o,a),i!==null&&(yn(i,t,a),$o(i,t,a))}};function ty(t,i,a,o,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,_):i.prototype&&i.prototype.isPureReactComponent?!Bo(a,o)||!Bo(h,d):!0}function ny(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Ff.enqueueReplaceState(i,i.state,null)}function Hs(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function iy(t){Lu(t)}function ry(t){console.error(t)}function sy(t){Lu(t)}function sc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ay(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Gf(t,i,a){return a=Nr(a),a.tag=3,a.payload={element:null},a.callback=function(){sc(t,i)},a}function oy(t){return t=Nr(t),t.tag=3,t}function ly(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){ay(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){ay(i,a,o),typeof h!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})})}function Kb(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&wa(i,a,h,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Bn===null?yc():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Qu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),gd(t,o,h)),!1;case 22:return a.flags|=65536,o===Qu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),gd(t,o,h)),!1}throw Error(s(435,a.tag))}return gd(t,o,h),yc(),!1}if(ze)return i=wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==cf&&(t=Error(s(422),{cause:o}),Go(Pn(t,a)))):(o!==cf&&(i=Error(s(423),{cause:o}),Go(Pn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Pn(o,a),h=Gf(t.stateNode,o,h),Tf(t,h),gt!==4&&(gt=2)),!1;var d=Error(s(520),{cause:o});if(d=Pn(d,a),cl===null?cl=[d]:cl.push(d),gt!==4&&(gt=2),i===null)return!0;o=Pn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Gf(a.stateNode,o,t),Tf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Lr===null||!Lr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=oy(h),ly(h,t,a,o),Tf(a,h),!1}a=a.return}while(a!==null);return!1}var Qf=Error(s(461)),Ct=!1;function Xt(t,i,a,o){i.child=t===null?fg(i,null,a,o):qs(i,t.child,a,o)}function uy(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var _={};for(var b in o)b!=="ref"&&(_[b]=o[b])}else _=o;return ks(i),o=If(t,i,a,_,d,h),b=xf(),t!==null&&!Ct?(Nf(t,i,h),$i(t,i,h)):(ze&&b&&lf(i),i.flags|=1,Xt(t,i,o,h),i.child)}function cy(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!sf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,hy(t,i,d,o,h)):(t=zu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!ed(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Bo,a(_,o)&&t.ref===i.ref)return $i(t,i,h)}return i.flags|=1,t=Fi(d,o),t.ref=i.ref,t.return=i,i.child=t}function hy(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Bo(d,o)&&t.ref===i.ref)if(Ct=!1,i.pendingProps=o=d,ed(t,h))(t.flags&131072)!==0&&(Ct=!0);else return i.lanes=t.lanes,$i(t,i,h)}return Yf(t,i,a,o,h)}function fy(t,i,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return dy(t,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fu(i,d!==null?d.cachePool:null),d!==null?pg(i,d):Af(),gg(i);else return o=i.lanes=536870912,dy(t,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Fu(i,d.cachePool),pg(i,d),Or(),i.memoizedState=null):(t!==null&&Fu(i,null),Af(),Or());return Xt(t,i,h,a),i.child}function il(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function dy(t,i,a,o,h){var d=yf();return d=d===null?null:{parent:xt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Fu(i,null),Af(),gg(i),t!==null&&wa(t,i,o,!0),i.childLanes=h,null}function ac(t,i){return i=lc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function my(t,i,a){return qs(i,t.child,null,a),t=ac(i,i.pendingProps),t.flags|=2,Rn(i),i.memoizedState=null,t}function Xb(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(ze){if(o.mode==="hidden")return t=ac(i,o),i.lanes=536870912,il(null,t);if(wf(i),(t=at)?(t=R_(t,qn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Sr!==null?{id:Ii,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=Zp(t),a.return=i,i.child=a,Yt=i,at=null)):t=null,t===null)throw Rr(i);return i.lanes=536870912,null}return ac(i,o)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(wf(i),h)if(i.flags&256)i.flags&=-257,i=my(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Ct||wa(t,i,a,!1),h=(a&t.childLanes)!==0,Ct||h){if(o=rt,o!==null&&(_=So(o,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Vs(t,_),yn(o,t,_),Qf;yc(),i=my(t,i,a)}else t=d.treeContext,at=Hn(_.nextSibling),Yt=i,ze=!0,wr=null,qn=!1,t!==null&&eg(i,t),i=ac(i,o),i.flags|=4096;return i}return t=Fi(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function oc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Yf(t,i,a,o,h){return ks(i),a=If(t,i,a,o,void 0,h),o=xf(),t!==null&&!Ct?(Nf(t,i,h),$i(t,i,h)):(ze&&o&&lf(i),i.flags|=1,Xt(t,i,a,h),i.child)}function py(t,i,a,o,h,d){return ks(i),i.updateQueue=null,a=_g(i,o,a,h),yg(t),o=xf(),t!==null&&!Ct?(Nf(t,i,d),$i(t,i,d)):(ze&&o&&lf(i),i.flags|=1,Xt(t,i,a,d),i.child)}function gy(t,i,a,o,h){if(ks(i),i.stateNode===null){var d=Ta,_=a.contextType;typeof _=="object"&&_!==null&&(d=Kt(_)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ff,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},vf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Kt(_):Ta,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Hf(i,a,_,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Ff.enqueueReplaceState(d,d.state,null),Jo(i,o,d,h),Zo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=Hs(a,b);d.props=N;var U=d.context,K=a.contextType;_=Ta,typeof K=="object"&&K!==null&&(_=Kt(K));var W=a.getDerivedStateFromProps;K=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||U!==_)&&ny(i,d,o,_),xr=!1;var B=i.memoizedState;d.state=B,Jo(i,o,d,h),Zo(),U=i.memoizedState,b||B!==U||xr?(typeof W=="function"&&(Hf(i,a,W,o),U=i.memoizedState),(N=xr||ty(i,a,N,o,B,U,_))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=U),d.props=o,d.state=U,d.context=_,o=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Ef(t,i),_=i.memoizedProps,K=Hs(a,_),d.props=K,W=i.pendingProps,B=d.context,U=a.contextType,N=Ta,typeof U=="object"&&U!==null&&(N=Kt(U)),b=a.getDerivedStateFromProps,(U=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==W||B!==N)&&ny(i,d,o,N),xr=!1,B=i.memoizedState,d.state=B,Jo(i,o,d,h),Zo();var F=i.memoizedState;_!==W||B!==F||xr||t!==null&&t.dependencies!==null&&Bu(t.dependencies)?(typeof b=="function"&&(Hf(i,a,b,o),F=i.memoizedState),(K=xr||ty(i,a,K,o,B,F,N)||t!==null&&t.dependencies!==null&&Bu(t.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,F,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,F,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=F),d.props=o,d.state=F,d.context=N,o=K):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,oc(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=qs(i,t.child,null,h),i.child=qs(i,null,a,h)):Xt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=$i(t,i,h),t}function yy(t,i,a,o){return js(),i.flags|=256,Xt(t,i,a,o),i.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(t){return{baseLanes:t,cachePool:ag()}}function $f(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=xn),t}function _y(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Et.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(ze){if(h?Dr(i):Or(),(t=at)?(t=R_(t,qn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Sr!==null?{id:Ii,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=Zp(t),a.return=i,i.child=a,Yt=i,at=null)):t=null,t===null)throw Rr(i);return Od(t)?i.lanes=32:i.lanes=536870912,null}var b=o.children;return o=o.fallback,h?(Or(),h=i.mode,b=lc({mode:"hidden",children:b},h),o=Ms(o,h,a,null),b.return=i,o.return=i,b.sibling=o,i.child=b,o=i.child,o.memoizedState=Xf(a),o.childLanes=$f(t,_,a),i.memoizedState=Kf,il(null,o)):(Dr(i),Zf(i,b))}var N=t.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Dr(i),i.flags&=-257,i=Jf(t,i,a)):i.memoizedState!==null?(Or(),i.child=t.child,i.flags|=128,i=null):(Or(),b=o.fallback,h=i.mode,o=lc({mode:"visible",children:o.children},h),b=Ms(b,h,a,null),b.flags|=2,o.return=i,b.return=i,o.sibling=b,i.child=o,qs(i,t.child,null,a),o=i.child,o.memoizedState=Xf(a),o.childLanes=$f(t,_,a),i.memoizedState=Kf,i=il(null,o));else if(Dr(i),Od(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var U=_.dgst;_=U,o=Error(s(419)),o.stack="",o.digest=_,Go({value:o,source:null,stack:null}),i=Jf(t,i,a)}else if(Ct||wa(t,i,a,!1),_=(a&t.childLanes)!==0,Ct||_){if(_=rt,_!==null&&(o=So(_,a),o!==0&&o!==N.retryLane))throw N.retryLane=o,Vs(t,o),yn(_,t,o),Qf;Dd(b)||yc(),i=Jf(t,i,a)}else Dd(b)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,at=Hn(b.nextSibling),Yt=i,ze=!0,wr=null,qn=!1,t!==null&&eg(i,t),i=Zf(i,o.children),i.flags|=4096);return i}return h?(Or(),b=o.fallback,h=i.mode,N=t.child,U=N.sibling,o=Fi(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,U!==null?b=Fi(U,b):(b=Ms(b,h,a,null),b.flags|=2),b.return=i,o.return=i,o.sibling=b,i.child=o,il(null,o),o=i.child,b=t.child.memoizedState,b===null?b=Xf(a):(h=b.cachePool,h!==null?(N=xt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=ag(),b={baseLanes:b.baseLanes|a,cachePool:h}),o.memoizedState=b,o.childLanes=$f(t,_,a),i.memoizedState=Kf,il(t.child,o)):(Dr(i),a=t.child,t=a.sibling,a=Fi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Zf(t,i){return i=lc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function lc(t,i){return t=Sn(22,t,null,i),t.lanes=0,t}function Jf(t,i,a){return qs(i,t.child,null,a),t=Zf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function vy(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),df(t.return,i,a)}function Wf(t,i,a,o,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Ey(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var _=Et.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,Z(Et,_),Xt(t,i,o,a),o=ze?Fo:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vy(t,a,i);else if(t.tag===19)vy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&$u(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Wf(i,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&$u(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Wf(i,!0,a,null,d,o);break;case"together":Wf(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function $i(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),jr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(wa(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Fi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Fi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function ed(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Bu(t)))}function $b(t,i,a){switch(i.tag){case 3:Te(i,i.stateNode.containerInfo),Ir(i,xt,t.memoizedState.cache),js();break;case 27:case 5:Ut(i);break;case 4:Te(i,i.stateNode.containerInfo);break;case 10:Ir(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,wf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Dr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?_y(t,i,a):(Dr(i),t=$i(t,i,a),t!==null?t.sibling:null);Dr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(wa(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Ey(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Z(Et,Et.current),o)break;return null;case 22:return i.lanes=0,fy(t,i,a,i.pendingProps);case 24:Ir(i,xt,t.memoizedState.cache)}return $i(t,i,a)}function Ty(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Ct=!0;else{if(!ed(t,a)&&(i.flags&128)===0)return Ct=!1,$b(t,i,a);Ct=(t.flags&131072)!==0}else Ct=!1,ze&&(i.flags&1048576)!==0&&Wp(i,Fo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=Us(i.elementType),i.type=t,typeof t=="function")sf(t)?(o=Hs(t,o),i.tag=1,i=gy(null,i,t,o,a)):(i.tag=0,i=Yf(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===Se){i.tag=11,i=uy(null,i,t,o,a);break e}else if(h===w){i.tag=14,i=cy(null,i,t,o,a);break e}}throw i=nt(t)||t,Error(s(306,i,""))}}return i;case 0:return Yf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Hs(o,i.pendingProps),gy(t,i,o,h,a);case 3:e:{if(Te(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Ef(t,i),Jo(i,o,null,a);var _=i.memoizedState;if(o=_.cache,Ir(i,xt,o),o!==d.cache&&mf(i,[xt],a,!0),Zo(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=yy(t,i,o,a);break e}else if(o!==h){h=Pn(Error(s(424)),i),Go(h),i=yy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=Hn(t.firstChild),Yt=i,ze=!0,wr=null,qn=!0,a=fg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(js(),o===h){i=$i(t,i,a);break e}Xt(t,i,o,a)}i=i.child}return i;case 26:return oc(t,i),t===null?(a=O_(i.type,null,i.pendingProps,null))?i.memoizedState=a:ze||(a=i.type,t=i.pendingProps,o=Sc(ue.current).createElement(a),o[wt]=i,o[qt]=t,$t(o,a,t),Rt(o),i.stateNode=o):i.memoizedState=O_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ut(i),t===null&&ze&&(o=i.stateNode=N_(i.type,i.pendingProps,ue.current),Yt=i,qn=!0,h=at,zr(i.type)?(Vd=h,at=Hn(o.firstChild)):at=h),Xt(t,i,i.pendingProps.children,a),oc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&ze&&((h=o=at)&&(o=R1(o,i.type,i.pendingProps,qn),o!==null?(i.stateNode=o,Yt=i,at=Hn(o.firstChild),qn=!1,h=!0):h=!1),h||Rr(i)),Ut(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,o=d.children,xd(h,d)?o=null:_!==null&&xd(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=If(t,i,qb,null,null,a),_l._currentValue=h),oc(t,i),Xt(t,i,o,a),i.child;case 6:return t===null&&ze&&((t=a=at)&&(a=I1(a,i.pendingProps,qn),a!==null?(i.stateNode=a,Yt=i,at=null,t=!0):t=!1),t||Rr(i)),null;case 13:return _y(t,i,a);case 4:return Te(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=qs(i,null,o,a):Xt(t,i,o,a),i.child;case 11:return uy(t,i,i.type,i.pendingProps,a);case 7:return Xt(t,i,i.pendingProps,a),i.child;case 8:return Xt(t,i,i.pendingProps.children,a),i.child;case 12:return Xt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Ir(i,i.type,o.value),Xt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,ks(i),h=Kt(h),o=o(h),i.flags|=1,Xt(t,i,o,a),i.child;case 14:return cy(t,i,i.type,i.pendingProps,a);case 15:return hy(t,i,i.type,i.pendingProps,a);case 19:return Ey(t,i,a);case 31:return Xb(t,i,a);case 22:return fy(t,i,a,i.pendingProps);case 24:return ks(i),o=Kt(xt),t===null?(h=yf(),h===null&&(h=rt,d=pf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},vf(i),Ir(i,xt,h)):((t.lanes&a)!==0&&(Ef(t,i),Jo(i,null,null,a),Zo()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ir(i,xt,o)):(o=d.cache,Ir(i,xt,o),o!==h.cache&&mf(i,[xt],a,!0))),Xt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Zi(t){t.flags|=4}function td(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Ky())t.flags|=8192;else throw zs=Qu,_f}else t.flags&=-16777217}function by(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!k_(i))if(Ky())t.flags|=8192;else throw zs=Qu,_f}function uc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?pu():536870912,t.lanes|=i,ka|=i)}function rl(t,i){if(!ze)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ot(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function Zb(t,i,a){var o=i.pendingProps;switch(uf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(i),null;case 1:return ot(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Yi(xt),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Sa(i)?Zi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hf())),ot(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(Zi(i),d!==null?(ot(i),by(i,d)):(ot(i),td(i,h,null,o,a))):d?d!==t.memoizedState?(Zi(i),ot(i),by(i,d)):(ot(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&Zi(i),ot(i),td(i,h,t,o,a)),null;case 27:if(it(i),a=ue.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Zi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ot(i),null}t=Q.current,Sa(i)?tg(i):(t=N_(h,o,a),i.stateNode=t,Zi(i))}return ot(i),null;case 5:if(it(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Zi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ot(i),null}if(d=Q.current,Sa(i))tg(i);else{var _=Sc(ue.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}d[wt]=i,d[qt]=o;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch($t(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Zi(i)}}return ot(i),td(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&Zi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=ue.current,Sa(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=Yt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[wt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||__(t.nodeValue,a)),t||Rr(i,!0)}else t=Sc(t).createTextNode(o),t[wt]=i,i.stateNode=t}return ot(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=Sa(i),a!==null){if(t===null){if(!o)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[wt]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),t=!1}else a=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Rn(i),i):(Rn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ot(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Sa(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[wt]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),h=!1}else h=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Rn(i),i):(Rn(i),null)}return Rn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),uc(i,i.updateQueue),ot(i),null);case 4:return Ue(),t===null&&Ad(i.stateNode.containerInfo),ot(i),null;case 10:return Yi(i.type),ot(i),null;case 19:if(J(Et),o=i.memoizedState,o===null)return ot(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)rl(o,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=$u(t),d!==null){for(i.flags|=128,rl(o,!1),t=d.updateQueue,i.updateQueue=t,uc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)$p(a,t),a=a.sibling;return Z(Et,Et.current&1|2),ze&&Gi(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&zt()>mc&&(i.flags|=128,h=!0,rl(o,!1),i.lanes=4194304)}else{if(!h)if(t=$u(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,uc(i,t),rl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!ze)return ot(i),null}else 2*zt()-o.renderingStartTime>mc&&a!==536870912&&(i.flags|=128,h=!0,rl(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(t=o.last,t!==null?t.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=zt(),t.sibling=null,a=Et.current,Z(Et,h?a&1|2:a&1),ze&&Gi(i,o.treeForkCount),t):(ot(i),null);case 22:case 23:return Rn(i),Sf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(ot(i),i.subtreeFlags&6&&(i.flags|=8192)):ot(i),a=i.updateQueue,a!==null&&uc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&J(Ps),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Yi(xt),ot(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Jb(t,i){switch(uf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Yi(xt),Ue(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return it(i),null;case 31:if(i.memoizedState!==null){if(Rn(i),i.alternate===null)throw Error(s(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Rn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return J(Et),null;case 4:return Ue(),null;case 10:return Yi(i.type),null;case 22:case 23:return Rn(i),Sf(),t!==null&&J(Ps),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Yi(xt),null;case 25:return null;default:return null}}function Ay(t,i){switch(uf(i),i.tag){case 3:Yi(xt),Ue();break;case 26:case 27:case 5:it(i);break;case 4:Ue();break;case 31:i.memoizedState!==null&&Rn(i);break;case 13:Rn(i);break;case 19:J(Et);break;case 10:Yi(i.type);break;case 22:case 23:Rn(i),Sf(),t!==null&&J(Ps);break;case 24:Yi(xt)}}function sl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(b){Ze(i,i.return,b)}}function Vr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var _=o.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var N=a,U=b;try{U()}catch(K){Ze(h,N,K)}}}o=o.next}while(o!==d)}}catch(K){Ze(i,i.return,K)}}function Sy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{mg(i,a)}catch(o){Ze(t,t.return,o)}}}function wy(t,i,a){a.props=Hs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Ze(t,i,o)}}function al(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Ze(t,i,h)}}function Ni(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Ze(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(t,i,h)}else a.current=null}function Ry(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Ze(t,t.return,h)}}function nd(t,i,a){try{var o=t.stateNode;E1(o,t.type,a,i),o[qt]=i}catch(h){Ze(t,t.return,h)}}function Iy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&zr(t.type)||t.tag===4}function id(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&zr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Jn));else if(o!==4&&(o===27&&zr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(rd(t,i,a),t=t.sibling;t!==null;)rd(t,i,a),t=t.sibling}function cc(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&zr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(cc(t,i,a),t=t.sibling;t!==null;)cc(t,i,a),t=t.sibling}function xy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);$t(i,o,a),i[wt]=t,i[qt]=a}catch(d){Ze(t,t.return,d)}}var Ji=!1,Dt=!1,sd=!1,Ny=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Wb(t,i){if(t=t.containerInfo,Rd=Dc,t=qp(t),Zh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,U=0,K=0,W=t,B=null;t:for(;;){for(var F;W!==a||h!==0&&W.nodeType!==3||(b=_+h),W!==d||o!==0&&W.nodeType!==3||(N=_+o),W.nodeType===3&&(_+=W.nodeValue.length),(F=W.firstChild)!==null;)B=W,W=F;for(;;){if(W===t)break t;if(B===a&&++U===h&&(b=_),B===d&&++K===o&&(N=_),(F=W.nextSibling)!==null)break;W=B,B=W.parentNode}W=F}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Id={focusedElem:t,selectionRange:a},Dc=!1,Ht=i;Ht!==null;)if(i=Ht,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ht=t;else for(;Ht!==null;){switch(i=Ht,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var he=Hs(a.type,h);t=o.getSnapshotBeforeUpdate(he,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){Ze(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Cd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Ht=t;break}Ht=i.return}}function Cy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:er(t,a),o&4&&sl(5,a);break;case 1:if(er(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Ze(a,a.return,_)}else{var h=Hs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Ze(a,a.return,_)}}o&64&&Sy(a),o&512&&al(a,a.return);break;case 3:if(er(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{mg(t,i)}catch(_){Ze(a,a.return,_)}}break;case 27:i===null&&o&4&&xy(a);case 26:case 5:er(t,a),i===null&&o&4&&Ry(a),o&512&&al(a,a.return);break;case 12:er(t,a);break;case 31:er(t,a),o&4&&Vy(t,a);break;case 13:er(t,a),o&4&&My(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=l1.bind(null,a),x1(t,a))));break;case 22:if(o=a.memoizedState!==null||Ji,!o){i=i!==null&&i.memoizedState!==null||Dt,h=Ji;var d=Dt;Ji=o,(Dt=i)&&!d?tr(t,a,(a.subtreeFlags&8772)!==0):er(t,a),Ji=h,Dt=d}break;case 30:break;default:er(t,a)}}function Dy(t){var i=t.alternate;i!==null&&(t.alternate=null,Dy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&oa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ct=null,dn=!1;function Wi(t,i,a){for(a=a.child;a!==null;)Oy(t,i,a),a=a.sibling}function Oy(t,i,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:Dt||Ni(a,i),Wi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Ni(a,i);var o=ct,h=dn;zr(a.type)&&(ct=a.stateNode,dn=!1),Wi(t,i,a),pl(a.stateNode),ct=o,dn=h;break;case 5:Dt||Ni(a,i);case 6:if(o=ct,h=dn,ct=null,Wi(t,i,a),ct=o,dn=h,ct!==null)if(dn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(d){Ze(a,i,d)}else try{ct.removeChild(a.stateNode)}catch(d){Ze(a,i,d)}break;case 18:ct!==null&&(dn?(t=ct,S_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ga(t)):S_(ct,a.stateNode));break;case 4:o=ct,h=dn,ct=a.stateNode.containerInfo,dn=!0,Wi(t,i,a),ct=o,dn=h;break;case 0:case 11:case 14:case 15:Vr(2,a,i),Dt||Vr(4,a,i),Wi(t,i,a);break;case 1:Dt||(Ni(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&wy(a,i,o)),Wi(t,i,a);break;case 21:Wi(t,i,a);break;case 22:Dt=(o=Dt)||a.memoizedState!==null,Wi(t,i,a),Dt=o;break;default:Wi(t,i,a)}}function Vy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ga(t)}catch(a){Ze(i,i.return,a)}}}function My(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ga(t)}catch(a){Ze(i,i.return,a)}}function e1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Ny),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Ny),i;default:throw Error(s(435,t.tag))}}function hc(t,i){var a=e1(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=u1.bind(null,t,o);o.then(h,h)}})}function mn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(zr(b.type)){ct=b.stateNode,dn=!1;break e}break;case 5:ct=b.stateNode,dn=!1;break e;case 3:case 4:ct=b.stateNode.containerInfo,dn=!0;break e}b=b.return}if(ct===null)throw Error(s(160));Oy(d,_,h),ct=null,dn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)jy(i,t),i=i.sibling}var ri=null;function jy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(i,t),pn(t),o&4&&(Vr(3,t,t.return),sl(3,t),Vr(5,t,t.return));break;case 1:mn(i,t),pn(t),o&512&&(Dt||a===null||Ni(a,a.return)),o&64&&Ji&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=ri;if(mn(i,t),pn(t),o&512&&(Dt||a===null||Ni(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[pi]||d[wt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),$t(d,o,a),d[wt]=t,Rt(d),o=d;break e;case"link":var _=j_("link","href",h).get(o+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(o),$t(d,o,a),h.head.appendChild(d);break;case"meta":if(_=j_("meta","content",h).get(o+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(o),$t(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[wt]=t,Rt(d),o=d}t.stateNode=o}else L_(h,t.type,t.stateNode);else t.stateNode=M_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?L_(h,t.type,t.stateNode):M_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&nd(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(i,t),pn(t),o&512&&(Dt||a===null||Ni(a,a.return)),a!==null&&o&4&&nd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,t),pn(t),o&512&&(Dt||a===null||Ni(a,a.return)),t.flags&32){h=t.stateNode;try{fn(h,"")}catch(he){Ze(t,t.return,he)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,nd(t,h,a!==null?a.memoizedProps:h)),o&1024&&(sd=!0);break;case 6:if(mn(i,t),pn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(he){Ze(t,t.return,he)}}break;case 3:if(Ic=null,h=ri,ri=wc(i.containerInfo),mn(i,t),ri=h,pn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ga(i.containerInfo)}catch(he){Ze(t,t.return,he)}sd&&(sd=!1,Ly(t));break;case 4:o=ri,ri=wc(t.stateNode.containerInfo),mn(i,t),pn(t),ri=o;break;case 12:mn(i,t),pn(t);break;case 31:mn(i,t),pn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 13:mn(i,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(dc=zt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,U=Ji,K=Dt;if(Ji=U||h,Dt=K||N,mn(i,t),Dt=K,Ji=U,pn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||Ji||Dt||Fs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var W=N.memoizedProps.style,B=W!=null&&W.hasOwnProperty("display")?W.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(he){Ze(N,N.return,he)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(he){Ze(N,N.return,he)}}}else if(i.tag===18){if(a===null){N=i;try{var F=N.stateNode;h?w_(F,!0):w_(N.stateNode,!1)}catch(he){Ze(N,N.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,hc(t,a))));break;case 19:mn(i,t),pn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hc(t,o)));break;case 30:break;case 21:break;default:mn(i,t),pn(t)}}function pn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Iy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=id(t);cc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(fn(_,""),a.flags&=-33);var b=id(t);cc(t,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,U=id(t);rd(t,U,N);break;default:throw Error(s(161))}}catch(K){Ze(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ly(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ly(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function er(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Cy(t,i.alternate,i),i=i.sibling}function Fs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Vr(4,i,i.return),Fs(i);break;case 1:Ni(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&wy(i,i.return,a),Fs(i);break;case 27:pl(i.stateNode);case 26:case 5:Ni(i,i.return),Fs(i);break;case 22:i.memoizedState===null&&Fs(i);break;case 30:Fs(i);break;default:Fs(i)}t=t.sibling}}function tr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:tr(h,d,a),sl(4,d);break;case 1:if(tr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){Ze(o,o.return,U)}if(o=d,h=o.updateQueue,h!==null){var b=o.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)dg(N[h],b)}catch(U){Ze(o,o.return,U)}}a&&_&64&&Sy(d),al(d,d.return);break;case 27:xy(d);case 26:case 5:tr(h,d,a),a&&o===null&&_&4&&Ry(d),al(d,d.return);break;case 12:tr(h,d,a);break;case 31:tr(h,d,a),a&&_&4&&Vy(h,d);break;case 13:tr(h,d,a),a&&_&4&&My(h,d);break;case 22:d.memoizedState===null&&tr(h,d,a),al(d,d.return);break;case 30:break;default:tr(h,d,a)}i=i.sibling}}function ad(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Qo(a))}function od(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Qo(t))}function si(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ky(t,i,a,o),i=i.sibling}function ky(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:si(t,i,a,o),h&2048&&sl(9,i);break;case 1:si(t,i,a,o);break;case 3:si(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Qo(t)));break;case 12:if(h&2048){si(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Ze(i,i.return,N)}}else si(t,i,a,o);break;case 31:si(t,i,a,o);break;case 13:si(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?si(t,i,a,o):ol(t,i):d._visibility&2?si(t,i,a,o):(d._visibility|=2,Ma(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&ad(_,i);break;case 24:si(t,i,a,o),h&2048&&od(i.alternate,i);break;default:si(t,i,a,o)}}function Ma(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,b=a,N=o,U=_.flags;switch(_.tag){case 0:case 11:case 15:Ma(d,_,b,N,h),sl(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?Ma(d,_,b,N,h):ol(d,_):(K._visibility|=2,Ma(d,_,b,N,h)),h&&U&2048&&ad(_.alternate,_);break;case 24:Ma(d,_,b,N,h),h&&U&2048&&od(_.alternate,_);break;default:Ma(d,_,b,N,h)}i=i.sibling}}function ol(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:ol(a,o),h&2048&&ad(o.alternate,o);break;case 24:ol(a,o),h&2048&&od(o.alternate,o);break;default:ol(a,o)}i=i.sibling}}var ll=8192;function ja(t,i,a){if(t.subtreeFlags&ll)for(t=t.child;t!==null;)Py(t,i,a),t=t.sibling}function Py(t,i,a){switch(t.tag){case 26:ja(t,i,a),t.flags&ll&&t.memoizedState!==null&&z1(a,ri,t.memoizedState,t.memoizedProps);break;case 5:ja(t,i,a);break;case 3:case 4:var o=ri;ri=wc(t.stateNode.containerInfo),ja(t,i,a),ri=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=ll,ll=16777216,ja(t,i,a),ll=o):ja(t,i,a));break;default:ja(t,i,a)}}function Uy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ul(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ht=o,qy(o,t)}Uy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zy(t),t=t.sibling}function zy(t){switch(t.tag){case 0:case 11:case 15:ul(t),t.flags&2048&&Vr(9,t,t.return);break;case 3:ul(t);break;case 12:ul(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,fc(t)):ul(t);break;default:ul(t)}}function fc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ht=o,qy(o,t)}Uy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Vr(8,i,i.return),fc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,fc(i));break;default:fc(i)}t=t.sibling}}function qy(t,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Vr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Qo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ht=o;else e:for(a=t;Ht!==null;){o=Ht;var h=o.sibling,d=o.return;if(Dy(o),o===a){Ht=null;break e}if(h!==null){h.return=d,Ht=h;break e}Ht=d}}}var t1={getCacheForType:function(t){var i=Kt(xt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Kt(xt).controller.signal}},n1=typeof WeakMap=="function"?WeakMap:Map,Qe=0,rt=null,De=null,Ve=0,$e=0,In=null,Mr=!1,La=!1,ld=!1,nr=0,gt=0,jr=0,Gs=0,ud=0,xn=0,ka=0,cl=null,gn=null,cd=!1,dc=0,By=0,mc=1/0,pc=null,Lr=null,kt=0,kr=null,Pa=null,ir=0,hd=0,fd=null,Hy=null,hl=0,dd=null;function Nn(){return(Qe&2)!==0&&Ve!==0?Ve&-Ve:Y.T!==null?vd():gu()}function Fy(){if(xn===0)if((Ve&536870912)===0||ze){var t=_s;_s<<=1,(_s&3932160)===0&&(_s=262144),xn=t}else xn=536870912;return t=wn.current,t!==null&&(t.flags|=32),xn}function yn(t,i,a){(t===rt&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(Ua(t,0),Pr(t,Ve,xn,!1)),vs(t,a),((Qe&2)===0||t!==rt)&&(t===rt&&((Qe&2)===0&&(Gs|=a),gt===4&&Pr(t,Ve,xn,!1)),Ci(t))}function Gy(t,i,a){if((Qe&6)!==0)throw Error(s(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Xn(t,i),h=o?s1(t,i):pd(t,i,!0),d=o;do{if(h===0){La&&!o&&Pr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!i1(a)){h=pd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;h=cl;var N=b.current.memoizedState.isDehydrated;if(N&&(Ua(b,_).flags|=256),_=pd(b,_,!1),_!==2){if(ld&&!N){b.errorRecoveryDisabledLanes|=d,Gs|=d,h=4;break e}d=gn,gn=h,d!==null&&(gn===null?gn=d:gn.push.apply(gn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Ua(t,0),Pr(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Pr(o,i,xn,!Mr);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=dc+300-zt(),10<h)){if(Pr(o,i,xn,!Mr),fi(o,0,!0)!==0)break e;ir=i,o.timeoutHandle=b_(Qy.bind(null,o,a,gn,pc,cd,i,xn,Gs,ka,Mr,d,"Throttled",-0,0),h);break e}Qy(o,a,gn,pc,cd,i,xn,Gs,ka,Mr,d,null,-0,0)}}break}while(!0);Ci(t)}function Qy(t,i,a,o,h,d,_,b,N,U,K,W,B,F){if(t.timeoutHandle=-1,W=i.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},Py(i,d,W);var he=(d&62914560)===d?dc-zt():(d&4194048)===d?By-zt():0;if(he=q1(W,he),he!==null){ir=d,t.cancelPendingCommit=he(e_.bind(null,t,i,d,a,o,h,_,b,N,K,W,null,B,F)),Pr(t,d,_,!U);return}}e_(t,i,d,a,o,h,_,b,N)}function i1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!An(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pr(t,i,a,o){i&=~ud,i&=~Gs,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-_t(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&Es(t,a,i)}function gc(){return(Qe&6)===0?(fl(0),!1):!0}function md(){if(De!==null){if($e===0)var t=De.return;else t=De,Qi=Ls=null,Cf(t),Na=null,Ko=0,t=De;for(;t!==null;)Ay(t.alternate,t),t=t.return;De=null}}function Ua(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,A1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ir=0,md(),rt=t,De=a=Fi(t.current,null),Ve=i,$e=0,In=null,Mr=!1,La=Xn(t,i),ld=!1,ka=xn=ud=Gs=jr=gt=0,gn=cl=null,cd=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-_t(o),d=1<<h;i|=t[h],o&=~d}return nr=i,ku(),a}function Yy(t,i){Ne=null,Y.H=nl,i===xa||i===Gu?(i=ug(),$e=3):i===_f?(i=ug(),$e=4):$e=i===Qf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,In=i,De===null&&(gt=1,sc(t,Pn(i,t.current)))}function Ky(){var t=wn.current;return t===null?!0:(Ve&4194048)===Ve?Bn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?t===Bn:!1}function Xy(){var t=Y.H;return Y.H=nl,t===null?nl:t}function $y(){var t=Y.A;return Y.A=t1,t}function yc(){gt=4,Mr||(Ve&4194048)!==Ve&&wn.current!==null||(La=!0),(jr&134217727)===0&&(Gs&134217727)===0||rt===null||Pr(rt,Ve,xn,!1)}function pd(t,i,a){var o=Qe;Qe|=2;var h=Xy(),d=$y();(rt!==t||Ve!==i)&&(pc=null,Ua(t,i)),i=!1;var _=gt;e:do try{if($e!==0&&De!==null){var b=De,N=In;switch($e){case 8:md(),_=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(i=!0);var U=$e;if($e=0,In=null,za(t,b,N,U),a&&La){_=0;break e}break;default:U=$e,$e=0,In=null,za(t,b,N,U)}}r1(),_=gt;break}catch(K){Yy(t,K)}while(!0);return i&&t.shellSuspendCounter++,Qi=Ls=null,Qe=o,Y.H=h,Y.A=d,De===null&&(rt=null,Ve=0,ku()),_}function r1(){for(;De!==null;)Zy(De)}function s1(t,i){var a=Qe;Qe|=2;var o=Xy(),h=$y();rt!==t||Ve!==i?(pc=null,mc=zt()+500,Ua(t,i)):La=Xn(t,i);e:do try{if($e!==0&&De!==null){i=De;var d=In;t:switch($e){case 1:$e=0,In=null,za(t,i,d,1);break;case 2:case 9:if(og(d)){$e=0,In=null,Jy(i);break}i=function(){$e!==2&&$e!==9||rt!==t||($e=7),Ci(t)},d.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:og(d)?($e=0,In=null,Jy(i)):($e=0,In=null,za(t,i,d,7));break;case 5:var _=null;switch(De.tag){case 26:_=De.memoizedState;case 5:case 27:var b=De;if(_?k_(_):b.stateNode.complete){$e=0,In=null;var N=b.sibling;if(N!==null)De=N;else{var U=b.return;U!==null?(De=U,_c(U)):De=null}break t}}$e=0,In=null,za(t,i,d,5);break;case 6:$e=0,In=null,za(t,i,d,6);break;case 8:md(),gt=6;break e;default:throw Error(s(462))}}a1();break}catch(K){Yy(t,K)}while(!0);return Qi=Ls=null,Y.H=o,Y.A=h,Qe=a,De!==null?0:(rt=null,Ve=0,ku(),gt)}function a1(){for(;De!==null&&!Eo();)Zy(De)}function Zy(t){var i=Ty(t.alternate,t,nr);t.memoizedProps=t.pendingProps,i===null?_c(t):De=i}function Jy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=py(a,i,i.pendingProps,i.type,void 0,Ve);break;case 11:i=py(a,i,i.pendingProps,i.type.render,i.ref,Ve);break;case 5:Cf(i);default:Ay(a,i),i=De=$p(i,nr),i=Ty(a,i,nr)}t.memoizedProps=t.pendingProps,i===null?_c(t):De=i}function za(t,i,a,o){Qi=Ls=null,Cf(i),Na=null,Ko=0;var h=i.return;try{if(Kb(t,h,i,a,Ve)){gt=1,sc(t,Pn(a,t.current)),De=null;return}}catch(d){if(h!==null)throw De=h,d;gt=1,sc(t,Pn(a,t.current)),De=null;return}i.flags&32768?(ze||o===1?t=!0:La||(Ve&536870912)!==0?t=!1:(Mr=t=!0,(o===2||o===9||o===3||o===6)&&(o=wn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Wy(i,t)):_c(i)}function _c(t){var i=t;do{if((i.flags&32768)!==0){Wy(i,Mr);return}t=i.return;var a=Zb(i.alternate,i,nr);if(a!==null){De=a;return}if(i=i.sibling,i!==null){De=i;return}De=i=t}while(i!==null);gt===0&&(gt=5)}function Wy(t,i){do{var a=Jb(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);gt=6,De=null}function e_(t,i,a,o,h,d,_,b,N){t.cancelPendingCommit=null;do vc();while(kt!==0);if((Qe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=nf,Yh(t,a,d,_,b,N),t===rt&&(De=rt=null,Ve=0),Pa=i,kr=t,ir=a,hd=d,fd=h,Hy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,c1(mr,function(){return s_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,h=re.p,re.p=2,_=Qe,Qe|=4;try{Wb(t,i,a)}finally{Qe=_,re.p=h,Y.T=o}}kt=1,t_(),n_(),i_()}}function t_(){if(kt===1){kt=0;var t=kr,i=Pa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var o=re.p;re.p=2;var h=Qe;Qe|=4;try{jy(i,t);var d=Id,_=qp(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&zp(b.ownerDocument.documentElement,b)){if(N!==null&&Zh(b)){var U=N.start,K=N.end;if(K===void 0&&(K=U),"selectionStart"in b)b.selectionStart=U,b.selectionEnd=Math.min(K,b.value.length);else{var W=b.ownerDocument||document,B=W&&W.defaultView||window;if(B.getSelection){var F=B.getSelection(),he=b.textContent.length,Ee=Math.min(N.start,he),tt=N.end===void 0?Ee:Math.min(N.end,he);!F.extend&&Ee>tt&&(_=tt,tt=Ee,Ee=_);var j=Up(b,Ee),O=Up(b,tt);if(j&&O&&(F.rangeCount!==1||F.anchorNode!==j.node||F.anchorOffset!==j.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var P=W.createRange();P.setStart(j.node,j.offset),F.removeAllRanges(),Ee>tt?(F.addRange(P),F.extend(O.node,O.offset)):(P.setEnd(O.node,O.offset),F.addRange(P))}}}}for(W=[],F=b;F=F.parentNode;)F.nodeType===1&&W.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<W.length;b++){var X=W[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Dc=!!Rd,Id=Rd=null}finally{Qe=h,re.p=o,Y.T=a}}t.current=i,kt=2}}function n_(){if(kt===2){kt=0;var t=kr,i=Pa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var o=re.p;re.p=2;var h=Qe;Qe|=4;try{Cy(t,i.alternate,i)}finally{Qe=h,re.p=o,Y.T=a}}kt=3}}function i_(){if(kt===4||kt===3){kt=0,gs();var t=kr,i=Pa,a=ir,o=Hy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?kt=5:(kt=0,Pa=kr=null,r_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Lr=null),zi(a),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Kn,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=Y.T,h=re.p,re.p=2,Y.T=null;try{for(var d=t.onRecoverableError,_=0;_<o.length;_++){var b=o[_];d(b.value,{componentStack:b.stack})}}finally{Y.T=i,re.p=h}}(ir&3)!==0&&vc(),Ci(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===dd?hl++:(hl=0,dd=t):hl=0,fl(0)}}function r_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Qo(i)))}function vc(){return t_(),n_(),i_(),s_()}function s_(){if(kt!==5)return!1;var t=kr,i=hd;hd=0;var a=zi(ir),o=Y.T,h=re.p;try{re.p=32>a?32:a,Y.T=null,a=fd,fd=null;var d=kr,_=ir;if(kt=0,Pa=kr=null,ir=0,(Qe&6)!==0)throw Error(s(331));var b=Qe;if(Qe|=4,zy(d.current),ky(d,d.current,_,a),Qe=b,fl(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Kn,d)}catch{}return!0}finally{re.p=h,Y.T=o,r_(t,i)}}function a_(t,i,a){i=Pn(a,i),i=Gf(t.stateNode,i,2),t=Cr(t,i,2),t!==null&&(vs(t,2),Ci(t))}function Ze(t,i,a){if(t.tag===3)a_(t,t,a);else for(;i!==null;){if(i.tag===3){a_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Lr===null||!Lr.has(o))){t=Pn(a,t),a=oy(2),o=Cr(i,a,2),o!==null&&(ly(a,o,i,t),vs(o,2),Ci(o));break}}i=i.return}}function gd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new n1;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(ld=!0,h.add(a),t=o1.bind(null,t,i,a),i.then(t,t))}function o1(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,rt===t&&(Ve&a)===a&&(gt===4||gt===3&&(Ve&62914560)===Ve&&300>zt()-dc?(Qe&2)===0&&Ua(t,0):ud|=a,ka===Ve&&(ka=0)),Ci(t)}function o_(t,i){i===0&&(i=pu()),t=Vs(t,i),t!==null&&(vs(t,i),Ci(t))}function l1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),o_(t,a)}function u1(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),o_(t,a)}function c1(t,i){return mt(t,i)}var Ec=null,qa=null,yd=!1,Tc=!1,_d=!1,Ur=0;function Ci(t){t!==qa&&t.next===null&&(qa===null?Ec=qa=t:qa=qa.next=t),Tc=!0,yd||(yd=!0,f1())}function fl(t,i){if(!_d&&Tc){_d=!0;do for(var a=!1,o=Ec;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,b=o.pingedLanes;d=(1<<31-_t(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,h_(o,d))}else d=Ve,d=fi(o,o===rt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Xn(o,d)||(a=!0,h_(o,d));o=o.next}while(a);_d=!1}}function h1(){l_()}function l_(){Tc=yd=!1;var t=0;Ur!==0&&b1()&&(t=Ur);for(var i=zt(),a=null,o=Ec;o!==null;){var h=o.next,d=u_(o,i);d===0?(o.next=null,a===null?Ec=h:a.next=h,h===null&&(qa=a)):(a=o,(t!==0||(d&3)!==0)&&(Tc=!0)),o=h}kt!==0&&kt!==5||fl(t),Ur!==0&&(Ur=0)}function u_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-_t(d),b=1<<_,N=h[_];N===-1?((b&a)===0||(b&o)!==0)&&(h[_]=Qh(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=rt,a=Ve,a=fi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&($e===2||$e===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&En(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Xn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&En(o),zi(a)){case 2:case 8:a=bo;break;case 32:a=mr;break;case 268435456:a=cu;break;default:a=mr}return o=c_.bind(null,t),a=mt(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&En(o),t.callbackPriority=2,t.callbackNode=null,2}function c_(t,i){if(kt!==0&&kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(vc()&&t.callbackNode!==a)return null;var o=Ve;return o=fi(t,t===rt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Gy(t,o,i),u_(t,zt()),t.callbackNode!=null&&t.callbackNode===a?c_.bind(null,t):null)}function h_(t,i){if(vc())return null;Gy(t,i,!0)}function f1(){S1(function(){(Qe&6)!==0?mt(To,h1):l_()})}function vd(){if(Ur===0){var t=Ra;t===0&&(t=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Ur=t}return Ur}function f_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ha(""+t)}function d_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function d1(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=f_((h[qt]||null).action),_=o.submitter;_&&(i=(i=_[qt]||null)?f_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new Ai("action","action",null,o,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ur!==0){var N=_?d_(h,_):new FormData(h);Uf(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?d_(h,_):new FormData(h),Uf(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Ed=0;Ed<tf.length;Ed++){var Td=tf[Ed],m1=Td.toLowerCase(),p1=Td[0].toUpperCase()+Td.slice(1);ii(m1,"on"+p1)}ii(Fp,"onAnimationEnd"),ii(Gp,"onAnimationIteration"),ii(Qp,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(Db,"onTransitionRun"),ii(Ob,"onTransitionStart"),ii(Vb,"onTransitionCancel"),ii(Yp,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dl));function m_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var _=o.length-1;0<=_;_--){var b=o[_],N=b.instance,U=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=U;try{d(h)}catch(K){Lu(K)}h.currentTarget=null,d=N}else for(_=0;_<o.length;_++){if(b=o[_],N=b.instance,U=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=U;try{d(h)}catch(K){Lu(K)}h.currentTarget=null,d=N}}}}function Oe(t,i){var a=i[aa];a===void 0&&(a=i[aa]=new Set);var o=t+"__bubble";a.has(o)||(p_(i,t,2,!1),a.add(o))}function bd(t,i,a){var o=0;i&&(o|=4),p_(a,t,o,i)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Ad(t){if(!t[bc]){t[bc]=!0,wo.forEach(function(a){a!=="selectionchange"&&(g1.has(a)||bd(a,!1,t),bd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[bc]||(i[bc]=!0,bd("selectionchange",!1,i))}}function p_(t,i,a,o){switch(F_(i)){case 2:var h=F1;break;case 8:h=G1;break;default:h=Pd}a=h.bind(null,i,a,t),h=void 0,!ws||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Sd(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var b=o.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=o.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=gi(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){o=d=_;continue e}b=b.parentNode}}o=o.return}Er(function(){var U=d,K=Mn(a),W=[];e:{var B=Kp.get(t);if(B!==void 0){var F=Ai,he=t;switch(t){case"keypress":if(Is(a)===0)break e;case"keydown":case"keyup":F=Vu;break;case"focusin":he="focus",F=Ns;break;case"focusout":he="blur",F=Ns;break;case"beforeblur":case"afterblur":F=Ns;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=m;break;case Fp:case Gp:case Qp:F=Ru;break;case Yp:F=A;break;case"scroll":case"scrollend":F=ko;break;case"wheel":F=H;break;case"copy":case"cut":case"paste":F=Iu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Hi;break;case"toggle":case"beforetoggle":F=xe}var Ee=(i&4)!==0,tt=!Ee&&(t==="scroll"||t==="scrollend"),j=Ee?B!==null?B+"Capture":null:B;Ee=[];for(var O=U,P;O!==null;){var X=O;if(P=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||P===null||j===null||(X=Wn(O,j),X!=null&&Ee.push(ml(O,X,P))),tt)break;O=O.return}0<Ee.length&&(B=new F(B,he,null,a,K),W.push({event:B,listeners:Ee}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",B&&a!==Mo&&(he=a.relatedTarget||a.fromElement)&&(gi(he)||he[mi]))break e;if((F||B)&&(B=K.window===K?K:(B=K.ownerDocument)?B.defaultView||B.parentWindow:window,F?(he=a.relatedTarget||a.toElement,F=U,he=he?gi(he):null,he!==null&&(tt=u(he),Ee=he.tag,he!==tt||Ee!==5&&Ee!==27&&Ee!==6)&&(he=null)):(F=null,he=U),F!==he)){if(Ee=Po,X="onMouseLeave",j="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=Hi,X="onPointerLeave",j="onPointerEnter",O="pointer"),tt=F==null?B:Tn(F),P=he==null?B:Tn(he),B=new Ee(X,O+"leave",F,a,K),B.target=tt,B.relatedTarget=P,X=null,gi(K)===U&&(Ee=new Ee(j,O+"enter",he,a,K),Ee.target=P,Ee.relatedTarget=tt,X=Ee),tt=X,F&&he)t:{for(Ee=y1,j=F,O=he,P=0,X=j;X;X=Ee(X))P++;X=0;for(var _e=O;_e;_e=Ee(_e))X++;for(;0<P-X;)j=Ee(j),P--;for(;0<X-P;)O=Ee(O),X--;for(;P--;){if(j===O||O!==null&&j===O.alternate){Ee=j;break t}j=Ee(j),O=Ee(O)}Ee=null}else Ee=null;F!==null&&g_(W,B,F,Ee,!1),he!==null&&tt!==null&&g_(W,tt,he,Ee,!0)}}e:{if(B=U?Tn(U):window,F=B.nodeName&&B.nodeName.toLowerCase(),F==="select"||F==="input"&&B.type==="file")var Be=Vp;else if(Dp(B))if(Mp)Be=xb;else{Be=Rb;var pe=wb}else F=B.nodeName,!F||F.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?U&&ca(U.elementType)&&(Be=Vp):Be=Ib;if(Be&&(Be=Be(t,U))){Op(W,Be,a,K);break e}pe&&pe(t,B,U),t==="focusout"&&U&&B.type==="number"&&U.memoizedProps.value!=null&&Do(B,"number",B.value)}switch(pe=U?Tn(U):window,t){case"focusin":(Dp(pe)||pe.contentEditable==="true")&&(_a=pe,Jh=U,Ho=null);break;case"focusout":Ho=Jh=_a=null;break;case"mousedown":Wh=!0;break;case"contextmenu":case"mouseup":case"dragend":Wh=!1,Bp(W,a,K);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":Bp(W,a,K)}var Ce;if(Ge)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else ya?Cs(t,a)&&(Me="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Ri&&a.locale!=="ko"&&(ya||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&ya&&(Ce=Lo()):(bi=K,jo="value"in bi?bi.value:bi.textContent,ya=!0)),pe=Ac(U,Me),0<pe.length&&(Me=new wi(Me,t,null,a,K),W.push({event:Me,listeners:pe}),Ce?Me.data=Ce:(Ce=ga(a),Ce!==null&&(Me.data=Ce)))),(Ce=Ln?Tb(t,a):bb(t,a))&&(Me=Ac(U,"onBeforeInput"),0<Me.length&&(pe=new wi("onBeforeInput","beforeinput",null,a,K),W.push({event:pe,listeners:Me}),pe.data=Ce)),d1(W,t,U,a,K)}m_(W,i)})}function ml(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Ac(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Wn(t,a),h!=null&&o.unshift(ml(t,h,d)),h=Wn(t,i),h!=null&&o.push(ml(t,h,d))),t.tag===3)return o;t=t.return}return[]}function y1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function g_(t,i,a,o,h){for(var d=i._reactName,_=[];a!==null&&a!==o;){var b=a,N=b.alternate,U=b.stateNode;if(b=b.tag,N!==null&&N===o)break;b!==5&&b!==26&&b!==27||U===null||(N=U,h?(U=Wn(a,d),U!=null&&_.unshift(ml(a,U,N))):h||(U=Wn(a,d),U!=null&&_.push(ml(a,U,N)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var _1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function y_(t){return(typeof t=="string"?t:""+t).replace(_1,`
`).replace(v1,"")}function __(t,i){return i=y_(i),y_(t)===i}function et(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||fn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&fn(t,""+o);break;case"className":bn(t,"class",o);break;case"tabIndex":bn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(t,a,o);break;case"style":Vo(t,o,d);break;case"data":if(i!=="object"){bn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ha(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&et(t,i,"name",h.name,h,null),et(t,i,"formEncType",h.formEncType,h,null),et(t,i,"formMethod",h.formMethod,h,null),et(t,i,"formTarget",h.formTarget,h,null)):(et(t,i,"encType",h.encType,h,null),et(t,i,"method",h.method,h,null),et(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ha(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Jn);break;case"onScroll":o!=null&&Oe("scroll",t);break;case"onScrollEnd":o!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=ha(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),la(t,"popover",o);break;case"xlinkActuate":It(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":It(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":It(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":It(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":It(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":It(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":It(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":It(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":It(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":la(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Au.get(a)||a,la(t,a,o))}}function wd(t,i,a,o,h,d){switch(a){case"style":Vo(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?fn(t,o):(typeof o=="number"||typeof o=="bigint")&&fn(t,""+o);break;case"onScroll":o!=null&&Oe("scroll",t);break;case"onScrollEnd":o!=null&&Oe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ro.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):la(t,a,o)}}}function $t(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(t,i,d,_,a,null)}}h&&et(t,i,"srcSet",a.srcSet,a,null),o&&et(t,i,"src",a.src,a,null);return;case"input":Oe("invalid",t);var b=d=_=h=null,N=null,U=null;for(o in a)if(a.hasOwnProperty(o)){var K=a[o];if(K!=null)switch(o){case"name":h=K;break;case"type":_=K;break;case"checked":N=K;break;case"defaultChecked":U=K;break;case"value":d=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:et(t,i,o,K,a,null)}}Eu(t,d,b,N,U,_,h,!1);return;case"select":Oe("invalid",t),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":o=b;default:et(t,i,h,b,a,null)}i=d,a=_,t.multiple=!!o,i!=null?gr(t,!!o,i,!1):a!=null&&gr(t,!!o,a,!0);return;case"textarea":Oe("invalid",t),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":o=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:et(t,i,_,b,a,null)}yr(t,o,h,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:et(t,i,N,o,a,null)}return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(o=0;o<dl.length;o++)Oe(dl[o],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(o=a[U],o!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(t,i,U,o,a,null)}return;default:if(ca(i)){for(K in a)a.hasOwnProperty(K)&&(o=a[K],o!==void 0&&wd(t,i,K,o,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(o=a[b],o!=null&&et(t,i,b,o,a,null))}function E1(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,N=null,U=null,K=null;for(F in a){var W=a[F];if(a.hasOwnProperty(F)&&W!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":N=W;default:o.hasOwnProperty(F)||et(t,i,F,null,o,W)}}for(var B in o){var F=o[B];if(W=a[B],o.hasOwnProperty(B)&&(F!=null||W!=null))switch(B){case"type":d=F;break;case"name":h=F;break;case"checked":U=F;break;case"defaultChecked":K=F;break;case"value":_=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:F!==W&&et(t,i,B,F,o,W)}}ua(t,_,b,N,U,K,d,h);return;case"select":F=_=b=B=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":F=N;default:o.hasOwnProperty(d)||et(t,i,d,null,o,N)}for(h in o)if(d=o[h],N=a[h],o.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":B=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&et(t,i,h,d,o,N)}i=b,a=_,o=F,B!=null?gr(t,!!a,B,!1):!!o!=!!a&&(i!=null?gr(t,!!a,i,!0):gr(t,!!a,a?[]:"",!1));return;case"textarea":F=B=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!o.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:et(t,i,b,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":B=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&et(t,i,_,h,o,d)}Tu(t,B,F);return;case"option":for(var he in a)if(B=a[he],a.hasOwnProperty(he)&&B!=null&&!o.hasOwnProperty(he))switch(he){case"selected":t.selected=!1;break;default:et(t,i,he,null,o,B)}for(N in o)if(B=o[N],F=a[N],o.hasOwnProperty(N)&&B!==F&&(B!=null||F!=null))switch(N){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:et(t,i,N,B,o,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)B=a[Ee],a.hasOwnProperty(Ee)&&B!=null&&!o.hasOwnProperty(Ee)&&et(t,i,Ee,null,o,B);for(U in o)if(B=o[U],F=a[U],o.hasOwnProperty(U)&&B!==F&&(B!=null||F!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:et(t,i,U,B,o,F)}return;default:if(ca(i)){for(var tt in a)B=a[tt],a.hasOwnProperty(tt)&&B!==void 0&&!o.hasOwnProperty(tt)&&wd(t,i,tt,void 0,o,B);for(K in o)B=o[K],F=a[K],!o.hasOwnProperty(K)||B===F||B===void 0&&F===void 0||wd(t,i,K,B,o,F);return}}for(var j in a)B=a[j],a.hasOwnProperty(j)&&B!=null&&!o.hasOwnProperty(j)&&et(t,i,j,null,o,B);for(W in o)B=o[W],F=a[W],!o.hasOwnProperty(W)||B===F||B==null&&F==null||et(t,i,W,B,o,F)}function v_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function T1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&v_(_)){for(_=0,b=h.responseEnd,o+=1;o<a.length;o++){var N=a[o],U=N.startTime;if(U>b)break;var K=N.transferSize,W=N.initiatorType;K&&v_(W)&&(N=N.responseEnd,_+=K*(N<b?1:(b-U)/(N-U)))}if(--o,i+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Rd=null,Id=null;function Sc(t){return t.nodeType===9?t:t.ownerDocument}function E_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function xd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nd=null;function b1(){var t=window.event;return t&&t.type==="popstate"?t===Nd?!1:(Nd=t,!0):(Nd=null,!1)}var b_=typeof setTimeout=="function"?setTimeout:void 0,A1=typeof clearTimeout=="function"?clearTimeout:void 0,A_=typeof Promise=="function"?Promise:void 0,S1=typeof queueMicrotask=="function"?queueMicrotask:typeof A_<"u"?function(t){return A_.resolve(null).then(t).catch(w1)}:b_;function w1(t){setTimeout(function(){throw t})}function zr(t){return t==="head"}function S_(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),Ga(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")pl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,pl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[pi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&pl(t.ownerDocument.body);a=h}while(a);Ga(i)}function w_(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Cd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cd(a),oa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function R1(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[pi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Hn(t.nextSibling),t===null)break}return null}function I1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Hn(t.nextSibling),t===null))return null;return t}function R_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Hn(t.nextSibling),t===null))return null;return t}function Dd(t){return t.data==="$?"||t.data==="$~"}function Od(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function x1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Hn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Vd=null;function I_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Hn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function x_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function N_(t,i,a){switch(i=Sc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function pl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);oa(t)}var Fn=new Map,C_=new Set;function wc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var rr=re.d;re.d={f:N1,r:C1,D:D1,C:O1,L:V1,m:M1,X:L1,S:j1,M:k1};function N1(){var t=rr.f(),i=gc();return t||i}function C1(t){var i=Vn(t);i!==null&&i.tag===5&&i.type==="form"?Yg(i):rr.r(t)}var Ba=typeof document>"u"?null:document;function D_(t,i,a){var o=Ba;if(o&&typeof i=="string"&&i){var h=hn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),C_.has(h)||(C_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),$t(i,"link",t),Rt(i),o.head.appendChild(i)))}}function D1(t){rr.D(t),D_("dns-prefetch",t,null)}function O1(t,i){rr.C(t,i),D_("preconnect",t,i)}function V1(t,i,a){rr.L(t,i,a);var o=Ba;if(o&&t&&i){var h='link[rel="preload"][as="'+hn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+hn(a.imageSizes)+'"]')):h+='[href="'+hn(t)+'"]';var d=h;switch(i){case"style":d=Ha(t);break;case"script":d=Fa(t)}Fn.has(d)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Fn.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(gl(d))||i==="script"&&o.querySelector(yl(d))||(i=o.createElement("link"),$t(i,"link",t),Rt(i),o.head.appendChild(i)))}}function M1(t,i){rr.m(t,i);var a=Ba;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+hn(o)+'"][href="'+hn(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Fa(t)}if(!Fn.has(d)&&(t=S({rel:"modulepreload",href:t},i),Fn.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(yl(d)))return}o=a.createElement("link"),$t(o,"link",t),Rt(o),a.head.appendChild(o)}}}function j1(t,i,a){rr.S(t,i,a);var o=Ba;if(o&&t){var h=yi(o).hoistableStyles,d=Ha(t);i=i||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=o.querySelector(gl(d)))b.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Fn.get(d))&&Md(t,a);var N=_=o.createElement("link");Rt(N),$t(N,"link",t),N._p=new Promise(function(U,K){N.onload=U,N.onerror=K}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Rc(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function L1(t,i){rr.X(t,i);var a=Ba;if(a&&t){var o=yi(a).hoistableScripts,h=Fa(t),d=o.get(h);d||(d=a.querySelector(yl(h)),d||(t=S({src:t,async:!0},i),(i=Fn.get(h))&&jd(t,i),d=a.createElement("script"),Rt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function k1(t,i){rr.M(t,i);var a=Ba;if(a&&t){var o=yi(a).hoistableScripts,h=Fa(t),d=o.get(h);d||(d=a.querySelector(yl(h)),d||(t=S({src:t,async:!0,type:"module"},i),(i=Fn.get(h))&&jd(t,i),d=a.createElement("script"),Rt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function O_(t,i,a,o){var h=(h=ue.current)?wc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ha(a.href),a=yi(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ha(a.href);var d=yi(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(gl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Fn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(t,a),d||P1(h,t,a,_.state))),i&&o===null)throw Error(s(528,""));return _}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Fa(a),a=yi(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ha(t){return'href="'+hn(t)+'"'}function gl(t){return'link[rel="stylesheet"]['+t+"]"}function V_(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function P1(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),$t(i,"link",a),Rt(i),t.head.appendChild(i))}function Fa(t){return'[src="'+hn(t)+'"]'}function yl(t){return"script[async]"+t}function M_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+hn(a.href)+'"]');if(o)return i.instance=o,Rt(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Rt(o),$t(o,"style",h),Rc(o,a.precedence,t),i.instance=o;case"stylesheet":h=Ha(a.href);var d=t.querySelector(gl(h));if(d)return i.state.loading|=4,i.instance=d,Rt(d),d;o=V_(a),(h=Fn.get(h))&&Md(o,h),d=(t.ownerDocument||t).createElement("link"),Rt(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),$t(d,"link",o),i.state.loading|=4,Rc(d,a.precedence,t),i.instance=d;case"script":return d=Fa(a.src),(h=t.querySelector(yl(d)))?(i.instance=h,Rt(h),h):(o=a,(h=Fn.get(d))&&(o=S({},a),jd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Rt(h),$t(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Rc(o,a.precedence,t));return i.instance}function Rc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var b=o[_];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Md(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ic=null;function j_(t,i,a){if(Ic===null){var o=new Map,h=Ic=new Map;h.set(a,o)}else h=Ic,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[pi]||d[wt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=o.get(_);b?b.push(d):o.set(_,[d])}}return o}function L_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function U1(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function k_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function z1(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ha(o.href),d=i.querySelector(gl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=xc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Rt(d);return}d=i.ownerDocument||i,o=V_(o),(h=Fn.get(h))&&Md(o,h),d=d.createElement("link"),Rt(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),$t(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=xc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Ld=0;function q1(t,i){return t.stylesheets&&t.count===0&&Cc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Cc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Ld===0&&(Ld=62500*T1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Ld?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Nc=null;function Cc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Nc=new Map,i.forEach(B1,t),Nc=null,xc.call(t))}function B1(t,i){if(!(i.state.loading&4)){var a=Nc.get(t);if(a)var o=a.get(null);else{a=new Map,Nc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=xc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var _l={$$typeof:de,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function H1(t,i,a,o,h,d,_,b,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function P_(t,i,a,o,h,d,_,b,N,U,K,W){return t=new H1(t,i,a,_,N,U,K,W,b),i=1,d===!0&&(i|=24),d=Sn(3,null,null,i),t.current=d,d.stateNode=t,i=pf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},vf(d),t}function U_(t){return t?(t=Ta,t):Ta}function z_(t,i,a,o,h,d){h=U_(h),o.context===null?o.context=h:o.pendingContext=h,o=Nr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Cr(t,o,i),a!==null&&(yn(a,t,i),$o(a,t,i))}function q_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function kd(t,i){q_(t,i),(t=t.alternate)&&q_(t,i)}function B_(t){if(t.tag===13||t.tag===31){var i=Vs(t,67108864);i!==null&&yn(i,t,67108864),kd(t,67108864)}}function H_(t){if(t.tag===13||t.tag===31){var i=Nn();i=Ts(i);var a=Vs(t,i);a!==null&&yn(a,t,i),kd(t,i)}}var Dc=!0;function F1(t,i,a,o){var h=Y.T;Y.T=null;var d=re.p;try{re.p=2,Pd(t,i,a,o)}finally{re.p=d,Y.T=h}}function G1(t,i,a,o){var h=Y.T;Y.T=null;var d=re.p;try{re.p=8,Pd(t,i,a,o)}finally{re.p=d,Y.T=h}}function Pd(t,i,a,o){if(Dc){var h=Ud(o);if(h===null)Sd(t,i,o,Oc,a),G_(t,o);else if(Y1(h,t,i,a,o))o.stopPropagation();else if(G_(t,o),i&4&&-1<Q1.indexOf(t)){for(;h!==null;){var d=Vn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=hi(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-_t(_);b.entanglements[1]|=N,_&=~N}Ci(d),(Qe&6)===0&&(mc=zt()+500,fl(0))}}break;case 31:case 13:b=Vs(d,2),b!==null&&yn(b,d,2),gc(),kd(d,2)}if(d=Ud(o),d===null&&Sd(t,i,o,Oc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Sd(t,i,o,null,a)}}function Ud(t){return t=Mn(t),zd(t)}var Oc=null;function zd(t){if(Oc=null,t=gi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Oc=t,null}function F_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ys()){case To:return 2;case bo:return 8;case mr:case Gh:return 32;case cu:return 268435456;default:return 32}default:return 32}}var qd=!1,qr=null,Br=null,Hr=null,vl=new Map,El=new Map,Fr=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G_(t,i){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":vl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(i.pointerId)}}function Tl(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Vn(i),i!==null&&B_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function Y1(t,i,a,o,h){switch(i){case"focusin":return qr=Tl(qr,t,i,a,o,h),!0;case"dragenter":return Br=Tl(Br,t,i,a,o,h),!0;case"mouseover":return Hr=Tl(Hr,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return vl.set(d,Tl(vl.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,El.set(d,Tl(El.get(d)||null,t,i,a,o,h)),!0}return!1}function Q_(t){var i=gi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,$n(t.priority,function(){H_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,$n(t.priority,function(){H_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Ud(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Mo=o,a.target.dispatchEvent(o),Mo=null}else return i=Vn(a),i!==null&&B_(i),t.blockedOn=a,!1;i.shift()}return!0}function Y_(t,i,a){Vc(t)&&a.delete(i)}function K1(){qd=!1,qr!==null&&Vc(qr)&&(qr=null),Br!==null&&Vc(Br)&&(Br=null),Hr!==null&&Vc(Hr)&&(Hr=null),vl.forEach(Y_),El.forEach(Y_)}function Mc(t,i){t.blockedOn===i&&(t.blockedOn=null,qd||(qd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,K1)))}var jc=null;function K_(t){jc!==t&&(jc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){jc===t&&(jc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(zd(o||a)===null)continue;break}var d=Vn(a);d!==null&&(t.splice(i,3),i-=3,Uf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Ga(t){function i(N){return Mc(N,t)}qr!==null&&Mc(qr,t),Br!==null&&Mc(Br,t),Hr!==null&&Mc(Hr,t),vl.forEach(i),El.forEach(i);for(var a=0;a<Fr.length;a++){var o=Fr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Fr.length&&(a=Fr[0],a.blockedOn===null);)Q_(a),a.blockedOn===null&&Fr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[qt]||null;if(typeof d=="function")_||K_(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[qt]||null)b=_.formAction;else if(zd(h)!==null)continue}else b=_.action;typeof b=="function"?a[o+1]=b:(a.splice(o,3),o-=3),K_(a)}}}function X_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Bd(t){this._internalRoot=t}Lc.prototype.render=Bd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Nn();z_(a,o,t,i,null,null)},Lc.prototype.unmount=Bd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;z_(t.current,2,null,t,null,null),gc(),i[mi]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var i=gu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Fr.length&&i!==0&&i<Fr[a].priority;a++);Fr.splice(a,0,t),a===0&&Q_(t)}};var $_=e.version;if($_!=="19.2.0")throw Error(s(527,$_,"19.2.0"));re.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=v(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var X1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{Kn=kc.inject(X1),Gt=kc}catch{}}return Al.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=iy,d=ry,_=sy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=P_(t,1,!1,null,null,a,o,null,h,d,_,X_),t[mi]=i.current,Ad(t),new Bd(i)},Al.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",d=iy,_=ry,b=sy,N=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=P_(t,1,!0,i,a??null,o,h,N,d,_,b,X_),i.context=U_(null),a=i.current,o=Nn(),o=Ts(o),h=Nr(o),h.callback=null,Cr(a,h,o),a=o,i.current.lanes=a,vs(i,a),Ci(i),t[mi]=i.current,Ad(t),new Lc(i)},Al.version="19.2.0",Al}var av;function aA(){if(av)return Gd.exports;av=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gd.exports=sA(),Gd.exports}var oA=aA();const lA=q0(oA),uA=({className:r})=>y.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),cA=({className:r})=>y.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),hA=({className:r})=>y.jsxs("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[y.jsx("path",{d:"M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m11 0a2 2 0 104 0m-4 0a2 2 0 114 0"})]}),Um=({className:r})=>y.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),ov=({className:r})=>y.jsxs("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),B0=({className:r})=>y.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),fA=({className:r})=>y.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),H0=({className:r})=>y.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),F0=({className:r})=>y.jsx("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),dA=({currentView:r,setView:e,user:n,onLogout:s})=>{const u=[{id:"dashboard",label:"لوحة التحكم",icon:uA,roles:["admin","user"]},{id:"purchaseOrders",label:"سندات الطلب",icon:cA,roles:["admin","user"]},{id:"deliveryNotes",label:"سندات الاستلام",icon:hA,roles:["admin","user"]},{id:"settings",label:"الإعدادات",icon:ov,roles:["admin"]},{id:"residenceSettings",label:"إعدادات الإقامة",icon:ov,roles:["user"]}].filter(f=>n&&f.roles.includes(n.role));return y.jsxs("div",{className:"w-64 bg-gray-800 text-white h-screen p-4 flex flex-col fixed",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold mb-2 text-center",children:"نظام التسيير"}),n&&y.jsxs("p",{className:"text-center text-gray-400 text-sm mb-6 border-b border-gray-600 pb-4",children:["مرحبًا، ",n.username]})]}),y.jsx("nav",{className:"flex-grow",children:y.jsx("ul",{children:u.map(f=>y.jsx("li",{className:"mb-2",children:y.jsxs("button",{onClick:()=>e(f.id),className:`w-full flex items-center p-3 rounded-lg transition-colors duration-200 ${r===f.id?"bg-blue-600 text-white":"hover:bg-gray-700"}`,"aria-current":r===f.id?"page":void 0,children:[y.jsx(f.icon,{className:"w-6 h-6 ml-3"}),y.jsx("span",{children:f.label})]})},f.id))})}),y.jsx("div",{children:y.jsxs("button",{onClick:s,className:"w-full flex items-center p-3 rounded-lg transition-colors duration-200 hover:bg-red-700",children:[y.jsx(fA,{className:"w-6 h-6 ml-3"}),y.jsx("span",{children:"تسجيل الخروج"})]})})]})};var un=(r=>(r.OPEN="قيد المعالجة",r.PARTIALLY_RECEIVED="تم الاستلام جزئياً",r.FULLY_RECEIVED="تم الاستلام كلياً",r.CANCELLED="ملغى",r))(un||{}),Fc=(r=>(r.FULL="كامل",r.PARTIAL="جزئي",r.REJECTED="مرفوض",r))(Fc||{});const lv=({lots:r,products:e,suppliers:n,onSave:s,onCancel:l,existingOrder:u})=>{const[f,p]=ge.useState(""),[g,v]=ge.useState(""),[T,S]=ge.useState(new Date().toISOString().split("T")[0]),[C,z]=ge.useState([]),ee=!!u,q=ge.useMemo(()=>r.find(ne=>ne.id===g),[r,g]),G=ge.useMemo(()=>n.find(ne=>ne.id===(q==null?void 0:q.supplierId)),[n,q]),le=ge.useMemo(()=>g?e.filter(ne=>ne.lotId===g):[],[e,g]);ge.useEffect(()=>{ee&&u&&(p(u.orderNumber),S(u.date),v(u.lotId),z(u.details))},[ee,u]),ge.useEffect(()=>{if(g&&!ee){const ne=le.map(se=>({productId:se.id,quantity:0,price:se.price}));z(ne)}else g||z([])},[g,le,ee]);const fe=(ne,se)=>{z(w=>w.map(R=>R.productId===ne?{...R,quantity:Math.max(0,se)}:R))},de=ge.useMemo(()=>C.reduce((ne,se)=>ne+se.price*se.quantity,0),[C]),Se=()=>{if(!f.trim()){alert("الرجاء إدخال رقم سند الطلب.");return}if(!q||!G){alert("الرجاء اختيار حصة صالحة.");return}const ne={id:u==null?void 0:u.id,orderNumber:f.trim(),date:T,lotId:q.id,supplierId:G.id,totalAmount:de,details:C.filter(se=>se.quantity>0),status:(u==null?void 0:u.status)||un.OPEN};s(ne)};return y.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg animate-fade-in-up",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:ee?"تعديل سند طلب":"إنشاء سند طلب جديد"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"orderNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم سند الطلب"}),y.jsx("input",{type:"text",id:"orderNumber",value:f,onChange:ne=>p(ne.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"lot",className:"block text-sm font-medium text-gray-700 mb-1",children:"اختر الحصة"}),y.jsxs("select",{id:"lot",value:g,onChange:ne=>v(ne.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[y.jsx("option",{value:"",children:"-- اختر حصة --"}),r.map(ne=>y.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"التاريخ"}),y.jsx("input",{type:"date",id:"date",value:T,onChange:ne=>S(ne.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm"})]})]}),G&&y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"معلومات الممون"}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"الشركة:"})," ",G.company]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"العنوان:"})," ",G.address]})]}),g&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"تفاصيل المنتجات"}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[y.jsx("thead",{className:"bg-gray-100",children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المنتج"}),y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الوحدة"}),y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"السعر الفردي"}),y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المطلوبة"}),y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المجموع الجزئي"})]})}),y.jsx("tbody",{children:C.map(ne=>{const se=e.find(w=>w.id===ne.productId);return se?y.jsxs("tr",{className:"hover:bg-gray-50",children:[y.jsx("td",{className:"py-2 px-4 border-b",children:se.name}),y.jsx("td",{className:"py-2 px-4 border-b",children:se.unit}),y.jsxs("td",{className:"py-2 px-4 border-b",children:[ne.price.toFixed(2)," د.ج"]}),y.jsx("td",{className:"py-2 px-4 border-b",children:y.jsx("input",{type:"number",value:ne.quantity,onChange:w=>fe(ne.productId,parseInt(w.target.value)||0),className:"w-24 p-1 border border-gray-300 rounded-md text-center",min:"0"})}),y.jsxs("td",{className:"py-2 px-4 border-b",children:[(ne.price*ne.quantity).toFixed(2)," د.ج"]})]},ne.productId):null})}),y.jsx("tfoot",{className:"bg-gray-100 font-bold",children:y.jsxs("tr",{children:[y.jsx("td",{colSpan:4,className:"py-3 px-4 text-left text-lg",children:"المجموع الكلي"}),y.jsxs("td",{className:"py-3 px-4 text-right text-lg",children:[de.toFixed(2)," د.ج"]})]})})]})}),y.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[y.jsx("button",{onClick:l,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),y.jsx("button",{onClick:Se,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:ee?"تحديث السند":"حفظ سند الطلب"})]})]})]})},uv=({lots:r,openPurchaseOrders:e,products:n,suppliers:s,onSave:l,onCancel:u,existingNote:f})=>{const[p,g]=ge.useState(""),[v,T]=ge.useState(""),[S,C]=ge.useState(new Date().toISOString().split("T")[0]),[z,ee]=ge.useState([]),q=!!f;ge.useEffect(()=>{q&&f&&(g(f.noteNumber),T(f.purchaseOrderId),C(f.receptionDate),ee(f.details))},[q,f]);const G=ge.useMemo(()=>e.find(ne=>ne.id===v),[e,v]),le=ge.useMemo(()=>s.find(ne=>ne.id===(G==null?void 0:G.supplierId)),[s,G]);ge.useEffect(()=>{if(G&&!q){const ne=G.details.map(se=>({productId:se.productId,quantityOrdered:se.quantity,quantityReceived:se.quantity}));ee(ne)}else v||ee([])},[G,q,v]);const fe=(ne,se)=>{var R;const w=((R=z.find(I=>I.productId===ne))==null?void 0:R.quantityOrdered)||0;ee(I=>I.map(M=>M.productId===ne?{...M,quantityReceived:Math.max(0,Math.min(se,w))}:M))},de=ge.useMemo(()=>G?z.reduce((ne,se)=>{const w=G.details.find(R=>R.productId===se.productId);return ne+((w==null?void 0:w.price)||0)*se.quantityReceived},0):0,[z,G]),Se=()=>{if(!p.trim()){alert("الرجاء إدخال رقم سند الاستلام.");return}if(!G){alert("الرجاء اختيار سند طلب صالح.");return}const ne=z.reduce((I,M)=>I+M.quantityReceived,0);let se,w;ne===0?(se=Fc.REJECTED,w=G.status):G.details.every(M=>{const D=z.find(L=>L.productId===M.productId);return M.quantity===((D==null?void 0:D.quantityReceived)||0)})?(se=Fc.FULL,w=un.FULLY_RECEIVED):(se=Fc.PARTIAL,w=un.PARTIALLY_RECEIVED);const R={id:f==null?void 0:f.id,noteNumber:p.trim(),receptionDate:S,purchaseOrderId:G.id,totalAmount:de,status:se,details:z.filter(I=>I.quantityReceived>0)};l(R,w)};return y.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg animate-fade-in-up",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:q?"تعديل سند استلام":"إنشاء سند استلام جديد"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"noteNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم سند الاستلام"}),y.jsx("input",{type:"text",id:"noteNumber",value:p,onChange:ne=>g(ne.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"po",className:"block text-sm font-medium text-gray-700 mb-1",children:"اختر سند الطلب"}),y.jsxs("select",{id:"po",value:v,onChange:ne=>T(ne.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",disabled:q,children:[y.jsx("option",{value:"",children:"-- اختر سند طلب --"}),e.map(ne=>{const se=r.find(R=>R.id===ne.lotId),w=se?`${se.name} - ${ne.orderNumber} - ${ne.date}`:`${ne.orderNumber} - ${ne.date}`;return y.jsx("option",{value:ne.id,children:w},ne.id)})]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الاستلام"}),y.jsx("input",{type:"date",id:"date",value:S,onChange:ne=>C(ne.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm"})]})]}),le&&G&&y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"معلومات الممون وسند الطلب"}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"الممون:"})," ",le.company]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"رقم سند الطلب:"})," ",G.orderNumber]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"تاريخ سند الطلب:"})," ",G.date]})]}),v&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"تفاصيل الاستلام"}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[y.jsx("thead",{className:"bg-gray-100",children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"المنتج"}),y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الوحدة"}),y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المطلوبة"}),y.jsx("th",{className:"py-2 px-4 border-b text-right font-medium text-gray-600",children:"الكمية المستلمة"})]})}),y.jsx("tbody",{children:z.map(ne=>{const se=n.find(w=>w.id===ne.productId);return se?y.jsxs("tr",{className:"hover:bg-gray-50",children:[y.jsx("td",{className:"py-2 px-4 border-b",children:se.name}),y.jsx("td",{className:"py-2 px-4 border-b",children:se.unit}),y.jsx("td",{className:"py-2 px-4 border-b",children:ne.quantityOrdered}),y.jsx("td",{className:"py-2 px-4 border-b",children:y.jsx("input",{type:"number",value:ne.quantityReceived,onChange:w=>fe(ne.productId,parseInt(w.target.value)||0),className:"w-24 p-1 border border-gray-300 rounded-md text-center",min:"0",max:ne.quantityOrdered})})]},ne.productId):null})})]})}),y.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[y.jsx("button",{onClick:u,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),y.jsx("button",{onClick:Se,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition",children:q?"تحديث السند":"حفظ سند الاستلام"})]})]})]})},mA=()=>{};var cv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},pA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=r[n++];e[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=r[n++],f=r[n++],p=r[n++],g=((l&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const u=r[l],f=l+1<r.length,p=f?r[l+1]:0,g=l+2<r.length,v=g?r[l+2]:0,T=u>>2,S=(u&3)<<4|p>>4;let C=(p&15)<<2|v>>6,z=v&63;g||(z=64,f||(C=64)),s.push(n[T],n[S],n[C],n[z])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(G0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):pA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const u=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const v=l<r.length?n[r.charAt(l)]:64;++l;const S=l<r.length?n[r.charAt(l)]:64;if(++l,u==null||p==null||v==null||S==null)throw new gA;const C=u<<2|p>>4;if(s.push(C),v!==64){const z=p<<4&240|v>>2;if(s.push(z),S!==64){const ee=v<<6&192|S;s.push(ee)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class gA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yA=function(r){const e=G0(r);return Q0.encodeByteArray(e,!0)},ih=function(r){return yA(r).replace(/\./g,"")},Y0=function(r){try{return Q0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=()=>_A().__FIREBASE_DEFAULTS__,EA=()=>{if(typeof process>"u"||typeof cv>"u")return;const r=cv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},TA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Y0(r[1]);return e&&JSON.parse(e)},bh=()=>{try{return mA()||vA()||EA()||TA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},K0=r=>{var e,n;return(n=(e=bh())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},bA=r=>{const e=K0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},X0=()=>{var r;return(r=bh())==null?void 0:r.config},$0=r=>{var e;return(e=bh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ih(JSON.stringify(n)),ih(JSON.stringify(f)),""].join(".")}const Ml={};function wA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ml))Ml[e]?r.emulator.push(e):r.prod.push(e);return r}function RA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let hv=!1;function J0(r,e){if(typeof window>"u"||typeof document>"u"||!co(window.location.host)||Ml[r]===e||Ml[r]||hv)return;Ml[r]=e;function n(C){return`__firebase__banner__${C}`}const s="__firebase__banner",u=wA().prod.length>0;function f(){const C=document.getElementById(s);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,z){C.setAttribute("width","24"),C.setAttribute("id",z),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{hv=!0,f()},C}function T(C,z){C.setAttribute("id",z),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function S(){const C=RA(s),z=n("text"),ee=document.getElementById(z)||document.createElement("span"),q=n("learnmore"),G=document.getElementById(q)||document.createElement("a"),le=n("preprendIcon"),fe=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const de=C.element;p(de),T(G,q);const Se=v();g(fe,le),de.append(fe,ee,G,Se),document.body.appendChild(de)}u?(ee.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function xA(){var e;const r=(e=bh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function DA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OA(){const r=sn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function VA(){return!xA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MA(){try{return typeof indexedDB=="object"}catch{return!1}}function jA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="FirebaseError";class fr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=LA,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?kA(u,s):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new fr(l,p,s)}}function kA(r,e){return r.replace(PA,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const PA=/\{\$([^}]+)}/g;function UA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function $s(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const u=r[l],f=e[l];if(fv(u)&&fv(f)){if(!$s(u,f))return!1}else if(u!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function fv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function xl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,u]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Nl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function zA(r,e){const n=new qA(r,e);return n.subscribe.bind(n)}class qA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");BA(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Xd),l.error===void 0&&(l.error=Xd),l.complete===void 0&&(l.complete=Xd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BA(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r){return r&&r._delegate?r._delegate:r}class Zs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new AA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GA(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);s===p&&f.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:FA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FA(r){return r===Ys?void 0:r}function GA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(je||(je={}));const YA={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},KA=je.INFO,XA={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},$A=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=XA[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zm{constructor(e){this.name=e,this._logLevel=KA,this._logHandler=$A,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const ZA=(r,e)=>e.some(n=>r instanceof n);let dv,mv;function JA(){return dv||(dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WA(){return mv||(mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,hm=new WeakMap,eE=new WeakMap,$d=new WeakMap,qm=new WeakMap;function eS(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Wr(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&W0.set(n,r)}).catch(()=>{}),qm.set(e,r),e}function tS(r){if(hm.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});hm.set(r,e)}let fm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return hm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||eE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function nS(r){fm=r(fm)}function iS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Zd(this),e,...n);return eE.set(s,e.sort?e.sort():[e]),Wr(s)}:WA().includes(r)?function(...e){return r.apply(Zd(this),e),Wr(W0.get(this))}:function(...e){return Wr(r.apply(Zd(this),e))}}function rS(r){return typeof r=="function"?iS(r):(r instanceof IDBTransaction&&tS(r),ZA(r,JA())?new Proxy(r,fm):r)}function Wr(r){if(r instanceof IDBRequest)return eS(r);if($d.has(r))return $d.get(r);const e=rS(r);return e!==r&&($d.set(r,e),qm.set(e,r)),e}const Zd=r=>qm.get(r);function sS(r,e,{blocked:n,upgrade:s,blocking:l,terminated:u}={}){const f=indexedDB.open(r,e),p=Wr(f);return s&&f.addEventListener("upgradeneeded",g=>{s(Wr(f.result),g.oldVersion,g.newVersion,Wr(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",v=>l(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const aS=["get","getKey","getAll","getAllKeys","count"],oS=["put","add","delete","clear"],Jd=new Map;function pv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=oS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||aS.includes(n)))return;const u=async function(f,...p){const g=this.transaction(f,l?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(p.shift())),(await Promise.all([v[n](...p),l&&g.done]))[0]};return Jd.set(e,u),u}nS(r=>({...r,get:(e,n,s)=>pv(e,n)||r.get(e,n,s),has:(e,n)=>!!pv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function uS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dm="@firebase/app",gv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new zm("@firebase/app"),cS="@firebase/app-compat",hS="@firebase/analytics-compat",fS="@firebase/analytics",dS="@firebase/app-check-compat",mS="@firebase/app-check",pS="@firebase/auth",gS="@firebase/auth-compat",yS="@firebase/database",_S="@firebase/data-connect",vS="@firebase/database-compat",ES="@firebase/functions",TS="@firebase/functions-compat",bS="@firebase/installations",AS="@firebase/installations-compat",SS="@firebase/messaging",wS="@firebase/messaging-compat",RS="@firebase/performance",IS="@firebase/performance-compat",xS="@firebase/remote-config",NS="@firebase/remote-config-compat",CS="@firebase/storage",DS="@firebase/storage-compat",OS="@firebase/firestore",VS="@firebase/ai",MS="@firebase/firestore-compat",jS="firebase",LS="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",kS={[dm]:"fire-core",[cS]:"fire-core-compat",[fS]:"fire-analytics",[hS]:"fire-analytics-compat",[mS]:"fire-app-check",[dS]:"fire-app-check-compat",[pS]:"fire-auth",[gS]:"fire-auth-compat",[yS]:"fire-rtdb",[_S]:"fire-data-connect",[vS]:"fire-rtdb-compat",[ES]:"fire-fn",[TS]:"fire-fn-compat",[bS]:"fire-iid",[AS]:"fire-iid-compat",[SS]:"fire-fcm",[wS]:"fire-fcm-compat",[RS]:"fire-perf",[IS]:"fire-perf-compat",[xS]:"fire-rc",[NS]:"fire-rc-compat",[CS]:"fire-gcs",[DS]:"fire-gcs-compat",[OS]:"fire-fst",[MS]:"fire-fst-compat",[VS]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Map,PS=new Map,pm=new Map;function yv(r,e){try{r.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function no(r){const e=r.name;if(pm.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;pm.set(e,r);for(const n of rh.values())yv(n,r);for(const n of PS.values())yv(n,r);return!0}function Bm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ai(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new $l("app","Firebase",US);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=LS;function tE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:mm,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw es.create("bad-app-name",{appName:String(l)});if(n||(n=X0()),!n)throw es.create("no-options");const u=rh.get(l);if(u){if($s(n,u.options)&&$s(s,u.config))return u;throw es.create("duplicate-app",{appName:l})}const f=new QA(l);for(const g of pm.values())f.addComponent(g);const p=new zS(n,s,f);return rh.set(l,p),p}function nE(r=mm){const e=rh.get(r);if(!e&&r===mm&&X0())return tE();if(!e)throw es.create("no-app",{appName:r});return e}function ts(r,e,n){let s=kS[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${s}" with version "${e}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(f.join(" "));return}no(new Zs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="firebase-heartbeat-database",BS=1,zl="firebase-heartbeat-store";let Wd=null;function iE(){return Wd||(Wd=sS(qS,BS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(zl)}catch(n){console.warn(n)}}}}).catch(r=>{throw es.create("idb-open",{originalErrorMessage:r.message})})),Wd}async function HS(r){try{const n=(await iE()).transaction(zl),s=await n.objectStore(zl).get(rE(r));return await n.done,s}catch(e){if(e instanceof fr)lr.warn(e.message);else{const n=es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(n.message)}}}async function _v(r,e){try{const s=(await iE()).transaction(zl,"readwrite");await s.objectStore(zl).put(e,rE(r)),await s.done}catch(n){if(n instanceof fr)lr.warn(n.message);else{const s=es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lr.warn(s.message)}}}function rE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1024,GS=30;class QS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=vv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats.length>GS){const f=XS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){lr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vv(),{heartbeatsToSend:s,unsentEntries:l}=YS(this._heartbeatsCache.heartbeats),u=ih(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return lr.warn(n),""}}}function vv(){return new Date().toISOString().substring(0,10)}function YS(r,e=FS){const n=[];let s=r.slice();for(const l of r){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Ev(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Ev(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class KS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MA()?jA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ev(r){return ih(JSON.stringify({version:2,heartbeats:r})).length}function XS(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(r){no(new Zs("platform-logger",e=>new lS(e),"PRIVATE")),no(new Zs("heartbeat",e=>new QS(e),"PRIVATE")),ts(dm,gv,r),ts(dm,gv,"esm2020"),ts("fire-js","")}$S("");var ZS="firebase",JS="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(ZS,JS,"app");function sE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WS=sE,aE=new $l("auth","Firebase",sE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new zm("@firebase/auth");function ew(r,...e){sh.logLevel<=je.WARN&&sh.warn(`Auth (${ho}): ${r}`,...e)}function Gc(r,...e){sh.logLevel<=je.ERROR&&sh.error(`Auth (${ho}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(r,...e){throw Hm(r,...e)}function Oi(r,...e){return Hm(r,...e)}function oE(r,e,n){const s={...WS(),[e]:n};return new $l("auth","Firebase",s).create(e,{appName:r.name})}function ns(r){return oE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return aE.create(r,...e)}function be(r,e,...n){if(!r)throw Hm(e,...n)}function sr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gc(e),new Error(e)}function ur(r,e){r||sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function tw(){return Tv()==="http:"||Tv()==="https:"}function Tv(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tw()||CA()||"connection"in navigator)?navigator.onLine:!0}function iw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ur(n>e,"Short delay should be less than long delay!"),this.isMobile=IA()||DA()}get(){return nw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(r,e){ur(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aw=new Jl(3e4,6e4);function ta(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function hs(r,e,n,s,l={}){return uE(r,l,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const p=Zl({key:r.config.apiKey,...f}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:g,...u};return NA()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&co(r.emulatorConfig.host)&&(v.credentials="include"),lE.fetch()(await cE(r,r.config.apiHost,n,p),v)})}async function uE(r,e,n){r._canInitEmulator=!1;const s={...rw,...e};try{const l=new lw(r),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Pc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[g,v]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Pc(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw Pc(r,"user-disabled",f);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw oE(r,T,v);li(r,T)}}catch(l){if(l instanceof fr)throw l;li(r,"network-request-failed",{message:String(l)})}}async function Ah(r,e,n,s,l={}){const u=await hs(r,e,n,s,l);return"mfaPendingCredential"in u&&li(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function cE(r,e,n,s){const l=`${e}${n}?${s}`,u=r,f=u.config.emulator?Fm(r.config,l):`${r.config.apiScheme}://${l}`;return sw.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function ow(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Oi(this.auth,"network-request-failed")),aw.get())})}}function Pc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Oi(r,e,s);return l.customData._tokenResponse=n,l}function bv(r){return r!==void 0&&r.enterprise!==void 0}class uw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ow(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cw(r,e){return hs(r,"GET","/v2/recaptchaConfig",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(r,e){return hs(r,"POST","/v1/accounts:delete",e)}async function ah(r,e){return hs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fw(r,e=!1){const n=jt(r),s=await n.getIdToken(e),l=Gm(s);be(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:l,token:s,authTime:jl(em(l.auth_time)),issuedAtTime:jl(em(l.iat)),expirationTime:jl(em(l.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function em(r){return Number(r)*1e3}function Gm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Gc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Y0(n);return l?JSON.parse(l):(Gc("Failed to decode base64 JWT payload"),null)}catch(l){return Gc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Av(r){const e=Gm(r);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof fr&&dw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function dw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jl(this.lastLoginAt),this.creationTime=jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(r){var S;const e=r.auth,n=await r.getIdToken(),s=await ql(r,ah(e,{idToken:n}));be(s==null?void 0:s.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const u=(S=l.providerUserInfo)!=null&&S.length?hE(l.providerUserInfo):[],f=gw(r.providerData,u),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),v=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new ym(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(r,T)}async function pw(r){const e=jt(r);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gw(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function hE(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(r,e){const n=await uE(r,{},async()=>{const s=Zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=r.config,f=await cE(r,l,"/v1/token",`key=${u}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&co(r.emulatorConfig.host)&&(g.credentials="include"),lE.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _w(r,e){return hs(r,"POST","/v2/accounts:revokeToken",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=Av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:u}=await yw(e,n);this.updateTokensAndExpiration(s,l,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:u}=n,f=new Za;return s&&(be(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(be(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(be(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Za,this.toJSON())}_performRefresh(){return sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(r,e){be(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class oi{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new mw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new ym(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await ql(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fw(this,e)}reload(){return pw(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await ql(this,hw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,v=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:C,isAnonymous:z,providerData:ee,stsTokenManager:q}=n;be(S&&q,e,"internal-error");const G=Za.fromJSON(this.name,q);be(typeof S=="string",e,"internal-error"),Qr(s,e.name),Qr(l,e.name),be(typeof C=="boolean",e,"internal-error"),be(typeof z=="boolean",e,"internal-error"),Qr(u,e.name),Qr(f,e.name),Qr(p,e.name),Qr(g,e.name),Qr(v,e.name),Qr(T,e.name);const le=new oi({uid:S,auth:e,email:l,emailVerified:C,displayName:s,isAnonymous:z,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:G,createdAt:v,lastLoginAt:T});return ee&&Array.isArray(ee)&&(le.providerData=ee.map(fe=>({...fe}))),g&&(le._redirectEventId=g),le}static async _fromIdTokenResponse(e,n,s=!1){const l=new Za;l.updateFromServerResponse(n);const u=new oi({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await oh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];be(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?hE(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(u!=null&&u.length),p=new Za;p.updateFromIdToken(s);const g=new oi({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new ym(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;function ar(r){ur(r instanceof Function,"Expected a class definition");let e=Sv.get(r);return e?(ur(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Sv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fE.type="NONE";const wv=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ja{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:u}=this.auth;this.fullUserKey=Qc(this.userKey,l.apiKey,u),this.fullPersistenceKey=Qc("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ah(this.auth,{idToken:e}).catch(()=>{});return n?oi._fromGetAccountInfoResponse(this.auth,n,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ja(ar(wv),e,s);const l=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=l[0]||ar(wv);const f=Qc(s,e.config.apiKey,e.name);let p=null;for(const v of n)try{const T=await v._get(f);if(T){let S;if(typeof T=="string"){const C=await ah(e,{idToken:T}).catch(()=>{});if(!C)break;S=await oi._fromGetAccountInfoResponse(e,C,T)}else S=oi._fromJSON(e,T);v!==u&&(p=S),u=v;break}}catch{}const g=l.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ja(u,e,s):(u=g[0],p&&await u._set(f,p.toJSON()),await Promise.all(n.map(async v=>{if(v!==u)try{await v._remove(f)}catch{}})),new Ja(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_E(e))return"Blackberry";if(vE(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||pE(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function dE(r=sn()){return/firefox\//i.test(r)}function mE(r=sn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pE(r=sn()){return/crios\//i.test(r)}function gE(r=sn()){return/iemobile/i.test(r)}function yE(r=sn()){return/android/i.test(r)}function _E(r=sn()){return/blackberry/i.test(r)}function vE(r=sn()){return/webos/i.test(r)}function Qm(r=sn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function vw(r=sn()){var e;return Qm(r)&&!!((e=window.navigator)!=null&&e.standalone)}function Ew(){return OA()&&document.documentMode===10}function EE(r=sn()){return Qm(r)||yE(r)||vE(r)||_E(r)||/windows phone/i.test(r)||gE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r,e=[]){let n;switch(r){case"Browser":n=Rv(sn());break;case"Worker":n=`${Rv(sn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ho}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,p)=>{try{const g=e(u);f(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(r,e={}){return hs(r,"GET","/v2/passwordPolicy",ta(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=6;class Sw{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Aw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new Tw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(async()=>{var s,l,u;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ah(this,{idToken:e}),s=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(ai(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,p=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===p)&&(g!=null&&g.user)&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(f){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(ns(this));const n=e?jt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bw(this),n=new Sw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await _w(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ar(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,l);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ew(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function fo(r){return jt(r)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=zA(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rw(r){Sh=r}function bE(r){return Sh.loadJS(r)}function Iw(){return Sh.recaptchaEnterpriseScript}function xw(){return Sh.gapiScript}function Nw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Cw{constructor(){this.enterprise=new Dw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Dw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Ow="recaptcha-enterprise",AE="NO_RECAPTCHA";class Vw{constructor(e){this.type=Ow,this.auth=fo(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{cw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new uw(g);return u.tenantId==null?u._agentRecaptchaConfig=v:u._tenantRecaptchaConfigs[u.tenantId]=v,f(v.siteKey)}}).catch(g=>{p(g)})})}function l(u,f,p){const g=window.grecaptcha;bv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(v=>{f(v)}).catch(()=>{f(AE)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Cw().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(p=>{if(!n&&bv(window.grecaptcha))l(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Iw();g.length!==0&&(g+=p),bE(g).then(()=>{l(p,u,f)}).catch(v=>{f(v)})}}).catch(p=>{f(p)})})}}async function xv(r,e,n,s=!1,l=!1){const u=new Vw(r);let f;if(l)f=AE;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Nv(r,e,n,s,l){var u;if((u=r._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await xv(r,e,n,n==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await xv(r,e,n,n==="getOobCode");return s(r,p)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(r,e){const n=Bm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if($s(u,e??{}))return l;li(l,"already-initialized")}return n.initialize({options:e})}function jw(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ar);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Lw(r,e,n){const s=fo(r);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,u=SE(e),{host:f,port:p}=kw(e),g=p===null?"":`:${p}`,v={url:`${u}//${f}${g}/`},T=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be($s(v,s.config.emulator)&&$s(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,co(f)?(Z0(`${u}//${f}${g}`),J0("Auth",!0)):Pw()}function SE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function kw(r){const e=SE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const u=l[1];return{host:u,port:Cv(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Cv(f)}}}function Cv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Pw(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sr("not implemented")}_getIdTokenResponse(e){return sr("not implemented")}_linkToIdToken(e,n){return sr("not implemented")}_getReauthenticationResolver(e){return sr("not implemented")}}async function Uw(r,e){return hs(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(r,e){return Ah(r,"POST","/v1/accounts:signInWithPassword",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(r,e){return Ah(r,"POST","/v1/accounts:signInWithEmailLink",ta(r,e))}async function Bw(r,e){return Ah(r,"POST","/v1/accounts:signInWithEmailLink",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends Ym{constructor(e,n,s,l=null){super("password",s),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Bl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Bl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nv(e,n,"signInWithPassword",zw);case"emailLink":return qw(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nv(e,s,"signUpPassword",Uw);case"emailLink":return Bw(e,{idToken:n,email:this._email,oobCode:this._password});default:li(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(r,e){return Ah(r,"POST","/v1/accounts:signInWithIdp",ta(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="http://localhost";class Js extends Ym{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...u}=n;if(!s||!l)return null;const f=new Js(s,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Wa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Wa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wa(e,n)}buildRequest(){const e={requestUri:Hw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gw(r){const e=xl(Nl(r)).link,n=e?xl(Nl(e)).deep_link_id:null,s=xl(Nl(r)).deep_link_id;return(s?xl(Nl(s)).link:null)||s||n||e||r}class Km{constructor(e){const n=xl(Nl(e)),s=n.apiKey??null,l=n.oobCode??null,u=Fw(n.mode??null);be(s&&l&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Gw(e);try{return new Km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(e,n){return Bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Km.parseLink(n);return be(s,"argument-error"),Bl._fromEmailAndCode(e,s.code,s.tenantId)}}mo.PROVIDER_ID="password";mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends wE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Wl{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Xr.credential(n,s)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Wl{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Wl{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Zr.credential(n,s)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const u=await oi._fromIdTokenResponse(e,s,l),f=Dv(s);return new io({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=Dv(s);return new io({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function Dv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends fr{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new lh(e,n,s,l)}}function RE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(r,u,e,s):u})}async function Qw(r,e,n=!1){const s=await ql(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return io._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(r,e,n=!1){const{auth:s}=r;if(ai(s.app))return Promise.reject(ns(s));const l="reauthenticate";try{const u=await ql(r,RE(s,l,e,r),n);be(u.idToken,s,"internal-error");const f=Gm(u.idToken);be(f,s,"internal-error");const{sub:p}=f;return be(r.uid===p,s,"user-mismatch"),io._forOperation(r,l,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&li(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(r,e,n=!1){if(ai(r.app))return Promise.reject(ns(r));const s="signIn",l=await RE(r,s,e),u=await io._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(u.user),u}async function Kw(r,e){return IE(fo(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(r){const e=fo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function $w(r,e,n){return ai(r.app)?Promise.reject(ns(r)):Kw(jt(r),mo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Xw(r),s})}function Zw(r,e,n,s){return jt(r).onIdTokenChanged(e,n,s)}function Jw(r,e,n){return jt(r).beforeAuthStateChanged(e,n)}function Ww(r,e,n,s){return jt(r).onAuthStateChanged(e,n,s)}function e2(r){return jt(r).signOut()}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=1e3,n2=10;class NE extends xE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);Ew()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,n2):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},t2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NE.type="LOCAL";const i2=NE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends xE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CE.type="SESSION";const DE=CE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new wh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(f).map(async v=>v(n.origin,u)),g=await r2(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((p,g)=>{const v=Xm("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(S){const C=S;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(C.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function a2(r){Vi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function o2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l2(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function u2(){return OE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebaseLocalStorageDb",c2=1,ch="firebaseLocalStorage",ME="fbase_key";class eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rh(r,e){return r.transaction([ch],e?"readwrite":"readonly").objectStore(ch)}function h2(){const r=indexedDB.deleteDatabase(VE);return new eu(r).toPromise()}function _m(){const r=indexedDB.open(VE,c2);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ch,{keyPath:ME})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ch)?e(s):(s.close(),await h2(),e(await _m()))})})}async function Ov(r,e,n){const s=Rh(r,!0).put({[ME]:e,value:n});return new eu(s).toPromise()}async function f2(r,e){const n=Rh(r,!1).get(e),s=await new eu(n).toPromise();return s===void 0?null:s.value}function Vv(r,e){const n=Rh(r,!0).delete(e);return new eu(n).toPromise()}const d2=800,m2=3;class jE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>m2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(u2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await o2(),!this.activeServiceWorker)return;this.sender=new s2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await Ov(e,uh,"1"),await Vv(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ov(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>f2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Rh(l,!1).getAll();return new eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jE.type="LOCAL";const p2=jE;new Jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(r,e){return e?ar(e):(be(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends Ym{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function y2(r){return IE(r.auth,new $m(r),r.bypassAuthState)}function _2(r){const{auth:e,user:n}=r;return be(n,e,"internal-error"),Yw(n,new $m(r),r.bypassAuthState)}async function v2(r){const{auth:e,user:n}=r;return be(n,e,"internal-error"),Qw(n,new $m(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,s,l,u=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return y2;case"linkViaPopup":case"linkViaRedirect":return v2;case"reauthViaPopup":case"reauthViaRedirect":return _2;default:li(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=new Jl(2e3,1e4);class $a extends LE{constructor(e,n,s,l,u){super(e,n,l,u),this.provider=s,this.authWindow=null,this.pollId=null,$a.currentPopupAction&&$a.currentPopupAction.cancel(),$a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){ur(this.filter.length===1,"Popup operations only handle one event");const e=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E2.get())};e()}}$a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="pendingRedirect",Yc=new Map;class b2 extends LE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const s=await A2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A2(r,e){const n=R2(e),s=w2(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function S2(r,e){Yc.set(r._key(),e)}function w2(r){return ar(r._redirectPersistence)}function R2(r){return Qc(T2,r.config.apiKey,r.name)}async function I2(r,e,n=!1){if(ai(r.app))return Promise.reject(ns(r));const s=fo(r),l=g2(s,e),f=await new b2(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=600*1e3;class N2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!kE(e)){const l=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Oi(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function kE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(r,e={}){return hs(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V2=/^https?/;async function M2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await D2(r);for(const n of e)try{if(j2(n))return}catch{}li(r,"unauthorized-domain")}function j2(r){const e=gm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!V2.test(n))return!1;if(O2.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new Jl(3e4,6e4);function jv(){const r=Vi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function k2(r){return new Promise((e,n)=>{var l,u,f;function s(){jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jv(),n(Oi(r,"network-request-failed"))},timeout:L2.get()})}if((u=(l=Vi().gapi)==null?void 0:l.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Vi().gapi)!=null&&f.load)s();else{const p=Nw("iframefcb");return Vi()[p]=()=>{gapi.load?s():n(Oi(r,"network-request-failed"))},bE(`${xw()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Kc=null,e})}let Kc=null;function P2(r){return Kc=Kc||k2(r),Kc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new Jl(5e3,15e3),z2="__/auth/iframe",q2="emulator/auth/iframe",B2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F2(r){const e=r.config;be(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Fm(e,q2):`https://${r.config.authDomain}/${z2}`,s={apiKey:e.apiKey,appName:r.name,v:ho},l=H2.get(r.config.apiHost);l&&(s.eid=l);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Zl(s).slice(1)}`}async function G2(r){const e=await P2(r),n=Vi().gapi;return be(n,r,"internal-error"),e.open({where:document.body,url:F2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B2,dontclear:!0},s=>new Promise(async(l,u)=>{await s.restyle({setHideOnLeave:!1});const f=Oi(r,"network-request-failed"),p=Vi().setTimeout(()=>{u(f)},U2.get());function g(){Vi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y2=500,K2=600,X2="_blank",$2="http://localhost";class Lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z2(r,e,n,s=Y2,l=K2){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...Q2,width:s.toString(),height:l.toString(),top:u,left:f},v=sn().toLowerCase();n&&(p=pE(v)?X2:n),dE(v)&&(e=e||$2,g.scrollbars="yes");const T=Object.entries(g).reduce((C,[z,ee])=>`${C}${z}=${ee},`,"");if(vw(v)&&p!=="_self")return J2(e||"",p),new Lv(null);const S=window.open(e||"",p,T);be(S,r,"popup-blocked");try{S.focus()}catch{}return new Lv(S)}function J2(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="__/auth/handler",eR="emulator/auth/handler",tR=encodeURIComponent("fac");async function kv(r,e,n,s,l,u){be(r.config.authDomain,r,"auth-domain-config-required"),be(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ho,eventId:l};if(e instanceof wE){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",UA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))f[T]=S}if(e instanceof Wl){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),v=g?`#${tR}=${encodeURIComponent(g)}`:"";return`${nR(r)}?${Zl(p).slice(1)}${v}`}function nR({config:r}){return r.emulator?Fm(r,eR):`https://${r.authDomain}/${W2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class iR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DE,this._completeRedirectFn=I2,this._overrideRedirectResult=S2}async _openPopup(e,n,s,l){var f;ur((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await kv(e,n,s,gm(),l);return Z2(e,u,Xm())}async _openRedirect(e,n,s,l){await this._originValidation(e);const u=await kv(e,n,s,gm(),l);return a2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(ur(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await G2(e),s=new N2(e);return n.register("authEvent",l=>(be(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},l=>{var f;const u=(f=l==null?void 0:l[0])==null?void 0:f[tm];u!==void 0&&n(!!u),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EE()||mE()||Qm()}}const rR=iR;var Pv="@firebase/auth",Uv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oR(r){no(new Zs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;be(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(r)},v=new ww(s,l,u,g);return jw(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),no(new Zs("auth-internal",e=>{const n=fo(e.getProvider("auth").getImmediate());return(s=>new sR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ts(Pv,Uv,aR(r)),ts(Pv,Uv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=300,uR=$0("authIdTokenMaxAge")||lR;let zv=null;const cR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>uR)return;const l=n==null?void 0:n.token;zv!==l&&(zv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function hR(r=nE()){const e=Bm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=Mw(r,{popupRedirectResolver:rR,persistence:[p2,i2,DE]}),s=$0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=cR(u.toString());Jw(n,f,()=>f(n.currentUser)),Zw(n,p=>f(p))}}const l=K0("auth");return l&&Lw(n,`http://${l}`),n}function fR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Rw({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const u=Oi("internal-error");u.customData=l,n(u)},s.type="text/javascript",s.charset="UTF-8",fR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oR("Browser");var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,PE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,R){function I(){}I.prototype=R.prototype,w.F=R.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(M,D,L){for(var x=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)x[nt-2]=arguments[nt];return R.prototype[D].apply(M,x)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(w,R,I){I||(I=0);const M=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)M[D]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(D=0;D<16;++D)M[D]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=w.g[0],I=w.g[1],D=w.g[2];let L=w.g[3],x;x=R+(L^I&(D^L))+M[0]+3614090360&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(D^R&(I^D))+M[1]+3905402710&4294967295,L=R+(x<<12&4294967295|x>>>20),x=D+(I^L&(R^I))+M[2]+606105819&4294967295,D=L+(x<<17&4294967295|x>>>15),x=I+(R^D&(L^R))+M[3]+3250441966&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(L^I&(D^L))+M[4]+4118548399&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(D^R&(I^D))+M[5]+1200080426&4294967295,L=R+(x<<12&4294967295|x>>>20),x=D+(I^L&(R^I))+M[6]+2821735955&4294967295,D=L+(x<<17&4294967295|x>>>15),x=I+(R^D&(L^R))+M[7]+4249261313&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(L^I&(D^L))+M[8]+1770035416&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(D^R&(I^D))+M[9]+2336552879&4294967295,L=R+(x<<12&4294967295|x>>>20),x=D+(I^L&(R^I))+M[10]+4294925233&4294967295,D=L+(x<<17&4294967295|x>>>15),x=I+(R^D&(L^R))+M[11]+2304563134&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(L^I&(D^L))+M[12]+1804603682&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(D^R&(I^D))+M[13]+4254626195&4294967295,L=R+(x<<12&4294967295|x>>>20),x=D+(I^L&(R^I))+M[14]+2792965006&4294967295,D=L+(x<<17&4294967295|x>>>15),x=I+(R^D&(L^R))+M[15]+1236535329&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(D^L&(I^D))+M[1]+4129170786&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^D&(R^I))+M[6]+3225465664&4294967295,L=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(L^R))+M[11]+643717713&4294967295,D=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(D^L))+M[0]+3921069994&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^L&(I^D))+M[5]+3593408605&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^D&(R^I))+M[10]+38016083&4294967295,L=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(L^R))+M[15]+3634488961&4294967295,D=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(D^L))+M[4]+3889429448&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^L&(I^D))+M[9]+568446438&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^D&(R^I))+M[14]+3275163606&4294967295,L=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(L^R))+M[3]+4107603335&4294967295,D=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(D^L))+M[8]+1163531501&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^L&(I^D))+M[13]+2850285829&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^D&(R^I))+M[2]+4243563512&4294967295,L=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(L^R))+M[7]+1735328473&4294967295,D=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(D^L))+M[12]+2368359562&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(I^D^L)+M[5]+4294588738&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^D)+M[8]+2272392833&4294967295,L=R+(x<<11&4294967295|x>>>21),x=D+(L^R^I)+M[11]+1839030562&4294967295,D=L+(x<<16&4294967295|x>>>16),x=I+(D^L^R)+M[14]+4259657740&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^L)+M[1]+2763975236&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^D)+M[4]+1272893353&4294967295,L=R+(x<<11&4294967295|x>>>21),x=D+(L^R^I)+M[7]+4139469664&4294967295,D=L+(x<<16&4294967295|x>>>16),x=I+(D^L^R)+M[10]+3200236656&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^L)+M[13]+681279174&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^D)+M[0]+3936430074&4294967295,L=R+(x<<11&4294967295|x>>>21),x=D+(L^R^I)+M[3]+3572445317&4294967295,D=L+(x<<16&4294967295|x>>>16),x=I+(D^L^R)+M[6]+76029189&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^L)+M[9]+3654602809&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^D)+M[12]+3873151461&4294967295,L=R+(x<<11&4294967295|x>>>21),x=D+(L^R^I)+M[15]+530742520&4294967295,D=L+(x<<16&4294967295|x>>>16),x=I+(D^L^R)+M[2]+3299628645&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(D^(I|~L))+M[0]+4096336452&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~D))+M[7]+1126891415&4294967295,L=R+(x<<10&4294967295|x>>>22),x=D+(R^(L|~I))+M[14]+2878612391&4294967295,D=L+(x<<15&4294967295|x>>>17),x=I+(L^(D|~R))+M[5]+4237533241&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~L))+M[12]+1700485571&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~D))+M[3]+2399980690&4294967295,L=R+(x<<10&4294967295|x>>>22),x=D+(R^(L|~I))+M[10]+4293915773&4294967295,D=L+(x<<15&4294967295|x>>>17),x=I+(L^(D|~R))+M[1]+2240044497&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~L))+M[8]+1873313359&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~D))+M[15]+4264355552&4294967295,L=R+(x<<10&4294967295|x>>>22),x=D+(R^(L|~I))+M[6]+2734768916&4294967295,D=L+(x<<15&4294967295|x>>>17),x=I+(L^(D|~R))+M[13]+1309151649&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~L))+M[4]+4149444226&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~D))+M[11]+3174756917&4294967295,L=R+(x<<10&4294967295|x>>>22),x=D+(R^(L|~I))+M[2]+718787259&4294967295,D=L+(x<<15&4294967295|x>>>17),x=I+(L^(D|~R))+M[9]+3951481745&4294967295,w.g[0]=w.g[0]+R&4294967295,w.g[1]=w.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+L&4294967295}s.prototype.v=function(w,R){R===void 0&&(R=w.length);const I=R-this.blockSize,M=this.C;let D=this.h,L=0;for(;L<R;){if(D==0)for(;L<=I;)l(this,w,L),L+=this.blockSize;if(typeof w=="string"){for(;L<R;)if(M[D++]=w.charCodeAt(L++),D==this.blockSize){l(this,M),D=0;break}}else for(;L<R;)if(M[D++]=w[L++],D==this.blockSize){l(this,M),D=0;break}}this.h=D,this.o+=R},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var R=1;R<w.length-8;++R)w[R]=0;R=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=R&255,R/=256;for(this.v(w),w=Array(16),R=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)w[R++]=this.g[I]>>>M&255;return w};function u(w,R){var I=p;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=R(w)}function f(w,R){this.h=R;const I=[];let M=!0;for(let D=w.length-1;D>=0;D--){const L=w[D]|0;M&&L==R||(I[D]=L,M=!1)}this.g=I}var p={};function g(w){return-128<=w&&w<128?u(w,function(R){return new f([R|0],R<0?-1:0)}):new f([w|0],w<0?-1:0)}function v(w){if(isNaN(w)||!isFinite(w))return S;if(w<0)return G(v(-w));const R=[];let I=1;for(let M=0;w>=I;M++)R[M]=w/I|0,I*=4294967296;return new f(R,0)}function T(w,R){if(w.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(w.charAt(0)=="-")return G(T(w.substring(1),R));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=v(Math.pow(R,8));let M=S;for(let L=0;L<w.length;L+=8){var D=Math.min(8,w.length-L);const x=parseInt(w.substring(L,L+D),R);D<8?(D=v(Math.pow(R,D)),M=M.j(D).add(v(x))):(M=M.j(I),M=M.add(v(x)))}return M}var S=g(0),C=g(1),z=g(16777216);r=f.prototype,r.m=function(){if(q(this))return-G(this).m();let w=0,R=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);w+=(M>=0?M:4294967296+M)*R,R*=4294967296}return w},r.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(ee(this))return"0";if(q(this))return"-"+G(this).toString(w);const R=v(Math.pow(w,6));var I=this;let M="";for(;;){const D=Se(I,R).g;I=le(I,D.j(R));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=D,ee(I))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},r.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function ee(w){if(w.h!=0)return!1;for(let R=0;R<w.g.length;R++)if(w.g[R]!=0)return!1;return!0}function q(w){return w.h==-1}r.l=function(w){return w=le(this,w),q(w)?-1:ee(w)?0:1};function G(w){const R=w.g.length,I=[];for(let M=0;M<R;M++)I[M]=~w.g[M];return new f(I,~w.h).add(C)}r.abs=function(){return q(this)?G(this):this},r.add=function(w){const R=Math.max(this.g.length,w.g.length),I=[];let M=0;for(let D=0;D<=R;D++){let L=M+(this.i(D)&65535)+(w.i(D)&65535),x=(L>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);M=x>>>16,L&=65535,x&=65535,I[D]=x<<16|L}return new f(I,I[I.length-1]&-2147483648?-1:0)};function le(w,R){return w.add(G(R))}r.j=function(w){if(ee(this)||ee(w))return S;if(q(this))return q(w)?G(this).j(G(w)):G(G(this).j(w));if(q(w))return G(this.j(G(w)));if(this.l(z)<0&&w.l(z)<0)return v(this.m()*w.m());const R=this.g.length+w.g.length,I=[];for(var M=0;M<2*R;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<w.g.length;D++){const L=this.i(M)>>>16,x=this.i(M)&65535,nt=w.i(D)>>>16,dt=w.i(D)&65535;I[2*M+2*D]+=x*dt,fe(I,2*M+2*D),I[2*M+2*D+1]+=L*dt,fe(I,2*M+2*D+1),I[2*M+2*D+1]+=x*nt,fe(I,2*M+2*D+1),I[2*M+2*D+2]+=L*nt,fe(I,2*M+2*D+2)}for(w=0;w<R;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=R;w<2*R;w++)I[w]=0;return new f(I,0)};function fe(w,R){for(;(w[R]&65535)!=w[R];)w[R+1]+=w[R]>>>16,w[R]&=65535,R++}function de(w,R){this.g=w,this.h=R}function Se(w,R){if(ee(R))throw Error("division by zero");if(ee(w))return new de(S,S);if(q(w))return R=Se(G(w),R),new de(G(R.g),G(R.h));if(q(R))return R=Se(w,G(R)),new de(G(R.g),R.h);if(w.g.length>30){if(q(w)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var I=C,M=R;M.l(w)<=0;)I=ne(I),M=ne(M);var D=se(I,1),L=se(M,1);for(M=se(M,2),I=se(I,2);!ee(M);){var x=L.add(M);x.l(w)<=0&&(D=D.add(I),L=x),M=se(M,1),I=se(I,1)}return R=le(w,D.j(R)),new de(D,R)}for(D=S;w.l(R)>=0;){for(I=Math.max(1,Math.floor(w.m()/R.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=v(I),x=L.j(R);q(x)||x.l(w)>0;)I-=M,L=v(I),x=L.j(R);ee(L)&&(L=C),D=D.add(L),w=le(w,x)}return new de(D,w)}r.B=function(w){return Se(this,w).h},r.and=function(w){const R=Math.max(this.g.length,w.g.length),I=[];for(let M=0;M<R;M++)I[M]=this.i(M)&w.i(M);return new f(I,this.h&w.h)},r.or=function(w){const R=Math.max(this.g.length,w.g.length),I=[];for(let M=0;M<R;M++)I[M]=this.i(M)|w.i(M);return new f(I,this.h|w.h)},r.xor=function(w){const R=Math.max(this.g.length,w.g.length),I=[];for(let M=0;M<R;M++)I[M]=this.i(M)^w.i(M);return new f(I,this.h^w.h)};function ne(w){const R=w.g.length+1,I=[];for(let M=0;M<R;M++)I[M]=w.i(M)<<1|w.i(M-1)>>>31;return new f(I,w.h)}function se(w,R){const I=R>>5;R%=32;const M=w.g.length-I,D=[];for(let L=0;L<M;L++)D[L]=R>0?w.i(L+I)>>>R|w.i(L+I+1)<<32-R:w.i(L+I);return new f(D,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,PE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=T,is=f}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UE,Cl,zE,Xc,vm,qE,BE,HE;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var m=0;m<c.length;++m){var E=c[m];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function l(c,m){if(m)e:{var E=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var k=c[A];if(!(k in E))break e;E=E[k]}c=c[c.length-1],A=E[c],m=m(A),m!=A&&m!=null&&e(E,c,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(m){var E=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&E.push([A,m[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function g(c,m,E){return c.call.apply(c.bind,arguments)}function v(c,m,E){return v=g,v.apply(null,arguments)}function T(c,m){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function S(c,m){function E(){}E.prototype=m.prototype,c.Z=m.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(A,k,H){for(var ie=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ie[xe-2]=arguments[xe];return m.prototype[k].apply(A,ie)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function z(c){const m=c.length;if(m>0){const E=Array(m);for(let A=0;A<m;A++)E[A]=c[A];return E}return[]}function ee(c,m){for(let A=1;A<arguments.length;A++){const k=arguments[A];var E=typeof k;if(E=E!="object"?E:k?Array.isArray(k)?"array":E:"null",E=="array"||E=="object"&&typeof k.length=="number"){E=c.length||0;const H=k.length||0;c.length=E+H;for(let ie=0;ie<H;ie++)c[E+ie]=k[ie]}else c.push(k)}}class q{constructor(m,E){this.i=m,this.j=E,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function G(c){f.setTimeout(()=>{throw c},0)}function le(){var c=w;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class fe{constructor(){this.h=this.g=null}add(m,E){const A=de.get();A.set(m,E),this.h?this.h.next=A:this.g=A,this.h=A}}var de=new q(()=>new Se,c=>c.reset());class Se{constructor(){this.next=this.g=this.h=null}set(m,E){this.h=m,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,se=!1,w=new fe,R=()=>{const c=Promise.resolve(void 0);ne=()=>{c.then(I)}};function I(){for(var c;c=le();){try{c.h.call(c.g)}catch(E){G(E)}var m=de;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}se=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};f.addEventListener("test",E,m),f.removeEventListener("test",E,m)}catch{}return c})();function x(c){return/^[\s\xa0]*$/.test(c)}function nt(c,m){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}S(nt,D),nt.prototype.init=function(c,m){const E=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(E=="mouseover"?m=c.fromElement:E=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&nt.Z.h.call(this)},nt.prototype.h=function(){nt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function re(c,m,E,A,k){this.listener=c,this.proxy=null,this.src=m,this.type=E,this.capture=!!A,this.ha=k,this.key=++Y,this.da=this.fa=!1}function ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pe(c,m,E){for(const A in c)m.call(E,c[A],A,c)}function Fe(c,m){for(const E in c)m.call(void 0,c[E],E,c)}function V(c){const m={};for(const E in c)m[E]=c[E];return m}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(c,m){let E,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(E in A)c[E]=A[E];for(let H=0;H<J.length;H++)E=J[H],Object.prototype.hasOwnProperty.call(A,E)&&(c[E]=A[E])}}function Q(c){this.src=c,this.g={},this.h=0}Q.prototype.add=function(c,m,E,A,k){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const ie=ue(c,m,A,k);return ie>-1?(m=c[ie],E||(m.fa=!1)):(m=new re(m,this.src,H,!!A,k),m.fa=E,c.push(m)),m};function ae(c,m){const E=m.type;if(E in c.g){var A=c.g[E],k=Array.prototype.indexOf.call(A,m,void 0),H;(H=k>=0)&&Array.prototype.splice.call(A,k,1),H&&(ye(m),c.g[E].length==0&&(delete c.g[E],c.h--))}}function ue(c,m,E,A){for(let k=0;k<c.length;++k){const H=c[k];if(!H.da&&H.listener==m&&H.capture==!!E&&H.ha==A)return k}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Te={};function Ue(c,m,E,A,k){if(Array.isArray(m)){for(let H=0;H<m.length;H++)Ue(c,m[H],E,A,k);return null}return E=ps(E),c&&c[dt]?c.J(m,E,p(A)?!!A.capture:!1,k):Ut(c,m,E,!1,A,k)}function Ut(c,m,E,A,k,H){if(!m)throw Error("Invalid event type");const ie=p(k)?!!k.capture:!!k;let xe=Yn(c);if(xe||(c[me]=xe=new Q(c)),E=xe.add(m,E,A,ie,H),E.proxy)return E;if(A=it(),E.proxy=A,A.src=c,A.listener=E,c.addEventListener)L||(k=ie),k===void 0&&(k=!1),c.addEventListener(m.toString(),A,k);else if(c.attachEvent)c.attachEvent(Lt(m.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function it(){function c(E){return m.call(c.src,c.listener,E)}const m=Ui;return c}function Ke(c,m,E,A,k){if(Array.isArray(m))for(var H=0;H<m.length;H++)Ke(c,m[H],E,A,k);else A=p(A)?!!A.capture:!!A,E=ps(E),c&&c[dt]?(c=c.i,H=String(m).toString(),H in c.g&&(m=c.g[H],E=ue(m,E,A,k),E>-1&&(ye(m[E]),Array.prototype.splice.call(m,E,1),m.length==0&&(delete c.g[H],c.h--)))):c&&(c=Yn(c))&&(m=c.g[m.toString()],c=-1,m&&(c=ue(m,E,A,k)),(E=c>-1?m[c]:null)&&an(E))}function an(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[dt])ae(m.i,c);else{var E=c.type,A=c.proxy;m.removeEventListener?m.removeEventListener(E,A,c.capture):m.detachEvent?m.detachEvent(Lt(E),A):m.addListener&&m.removeListener&&m.removeListener(A),(E=Yn(m))?(ae(E,c),E.h==0&&(E.src=null,m[me]=null)):ye(c)}}}function Lt(c){return c in Te?Te[c]:Te[c]="on"+c}function Ui(c,m){if(c.da)c=!0;else{m=new nt(m,this);const E=c.listener,A=c.ha||c.src;c.fa&&an(c),c=E.call(A,m)}return c}function Yn(c){return c=c[me],c instanceof Q?c:null}var dr="__closure_events_fn_"+(Math.random()*1e9>>>0);function ps(c){return typeof c=="function"?c:(c[dr]||(c[dr]=function(m){return c.handleEvent(m)}),c[dr])}function yt(){M.call(this),this.i=new Q(this),this.M=this,this.G=null}S(yt,M),yt.prototype[dt]=!0,yt.prototype.removeEventListener=function(c,m,E,A){Ke(this,c,m,E,A)};function mt(c,m){var E,A=c.G;if(A)for(E=[];A;A=A.G)E.push(A);if(c=c.M,A=m.type||m,typeof m=="string")m=new D(m,c);else if(m instanceof D)m.target=m.target||c;else{var k=m;m=new D(A,c),Z(m,k)}k=!0;let H,ie;if(E)for(ie=E.length-1;ie>=0;ie--)H=m.g=E[ie],k=En(H,A,!0,m)&&k;if(H=m.g=c,k=En(H,A,!0,m)&&k,k=En(H,A,!1,m)&&k,E)for(ie=0;ie<E.length;ie++)H=m.g=E[ie],k=En(H,A,!1,m)&&k}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const E=c.g[m];for(let A=0;A<E.length;A++)ye(E[A]);delete c.g[m],c.h--}}this.G=null},yt.prototype.J=function(c,m,E,A){return this.i.add(String(c),m,!1,E,A)},yt.prototype.K=function(c,m,E,A){return this.i.add(String(c),m,!0,E,A)};function En(c,m,E,A){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let k=!0;for(let H=0;H<m.length;++H){const ie=m[H];if(ie&&!ie.da&&ie.capture==E){const xe=ie.listener,vt=ie.ha||ie.src;ie.fa&&ae(c.i,ie),k=xe.call(vt,A)!==!1&&k}}return k&&!A.defaultPrevented}function Eo(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=v(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function gs(c){c.g=Eo(()=>{c.g=null,c.i&&(c.i=!1,gs(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class zt extends M{constructor(m,E){super(),this.m=m,this.l=E,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:gs(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(c){M.call(this),this.h=c,this.g={}}S(ys,M);var To=[];function bo(c){Pe(c.g,function(m,E){this.g.hasOwnProperty(E)&&an(m)},c),c.g={}}ys.prototype.N=function(){ys.Z.N.call(this),bo(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mr=f.JSON.stringify,Gh=f.JSON.parse,cu=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function hu(){}function fu(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){D.call(this,"d")}S(Gt,D);function On(){D.call(this,"c")}S(On,D);var _t={},du=null;function sa(){return du=du||new yt}_t.Ia="serverreachability";function mu(c){D.call(this,_t.Ia,c)}S(mu,D);function ci(c){const m=sa();mt(m,new mu(m))}_t.STAT_EVENT="statevent";function _s(c,m){D.call(this,_t.STAT_EVENT,c),this.stat=m}S(_s,D);function St(c){const m=sa();mt(m,new _s(m,c))}_t.Ja="timingevent";function hi(c,m){D.call(this,_t.Ja,c),this.size=m}S(hi,D);function fi(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function Qh(c,m,E,A,k,H){c.info(function(){if(c.g)if(H){var ie="",xe=H.split("&");for(let Ge=0;Ge<xe.length;Ge++){var vt=xe[Ge].split("=");if(vt.length>1){const ut=vt[0];vt=vt[1];const Ln=ut.split("_");ie=Ln.length>=2&&Ln[1]=="type"?ie+(ut+"="+vt+"&"):ie+(ut+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+m+`
`+E+`
`+ie})}function pu(c,m,E,A,k,H,ie){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+m+`
`+E+`
`+H+" "+ie})}function di(c,m,E,A){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Yh(c,E)+(A?" "+A:"")})}function vs(c,m){c.info(function(){return"TIMEOUT: "+m})}Xn.prototype.info=function(){};function Yh(c,m){if(!c.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var E=H[c];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var k=A[0];if(k!="noop"&&k!="stop"&&k!="close")for(let ie=1;ie<A.length;ie++)A[ie]=""}}}}return mr(H)}catch{return m}}var Es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ao={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},So;function Ts(){}S(Ts,hu),Ts.prototype.g=function(){return new XMLHttpRequest},So=new Ts;function zi(c){return encodeURIComponent(String(c))}function gu(c){var m=1;c=c.split(":");const E=[];for(;m>0&&c.length;)E.push(c.shift()),m--;return c.length&&E.push(c.join(":")),E}function $n(c,m,E,A){this.j=c,this.i=m,this.l=E,this.S=A||1,this.V=new ys(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var wt={},qt={};function mi(c,m,E){c.M=1,c.A=bs(It(m)),c.u=E,c.R=!0,aa(c,null)}function aa(c,m){c.F=Date.now(),pi(c),c.B=It(c.A);var E=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),ca(E.i,"t",A),c.C=0,E=c.j.L,c.h=new Zn,c.g=Du(c.j,E?m:null,!c.u),c.P>0&&(c.O=new zt(v(c.Y,c,c.g),c.P)),m=c.V,E=c.g,A=c.ba;var k="readystatechange";Array.isArray(k)||(k&&(To[0]=k.toString()),k=To);for(let H=0;H<k.length;H++){const ie=Ue(E,k[H],A||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=c.J?V(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),ci(),Qh(c.i,c.v,c.B,c.l,c.S,c.u)}$n.prototype.ba=function(c){c=c.target;const m=this.O;m&&ei(c)==3?m.j():this.Y(c)},$n.prototype.Y=function(c){try{if(c==this.g)e:{const xe=ei(this.g),vt=this.g.ya(),Ge=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||xe!=4||vt==7||(vt==8||Ge<=0?ci(3):ci(2)),gi(this);var m=this.g.ca();this.X=m;var E=Kh(this);if(this.o=m==200,pu(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var A,k=this.g;if((A=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(A)){var H=A;break t}}H=null}if(c=H)di(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,c);else{this.o=!1,this.m=3,St(12),Tn(this),Vn(this);break e}}if(this.R){c=!0;let ut;for(;!this.K&&this.C<E.length;)if(ut=_u(this,E),ut==qt){xe==4&&(this.m=4,St(14),c=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==wt){this.m=4,St(15),di(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else di(this.i,this.l,ut,null),yi(this,ut);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||E.length!=0||this.h.h||(this.m=1,St(16),c=!1),this.o=this.o&&c,!c)di(this.i,this.l,E,"[Invalid Chunked Response]"),Tn(this),Vn(this);else if(E.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Uo(ie),ie.P=!0,St(11))}}else di(this.i,this.l,E,null),yi(this,E);xe==4&&Tn(this),this.o&&!this.K&&(xe==4?Iu(this.j,this):(this.o=!1,pi(this)))}else Bi(this.g),m==400&&E.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Tn(this),Vn(this)}}}catch{}finally{}};function Kh(c){if(!yu(c))return c.g.la();const m=Qt(c.g);if(m==="")return"";let E="";const A=m.length,k=ei(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Tn(c),Vn(c),"";c.h.i=new f.TextDecoder}for(let H=0;H<A;H++)c.h.h=!0,E+=c.h.i.decode(m[H],{stream:!(k&&H==A-1)});return m.length=0,c.h.g+=E,c.C=0,c.h.g}function yu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function _u(c,m){var E=c.C,A=m.indexOf(`
`,E);return A==-1?qt:(E=Number(m.substring(E,A)),isNaN(E)?wt:(A+=1,A+E>m.length?qt:(m=m.slice(A,A+E),c.C=A+E,m)))}$n.prototype.cancel=function(){this.K=!0,Tn(this)};function pi(c){c.T=Date.now()+c.H,oa(c,c.H)}function oa(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=fi(v(c.aa,c),m)}function gi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}$n.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(vs(this.i,this.B),this.M!=2&&(ci(),St(17)),Tn(this),this.m=2,Vn(this)):oa(this,this.T-c)};function Vn(c){c.j.I==0||c.K||Iu(c.j,c)}function Tn(c){gi(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,bo(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function yi(c,m){try{var E=c.j;if(E.I!=0&&(E.g==c||vi(E.h,c))){if(!c.L&&vi(E.h,c)&&E.I==3){try{var A=E.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)pa(E),br(E);else break e;Ns(E),St(18)}}else E.xa=k[1],0<E.xa-E.K&&k[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=fi(v(E.Va,E),6e3));_i(E.h)<=1&&E.ta&&(E.ta=void 0)}else wi(E,11)}else if((c.L||E.g==c)&&pa(E),!x(m))for(k=E.Ba.g.parse(m),m=0;m<k.length;m++){let Ge=k[m];const ut=Ge[0];if(!(ut<=E.K))if(E.K=ut,Ge=Ge[1],E.I==2)if(Ge[0]=="c"){E.M=Ge[1],E.ba=Ge[2];const Ln=Ge[3];Ln!=null&&(E.ka=Ln,E.j.info("VER="+E.ka));const Ri=Ge[4];Ri!=null&&(E.za=Ri,E.j.info("SVER="+E.za));const ti=Ge[5];ti!=null&&typeof ti=="number"&&ti>0&&(A=1.5*ti,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const ni=c.g;if(ni){const Cs=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var H=A.h;H.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Io(H,H.h),H.h=null))}if(A.G){const ga=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;ga&&(A.wa=ga,Xe(A.J,A.G,ga))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var ie=c;if(A.na=Cu(A,A.L?A.ba:null,A.W),ie.L){xo(A.h,ie);var xe=ie,vt=A.O;vt&&(xe.H=vt),xe.D&&(gi(xe),pi(xe)),A.g=ie}else wu(A);E.i.length>0&&Si(E)}else Ge[0]!="stop"&&Ge[0]!="close"||wi(E,7);else E.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?wi(E,7):ko(E):Ge[0]!="noop"&&E.l&&E.l.qa(Ge),E.A=0)}}ci(4)}catch{}}var Rt=class{constructor(c,m){this.g=c,this.map=m}};function wo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ro(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _i(c){return c.h?1:c.g?c.g.size:0}function vi(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Io(c,m){c.g?c.g.add(m):c.h=m}function xo(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}wo.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function No(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const E of c.g.values())m=m.concat(E.G);return m}return z(c.i)}var vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function la(c,m){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const A=c[E].indexOf("=");let k,H=null;A>=0?(k=c[E].substring(0,A),H=c[E].substring(A+1)):k=c[E],m(k,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function bn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof bn?(this.l=c.l,Bt(this,c.j),this.o=c.o,this.g=c.g,pr(this,c.u),this.h=c.h,Co(this,Au(c.i)),this.m=c.m):c&&(m=String(c).match(vu))?(this.l=!1,Bt(this,m[1]||"",!0),this.o=Ei(m[2]||""),this.g=Ei(m[3]||"",!0),pr(this,m[4]),this.h=Ei(m[5]||"",!0),Co(this,m[6]||"",!0),this.m=Ei(m[7]||"")):(this.l=!1,this.i=new yr(null,this.l))}bn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(As(m,ua,!0),":");var E=this.g;return(E||m=="file")&&(c.push("//"),(m=this.o)&&c.push(As(m,ua,!0),"@"),c.push(zi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(As(E,E.charAt(0)=="/"?Do:Eu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",As(E,Tu)),c.join("")},bn.prototype.resolve=function(c){const m=It(this);let E=!!c.j;E?Bt(m,c.j):E=!!c.o,E?m.o=c.o:E=!!c.g,E?m.g=c.g:E=c.u!=null;var A=c.h;if(E)pr(m,c.u);else if(E=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var k=m.h.lastIndexOf("/");k!=-1&&(A=m.h.slice(0,k+1)+A)}if(k=A,k==".."||k==".")A="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){A=k.lastIndexOf("/",0)==0,k=k.split("/");const H=[];for(let ie=0;ie<k.length;){const xe=k[ie++];xe=="."?A&&ie==k.length&&H.push(""):xe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),A&&ie==k.length&&H.push("")):(H.push(xe),A=!0)}A=H.join("/")}else A=k}return E?m.h=A:E=c.i.toString()!=="",E?Co(m,Au(c.i)):E=!!c.m,E&&(m.m=c.m),m};function It(c){return new bn(c)}function Bt(c,m,E){c.j=E?Ei(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function pr(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Co(c,m,E){m instanceof yr?(c.i=m,ha(c.i,c.l)):(E||(m=As(m,gr)),c.i=new yr(m,c.l))}function Xe(c,m,E){c.i.set(m,E)}function bs(c){return Xe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ei(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function As(c,m,E){return typeof c=="string"?(c=encodeURI(c).replace(m,hn),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function hn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ua=/[#\/\?@]/g,Eu=/[#\?:]/g,Do=/[#\?]/g,gr=/[#\?@]/g,Tu=/#/g;function yr(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function fn(c){c.g||(c.g=new Map,c.h=0,c.i&&la(c.i,function(m,E){c.add(decodeURIComponent(m.replace(/\+/g," ")),E)}))}r=yr.prototype,r.add=function(c,m){fn(this),this.i=null,c=_r(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(m),this.h+=1,this};function bu(c,m){fn(c),m=_r(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Oo(c,m){return fn(c),m=_r(c,m),c.g.has(m)}r.forEach=function(c,m){fn(this),this.g.forEach(function(E,A){E.forEach(function(k){c.call(m,k,A,this)},this)},this)};function Vo(c,m){fn(c);let E=[];if(typeof m=="string")Oo(c,m)&&(E=E.concat(c.g.get(_r(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)E=E.concat(c[m]);return E}r.set=function(c,m){return fn(this),this.i=null,c=_r(this,c),Oo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},r.get=function(c,m){return c?(c=Vo(this,c),c.length>0?String(c[0]):m):m};function ca(c,m,E){bu(c,m),E.length>0&&(c.i=null,c.g.set(_r(c,m),z(E)),c.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var E=m[A];const k=zi(E);E=Vo(this,E);for(let H=0;H<E.length;H++){let ie=k;E[H]!==""&&(ie+="="+zi(E[H])),c.push(ie)}}return this.i=c.join("&")};function Au(c){const m=new yr;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function _r(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function ha(c,m){m&&!c.j&&(fn(c),c.i=null,c.g.forEach(function(E,A){const k=A.toLowerCase();A!=k&&(bu(this,A),ca(this,k,E))},c)),c.j=m}function Jn(c,m){const E=new Xn;if(f.Image){const A=new Image;A.onload=T(Mn,E,"TestLoadImage: loaded",!0,m,A),A.onerror=T(Mn,E,"TestLoadImage: error",!1,m,A),A.onabort=T(Mn,E,"TestLoadImage: abort",!1,m,A),A.ontimeout=T(Mn,E,"TestLoadImage: timeout",!1,m,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else m(!1)}function Mo(c,m){const E=new Xn,A=new AbortController,k=setTimeout(()=>{A.abort(),Mn(E,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:A.signal}).then(H=>{clearTimeout(k),H.ok?Mn(E,"TestPingServer: ok",!0,m):Mn(E,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),Mn(E,"TestPingServer: error",!1,m)})}function Mn(c,m,E,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(E)}catch{}}function vr(){this.g=new cu}function Ti(c){this.i=c.Sb||null,this.h=c.ab||!1}S(Ti,hu),Ti.prototype.g=function(){return new Ss(this.i,this.h)};function Ss(c,m){yt.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Ss,yt),r=Ss.prototype,r.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Wn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Er(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function fa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Er(this):Wn(this),this.readyState==3&&fa(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Er(this))},r.Na=function(c){this.g&&(this.response=c,Er(this))},r.ga=function(){this.g&&Er(this)};function Er(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Wn(c)}r.setRequestHeader=function(c,m){this.A.append(c,m)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var E=m.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=m.next();return c.join(`\r
`)};function Wn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jn(c){let m="";return Pe(c,function(E,A){m+=A,m+=":",m+=E,m+=`\r
`}),m}function ws(c,m,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=jn(E),typeof c=="string"?E!=null&&zi(E):Xe(c,m,E))}function Je(c){yt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Je,yt);var bi=/^https?$/i,jo=["POST","PUT"];r=Je.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,m,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():So.g(),this.g.onreadystatechange=C(v(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){Rs(this,H);return}if(c=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)E.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())E.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(H=>H.toLowerCase()=="content-type"),k=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(jo,m,void 0)>=0)||A||k||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of E)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){Rs(this,H)}};function Rs(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Lo(c),qi(c)}function Lo(c){c.A||(c.A=!0,mt(c,"complete"),mt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,mt(this,"complete"),mt(this,"abort"),qi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),Je.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Is(this):this.Xa())},r.Xa=function(){Is(this)};function Is(c){if(c.h&&typeof u<"u"){if(c.v&&ei(c)==4)setTimeout(c.Ca.bind(c),0);else if(mt(c,"readystatechange"),ei(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var E;if(!(E=m)){var A;if(A=H===0){let ie=String(c.D).match(vu)[1]||null;!ie&&f.self&&f.self.location&&(ie=f.self.location.protocol.slice(0,-1)),A=!bi.test(ie?ie.toLowerCase():"")}E=A}if(E)mt(c,"complete"),mt(c,"success");else{c.o=6;try{var k=ei(c)>2?c.g.statusText:""}catch{k=""}c.l=k+" ["+c.ca()+"]",Lo(c)}}finally{qi(c)}}}}function qi(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,m||mt(c,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ei(c){return c.g?c.g.readyState:0}r.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Gh(m)}};function Qt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(c){const m={};c=(c.g&&ei(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(x(c[A]))continue;var E=gu(c[A]);const k=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const H=m[k]||[];m[k]=H,H.push(E)}Fe(m,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(c,m,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||m}function Tr(c){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,c),this.Za=Ai("retryDelaySeedMs",1e4,c),this.Ta=Ai("forwardChannelMaxRetries",2,c),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new wo(c&&c.concurrentRequestLimit),this.Ba=new vr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Tr.prototype,r.ka=8,r.I=1,r.connect=function(c,m,E,A){St(0),this.W=c,this.H=m||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Cu(this,null,this.W),Si(this)};function ko(c){if(da(c),c.I==3){var m=c.V++,E=It(c.J);if(Xe(E,"SID",c.M),Xe(E,"RID",m),Xe(E,"TYPE","terminate"),xs(c,E),m=new $n(c,c.j,m),m.M=2,m.A=bs(It(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=m.A,E=!0),E||(m.g=Du(m.j,null),m.g.ea(m.A)),m.F=Date.now(),pi(m)}Nu(c)}function br(c){c.g&&(Uo(c),c.g.cancel(),c.g=null)}function da(c){br(c),c.v&&(f.clearTimeout(c.v),c.v=null),pa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Si(c){if(!Ro(c.h)&&!c.m){c.m=!0;var m=c.Ea;ne||R(),se||(ne(),se=!0),w.add(m,c),c.D=0}}function ma(c,m){return _i(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=fi(v(c.Ea,c,m),xu(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const k=new $n(this,this.j,c);let H=this.o;if(this.U&&(H?(H=V(H),Z(H,this.U)):H=this.U),this.u!==null||this.R||(k.J=H,H=null),this.S)e:{for(var m=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=E;break e}if(m===4096||E===this.i.length-1){m=E+1;break e}}m=1e3}else m=1e3;m=Su(this,k,m),E=It(this.J),Xe(E,"RID",c),Xe(E,"CVER",22),this.G&&Xe(E,"X-HTTP-Session-Id",this.G),xs(this,E),H&&(this.R?m="headers="+zi(jn(H))+"&"+m:this.u&&ws(E,this.u,H)),Io(this.h,k),this.Ra&&Xe(E,"TYPE","init"),this.S?(Xe(E,"$req",m),Xe(E,"SID","null"),k.U=!0,mi(k,E,null)):mi(k,E,m),this.I=2}}else this.I==3&&(c?Po(this,c):this.i.length==0||Ro(this.h)||Po(this))};function Po(c,m){var E;m?E=m.l:E=c.V++;const A=It(c.J);Xe(A,"SID",c.M),Xe(A,"RID",E),Xe(A,"AID",c.K),xs(c,A),c.u&&c.o&&ws(A,c.u,c.o),E=new $n(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Su(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Io(c.h,E),mi(E,A,m)}function xs(c,m){c.H&&Pe(c.H,function(E,A){Xe(m,A,E)}),c.l&&Pe({},function(E,A){Xe(m,A,E)})}function Su(c,m,E){E=Math.min(c.i.length,E);const A=c.l?v(c.l.Ka,c.l,c):null;e:{var k=c.i;let xe=-1;for(;;){const vt=["count="+E];xe==-1?E>0?(xe=k[0].g,vt.push("ofs="+xe)):xe=0:vt.push("ofs="+xe);let Ge=!0;for(let ut=0;ut<E;ut++){var H=k[ut].g;const Ln=k[ut].map;if(H-=xe,H<0)xe=Math.max(0,k[ut].g-100),Ge=!1;else try{H="req"+H+"_"||"";try{var ie=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Ri,ti]of ie){let ni=ti;p(ti)&&(ni=mr(ti)),vt.push(H+Ri+"="+encodeURIComponent(ni))}}catch(Ri){throw vt.push(H+"type="+encodeURIComponent("_badmap")),Ri}}catch{A&&A(Ln)}}if(Ge){ie=vt.join("&");break e}}ie=void 0}return c=c.i.splice(0,E),m.G=c,ie}function wu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;ne||R(),se||(ne(),se=!0),w.add(m,c),c.A=0}}function Ns(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=fi(v(c.Da,c),xu(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Ru(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=fi(v(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),br(this),Ru(this))};function Uo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Ru(c){c.g=new $n(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=It(c.na);Xe(m,"RID","rpc"),Xe(m,"SID",c.M),Xe(m,"AID",c.K),Xe(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Xe(m,"TO",c.ia),Xe(m,"TYPE","xmlhttp"),xs(c,m),c.u&&c.o&&ws(m,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=bs(It(m)),E.u=null,E.R=!0,aa(E,c)}r.Va=function(){this.C!=null&&(this.C=null,br(this),Ns(this),St(19))};function pa(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Iu(c,m){var E=null;if(c.g==m){pa(c),Uo(c),c.g=null;var A=2}else if(vi(c.h,m))E=m.G,xo(c.h,m),A=1;else return;if(c.I!=0){if(m.o)if(A==1){E=m.u?m.u.length:0,m=Date.now()-m.F;var k=c.D;A=sa(),mt(A,new hi(A,E)),Si(c)}else wu(c);else if(k=m.m,k==3||k==0&&m.X>0||!(A==1&&ma(c,m)||A==2&&Ns(c)))switch(E&&E.length>0&&(m=c.h,m.i=m.i.concat(E)),k){case 1:wi(c,5);break;case 4:wi(c,10);break;case 3:wi(c,6);break;default:wi(c,2)}}}function xu(c,m){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*m}function wi(c,m){if(c.j.info("Error code "+m),m==2){var E=v(c.bb,c),A=c.Ua;const k=!A;A=new bn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Bt(A,"https"),bs(A),k?Jn(A.toString(),E):Mo(A.toString(),E)}else St(2);c.I=0,c.l&&c.l.pa(m),Nu(c),da(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Nu(c){if(c.I=0,c.ja=[],c.l){const m=No(c.h);(m.length!=0||c.i.length!=0)&&(ee(c.ja,m),ee(c.ja,c.i),c.h.i.length=0,z(c.i),c.i.length=0),c.l.oa()}}function Cu(c,m,E){var A=E instanceof bn?It(E):new bn(E);if(A.g!="")m&&(A.g=m+"."+A.g),pr(A,A.u);else{var k=f.location;A=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;const H=new bn(null);A&&Bt(H,A),m&&(H.g=m),k&&pr(H,k),E&&(H.h=E),A=H}return E=c.G,m=c.wa,E&&m&&Xe(A,E,m),Xe(A,"VER",c.ka),xs(c,A),A}function Du(c,m,E){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new Je(new Ti({ab:E})):new Je(c.ma),m.Fa(c.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ou(){}r=Ou.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ar(){}Ar.prototype.g=function(c,m){return new on(c,m)};function on(c,m){yt.call(this),this.g=new Tr(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!x(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!x(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Hi(this)}S(on,yt),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){ko(this.g)},on.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=mr(c),c=E);m.i.push(new Rt(m.Ya++,c)),m.I==3&&Si(m)},on.prototype.N=function(){this.g.l=null,delete this.j,ko(this.g),delete this.g,on.Z.N.call(this)};function Vu(c){Gt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const E in m){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}S(Vu,Gt);function Mu(){On.call(this),this.status=1}S(Mu,On);function Hi(c){this.g=c}S(Hi,Ou),Hi.prototype.ra=function(){mt(this.g,"a")},Hi.prototype.qa=function(c){mt(this.g,new Vu(c))},Hi.prototype.pa=function(c){mt(this.g,new Mu)},Hi.prototype.oa=function(){mt(this.g,"b")},Ar.prototype.createWebChannel=Ar.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,HE=function(){return new Ar},BE=function(){return sa()},qE=_t,vm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,Xc=Es,Ao.COMPLETE="complete",zE=Ao,fu.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",yt.prototype.listen=yt.prototype.J,Cl=fu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,UE=Je}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});const Bv="@firebase/firestore",Hv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new zm("@firebase/firestore");function Qa(){return Ws.logLevel}function ce(r,...e){if(Ws.logLevel<=je.DEBUG){const n=e.map(Zm);Ws.debug(`Firestore (${po}): ${r}`,...n)}}function cr(r,...e){if(Ws.logLevel<=je.ERROR){const n=e.map(Zm);Ws.error(`Firestore (${po}): ${r}`,...n)}}function ro(r,...e){if(Ws.logLevel<=je.WARN){const n=e.map(Zm);Ws.warn(`Firestore (${po}): ${r}`,...n)}}function Zm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,FE(r,s,n)}function FE(r,e,n){let s=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw cr(s),new Error(s)}function Ye(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||FE(e,l,s)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(nn.UNAUTHENTICATED)))}shutdown(){}}class mR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pR{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new or;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new or,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new or)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ye(typeof s.accessToken=="string",31837,{l:s}),new GE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class gR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new gR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _R{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const s=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const l=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Fv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=vR(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<n&&(s+=e.charAt(l[u]%62))}return s}}function Le(r,e){return r<e?-1:r>e?1:0}function Em(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),u=e.charAt(s);if(l!==u)return nm(l)===nm(u)?Le(l,u):nm(l)?1:-1}return Le(r.length,e.length)}const ER=55296,TR=57343;function nm(r){const e=r.charCodeAt(0);return e>=ER&&e<=TR}function so(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="__name__";class Di{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const u=Di.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const s=Di.isNumericId(e),l=Di.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Di.extractNumericId(e).compare(Di.extractNumericId(n)):Em(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class st extends Di{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const bR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Di{construct(e,n,s){return new Jt(e,n,s)}static isValidIdentifier(e){return bR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gv}static keyField(){return new Jt([Gv])}static fromServerFormat(e){const n=[];let s="",l=0;const u=()=>{if(s.length===0)throw new oe($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new oe($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new oe($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(s+=p,l++):(u(),l++)}if(u(),f)throw new oe($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(st.fromString(e))}static fromName(e){return new ve(st.fromString(e).popFirst(5))}static empty(){return new ve(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(r,e,n){if(!n)throw new oe($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function AR(r,e,n,s){if(e===!0&&s===!0)throw new oe($.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Qv(r){if(!ve.isDocumentKey(r))throw new oe($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Yv(r){if(ve.isDocumentKey(r))throw new oe($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function YE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ih(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Qn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ih(r);throw new oe($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(r,e){const n={typeString:r};return e&&(n.value=e),n}function tu(r,e){if(!YE(r))throw new oe($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new oe($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=-62135596800,Xv=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Xv);return new lt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Kv)throw new oe($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xv}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Mt("string",lt._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new lt(0,0))}static max(){return new we(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function SR(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=we.fromTimestamp(s===1e9?new lt(n+1,0):new lt(n,s));return new ss(l,ve.empty(),e)}function wR(r){return new ss(r.readTime,r.key,Hl)}class ss{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ss(we.min(),ve.empty(),Hl)}static max(){return new ss(we.max(),ve.empty(),Hl)}}function RR(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==IR)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te(((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):te.reject(n)}static resolve(e){return new te(((n,s)=>{n(e)}))}static reject(e){return new te(((n,s)=>{s(e)}))}static waitFor(e){return new te(((n,s)=>{let l=0,u=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++u,f&&u===l&&n()}),(g=>s(g)))})),f=!0,u===l&&n()}))}static or(e){let n=te.resolve(!1);for(const s of e)n=n.next((l=>l?te.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,u)=>{s.push(n.call(this,l,u))})),this.waitFor(s)}static mapArray(e,n){return new te(((s,l)=>{const u=e.length,f=new Array(u);let p=0;for(let g=0;g<u;g++){const v=g;n(e[v]).next((T=>{f[v]=T,++p,p===u&&s(f)}),(T=>l(T)))}}))}static doWhile(e,n){return new te(((s,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):s()};u()}))}}function NR(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function Nh(r){return r==null}function hh(r){return r===0&&1/r==-1/0}function CR(r){return typeof r=="number"&&Number.isInteger(r)&&!hh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="";function DR(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=$v(e)),e=OR(r.get(n),e);return $v(e)}function OR(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const u=r.charAt(l);switch(u){case"\0":n+="";break;case KE:n+="";break;default:n+=u}}return n}function $v(r){return r+KE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function fs(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function XE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,s,l,u){this.key=e,this.value=n,this.color=s??Zt.RED,this.left=l??Zt.EMPTY,this.right=u??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,u){return new Zt(e??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const u=s(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,s),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Zt.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,l,u){return this}insert(e,n,s){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new Pt(Jt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $E("Invalid base64 string: "+u):u}})(e);return new Wt(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const VR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(r){if(Ye(!!r,39018),typeof r=="string"){let e=0;const n=VR.exec(r);if(Ye(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(r.seconds),nanos:bt(r.nanos)}}function bt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function os(r){return typeof r=="string"?Wt.fromBase64String(r):Wt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="server_timestamp",JE="__type__",WE="__previous_value__",eT="__local_write_time__";function ep(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[JE])==null?void 0:s.stringValue)===ZE}function Ch(r){const e=r.mapValue.fields[WE];return ep(e)?Ch(e):e}function Fl(r){const e=as(r.mapValue.fields[eT].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,s,l,u,f,p,g,v,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=T}}const fh="(default)";class Gl{constructor(e,n){this.projectId=e,this.database=n||fh}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="__type__",jR="__max__",qc={mapValue:{}},nT="__vector__",dh="value";function ls(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ep(r)?4:kR(r)?9007199254740991:LR(r)?10:11:Ae(28295,{value:r})}function Pi(r,e){if(r===e)return!0;const n=ls(r);if(n!==ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Fl(r).isEqual(Fl(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=as(l.timestampValue),p=as(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,u){return os(l.bytesValue).isEqual(os(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,u){return bt(l.geoPointValue.latitude)===bt(u.geoPointValue.latitude)&&bt(l.geoPointValue.longitude)===bt(u.geoPointValue.longitude)})(r,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return bt(l.integerValue)===bt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=bt(l.doubleValue),p=bt(u.doubleValue);return f===p?hh(f)===hh(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return so(r.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},p=u.mapValue.fields||{};if(Zv(f)!==Zv(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!Pi(f[g],p[g])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function Ql(r,e){return(r.values||[]).find((n=>Pi(n,e)))!==void 0}function ao(r,e){if(r===e)return 0;const n=ls(r),s=ls(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=bt(u.integerValue||u.doubleValue),g=bt(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return Wv(r.timestampValue,e.timestampValue);case 4:return Wv(Fl(r),Fl(e));case 5:return Em(r.stringValue,e.stringValue);case 6:return(function(u,f){const p=os(u),g=os(f);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),g=f.split("/");for(let v=0;v<p.length&&v<g.length;v++){const T=Le(p[v],g[v]);if(T!==0)return T}return Le(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=Le(bt(u.latitude),bt(f.latitude));return p!==0?p:Le(bt(u.longitude),bt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return e0(r.arrayValue,e.arrayValue);case 10:return(function(u,f){var C,z,ee,q;const p=u.fields||{},g=f.fields||{},v=(C=p[dh])==null?void 0:C.arrayValue,T=(z=g[dh])==null?void 0:z.arrayValue,S=Le(((ee=v==null?void 0:v.values)==null?void 0:ee.length)||0,((q=T==null?void 0:T.values)==null?void 0:q.length)||0);return S!==0?S:e0(v,T)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===qc.mapValue&&f===qc.mapValue)return 0;if(u===qc.mapValue)return 1;if(f===qc.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),v=f.fields||{},T=Object.keys(v);g.sort(),T.sort();for(let S=0;S<g.length&&S<T.length;++S){const C=Em(g[S],T[S]);if(C!==0)return C;const z=ao(p[g[S]],v[T[S]]);if(z!==0)return z}return Le(g.length,T.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function Wv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const n=as(r),s=as(e),l=Le(n.seconds,s.seconds);return l!==0?l:Le(n.nanos,s.nanos)}function e0(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const u=ao(n[l],s[l]);if(u)return u}return Le(n.length,s.length)}function oo(r){return Tm(r)}function Tm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=as(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return os(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ve.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const u of n.values||[])l?l=!1:s+=",",s+=Tm(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of s)u?u=!1:l+=",",l+=`${f}:${Tm(n.fields[f])}`;return l+"}"})(r.mapValue):Ae(61005,{value:r})}function $c(r){switch(ls(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ch(r);return e?16+$c(e):16;case 5:return 2*r.stringValue.length;case 6:return os(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,u)=>l+$c(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return fs(s.fields,((u,f)=>{l+=u.length+$c(f)})),l})(r.mapValue);default:throw Ae(13486,{value:r})}}function t0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function bm(r){return!!r&&"integerValue"in r}function tp(r){return!!r&&"arrayValue"in r}function n0(r){return!!r&&"nullValue"in r}function i0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Zc(r){return!!r&&"mapValue"in r}function LR(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[tT])==null?void 0:s.stringValue)===nT}function Ll(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return fs(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Ll(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(r.arrayValue.values[n]);return e}return{...r}}function kR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===jR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Zc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=Jt.emptyPath(),s={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}f?s[p.lastSegment()]=Ll(f):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,l)}delete(e){const n=this.field(e.popLast());Zc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Zc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){fs(n,((l,u)=>e[l]=u));for(const l of s)delete e[l]}clone(){return new vn(Ll(this.value))}}function iT(r){const e=[];return fs(r.fields,((n,s)=>{const l=new Jt([n]);if(Zc(s)){const u=iT(s.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,s,l,u,f,p){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new rn(e,0,we.min(),we.min(),we.min(),vn.empty(),0)}static newFoundDocument(e,n,s,l){return new rn(e,1,n,we.min(),s,l,0)}static newNoDocument(e,n){return new rn(e,2,n,we.min(),we.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,we.min(),we.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.position=e,this.inclusive=n}}function r0(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const u=e[l],f=r.position[l];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(f.referenceValue),n.key):s=ao(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function s0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Pi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function PR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{}class Vt extends rT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new zR(e,n,s):n==="array-contains"?new HR(e,s):n==="in"?new FR(e,s):n==="not-in"?new GR(e,s):n==="array-contains-any"?new QR(e,s):new Vt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new qR(e,s):new BR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ao(n,this.value)):n!==null&&ls(this.value)===ls(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends rT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ui(e,n)}matches(e){return sT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sT(r){return r.op==="and"}function aT(r){return UR(r)&&sT(r)}function UR(r){for(const e of r.filters)if(e instanceof ui)return!1;return!0}function Am(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+oo(r.value);if(aT(r))return r.filters.map((e=>Am(e))).join(",");{const e=r.filters.map((n=>Am(n))).join(",");return`${r.op}(${e})`}}function oT(r,e){return r instanceof Vt?(function(s,l){return l instanceof Vt&&s.op===l.op&&s.field.isEqual(l.field)&&Pi(s.value,l.value)})(r,e):r instanceof ui?(function(s,l){return l instanceof ui&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((u,f,p)=>u&&oT(f,l.filters[p])),!0):!1})(r,e):void Ae(19439)}function lT(r){return r instanceof Vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${oo(n.value)}`})(r):r instanceof ui?(function(n){return n.op.toString()+" {"+n.getFilters().map(lT).join(" ,")+"}"})(r):"Filter"}class zR extends Vt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class qR extends Vt{constructor(e,n){super(e,"in",n),this.keys=uT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class BR extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=uT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function uT(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class HR extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tp(n)&&Ql(n.arrayValue,this.value)}}class FR extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class GR extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ql(this.value.arrayValue,n)}}class QR extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ql(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n=null,s=[],l=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function a0(r,e=null,n=[],s=[],l=null,u=null,f=null){return new YR(r,e,n,s,l,u,f)}function np(r){const e=Ie(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Am(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>oo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>oo(s))).join(",")),e.Te=n}return e.Te}function ip(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!PR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!oT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!s0(r.startAt,e.startAt)&&s0(r.endAt,e.endAt)}function Sm(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n=null,s=[],l=[],u=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KR(r,e,n,s,l,u,f,p){return new _o(r,e,n,s,l,u,f,p)}function rp(r){return new _o(r)}function o0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function cT(r){return r.collectionGroup!==null}function kl(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Pt(Jt.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Yl(u,s))})),n.has(Jt.keyField().canonicalString())||e.Ie.push(new Yl(Jt.keyField(),s))}return e.Ie}function Mi(r){const e=Ie(r);return e.Ee||(e.Ee=XR(e,kl(r))),e.Ee}function XR(r,e){if(r.limitType==="F")return a0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Yl(l.field,u)}));const n=r.endAt?new mh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new mh(r.startAt.position,r.startAt.inclusive):null;return a0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function wm(r,e){const n=r.filters.concat([e]);return new _o(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Rm(r,e,n){return new _o(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Dh(r,e){return ip(Mi(r),Mi(e))&&r.limitType===e.limitType}function hT(r){return`${np(Mi(r))}|lt:${r.limitType}`}function Ya(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>lT(l))).join(", ")}]`),Nh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>oo(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>oo(l))).join(",")),`Target(${s})`})(Mi(r))}; limitType=${r.limitType})`}function Oh(r,e){return e.isFoundDocument()&&(function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,l){for(const u of kl(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(f,p,g){const v=r0(f,p,g);return f.inclusive?v<=0:v<0})(s.startAt,kl(s),l)||s.endAt&&!(function(f,p,g){const v=r0(f,p,g);return f.inclusive?v>=0:v>0})(s.endAt,kl(s),l))})(r,e)}function $R(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fT(r){return(e,n)=>{let s=!1;for(const l of kl(r)){const u=ZR(l,e,n);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function ZR(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,f,p){const g=f.data.field(u),v=p.data.field(u);return g!==null&&v!==null?ao(g,v):Ae(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,((n,s)=>{for(const[l,u]of s)e(l,u)}))}isEmpty(){return XE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new ft(ve.comparator);function hr(){return JR}const dT=new ft(ve.comparator);function Dl(...r){let e=dT;for(const n of r)e=e.insert(n.key,n);return e}function mT(r){let e=dT;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Ks(){return Pl()}function pT(){return Pl()}function Pl(){return new na((r=>r.toString()),((r,e)=>r.isEqual(e)))}const WR=new ft(ve.comparator),eI=new Pt(ve.comparator);function ke(...r){let e=eI;for(const n of r)e=e.add(n);return e}const tI=new Pt(Le);function nI(){return tI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function gT(r){return{integerValue:""+r}}function iI(r,e){return CR(e)?gT(e):sp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this._=void 0}}function rI(r,e,n){return r instanceof ph?(function(l,u){const f={fields:{[JE]:{stringValue:ZE},[eT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&ep(u)&&(u=Ch(u)),u&&(f.fields[WE]=u),{mapValue:f}})(n,e):r instanceof Kl?_T(r,e):r instanceof Xl?vT(r,e):(function(l,u){const f=yT(l,u),p=l0(f)+l0(l.Ae);return bm(f)&&bm(l.Ae)?gT(p):sp(l.serializer,p)})(r,e)}function sI(r,e,n){return r instanceof Kl?_T(r,e):r instanceof Xl?vT(r,e):n}function yT(r,e){return r instanceof gh?(function(s){return bm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class ph extends Vh{}class Kl extends Vh{constructor(e){super(),this.elements=e}}function _T(r,e){const n=ET(e);for(const s of r.elements)n.some((l=>Pi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Xl extends Vh{constructor(e){super(),this.elements=e}}function vT(r,e){let n=ET(e);for(const s of r.elements)n=n.filter((l=>!Pi(l,s)));return{arrayValue:{values:n}}}class gh extends Vh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function l0(r){return bt(r.integerValue||r.doubleValue)}function ET(r){return tp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function aI(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof Kl&&l instanceof Kl||s instanceof Xl&&l instanceof Xl?so(s.elements,l.elements,Pi):s instanceof gh&&l instanceof gh?Pi(s.Ae,l.Ae):s instanceof ph&&l instanceof ph})(r.transform,e.transform)}class oI{constructor(e,n){this.version=e,this.transformResults=n}}class cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mh{}function TT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new jh(r.key,cn.none()):new nu(r.key,r.data,cn.none());{const n=r.data,s=vn.empty();let l=new Pt(Jt.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),l=l.add(u)}return new ds(r.key,s,new Dn(l.toArray()),cn.none())}}function lI(r,e,n){r instanceof nu?(function(l,u,f){const p=l.value.clone(),g=c0(l.fieldTransforms,u,f.transformResults);p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):r instanceof ds?(function(l,u,f){if(!Jc(l.precondition,u))return void u.convertToUnknownDocument(f.version);const p=c0(l.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(bT(l)),g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Ul(r,e,n,s){return r instanceof nu?(function(u,f,p,g){if(!Jc(u.precondition,f))return p;const v=u.value.clone(),T=h0(u.fieldTransforms,g,f);return v.setAll(T),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null})(r,e,n,s):r instanceof ds?(function(u,f,p,g){if(!Jc(u.precondition,f))return p;const v=h0(u.fieldTransforms,g,f),T=f.data;return T.setAll(bT(u)),T.setAll(v),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(r,e,n,s):(function(u,f,p){return Jc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,n)}function uI(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),u=yT(s.transform,l||null);u!=null&&(n===null&&(n=vn.empty()),n.set(s.field,u))}return n||null}function u0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&so(s,l,((u,f)=>aI(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class nu extends Mh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ds extends Mh{constructor(e,n,s,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function bT(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function c0(r,e,n){const s=new Map;Ye(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const u=r[l],f=u.transform,p=e.data.field(u.field);s.set(u.field,sI(f,p,n[l]))}return s}function h0(r,e,n){const s=new Map;for(const l of r){const u=l.transform,f=n.data.field(l.field);s.set(l.field,rI(u,f,e))}return s}class jh extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cI extends Mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&lI(u,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ul(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ul(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=pT();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=n.has(l.key)?null:p;const g=TT(f,p);g!==null&&s.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ke())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,((n,s)=>u0(n,s)))&&so(this.baseMutations,e.baseMutations,((n,s)=>u0(n,s)))}}class ap{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){Ye(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return WR})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,s[f].version);return new ap(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,qe;function mI(r){switch(r){case $.OK:return Ae(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function AT(r){if(r===void 0)return cr("GRPC error has no .code"),$.UNKNOWN;switch(r){case Ot.OK:return $.OK;case Ot.CANCELLED:return $.CANCELLED;case Ot.UNKNOWN:return $.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return $.INTERNAL;case Ot.UNAVAILABLE:return $.UNAVAILABLE;case Ot.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ot.NOT_FOUND:return $.NOT_FOUND;case Ot.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ot.ABORTED:return $.ABORTED;case Ot.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ot.DATA_LOSS:return $.DATA_LOSS;default:return Ae(39323,{code:r})}}(qe=Ot||(Ot={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new is([4294967295,4294967295],0);function f0(r){const e=pI().encode(r),n=new PE;return n.update(e),new Uint8Array(n.digest())}function d0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new is([n,s],0),new is([l,u],0)]}class op{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ol(`Invalid padding: ${n}`);if(s<0)throw new Ol(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=is.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(is.fromNumber(s)));return l.compare(gI)===1&&(l=new is([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=f0(e),[s,l]=d0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,l,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new op(u,l,n);return s.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=f0(e),[s,l]=d0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,s,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,iu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Lh(we.min(),l,new ft(Le),hr(),ke())}}class iu{constructor(e,n,s,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new iu(s,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class ST{constructor(e,n){this.targetId=e,this.Ce=n}}class wT{constructor(e,n,s=Wt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class m0{constructor(){this.ve=0,this.Fe=p0(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),s=ke();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ae(38017,{changeType:u})}})),new iu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=p0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yI{constructor(e){this.Ge=e,this.ze=new Map,this.je=hr(),this.Je=Bc(),this.He=Bc(),this.Ye=new ft(Le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Sm(u))if(s===0){const f=new ve(u.path);this.et(n,f,rn.newNoDocument(f,we.min()))}else Ye(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const p=this.ut(e),g=p?this.ct(p,e,f):1;if(g!==0){this.it(n);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=n;let f,p;try{f=os(s).toUint8Array()}catch(g){if(g instanceof $E)return ro("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new op(f,l,u)}catch(g){return ro(g instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&Sm(p.target)){const g=new ve(p.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,rn.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=ke();this.He.forEach(((u,f)=>{let p=!0;f.forEachWhile((g=>{const v=this.ot(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new Lh(e,n,this.Ye,this.je,s);return this.je=hr(),this.Je=Bc(),this.He=Bc(),this.Ye=new ft(Le),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new m0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Pt(Le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Pt(Le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new m0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bc(){return new ft(ve.comparator)}function p0(){return new ft(ve.comparator)}const _I={asc:"ASCENDING",desc:"DESCENDING"},vI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EI={and:"AND",or:"OR"};class TI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Im(r,e){return r.useProto3Json||Nh(e)?e:{value:e}}function yh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function bI(r,e){return yh(r,e.toTimestamp())}function ji(r){return Ye(!!r,49232),we.fromTimestamp((function(n){const s=as(n);return new lt(s.seconds,s.nanos)})(r))}function lp(r,e){return xm(r,e).canonicalString()}function xm(r,e){const n=(function(l){return new st(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function IT(r){const e=st.fromString(r);return Ye(OT(e),10190,{key:e.toString()}),e}function Nm(r,e){return lp(r.databaseId,e.path)}function im(r,e){const n=IT(e);if(n.get(1)!==r.databaseId.projectId)throw new oe($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new oe($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(NT(n))}function xT(r,e){return lp(r.databaseId,e)}function AI(r){const e=IT(r);return e.length===4?st.emptyPath():NT(e)}function Cm(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function NT(r){return Ye(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function g0(r,e,n){return{name:Nm(r,e),fields:n.value.mapValue.fields}}function SI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ae(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(v,T){return v.useProto3Json?(Ye(T===void 0||typeof T=="string",58123),Wt.fromBase64String(T||"")):(Ye(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Wt.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(v){const T=v.code===void 0?$.UNKNOWN:AT(v.code);return new oe(T,v.message||"")})(f);n=new wT(s,l,u,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=im(r,s.document.name),u=ji(s.document.updateTime),f=s.document.createTime?ji(s.document.createTime):we.min(),p=new vn({mapValue:{fields:s.document.fields}}),g=rn.newFoundDocument(l,u,f,p),v=s.targetIds||[],T=s.removedTargetIds||[];n=new Wc(v,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=im(r,s.document),u=s.readTime?ji(s.readTime):we.min(),f=rn.newNoDocument(l,u),p=s.removedTargetIds||[];n=new Wc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=im(r,s.document),u=s.removedTargetIds||[];n=new Wc([],u,l,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,f=new dI(l,u),p=s.targetId;n=new ST(p,f)}}return n}function wI(r,e){let n;if(e instanceof nu)n={update:g0(r,e.key,e.value)};else if(e instanceof jh)n={delete:Nm(r,e.key)};else if(e instanceof ds)n={update:g0(r,e.key,e.data),updateMask:MI(e.fieldMask)};else{if(!(e instanceof cI))return Ae(16599,{Vt:e.type});n={verify:Nm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const p=f.transform;if(p instanceof ph)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Kl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Xl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof gh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:bI(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(r,e.precondition)),n}function RI(r,e){return r&&r.length>0?(Ye(e!==void 0,14353),r.map((n=>(function(l,u){let f=l.updateTime?ji(l.updateTime):ji(u);return f.isEqual(we.min())&&(f=ji(u)),new oI(f,l.transformResults||[])})(n,e)))):[]}function II(r,e){return{documents:[xT(r,e.path)]}}function xI(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=xT(r,l);const u=(function(v){if(v.length!==0)return DT(ui.create(v,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(v){if(v.length!==0)return v.map((T=>(function(C){return{field:Ka(C.field),direction:DI(C.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=Im(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:l}}function NI(r){let e=AI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Ye(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(S){const C=CT(S);return C instanceof ui&&aT(C)?C.getFilters():[C]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((C=>(function(ee){return new Yl(Xa(ee.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(C)))})(n.orderBy));let p=null;n.limit&&(p=(function(S){let C;return C=typeof S=="object"?S.value:S,Nh(C)?null:C})(n.limit));let g=null;n.startAt&&(g=(function(S){const C=!!S.before,z=S.values||[];return new mh(z,C)})(n.startAt));let v=null;return n.endAt&&(v=(function(S){const C=!S.before,z=S.values||[];return new mh(z,C)})(n.endAt)),KR(e,l,f,u,p,"F",g,v)}function CI(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Xa(n.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Xa(n.unaryFilter.field);return Vt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Xa(n.unaryFilter.field);return Vt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Xa(n.unaryFilter.field);return Vt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Vt.create(Xa(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return ui.create(n.compositeFilter.filters.map((s=>CT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(r):Ae(30097,{filter:r})}function DI(r){return _I[r]}function OI(r){return vI[r]}function VI(r){return EI[r]}function Ka(r){return{fieldPath:r.canonicalString()}}function Xa(r){return Jt.fromServerFormat(r.fieldPath)}function DT(r){return r instanceof Vt?(function(n){if(n.op==="=="){if(i0(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(n0(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(i0(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(n0(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:OI(n.op),value:n.value}}})(r):r instanceof ui?(function(n){const s=n.getFilters().map((l=>DT(l)));return s.length===1?s[0]:{compositeFilter:{op:VI(n.op),filters:s}}})(r):Ae(54877,{filter:r})}function MI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function OT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,s,l,u=we.min(),f=we.min(),p=Wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.yt=e}}function LI(r){const e=NI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.Cn=new PI}addToCollectionParentIndex(e,n){return this.Cn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(ss.min())}updateCollectionGroup(e,n,s){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class PI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Pt(st.comparator),u=!l.has(s);return this.index[n]=l.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Pt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VT=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(VT,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lo(0)}static cr(){return new lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="LruGarbageCollector",UI=1048576;function v0([r,e],[n,s]){const l=Le(r,n);return l===0?Le(e,s):l}class zI{constructor(e){this.Ir=e,this.buffer=new Pt(v0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();v0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(_0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yo(n)?ce(_0,"Ignoring IndexedDB error during garbage collection: ",n):await go(n)}await this.Vr(3e5)}))}}class BI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return te.resolve(xh.ce);const s=new zI(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(y0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,u,f,p,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,f=Date.now(),this.nthSequenceNumber(e,l)))).next((S=>(s=S,p=Date.now(),this.removeTargets(e,s,n)))).next((S=>(u=S,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(v=Date.now(),Qa()<=je.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${S} documents in `+(v-g)+`ms
Total Duration: ${v-T}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:S}))))}}function HI(r,e){return new BI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.changes=new na((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?te.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&Ul(s.mutation,l,Dn.empty(),lt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ke()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ke()){const l=Ks();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((u=>{let f=Dl();return u.forEach(((p,g)=>{f=f.insert(p,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Ks();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ke())))}populateOverlays(e,n,s){const l=[];return s.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,s,l){let u=hr();const f=Pl(),p=(function(){return Pl()})();return n.forEach(((g,v)=>{const T=s.get(v.key);l.has(v.key)&&(T===void 0||T.mutation instanceof ds)?u=u.insert(v.key,v):T!==void 0?(f.set(v.key,T.mutation.getFieldMask()),Ul(T.mutation,v,T.mutation.getFieldMask(),lt.now())):f.set(v.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((v,T)=>f.set(v,T))),n.forEach(((v,T)=>p.set(v,new GI(T,f.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=Pl();let l=new ft(((f,p)=>f-p)),u=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((g=>{const v=n.get(g);if(v===null)return;let T=s.get(g)||Dn.empty();T=p.applyToLocalView(v,T),s.set(g,T);const S=(l.get(p.batchId)||ke()).add(g);l=l.insert(p.batchId,S)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),v=g.key,T=g.value,S=pT();T.forEach((C=>{if(!u.has(C)){const z=TT(n.get(C),s.get(C));z!==null&&S.set(C,z),u=u.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(e,v,S))}return te.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-u.size):te.resolve(Ks());let p=Hl,g=u;return f.next((v=>te.forEach(v,((T,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),u.get(T)?te.resolve():this.remoteDocumentCache.getEntry(e,T).next((C=>{g=g.insert(T,C)}))))).next((()=>this.populateOverlays(e,v,u))).next((()=>this.computeViews(e,g,v,ke()))).next((T=>({batchId:p,changes:mT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let l=Dl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const u=n.collectionGroup;let f=Dl();return this.indexManager.getCollectionParents(e,u).next((p=>te.forEach(p,(g=>{const v=(function(S,C){return new _o(C,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,l).next((T=>{T.forEach(((S,C)=>{f=f.insert(S,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,l)))).next((f=>{u.forEach(((g,v)=>{const T=v.getKey();f.get(T)===null&&(f=f.insert(T,rn.newInvalidDocument(T)))}));let p=Dl();return f.forEach(((g,v)=>{const T=u.get(g);T!==void 0&&Ul(T.mutation,v,Dn.empty(),lt.now()),Oh(n,v)&&(p=p.insert(g,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return te.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ji(l.createTime)}})(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:LI(l.bundledQuery),readTime:ji(l.readTime)}})(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.overlays=new ft(ve.comparator),this.qr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ks();return te.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&s.set(l,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,u)=>{this.St(e,n,u)})),te.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),te.resolve()}getOverlaysForCollection(e,n,s){const l=Ks(),u=n.length+1,f=new ve(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,v=g.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===u&&g.largestBatchId>s&&l.set(g.getKey(),g)}return te.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let u=new ft(((v,T)=>v-T));const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let T=u.get(v.largestBatchId);T===null&&(T=Ks(),u=u.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const p=Ks(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,T)=>p.set(v,T))),!(p.size()>=l)););return te.resolve(p)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new fI(n,s));let u=this.qr.get(n);u===void 0&&(u=ke(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.Qr=new Pt(Ft.$r),this.Ur=new Pt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Ft(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Ft(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new st([])),s=new Ft(n,e),l=new Ft(n,e+1),u=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new st([])),s=new Ft(n,e),l=new Ft(n,e+1);let u=ke();return this.Ur.forEachInRange([s,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Ft(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Le(e.Yr,n.Yr)}static Kr(e,n){return Le(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Ft.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new hI(u,n,s,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Ft(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return te.resolve(f)}lookupMutationBatch(e,n){return te.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),u=l<0?0:l;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Wm:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ft(n,0),l=new Ft(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,l],(f=>{const p=this.Xr(f.Yr);u.push(p)})),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Pt(Le);return n.forEach((l=>{const u=new Ft(l,0),f=new Ft(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(p=>{s=s.add(p.Yr)}))})),te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const f=new Ft(new ve(u),0);let p=new Pt(Le);return this.Zr.forEachWhile((g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===l&&(p=p.add(g.Yr)),!0)}),f),te.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return te.forEach(n.mutations,(l=>{const u=new Ft(l.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Ft(n,0),l=this.Zr.firstAfterOrEqual(s);return te.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.ri=e,this.docs=(function(){return new ft(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return te.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let s=hr();return n.forEach((l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():rn.newInvalidDocument(l))})),te.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let u=hr();const f=n.path,p=new ve(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:v,value:{document:T}}=g.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||RR(wR(T),s)<=0||(l.has(T.key)||Oh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,n,s,l){Ae(9500)}ii(e,n){return te.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new JI(this)}getSize(e){return te.resolve(this.size)}}class JI extends FI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),te.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.persistence=e,this.si=new na((n=>np(n)),ip),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new up,this.targetCount=0,this.ai=lo.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),te.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new lo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.Pr(n),te.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,s){let l=0;const u=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),te.waitFor(u).next((()=>l))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return te.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),te.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),te.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return te.resolve(s)}containsKey(e,n){return te.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n){this.ui={},this.overlays={},this.ci=new xh(0),this.li=!1,this.li=!0,this.hi=new XI,this.referenceDelegate=e(this),this.Pi=new WI(this),this.indexManager=new kI,this.remoteDocumentCache=(function(l){return new ZI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new jI(n),this.Ii=new YI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new $I(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const l=new ex(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return te.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class ex extends xR{constructor(e){super(),this.currentSequenceNumber=e}}class cp{constructor(e){this.persistence=e,this.Ri=new up,this.Vi=null}static mi(e){return new cp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),te.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(s=>{const l=ve.fromPath(s);return this.gi(e,l).next((u=>{u||n.removeEntry(l,we.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return te.or([()=>te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _h{constructor(e,n){this.persistence=e,this.pi=new na((s=>DR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=HI(this,n)}static mi(e,n){return new _h(e,n)}Ei(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return te.forEach(this.pi,((s,l)=>this.br(e,s,l).next((u=>u?te.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((p=>{p||(s++,u.removeEntry(f,we.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}br(e,n,s){return te.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return te.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=ke(),l=ke();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new hp(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VA()?8:NR(sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,l,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new tx;return this.Ss(e,n,f).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>u.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(Qa()<=je.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Qa()<=je.DEBUG&&ce("QueryEngine","Query:",Ya(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Qa()<=je.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):te.resolve())}ys(e,n){if(o0(n))return te.resolve(null);let s=Mi(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Rm(n,null,"F"),s=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=ke(...u);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const v=this.Ds(n,p);return this.Cs(n,v,f,g.readTime)?this.ys(e,Rm(n,null,"F")):this.vs(e,v,n,g)}))))})))))}ws(e,n,s,l){return o0(n)||l.isEqual(we.min())?te.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,l)?te.resolve(null):(Qa()<=je.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ya(n)),this.vs(e,f,n,SR(l,Hl)).next((p=>p)))}))}Ds(e,n){let s=new Pt(fT(e));return n.forEach(((l,u)=>{Oh(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,s){return Qa()<=je.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ya(n)),this.ps.getDocumentsMatchingQuery(e,n,ss.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="LocalStore",ix=3e8;class rx{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ft(Le),this.xs=new na((u=>np(u)),ip),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function sx(r,e,n,s){return new rx(r,e,n,s)}async function jT(r,e){const n=Ie(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],p=[];let g=ke();for(const v of l){f.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of u){p.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((v=>({Ls:v,removedBatchIds:f,addedBatchIds:p})))}))}))}function ax(r,e){const n=Ie(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,v,T){const S=v.batch,C=S.keys();let z=te.resolve();return C.forEach((ee=>{z=z.next((()=>T.getEntry(g,ee))).next((q=>{const G=v.docVersions.get(ee);Ye(G!==null,48541),q.version.compareTo(G)<0&&(S.applyToRemoteDocument(q,v),q.isValidDocument()&&(q.setReadTime(v.commitVersion),T.addEntry(q)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(g,S)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=ke();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(g=g.add(p.batch.mutations[v].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function LT(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function ox(r,e){const n=Ie(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,S)=>{const C=l.get(S);if(!C)return;p.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,S))));let z=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?z=z.withResumeToken(Wt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,s)),l=l.insert(S,z),(function(q,G,le){return q.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=ix?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(C,z,T)&&p.push(n.Pi.updateTargetData(u,z))}));let g=hr(),v=ke();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),p.push(lx(u,f,e.documentUpdates).next((T=>{g=T.ks,v=T.qs}))),!s.isEqual(we.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));p.push(T)}return te.waitFor(p).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,v))).next((()=>g))})).then((u=>(n.Ms=l,u)))}function lx(r,e,n){let s=ke(),l=ke();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=hr();return n.forEach(((p,g)=>{const v=u.get(p);g.isFoundDocument()!==v.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):ce(fp,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",g.version)})),{ks:f,qs:l}}))}function ux(r,e){const n=Ie(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Wm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function cx(r,e){const n=Ie(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((u=>u?(l=u,te.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new Jr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Dm(r,e,n){const s=Ie(r),l=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!yo(f))throw f;ce(fp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function E0(r,e,n){const s=Ie(r);let l=we.min(),u=ke();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,v,T){const S=Ie(g),C=S.xs.get(T);return C!==void 0?te.resolve(S.Ms.get(C)):S.Pi.getTargetData(v,T)})(s,f,Mi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,p.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?l:we.min(),n?u:ke()))).next((p=>(hx(s,$R(e),p),{documents:p,Qs:u})))))}function hx(r,e,n){let s=r.Os.get(e)||we.min();n.forEach(((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Os.set(e,s)}class T0{constructor(){this.activeTargetIds=nI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fx{constructor(){this.Mo=new T0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new T0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="ConnectivityMonitor";class A0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(b0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(b0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function Om(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="RestConnection",mx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class px{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===fh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,u){const f=Om(),p=this.zo(e,n.toUriEncodedString());ce(rm,`Sending RPC '${e}' ${f}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,u);const{host:v}=new URL(p),T=co(v);return this.Jo(e,p,g,s,T).then((S=>(ce(rm,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw ro(rm,`RPC '${e}' ${f} failed with error: `,S,"url: ",p,"request:",s),S}))}Ho(e,n,s,l,u,f){return this.Go(e,n,s,l,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),s&&s.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const s=mx[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class yx extends px{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,u){const f=Om();return new Promise(((p,g)=>{const v=new UE;v.setWithCredentials(!0),v.listenOnce(zE.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Xc.NO_ERROR:const S=v.getResponseJson();ce(tn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),p(S);break;case Xc.TIMEOUT:ce(tn,`RPC '${e}' ${f} timed out`),g(new oe($.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const C=v.getStatus();if(ce(tn,`RPC '${e}' ${f} failed with status:`,C,"response text:",v.getResponseText()),C>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const ee=z==null?void 0:z.error;if(ee&&ee.status&&ee.message){const q=(function(le){const fe=le.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(fe)>=0?fe:$.UNKNOWN})(ee.status);g(new oe(q,ee.message))}else g(new oe($.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new oe($.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ce(tn,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(l);ce(tn,`RPC '${e}' ${f} sending request:`,l),v.send(n,"POST",T,s,15)}))}T_(e,n,s){const l=Om(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=HE(),p=BE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=u.join("");ce(tn,`Creating RPC '${e}' stream ${l}: ${T}`,g);const S=f.createWebChannel(T,g);this.I_(S);let C=!1,z=!1;const ee=new gx({Yo:G=>{z?ce(tn,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(C||(ce(tn,`Opening RPC '${e}' stream ${l} transport.`),S.open(),C=!0),ce(tn,`RPC '${e}' stream ${l} sending:`,G),S.send(G))},Zo:()=>S.close()}),q=(G,le,fe)=>{G.listen(le,(de=>{try{fe(de)}catch(Se){setTimeout((()=>{throw Se}),0)}}))};return q(S,Cl.EventType.OPEN,(()=>{z||(ce(tn,`RPC '${e}' stream ${l} transport opened.`),ee.o_())})),q(S,Cl.EventType.CLOSE,(()=>{z||(z=!0,ce(tn,`RPC '${e}' stream ${l} transport closed`),ee.a_(),this.E_(S))})),q(S,Cl.EventType.ERROR,(G=>{z||(z=!0,ro(tn,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),ee.a_(new oe($.UNAVAILABLE,"The operation could not be completed")))})),q(S,Cl.EventType.MESSAGE,(G=>{var le;if(!z){const fe=G.data[0];Ye(!!fe,16349);const de=fe,Se=(de==null?void 0:de.error)||((le=de[0])==null?void 0:le.error);if(Se){ce(tn,`RPC '${e}' stream ${l} received error:`,Se);const ne=Se.status;let se=(function(I){const M=Ot[I];if(M!==void 0)return AT(M)})(ne),w=Se.message;se===void 0&&(se=$.INTERNAL,w="Unknown error status: "+ne+" with message "+Se.message),z=!0,ee.a_(new oe(se,w)),S.close()}else ce(tn,`RPC '${e}' stream ${l} received:`,fe),ee.u_(fe)}})),q(p,qE.STAT_EVENT,(G=>{G.stat===vm.PROXY?ce(tn,`RPC '${e}' stream ${l} detected buffering proxy`):G.stat===vm.NOPROXY&&ce(tn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(r){return new TI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,s=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&ce("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="PersistentStream";class PT{constructor(e,n,s,l,u,f,p,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new oe($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(S0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ce(S0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _x extends PT{constructor(e,n,s,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=SI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return we.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?we.min():f.readTime?ji(f.readTime):we.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Cm(this.serializer),n.addTarget=(function(u,f){let p;const g=f.target;if(p=Sm(g)?{documents:II(u,g)}:{query:xI(u,g).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=RT(u,f.resumeToken);const v=Im(u,f.expectedCount);v!==null&&(p.expectedCount=v)}else if(f.snapshotVersion.compareTo(we.min())>0){p.readTime=yh(u,f.snapshotVersion.toTimestamp());const v=Im(u,f.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const s=CI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Cm(this.serializer),n.removeTarget=e,this.q_(n)}}class vx extends PT{constructor(e,n,s,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=RI(e.writeResults,e.commitTime),s=ji(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Cm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>wI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{}class Tx extends Ex{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new oe($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,xm(n,s),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe($.UNKNOWN,u.toString())}))}Ho(e,n,s,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,xm(n,s),l,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new oe($.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cr(n),this.aa=!1):ce("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="RemoteStore";class Ax{constructor(e,n,s,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{ia(this)&&(ce(ea,"Restarting streams for network reachability change."),await(async function(g){const v=Ie(g);v.Ea.add(4),await ru(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Ph(v)})(this))}))})),this.Ra=new bx(s,l)}}async function Ph(r){if(ia(r))for(const e of r.da)await e(!0)}async function ru(r){for(const e of r.da)await e(!1)}function UT(r,e){const n=Ie(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gp(n)?pp(n):vo(n).O_()&&mp(n,e))}function dp(r,e){const n=Ie(r),s=vo(n);n.Ia.delete(e),s.O_()&&zT(n,e),n.Ia.size===0&&(s.O_()?s.L_():ia(n)&&n.Ra.set("Unknown"))}function mp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vo(r).Y_(e)}function zT(r,e){r.Va.Ue(e),vo(r).Z_(e)}function pp(r){r.Va=new yI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),vo(r).start(),r.Ra.ua()}function gp(r){return ia(r)&&!vo(r).x_()&&r.Ia.size>0}function ia(r){return Ie(r).Ea.size===0}function qT(r){r.Va=void 0}async function Sx(r){r.Ra.set("Online")}async function wx(r){r.Ia.forEach(((e,n)=>{mp(r,e)}))}async function Rx(r,e){qT(r),gp(r)?(r.Ra.ha(e),pp(r)):r.Ra.set("Unknown")}async function Ix(r,e,n){if(r.Ra.set("Online"),e instanceof wT&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(r,e)}catch(s){ce(ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await vh(r,s)}else if(e instanceof Wc?r.Va.Ze(e):e instanceof ST?r.Va.st(e):r.Va.tt(e),!n.isEqual(we.min()))try{const s=await LT(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const p=u.Va.Tt(f);return p.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(v);T&&u.Ia.set(v,T.withResumeToken(g.resumeToken,f))}})),p.targetMismatches.forEach(((g,v)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(Wt.EMPTY_BYTE_STRING,T.snapshotVersion)),zT(u,g);const S=new Jr(T.target,g,v,T.sequenceNumber);mp(u,S)})),u.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){ce(ea,"Failed to raise snapshot:",s),await vh(r,s)}}async function vh(r,e,n){if(!yo(e))throw e;r.Ea.add(1),await ru(r),r.Ra.set("Offline"),n||(n=()=>LT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(ea,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Ph(r)}))}function BT(r,e){return e().catch((n=>vh(r,n,e)))}async function Uh(r){const e=Ie(r),n=us(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wm;for(;xx(e);)try{const l=await ux(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,Nx(e,l)}catch(l){await vh(e,l)}HT(e)&&FT(e)}function xx(r){return ia(r)&&r.Ta.length<10}function Nx(r,e){r.Ta.push(e);const n=us(r);n.O_()&&n.X_&&n.ea(e.mutations)}function HT(r){return ia(r)&&!us(r).x_()&&r.Ta.length>0}function FT(r){us(r).start()}async function Cx(r){us(r).ra()}async function Dx(r){const e=us(r);for(const n of r.Ta)e.ea(n.mutations)}async function Ox(r,e,n){const s=r.Ta.shift(),l=ap.from(s,e,n);await BT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Uh(r)}async function Vx(r,e){e&&us(r).X_&&await(async function(s,l){if((function(f){return mI(f)&&f!==$.ABORTED})(l.code)){const u=s.Ta.shift();us(s).B_(),await BT(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Uh(s)}})(r,e),HT(r)&&FT(r)}async function w0(r,e){const n=Ie(r);n.asyncQueue.verifyOperationInProgress(),ce(ea,"RemoteStore received new credentials");const s=ia(n);n.Ea.add(3),await ru(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ph(n)}async function Mx(r,e){const n=Ie(r);e?(n.Ea.delete(2),await Ph(n)):e||(n.Ea.add(2),await ru(n),n.Ra.set("Unknown"))}function vo(r){return r.ma||(r.ma=(function(n,s,l){const u=Ie(n);return u.sa(),new _x(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Xo:Sx.bind(null,r),t_:wx.bind(null,r),r_:Rx.bind(null,r),H_:Ix.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),gp(r)?pp(r):r.Ra.set("Unknown")):(await r.ma.stop(),qT(r))}))),r.ma}function us(r){return r.fa||(r.fa=(function(n,s,l){const u=Ie(n);return u.sa(),new vx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Cx.bind(null,r),r_:Vx.bind(null,r),ta:Dx.bind(null,r),na:Ox.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Uh(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(ea,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,s,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,u){const f=Date.now()+s,p=new yp(e,n,f,l,u);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(r,e){if(cr("AsyncQueue",`${e}: ${r}`),yo(r))return new oe($.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static emptySet(e){return new eo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Dl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new eo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.ga=new ft(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class uo{constructor(e,n,s,l,u,f,p,g,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,l,u){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new uo(e,n,eo.emptySet(n),f,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Lx{constructor(){this.queries=I0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Ie(n),u=l.queries;l.queries=I0(),u.forEach(((f,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new oe($.ABORTED,"Firestore shutting down"))}}function I0(){return new na((r=>hT(r)),Dh)}async function GT(r,e){const n=Ie(r);let s=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(s=2):(u=new jx,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=_p(f,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&vp(n)}async function QT(r,e){const n=Ie(r),s=e.query;let l=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function kx(r,e){const n=Ie(r);let s=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const p of f.Sa)p.Fa(l)&&(s=!0);f.wa=l}}s&&vp(n)}function Px(r,e,n){const s=Ie(r),l=s.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);s.queries.delete(e)}function vp(r){r.Ca.forEach((e=>{e.next()}))}var Vm,x0;(x0=Vm||(Vm={})).Ma="default",x0.Cache="cache";class YT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new uo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.key=e}}class XT{constructor(e){this.key=e}}class Ux{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=fT(e),this.tu=new eo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new R0,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,v=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,S)=>{const C=l.get(T),z=Oh(this.query,S)?S:null,ee=!!C&&this.mutatedKeys.has(C.key),q=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let G=!1;C&&z?C.data.isEqual(z.data)?ee!==q&&(s.track({type:3,doc:z}),G=!0):this.su(C,z)||(s.track({type:2,doc:z}),G=!0,(g&&this.eu(z,g)>0||v&&this.eu(z,v)<0)&&(p=!0)):!C&&z?(s.track({type:0,doc:z}),G=!0):C&&!z&&(s.track({type:1,doc:C}),G=!0,(g||v)&&(p=!0)),G&&(z?(f=f.add(z),u=q?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{tu:f,iu:s,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,S)=>(function(z,ee){const q=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:G})}};return q(z)-q(ee)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,v=g!==this.Za;return this.Za=g,f.length!==0||v?{snapshot:new uo(this.query,e.tu,u,f,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new R0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new XT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new KT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ep="SyncEngine";class zx{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class qx{constructor(e){this.key=e,this.hu=!1}}class Bx{constructor(e,n,s,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new na((p=>hT(p)),Dh),this.Iu=new Map,this.Eu=new Set,this.du=new ft(ve.comparator),this.Au=new Map,this.Ru=new up,this.Vu={},this.mu=new Map,this.fu=lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Hx(r,e,n=!0){const s=tb(r);let l;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await $T(s,e,n,!0),l}async function Fx(r,e){const n=tb(r);await $T(n,e,!0,!1)}async function $T(r,e,n,s){const l=await cx(r.localStore,Mi(e)),u=l.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let p;return s&&(p=await Gx(r,e,u,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&UT(r.remoteStore,l),p}async function Gx(r,e,n,s,l){r.pu=(S,C,z)=>(async function(q,G,le,fe){let de=G.view.ru(le);de.Cs&&(de=await E0(q.localStore,G.query,!1).then((({documents:w})=>G.view.ru(w,de))));const Se=fe&&fe.targetChanges.get(G.targetId),ne=fe&&fe.targetMismatches.get(G.targetId)!=null,se=G.view.applyChanges(de,q.isPrimaryClient,Se,ne);return C0(q,G.targetId,se.au),se.snapshot})(r,S,C,z);const u=await E0(r.localStore,e,!0),f=new Ux(e,u.Qs),p=f.ru(u.documents),g=iu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),v=f.applyChanges(p,r.isPrimaryClient,g);C0(r,n,v.au);const T=new zx(e,n,f);return r.Tu.set(e,T),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),v.snapshot}async function Qx(r,e,n){const s=Ie(r),l=s.Tu.get(e),u=s.Iu.get(l.targetId);if(u.length>1)return s.Iu.set(l.targetId,u.filter((f=>!Dh(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Dm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&dp(s.remoteStore,l.targetId),Mm(s,l.targetId)})).catch(go)):(Mm(s,l.targetId),await Dm(s.localStore,l.targetId,!0))}async function Yx(r,e){const n=Ie(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),dp(n.remoteStore,s.targetId))}async function Kx(r,e,n){const s=tN(r);try{const l=await(function(f,p){const g=Ie(f),v=lt.now(),T=p.reduce(((z,ee)=>z.add(ee.key)),ke());let S,C;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let ee=hr(),q=ke();return g.Ns.getEntries(z,T).next((G=>{ee=G,ee.forEach(((le,fe)=>{fe.isValidDocument()||(q=q.add(le))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,ee))).next((G=>{S=G;const le=[];for(const fe of p){const de=uI(fe,S.get(fe.key).overlayedDocument);de!=null&&le.push(new ds(fe.key,de,iT(de.value.mapValue),cn.exists(!0)))}return g.mutationQueue.addMutationBatch(z,v,le,p)})).next((G=>{C=G;const le=G.applyToLocalDocumentSet(S,q);return g.documentOverlayCache.saveOverlays(z,G.batchId,le)}))})).then((()=>({batchId:C.batchId,changes:mT(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(f,p,g){let v=f.Vu[f.currentUser.toKey()];v||(v=new ft(Le)),v=v.insert(p,g),f.Vu[f.currentUser.toKey()]=v})(s,l.batchId,n),await su(s,l.changes),await Uh(s.remoteStore)}catch(l){const u=_p(l,"Failed to persist write");n.reject(u)}}async function ZT(r,e){const n=Ie(r);try{const s=await ox(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(Ye(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Ye(f.hu,14607):l.removedDocuments.size>0&&(Ye(f.hu,42227),f.hu=!1))})),await su(n,s,e)}catch(s){await go(s)}}function N0(r,e,n){const s=Ie(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const g=Ie(f);g.onlineState=p;let v=!1;g.queries.forEach(((T,S)=>{for(const C of S.Sa)C.va(p)&&(v=!0)})),v&&vp(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Xx(r,e,n){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),u=l&&l.key;if(u){let f=new ft(ve.comparator);f=f.insert(u,rn.newNoDocument(u,we.min()));const p=ke().add(u),g=new Lh(we.min(),new Map,new ft(Le),f,p);await ZT(s,g),s.du=s.du.remove(u),s.Au.delete(e),Tp(s)}else await Dm(s.localStore,e,!1).then((()=>Mm(s,e,n))).catch(go)}async function $x(r,e){const n=Ie(r),s=e.batch.batchId;try{const l=await ax(n.localStore,e);WT(n,s,null),JT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await su(n,l)}catch(l){await go(l)}}async function Zx(r,e,n){const s=Ie(r);try{const l=await(function(f,p){const g=Ie(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let T;return g.mutationQueue.lookupMutationBatch(v,p).next((S=>(Ye(S!==null,37113),T=S.keys(),g.mutationQueue.removeMutationBatch(v,S)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T))).next((()=>g.localDocuments.getDocuments(v,T)))}))})(s.localStore,e);WT(s,e,n),JT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await su(s,l)}catch(l){await go(l)}}function JT(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function WT(r,e,n){const s=Ie(r);let l=s.Vu[s.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function Mm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||eb(r,s)}))}function eb(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(dp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Tp(r))}function C0(r,e,n){for(const s of n)s instanceof KT?(r.Ru.addReference(s.key,e),Jx(r,s)):s instanceof XT?(ce(Ep,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||eb(r,s.key)):Ae(19791,{wu:s})}function Jx(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ce(Ep,"New document in limbo: "+n),r.Eu.add(s),Tp(r))}function Tp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ve(st.fromString(e)),s=r.fu.next();r.Au.set(s,new qx(n)),r.du=r.du.insert(n,s),UT(r.remoteStore,new Jr(Mi(rp(n.path)),s,"TargetPurposeLimboResolution",xh.ce))}}async function su(r,e,n){const s=Ie(r),l=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{f.push(s.pu(g,e,n).then((v=>{var T;if((v||n)&&s.isPrimaryClient){const S=v?!v.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(v){l.push(v);const S=hp.As(g.targetId,v);u.push(S)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(g,v){const T=Ie(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>te.forEach(v,(C=>te.forEach(C.Es,(z=>T.persistence.referenceDelegate.addReference(S,C.targetId,z))).next((()=>te.forEach(C.ds,(z=>T.persistence.referenceDelegate.removeReference(S,C.targetId,z)))))))))}catch(S){if(!yo(S))throw S;ce(fp,"Failed to update sequence numbers: "+S)}for(const S of v){const C=S.targetId;if(!S.fromCache){const z=T.Ms.get(C),ee=z.snapshotVersion,q=z.withLastLimboFreeSnapshotVersion(ee);T.Ms=T.Ms.insert(C,q)}}})(s.localStore,u))}async function Wx(r,e){const n=Ie(r);if(!n.currentUser.isEqual(e)){ce(Ep,"User change. New user:",e.toKey());const s=await jT(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new oe($.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await su(n,s.Ls)}}function eN(r,e){const n=Ie(r),s=n.Au.get(e);if(s&&s.hu)return ke().add(s.key);{let l=ke();const u=n.Iu.get(e);if(!u)return l;for(const f of u){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function tb(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xx.bind(null,e),e.Pu.H_=kx.bind(null,e.eventManager),e.Pu.yu=Px.bind(null,e.eventManager),e}function tN(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$x.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zx.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return sx(this.persistence,new nx,e.initialUser,this.serializer)}Cu(e){return new MT(cp.mi,this.serializer)}Du(e){return new fx}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class nN extends Eh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof _h,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new MT((s=>_h.mi(s,n)),this.serializer)}}class jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>N0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wx.bind(null,this.syncEngine),await Mx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Lx})()}createDatastore(e){const n=kh(e.databaseInfo.databaseId),s=(function(u){return new yx(u)})(e.databaseInfo);return(function(u,f,p,g){return new Tx(u,f,p,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,u,f,p){return new Ax(s,l,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>N0(this.syncEngine,n,0)),(function(){return A0.v()?new A0:new dx})())}createSyncEngine(e,n){return(function(l,u,f,p,g,v,T){const S=new Bx(l,u,f,p,g,v);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(l){const u=Ie(l);ce(ea,"RemoteStore shutting down."),u.Ea.add(5),await ru(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}jm.provider={build:()=>new jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class iN{constructor(e,n,s,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=nn.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{ce(cs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(ce(cs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=_p(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function am(r,e){r.asyncQueue.verifyOperationInProgress(),ce(cs,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await jT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function D0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await rN(r);ce(cs,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>w0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>w0(e.remoteStore,l))),r._onlineComponents=e}async function rN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(cs,"Using user provided OfflineComponentProvider");try{await am(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;ro("Error using user provided cache. Falling back to memory cache: "+n),await am(r,new Eh)}}else ce(cs,"Using default OfflineComponentProvider"),await am(r,new nN(void 0));return r._offlineComponents}async function ib(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(cs,"Using user provided OnlineComponentProvider"),await D0(r,r._uninitializedComponentsProvider._online)):(ce(cs,"Using default OnlineComponentProvider"),await D0(r,new jm))),r._onlineComponents}function sN(r){return ib(r).then((e=>e.syncEngine))}async function rb(r){const e=await ib(r),n=e.eventManager;return n.onListen=Hx.bind(null,e.syncEngine),n.onUnlisten=Qx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Fx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yx.bind(null,e.syncEngine),n}function aN(r,e,n={}){const s=new or;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,g,v){const T=new nb({next:C=>{T.Nu(),f.enqueueAndForget((()=>QT(u,S)));const z=C.docs.has(p);!z&&C.fromCache?v.reject(new oe($.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&C.fromCache&&g&&g.source==="server"?v.reject(new oe($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),S=new YT(rp(p.path),T,{includeMetadataChanges:!0,qa:!0});return GT(u,S)})(await rb(r),r.asyncQueue,e,n,s))),s.promise}function oN(r,e,n={}){const s=new or;return r.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,g,v){const T=new nb({next:C=>{T.Nu(),f.enqueueAndForget((()=>QT(u,S))),C.fromCache&&g.source==="server"?v.reject(new oe($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),S=new YT(p,T,{includeMetadataChanges:!0,qa:!0});return GT(u,S)})(await rb(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="firestore.googleapis.com",V0=!0;class M0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ab,this.ssl=V0}else this.host=e.host,this.ssl=e.ssl??V0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UI)throw new oe($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new dR;switch(s.type){case"firstParty":return new yR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=O0.get(n);s&&(ce("ComponentProvider","Removing Datastore"),O0.delete(n),s.terminate())})(this),Promise.resolve()}}function lN(r,e,n,s={}){var v;r=Qn(r,zh);const l=co(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;l&&(Z0(`https://${p}`),J0("Firestore",!0)),u.host!==ab&&u.host!==p&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:s};if(!$s(g,f)&&(r._setSettings(g),s.mockUserToken)){let T,S;if(typeof s.mockUserToken=="string")T=s.mockUserToken,S=nn.MOCK_USER;else{T=SA(s.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new oe($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new nn(C)}r._authCredentials=new mR(new GE(T,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ra(this.firestore,e,this._query)}}class At{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(tu(n,At._jsonSchema))return new At(e,s||null,new ve(st.fromString(n.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Mt("string",At._jsonSchemaVersion),referencePath:Mt("string")};class rs extends ra{constructor(e,n,s){super(e,n,rp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ve(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function Yr(r,e,...n){if(r=jt(r),QE("collection","path",e),r instanceof zh){const s=st.fromString(e,...n);return Yv(s),new rs(r,null,s)}{if(!(r instanceof At||r instanceof rs))throw new oe($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...n));return Yv(s),new rs(r.firestore,null,s)}}function Cn(r,e,...n){if(r=jt(r),arguments.length===1&&(e=Jm.newId()),QE("doc","path",e),r instanceof zh){const s=st.fromString(e,...n);return Qv(s),new At(r,null,new ve(s))}{if(!(r instanceof At||r instanceof rs))throw new oe($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...n));return Qv(s),new At(r.firestore,r instanceof rs?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="AsyncQueue";class L0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kT(this,"async_queue_retry"),this._c=()=>{const s=sm();s&&ce(j0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yo(e))throw e;ce(j0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,cr("INTERNAL UNHANDLED ERROR: ",k0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=yp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Ae(47125,{Pc:k0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function k0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ms extends zh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new L0,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L0(e),this._firestoreClient=void 0,await e}}}function uN(r,e){const n=typeof r=="object"?r:nE(),s=typeof r=="string"?r:fh,l=Bm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=bA("firestore");u&&lN(l,...u)}return l}function qh(r){if(r._terminated)throw new oe($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||cN(r),r._firestoreClient}function cN(r){var s,l,u;const e=r._freezeSettings(),n=(function(p,g,v,T){return new MR(p,g,v,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,sb(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new iN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(Wt.fromBase64String(e))}catch(n){throw new oe($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tu(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Mt("string",Gn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(tu(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Mt("string",Li._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tu(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ki(e.vectorValues);throw new oe($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Mt("string",ki._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=/^__.*__$/;class fN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new nu(e,this.data,n,this.fieldTransforms)}}class ob{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class Ap{constructor(e,n,s,l,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Th(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lb(this.Ac)&&hN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||kh(e)}Cc(e,n,s,l=!1){return new Ap({Ac:e,methodName:n,Dc:s,path:Jt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ou(r){const e=r._freezeSettings(),n=kh(r._databaseId);return new dN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Sp(r,e,n,s,l,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,l);wp("Data must be an object, but it was:",f,s);const p=hb(s,f);let g,v;if(u.merge)g=new Dn(f.fieldMask),v=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const S of u.mergeFields){const C=Lm(e,S,n);if(!f.contains(C))throw new oe($.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);db(T,C)||T.push(C)}g=new Dn(T),v=f.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,v=f.fieldTransforms;return new fN(new vn(p),g,v)}class Bh extends bp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}function ub(r,e,n,s){const l=r.Cc(1,e,n);wp("Data must be an object, but it was:",l,s);const u=[],f=vn.empty();fs(s,((g,v)=>{const T=Rp(e,g,n);v=jt(v);const S=l.yc(T);if(v instanceof Bh)u.push(T);else{const C=lu(v,S);C!=null&&(u.push(T),f.set(T,C))}}));const p=new Dn(u);return new ob(f,p,l.fieldTransforms)}function cb(r,e,n,s,l,u){const f=r.Cc(1,e,n),p=[Lm(e,s,n)],g=[l];if(u.length%2!=0)throw new oe($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<u.length;C+=2)p.push(Lm(e,u[C])),g.push(u[C+1]);const v=[],T=vn.empty();for(let C=p.length-1;C>=0;--C)if(!db(v,p[C])){const z=p[C];let ee=g[C];ee=jt(ee);const q=f.yc(z);if(ee instanceof Bh)v.push(z);else{const G=lu(ee,q);G!=null&&(v.push(z),T.set(z,G))}}const S=new Dn(v);return new ob(T,S,f.fieldTransforms)}function mN(r,e,n,s=!1){return lu(n,r.Cc(s?4:3,e))}function lu(r,e){if(fb(r=jt(r)))return wp("Unsupported field value:",e,r),hb(r,e);if(r instanceof bp)return(function(s,l){if(!lb(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const u=[];let f=0;for(const p of s){let g=lu(p,l.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,l){if((s=jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return iI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=lt.fromDate(s);return{timestampValue:yh(l.serializer,u)}}if(s instanceof lt){const u=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:yh(l.serializer,u)}}if(s instanceof Li)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:RT(l.serializer,s._byteString)};if(s instanceof At){const u=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:lp(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof ki)return(function(f,p){return{mapValue:{fields:{[tT]:{stringValue:nT},[dh]:{arrayValue:{values:f.toArray().map((v=>{if(typeof v!="number")throw p.Sc("VectorValues must only contain numeric values.");return sp(p.serializer,v)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Ih(s)}`)})(r,e)}function hb(r,e){const n={};return XE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(r,((s,l)=>{const u=lu(l,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function fb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof lt||r instanceof Li||r instanceof Gn||r instanceof At||r instanceof bp||r instanceof ki)}function wp(r,e,n){if(!fb(n)||!YE(n)){const s=Ih(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Lm(r,e,n){if((e=jt(e))instanceof au)return e._internalPath;if(typeof e=="string")return Rp(r,e);throw Th("Field path arguments must be of type string or ",r,!1,void 0,n)}const pN=new RegExp("[~\\*/\\[\\]]");function Rp(r,e,n){if(e.search(pN)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new au(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Th(r,e,n,s,l){const u=s&&!s.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${l}`),g+=")"),new oe($.INVALID_ARGUMENT,p+r+g)}function db(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,s,l,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gN extends mb{data(){return super.data()}}function Hh(r,e){return typeof e=="string"?Rp(r,e):e instanceof au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class pb extends Ip{}function Sl(r,e,...n){let s=[];e instanceof Ip&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((g=>g instanceof xp)).length,p=u.filter((g=>g instanceof Fh)).length;if(f>1||f>0&&p>0)throw new oe($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Fh extends pb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Fh(e,n,s)}_apply(e){const n=this._parse(e);return gb(e._query,n),new ra(e.firestore,e.converter,wm(e._query,n))}_parse(e){const n=ou(e.firestore);return(function(u,f,p,g,v,T,S){let C;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new oe($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){U0(S,T);const ee=[];for(const q of S)ee.push(P0(g,u,q));C={arrayValue:{values:ee}}}else C=P0(g,u,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||U0(S,T),C=mN(p,f,S,T==="in"||T==="not-in");return Vt.create(v,T,C)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qs(r,e,n){const s=e,l=Hh("where",r);return Fh._create(l,s,n)}class xp extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let f=l;const p=u.getFlattenedFilters();for(const g of p)gb(f,g),f=wm(f,g)})(e._query,n),new ra(e.firestore,e.converter,wm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Np extends pb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Np(e,n)}_apply(e){const n=(function(l,u,f){if(l.startAt!==null)throw new oe($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new oe($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(u,f)})(e._query,this._field,this._direction);return new ra(e.firestore,e.converter,(function(l,u){const f=l.explicitOrderBy.concat([u]);return new _o(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function _N(r,e="asc"){const n=e,s=Hh("orderBy",r);return Np._create(s,n)}function P0(r,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new oe($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cT(e)&&n.indexOf("/")!==-1)throw new oe($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!ve.isDocumentKey(s))throw new oe($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return t0(r,new ve(s))}if(n instanceof At)return t0(r,n._key);throw new oe($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(n)}.`)}function U0(r,e){if(!Array.isArray(r)||r.length===0)throw new oe($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gb(r,e){const n=(function(l,u){for(const f of l)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new oe($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vN{convertValue(e,n="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return fs(e,((l,u)=>{s[l]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,l,u;const n=(u=(l=(s=e.fields)==null?void 0:s[dh].arrayValue)==null?void 0:l.values)==null?void 0:u.map((f=>bt(f.doubleValue)));return new ki(n)}convertGeoPoint(e){return new Li(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ch(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const n=as(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);Ye(OT(s),9688,{name:e});const l=new Gl(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return l.isEqual(n)||cr(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class Vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xs extends mb{constructor(e,n,s,l,u,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Hh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xs._jsonSchema={type:Mt("string",Xs._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class eh extends Xs{data(e={}){return super.data(e)}}class to{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Vl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new eh(this._firestore,this._userDataWriter,s.key,s,new Vl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const g=new eh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Vl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new eh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Vl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let v=-1,T=-1;return p.type!==0&&(v=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:EN(p.type),doc:g,oldIndex:v,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=to._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(r){r=Qn(r,At);const e=Qn(r.firestore,ms);return aN(qh(e),r._key).then((n=>AN(e,r,n)))}to._jsonSchemaVersion="firestore/querySnapshot/1.0",to._jsonSchema={type:Mt("string",to._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class yb extends vN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function wl(r){r=Qn(r,ra);const e=Qn(r.firestore,ms),n=qh(e),s=new yb(e);return yN(r._query),oN(n,r._query).then((l=>new to(e,s,r,l)))}function bN(r,e,n){r=Qn(r,At);const s=Qn(r.firestore,ms),l=Cp(r.converter,e,n);return uu(s,[Sp(ou(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,cn.none())])}function th(r,e,n,...s){r=Qn(r,At);const l=Qn(r.firestore,ms),u=ou(l);let f;return f=typeof(e=jt(e))=="string"||e instanceof au?cb(u,"updateDoc",r._key,e,n,s):ub(u,"updateDoc",r._key,e),uu(l,[f.toMutation(r._key,cn.exists(!0))])}function _b(r){return uu(Qn(r.firestore,ms),[new jh(r._key,cn.none())])}function km(r,e){const n=Qn(r.firestore,ms),s=Cn(r),l=Cp(r.converter,e);return uu(n,[Sp(ou(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,cn.exists(!1))]).then((()=>s))}function uu(r,e){return(function(s,l){const u=new or;return s.asyncQueue.enqueueAndForget((async()=>Kx(await sN(s),l,u))),u.promise})(qh(r),e)}function AN(r,e,n){const s=n.docs.get(e._key),l=new yb(r);return new Xs(r,l,e._key,s,new Vl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ou(e)}set(e,n,s){this._verifyNotCommitted();const l=om(e,this._firestore),u=Cp(l.converter,n,s),f=Sp(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,s);return this._mutations.push(f.toMutation(l._key,cn.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const u=om(e,this._firestore);let f;return f=typeof(n=jt(n))=="string"||n instanceof au?cb(this._dataReader,"WriteBatch.update",u._key,n,s,l):ub(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=om(e,this._firestore);return this._mutations=this._mutations.concat(new jh(n._key,cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function om(r,e){if((r=jt(r)).firestore!==e)throw new oe($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(r){return qh(r=Qn(r,ms)),new SN(r,(e=>uu(r,e)))}(function(e,n=!0){(function(l){po=l})(ho),no(new Zs("firestore",((s,{instanceIdentifier:l,options:u})=>{const f=s.getProvider("app").getImmediate(),p=new ms(new pR(s.getProvider("auth-internal")),new _R(f,s.getProvider("app-check-internal")),(function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new oe($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(v.options.projectId,T)})(f,l),f);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ts(Bv,Hv,e),ts(Bv,Hv,"esm2020")})();const lm={apiKey:"AIzaSyC9DO5rZ4_7h-WP77T1OzETxTgMa4xmk9U",authDomain:"mybcbl.firebaseapp.com",projectId:"mybcbl",storageBucket:"mybcbl.firebasestorage.app",messagingSenderId:"28767389623",appId:"1:28767389623:web:36bc808db4e1d894870a32"};let um,nh,ht,vb=!1;try{if(lm.apiKey==="YOUR_API_KEY"||lm.projectId==="YOUR_PROJECT_ID")throw new Error("بيانات اعتماد Firebase غير معدة. الرجاء تحديث ملف lib/firebase.ts");um=tE(lm),nh=hR(um),ht=uN(um),vb=!0}catch(r){console.error("خطأ في تهيئة Firebase:",r.message)}const wN=({children:r,onClose:e,title:n})=>y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start pt-20",onClick:e,role:"dialog","aria-modal":"true",children:y.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[y.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl","aria-label":"Close modal",children:"×"})]}),y.jsx("div",{className:"p-6",children:r})]})}),RN=({onSave:r,onCancel:e,existingSupplier:n})=>{const[s,l]=ge.useState({name:"",company:"",address:"",phone:"",nif:"",bankAccount:""});ge.useEffect(()=>{n&&l({name:n.name,company:n.company,address:n.address,phone:n.phone,nif:n.nif,bankAccount:n.bankAccount})},[n]);const u=p=>{l({...s,[p.target.name]:p.target.value})},f=p=>{p.preventDefault(),r({...s,id:n==null?void 0:n.id})};return y.jsxs("form",{onSubmit:f,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الاسم"}),y.jsx("input",{name:"name",value:s.name,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الشركة"}),y.jsx("input",{name:"company",value:s.company,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),y.jsx("input",{name:"address",value:s.address,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الهاتف"}),y.jsx("input",{name:"phone",value:s.phone,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الرقم التعريفي الجبائي (NIF)"}),y.jsx("input",{name:"nif",value:s.nif,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الحساب البنكي"}),y.jsx("input",{name:"bankAccount",value:s.bankAccount,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),y.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:n?"تحديث":"حفظ"})]})]})},IN=({suppliers:r,onSave:e,onCancel:n,existingLot:s})=>{const[l,u]=ge.useState({name:"",supplierId:"",description:"",assignmentDate:new Date().toISOString().split("T")[0]});ge.useEffect(()=>{s&&u({name:s.name,supplierId:s.supplierId,description:s.description,assignmentDate:s.assignmentDate})},[s]);const f=g=>{u({...l,[g.target.name]:g.target.value})},p=g=>{if(g.preventDefault(),!l.supplierId){alert("الرجاء اختيار ممون.");return}e({...l,id:s==null?void 0:s.id})};return y.jsxs("form",{onSubmit:p,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الحصة"}),y.jsx("input",{name:"name",value:l.name,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الممون"}),y.jsxs("select",{name:"supplierId",value:l.supplierId,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[y.jsx("option",{value:"",children:"-- اختر ممون --"}),r.map(g=>y.jsxs("option",{value:g.id,children:[g.name," - ",g.company]},g.id))]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),y.jsx("textarea",{name:"description",value:l.description,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الإسناد"}),y.jsx("input",{type:"date",name:"assignmentDate",value:l.assignmentDate,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[y.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),y.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},xN=({lots:r,onSave:e,onCancel:n,existingProduct:s})=>{const[l,u]=ge.useState({name:"",unit:"",price:"",lotId:""});ge.useEffect(()=>{s&&u({name:s.name,unit:s.unit,price:String(s.price),lotId:s.lotId})},[s]);const f=g=>{u({...l,[g.target.name]:g.target.value})},p=g=>{if(g.preventDefault(),!l.lotId){alert("الرجاء اختيار حصة.");return}e({...l,price:Number(l.price),id:s==null?void 0:s.id})};return y.jsxs("form",{onSubmit:p,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم المنتج"}),y.jsx("input",{name:"name",value:l.name,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوحدة"}),y.jsx("input",{name:"unit",value:l.unit,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"السعر"}),y.jsx("input",{type:"number",name:"price",value:l.price,onChange:f,step:"0.01",className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الحصة"}),y.jsxs("select",{name:"lotId",value:l.lotId,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[y.jsx("option",{value:"",children:"-- اختر حصة --"}),r.map(g=>y.jsx("option",{value:g.id,children:g.name},g.id))]})]}),y.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[y.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),y.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},NN=({onSave:r,onCancel:e,existingResidence:n})=>{const[s,l]=ge.useState({residenceName:"",directorate:"",address:"",capacity:0});ge.useEffect(()=>{n&&l({residenceName:n.residenceName,directorate:n.directorate,address:n.address,capacity:n.capacity})},[n]);const u=p=>{l({...s,[p.target.name]:p.target.value})},f=p=>{p.preventDefault(),r({...s,capacity:Number(s.capacity),id:n==null?void 0:n.id})};return y.jsxs("form",{onSubmit:f,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الإقامة"}),y.jsx("input",{name:"residenceName",value:s.residenceName,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المديرية"}),y.jsx("input",{name:"directorate",value:s.directorate,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),y.jsx("input",{name:"address",value:s.address,onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الطاقة الاستيعابية"}),y.jsx("input",{type:"number",name:"capacity",value:String(s.capacity),onChange:u,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),y.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:n?"تحديث":"حفظ"})]})]})},CN=({onSave:r,onCancel:e,residences:n,existingUser:s})=>{const[l,u]=ge.useState({id:(s==null?void 0:s.id)||"",username:(s==null?void 0:s.username)||"",email:(s==null?void 0:s.email)||"",residenceId:(s==null?void 0:s.residenceId)||"",role:"user"});ge.useEffect(()=>{s&&u({id:s.id,username:s.username,email:s.email,residenceId:s.residenceId||"",role:"user"})},[s]);const f=g=>{u({...l,[g.target.name]:g.target.value})},p=g=>{if(g.preventDefault(),!l.id.trim()||!l.email.trim()||!l.username.trim()){alert("الرجاء تعبئة الحقول المطلوبة: المعرف، اسم المستخدم، والبريد الإلكتروني.");return}r({...l,id:l.id.trim()})};return y.jsxs("form",{onSubmit:p,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف المستخدم (UID)"}),y.jsx("input",{name:"id",value:l.id,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md bg-gray-50",required:!0,disabled:!!s}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"يتم الحصول على هذا المعرف من لوحة تحكم Firebase Authentication بعد إنشاء المستخدم."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم المستخدم"}),y.jsx("input",{name:"username",value:l.username,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),y.jsx("input",{type:"email",name:"email",value:l.email,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الإقامة"}),y.jsxs("select",{name:"residenceId",value:l.residenceId,onChange:f,className:"w-full p-2 mt-1 border border-gray-300 rounded-md",children:[y.jsx("option",{value:"",children:"-- عدم التعيين لإقامة --"}),n.map(g=>y.jsx("option",{value:g.id,children:g.residenceName},g.id))]})]}),y.jsxs("div",{className:"mt-6 flex justify-end gap-4 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"إلغاء"}),y.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:s?"تحديث":"حفظ"})]})]})},Rl=({headers:r})=>y.jsx("thead",{className:"bg-gray-100",children:y.jsx("tr",{children:r.map(e=>y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:e},e))})}),Il=({title:r,onAdd:e,children:n})=>y.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg mb-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r}),y.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[y.jsx(Um,{className:"w-5 h-5"}),y.jsx("span",{children:"إضافة جديد"})]})]}),y.jsx("div",{className:"overflow-x-auto",children:y.jsx("table",{className:"min-w-full bg-white",children:n})})]}),DN=({suppliers:r,setSuppliers:e,lots:n,setLots:s,products:l,setProducts:u,residences:f,setResidences:p,users:g,setUsers:v})=>{const[T,S]=ge.useState(null),C=async(q,G,le)=>{const{id:fe,...de}=G;try{if(fe){const Se=Cn(ht,q,fe);await th(Se,de),le(ne=>ne.map(se=>se.id===fe?{id:fe,...de}:se))}else{const Se=await km(Yr(ht,q),de);le(ne=>[...ne,{id:Se.id,...de}])}}catch(Se){console.error(`Error saving ${q}:`,Se)}S(null)},z=async(q,G,le)=>{if(window.confirm("هل أنت متأكد أنك تريد حذف هذا العنصر؟ لا يمكن التراجع عن هذا الإجراء."))try{await _b(Cn(ht,q,G)),le(fe=>fe.filter(de=>de.id!==G))}catch(fe){console.error(`Error deleting from ${q}:`,fe)}},ee=async q=>{try{const G=Cn(ht,"users",q.id),{id:le,...fe}=q;await bN(G,fe),v(de=>de.some(ne=>ne.id===le)?de.map(ne=>ne.id===le?q:ne):[...de,q])}catch(G){console.error("Error saving user data:",G),alert("حدث خطأ أثناء حفظ بيانات المستخدم.")}S(null)};return y.jsxs("div",{className:"p-6 animate-fade-in-up",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"الإعدادات"}),y.jsxs(Il,{title:"إدارة المستخدمين",onAdd:()=>S({type:"user",title:"إضافة مستخدم جديد"}),children:[y.jsx(Rl,{headers:["اسم المستخدم","البريد الإلكتروني","الإقامة","إجراء"]}),y.jsx("tbody",{children:g.filter(q=>q.role==="user").map(q=>{const G=f.find(le=>le.id===q.residenceId);return y.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-3 px-4",children:q.username}),y.jsx("td",{className:"py-3 px-4",children:q.email}),y.jsx("td",{className:"py-3 px-4",children:(G==null?void 0:G.residenceName)||"غير معين"}),y.jsx("td",{className:"py-3 px-4",children:y.jsx("button",{onClick:()=>S({type:"user",title:"تعديل مستخدم",data:q}),className:"text-blue-600 hover:text-blue-800 font-medium",children:"تعديل"})})]},q.id)})})]}),y.jsxs(Il,{title:"إدارة الإقامات",onAdd:()=>S({type:"residence",title:"إضافة إقامة جديدة"}),children:[y.jsx(Rl,{headers:["اسم الإقامة","المديرية","العنوان","الطاقة","إجراء"]}),y.jsx("tbody",{children:f.map(q=>y.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-3 px-4",children:q.residenceName}),y.jsx("td",{className:"py-3 px-4",children:q.directorate}),y.jsx("td",{className:"py-3 px-4",children:q.address}),y.jsx("td",{className:"py-3 px-4",children:q.capacity}),y.jsxs("td",{className:"py-3 px-4 flex gap-4",children:[y.jsx("button",{onClick:()=>S({type:"residence",title:"تعديل إقامة",data:q}),className:"text-blue-600 hover:text-blue-800",children:"تعديل"}),y.jsx("button",{onClick:()=>z("residences",q.id,p),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},q.id))})]}),y.jsxs(Il,{title:"إدارة الممونين",onAdd:()=>S({type:"supplier",title:"إضافة ممون جديد"}),children:[y.jsx(Rl,{headers:["الاسم","الشركة","الهاتف","الرقم التعريفي","إجراء"]}),y.jsx("tbody",{children:r.map(q=>y.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-3 px-4",children:q.name}),y.jsx("td",{className:"py-3 px-4",children:q.company}),y.jsx("td",{className:"py-3 px-4",children:q.phone}),y.jsx("td",{className:"py-3 px-4",children:q.nif}),y.jsxs("td",{className:"py-3 px-4 flex gap-4",children:[y.jsx("button",{onClick:()=>S({type:"supplier",title:"تعديل ممون",data:q}),className:"text-blue-600 hover:text-blue-800",children:"تعديل"}),y.jsx("button",{onClick:()=>z("suppliers",q.id,e),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},q.id))})]}),y.jsxs(Il,{title:"إدارة الحصص",onAdd:()=>S({type:"lot",title:"إضافة حصة جديدة"}),children:[y.jsx(Rl,{headers:["اسم الحصة","الممون","تاريخ الإسناد","إجراء"]}),y.jsx("tbody",{children:n.map(q=>{var G;return y.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-3 px-4",children:q.name}),y.jsx("td",{className:"py-3 px-4",children:((G=r.find(le=>le.id===q.supplierId))==null?void 0:G.company)||"N/A"}),y.jsx("td",{className:"py-3 px-4",children:q.assignmentDate}),y.jsxs("td",{className:"py-3 px-4 flex gap-4",children:[y.jsx("button",{onClick:()=>S({type:"lot",title:"تعديل حصة",data:q}),className:"text-blue-600 hover:text-blue-800",children:"تعديل"}),y.jsx("button",{onClick:()=>z("lots",q.id,s),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},q.id)})})]}),y.jsxs(Il,{title:"إدارة المنتجات",onAdd:()=>S({type:"product",title:"إضافة منتج جديد"}),children:[y.jsx(Rl,{headers:["اسم المنتج","الوحدة","السعر","الحصة","إجراء"]}),y.jsx("tbody",{children:l.map(q=>{var G;return y.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-3 px-4",children:q.name}),y.jsx("td",{className:"py-3 px-4",children:q.unit}),y.jsxs("td",{className:"py-3 px-4",children:[q.price.toFixed(2)," د.ج"]}),y.jsx("td",{className:"py-3 px-4",children:((G=n.find(le=>le.id===q.lotId))==null?void 0:G.name)||"N/A"}),y.jsxs("td",{className:"py-3 px-4 flex gap-4",children:[y.jsx("button",{onClick:()=>S({type:"product",title:"تعديل منتج",data:q}),className:"text-blue-600 hover:text-blue-800",children:"تعديل"}),y.jsx("button",{onClick:()=>z("products",q.id,u),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},q.id)})})]}),T&&y.jsxs(wN,{onClose:()=>S(null),title:T.title,children:[T.type==="supplier"&&y.jsx(RN,{onSave:q=>C("suppliers",q,e),onCancel:()=>S(null),existingSupplier:T.data}),T.type==="lot"&&y.jsx(IN,{suppliers:r,onSave:q=>C("lots",q,s),onCancel:()=>S(null),existingLot:T.data}),T.type==="product"&&y.jsx(xN,{lots:n,onSave:q=>C("products",q,u),onCancel:()=>S(null),existingProduct:T.data}),T.type==="residence"&&y.jsx(NN,{onSave:q=>C("residences",q,p),onCancel:()=>S(null),existingResidence:T.data}),T.type==="user"&&y.jsx(CN,{residences:f,onSave:ee,onCancel:()=>S(null),existingUser:T.data})]})]})},ON=({order:r,supplier:e,lot:n,products:s,residence:l})=>y.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[y.jsxs("header",{className:"flex justify-between items-start pb-4 mb-8 border-b-2 border-gray-800",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold",children:"سند طلب"}),y.jsxs("p",{className:"text-gray-600",children:["رقم: ",r.orderNumber]})]}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"font-bold",children:l.directorate}),y.jsx("p",{className:"font-semibold text-lg",children:l.residenceName}),y.jsx("p",{className:"text-gray-600 text-sm",children:l.address}),y.jsxs("div",{className:"mt-2",children:[y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"التاريخ:"})," ",new Date(r.date).toLocaleDateString("ar-DZ")]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"الحصة:"})," ",(n==null?void 0:n.name)||"غير محدد"]})]})]})]}),y.jsxs("section",{className:"mb-8",children:[y.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"معلومات الممون"}),e?y.jsxs("div",{className:"grid grid-cols-2 gap-x-8 text-sm",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"الشركة:"})," ",e.company]}),y.jsxs("p",{children:[y.jsx("strong",{children:"الاسم:"})," ",e.name]}),y.jsxs("p",{children:[y.jsx("strong",{children:"العنوان:"})," ",e.address]}),y.jsxs("p",{children:[y.jsx("strong",{children:"الهاتف:"})," ",e.phone]}),y.jsxs("p",{children:[y.jsx("strong",{children:"ر.ت.ج:"})," ",e.nif]}),y.jsxs("p",{children:[y.jsx("strong",{children:"حساب بنكي:"})," ",e.bankAccount]})]}):y.jsx("p",{children:"غير متوفر"})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"تفاصيل الطلب"}),y.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-gray-100",children:[y.jsx("th",{className:"p-2 border",children:"المنتج"}),y.jsx("th",{className:"p-2 border",children:"الوحدة"}),y.jsx("th",{className:"p-2 border",children:"الكمية المطلوبة"}),y.jsx("th",{className:"p-2 border",children:"السعر الفردي"}),y.jsx("th",{className:"p-2 border",children:"المجموع الجزئي"})]})}),y.jsx("tbody",{children:r.details.map(u=>{const f=s.find(p=>p.id===u.productId);return y.jsxs("tr",{children:[y.jsx("td",{className:"p-2 border",children:(f==null?void 0:f.name)||"منتج غير معروف"}),y.jsx("td",{className:"p-2 border",children:f==null?void 0:f.unit}),y.jsx("td",{className:"p-2 border text-center",children:u.quantity}),y.jsxs("td",{className:"p-2 border",children:[u.price.toFixed(2)," د.ج"]}),y.jsxs("td",{className:"p-2 border",children:[(u.quantity*u.price).toFixed(2)," د.ج"]})]},u.productId)})}),y.jsx("tfoot",{children:y.jsxs("tr",{className:"font-bold bg-gray-100",children:[y.jsx("td",{colSpan:4,className:"p-3 text-left border",children:"المجموع الكلي"}),y.jsxs("td",{className:"p-3 border",children:[r.totalAmount.toFixed(2)," د.ج"]})]})})]})]}),y.jsxs("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800 flex justify-between",children:[y.jsxs("div",{className:"text-center w-1/2",children:[y.jsx("p",{className:"font-semibold",children:"المصلحة المتعاقدة"}),y.jsx("br",{}),y.jsx("br",{}),y.jsx("p",{children:"الختم والإمضاء"})]}),y.jsxs("div",{className:"text-center w-1/2",children:[y.jsx("p",{className:"font-semibold",children:"الممون"}),y.jsx("br",{}),y.jsx("br",{}),y.jsx("p",{children:"الختم والإمضاء"})]})]})]}),VN=({note:r,purchaseOrder:e,lot:n,products:s,residence:l})=>y.jsxs("div",{className:"p-4 bg-white",dir:"rtl",children:[y.jsxs("header",{className:"flex justify-between items-start pb-4 mb-8 border-b-2 border-gray-800",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold",children:"سند استلام"}),y.jsxs("p",{className:"text-gray-600",children:["رقم: ",r.noteNumber]})]}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"font-bold",children:l.directorate}),y.jsx("p",{className:"font-semibold text-lg",children:l.residenceName}),y.jsx("p",{className:"text-gray-600 text-sm",children:l.address}),y.jsxs("div",{className:"mt-2",children:[y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"تاريخ الاستلام:"})," ",new Date(r.receptionDate).toLocaleDateString("ar-DZ")]}),y.jsxs("p",{children:[y.jsx("strong",{children:"سند الطلب المرتبط:"})," ",(e==null?void 0:e.orderNumber)||r.purchaseOrderId]})]})]})]}),y.jsxs("section",{className:"mb-8",children:[y.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"معلومات الحصة"}),y.jsxs("p",{children:[y.jsx("strong",{children:"اسم التعيين:"})," ",(n==null?void 0:n.name)||"غير محددة"]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xl font-semibold mb-4 border-b pb-2",children:"قائمة المواد"}),y.jsxs("table",{className:"w-full text-right border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-gray-100",children:[y.jsx("th",{className:"p-2 border w-3/4",children:"المنتج"}),y.jsx("th",{className:"p-2 border w-1/4",children:"الكمية المطلوبة"})]})}),y.jsx("tbody",{children:e==null?void 0:e.details.map(u=>{const f=s.find(p=>p.id===u.productId);return y.jsxs("tr",{children:[y.jsx("td",{className:"p-2 border",children:(f==null?void 0:f.name)||"منتج غير معروف"}),y.jsx("td",{className:"p-2 border text-center",children:u.quantity})]},u.productId)})})]})]}),y.jsxs("footer",{className:"mt-16 pt-8 border-t-2 border-gray-800 flex justify-between",children:[y.jsxs("div",{className:"text-center w-1/2",children:[y.jsx("p",{className:"font-semibold",children:"لجنة الاستلام"}),y.jsx("br",{}),y.jsx("br",{}),y.jsx("p",{children:"الختم والإمضاء"})]}),y.jsxs("div",{className:"text-center w-1/2",children:[y.jsx("p",{className:"font-semibold",children:"مسؤول المخزن"}),y.jsx("br",{}),y.jsx("br",{}),y.jsx("p",{children:"الختم والإمضاء"})]})]})]}),MN=({onLogin:r})=>{const[e,n]=ge.useState(""),[s,l]=ge.useState(""),[u,f]=ge.useState(""),[p,g]=ge.useState(!1),v=async T=>{T.preventDefault(),g(!0),f("");const S=await r(e,s);S.success||f(S.error||"حدث خطأ غير متوقع."),g(!1)};return y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:y.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg",children:[y.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800",children:"تسجيل الدخول"}),y.jsx("p",{className:"text-center text-gray-500",children:"نظام تسيير سندات الطلب والاستلام"}),y.jsx("p",{className:"text-sm text-center text-gray-600 px-4",children:"الرجاء استخدام بيانات الاعتماد التي قدمها المسؤول. للمساعدة، يرجى التواصل مع مشرف النظام."}),y.jsxs("form",{onSubmit:v,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),y.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:T=>n(T.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"admin@example.com or user@example.com"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),y.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:T=>l(T.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"admin123 or user123"})]}),u&&y.jsx("p",{className:"text-sm text-red-600 text-center",children:u}),y.jsx("div",{children:y.jsx("button",{type:"submit",disabled:p,className:"w-full px-4 py-2 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-300 disabled:bg-blue-300",children:p?"...جاري الدخول":"دخول"})})]}),y.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-md text-xs text-gray-600",children:[y.jsx("p",{className:"font-semibold text-center mb-1",children:"لأغراض العرض التجريبي:"}),y.jsxs("p",{children:[y.jsx("strong",{children:"المشرف:"})," admin@example.com / ",y.jsx("strong",{children:"كلمة السر:"})," admin123"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"المستخدم:"})," user@example.com / ",y.jsx("strong",{children:"كلمة السر:"})," user123"]})]})]})})},jN=({settings:r,onSave:e})=>{const[n,s]=ge.useState(r),[l,u]=ge.useState(""),[f,p]=ge.useState(!1);ge.useEffect(()=>{s(r)},[r]);const g=T=>{const{name:S,value:C}=T.target;s(z=>({...z,[S]:C}))},v=async T=>{T.preventDefault(),p(!0);const S={...n,capacity:Number(n.capacity)||0};await e(S),p(!1),u("تم حفظ الإعدادات بنجاح!"),setTimeout(()=>u(""),3e3)};return y.jsx("div",{className:"p-6 animate-fade-in-up",children:y.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6 border-b pb-4",children:"إعدادات الإقامة"}),y.jsxs("form",{onSubmit:v,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"directorate",className:"block text-sm font-medium text-gray-700 mb-1",children:"المديرية"}),y.jsx("input",{type:"text",id:"directorate",name:"directorate",value:n.directorate,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"residenceName",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإقامة"}),y.jsx("input",{type:"text",id:"residenceName",name:"residenceName",value:n.residenceName,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),y.jsx("input",{type:"text",id:"address",name:"address",value:n.address,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"capacity",className:"block text-sm font-medium text-gray-700 mb-1",children:"الطاقة الاستيعابية"}),y.jsx("input",{type:"number",id:"capacity",name:"capacity",value:n.capacity,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",required:!0,min:"0"})]}),y.jsxs("div",{className:"pt-4 flex items-center justify-end",children:[l&&y.jsx("p",{className:"text-green-600 ml-4 transition-opacity duration-300",children:l}),y.jsx("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:bg-blue-300",children:f?"...جاري الحفظ":"حفظ التغييرات"})]})]})]})})},LN=()=>y.jsxs("div",{className:"bg-red-100 border-b-2 border-red-500 text-red-800 p-4 text-center fixed top-0 left-0 right-0 z-50",dir:"rtl",children:[y.jsx("p",{className:"font-bold",children:"وضع العرض التجريبي: التطبيق غير متصل بقاعدة البيانات."}),y.jsxs("p",{children:["لتفعيل كافة الميزات، يرجى إعداد بيانات اعتماد Firebase في الملف ",y.jsx("code",{className:"bg-red-200 px-1 rounded mx-1",dir:"ltr",children:"lib/firebase.ts"}),"."]})]}),cm=({pos:r,dns:e})=>y.jsxs("div",{className:"p-6 animate-fade-in-up",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"لوحة التحكم"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-blue-500",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"إجمالي سندات الطلب"}),y.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:r.length})]}),y.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-green-500",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"إجمالي سندات الاستلام"}),y.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:e.length})]}),y.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border-r-4 border-yellow-500",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"طلبات في الانتظار"}),y.jsx("p",{className:"text-4xl font-bold text-gray-800 mt-2",children:r.filter(n=>n.status===un.OPEN||n.status===un.PARTIALLY_RECEIVED).length})]})]})]}),kN=({purchaseOrders:r,lots:e,suppliers:n,residences:s,setView:l,onPrint:u,onEdit:f,onDelete:p,user:g})=>{const v=T=>{switch(T){case un.OPEN:return"bg-yellow-100 text-yellow-800";case un.PARTIALLY_RECEIVED:return"bg-blue-100 text-blue-800";case un.FULLY_RECEIVED:return"bg-green-100 text-green-800";case un.CANCELLED:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return y.jsxs("div",{className:"p-6 animate-fade-in-up",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"سندات الطلب"}),(g==null?void 0:g.role)!=="admin"&&y.jsxs("button",{onClick:()=>l("newPurchaseOrder"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[y.jsx(Um,{className:"w-5 h-5"}),y.jsx("span",{children:"سند طلب جديد"})]})]}),y.jsx("div",{className:"bg-white p-4 rounded-xl shadow-lg overflow-x-auto",children:y.jsxs("table",{className:"min-w-full bg-white",children:[y.jsx("thead",{className:"bg-gray-100",children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"رقم السند"}),(g==null?void 0:g.role)==="admin"&&y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الإقامة"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"التاريخ"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الممون"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"المبلغ الإجمالي"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الحالة"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"إجراءات"})]})}),y.jsx("tbody",{children:r.map(T=>{const S=n.find(ee=>ee.id===T.supplierId),C=s.find(ee=>ee.id===T.residenceId),z=T.status===un.OPEN;return y.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-3 px-4",children:T.orderNumber}),(g==null?void 0:g.role)==="admin"&&y.jsx("td",{className:"py-3 px-4",children:(C==null?void 0:C.residenceName)||"غير معروف"}),y.jsx("td",{className:"py-3 px-4",children:T.date}),y.jsx("td",{className:"py-3 px-4",children:(S==null?void 0:S.company)||"غير معروف"}),y.jsxs("td",{className:"py-3 px-4",children:[T.totalAmount.toFixed(2)," د.ج"]}),y.jsx("td",{className:"py-3 px-4",children:y.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${v(T.status)}`,children:T.status})}),y.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[y.jsx("button",{onClick:()=>u(T.id),className:"text-gray-500 hover:text-blue-600",title:"طباعة",children:y.jsx(B0,{className:"w-5 h-5"})}),(g==null?void 0:g.role)!=="admin"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>f(T),className:`text-gray-500 ${z?"hover:text-yellow-600":"opacity-50 cursor-not-allowed"}`,title:"تعديل",disabled:!z,children:y.jsx(H0,{className:"w-5 h-5"})}),y.jsx("button",{onClick:()=>p(T.id),className:"text-gray-500 hover:text-red-600",title:"حذف",children:y.jsx(F0,{className:"w-5 h-5"})})]})]})]},T.id)})})]})})]})},PN=({deliveryNotes:r,purchaseOrders:e,residences:n,setView:s,onPrint:l,onEdit:u,onDelete:f,user:p})=>y.jsxs("div",{className:"p-6 animate-fade-in-up",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"سندات الاستلام"}),(p==null?void 0:p.role)!=="admin"&&y.jsxs("button",{onClick:()=>s("newDeliveryNote"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[y.jsx(Um,{className:"w-5 h-5"}),y.jsx("span",{children:"سند استلام جديد"})]})]}),y.jsx("div",{className:"bg-white p-4 rounded-xl shadow-lg overflow-x-auto",children:y.jsxs("table",{className:"min-w-full bg-white",children:[y.jsx("thead",{className:"bg-gray-100",children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"رقم السند"}),(p==null?void 0:p.role)==="admin"&&y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الإقامة"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"تاريخ الاستلام"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"سند الطلب المرتبط"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"الحالة"}),y.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"إجراءات"})]})}),y.jsx("tbody",{children:r.map(g=>{const v=n.find(S=>S.id===g.residenceId),T=e.find(S=>S.id===g.purchaseOrderId);return y.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-3 px-4",children:g.noteNumber}),(p==null?void 0:p.role)==="admin"&&y.jsx("td",{className:"py-3 px-4",children:(v==null?void 0:v.residenceName)||"غير معروف"}),y.jsx("td",{className:"py-3 px-4",children:g.receptionDate}),y.jsx("td",{className:"py-3 px-4",children:(T==null?void 0:T.orderNumber)||g.purchaseOrderId}),y.jsx("td",{className:"py-3 px-4",children:y.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${g.status==="كامل"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:g.status})}),y.jsxs("td",{className:"py-3 px-4 flex items-center gap-3",children:[y.jsx("button",{onClick:()=>l(g.id),className:"text-gray-500 hover:text-green-600",title:"طباعة",children:y.jsx(B0,{className:"w-5 h-5"})}),(p==null?void 0:p.role)!=="admin"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>u(g),className:"text-gray-500 hover:text-yellow-600",title:"تعديل",children:y.jsx(H0,{className:"w-5 h-5"})}),y.jsx("button",{onClick:()=>f(g),className:"text-gray-500 hover:text-red-600",title:"حذف",children:y.jsx(F0,{className:"w-5 h-5"})})]})]})]},g.id)})})]})})]}),UN=()=>{const r=!vb,[e,n]=ge.useState("dashboard"),[s,l]=ge.useState(null),[u,f]=ge.useState(!r),[p,g]=ge.useState([]),[v,T]=ge.useState([]),[S,C]=ge.useState([]),[z,ee]=ge.useState([]),[q,G]=ge.useState([]),[le,fe]=ge.useState([]),[de,Se]=ge.useState([]),[ne,se]=ge.useState(null),[w,R]=ge.useState(null),[I,M]=ge.useState(null),D=(Z,Q)=>{l(Q||null),n(Z)};ge.useEffect(()=>{if(r)return;const Z=Ww(nh,Q=>{se(Q)});return()=>Z()},[r]),ge.useEffect(()=>{if(r)return;(async()=>{if(ne){const Q=Cn(ht,"users",ne.uid),ae=await TN(Q);if(ae.exists()){const ue=ae.data();R({id:ae.id,username:ue.username||"مستخدم",email:ue.email||ne.email||"",role:ue.role||"user",residenceId:ue.residenceId})}else console.error("User profile not found in Firestore"),R(null)}else R(null)})()},[ne,r]),ge.useEffect(()=>{if(r||!w){f(!1);return}(async()=>{f(!0);try{const Q=async(it,Ke,an=!1)=>{const Lt=w.role!=="admin";if(an&&Lt&&!w.residenceId)return[];const Ui=Yr(ht,it),Yn=[];let dr=!1;an&&Lt&&w.residenceId?(Yn.push(Qs("residenceId","==",w.residenceId)),dr=!0):Ke&&Yn.push(_N(Ke,"desc"));const ps=Sl(Ui,...Yn);let mt=(await wl(ps)).docs.map(En=>({id:En.id,...En.data()}));return dr&&Ke&&mt.sort((En,Eo)=>{const gs=En[Ke],zt=Eo[Ke];return gs<zt?1:gs>zt?-1:0}),mt},[ae,ue,me,Te,Ue,Ut]=await Promise.all([Q("suppliers"),Q("lots"),Q("products"),Q("residences"),Q("purchase_orders","date",!0),Q("delivery_notes","receptionDate",!0)]);if(g(ae),T(ue),C(me),fe(Te),ee(Ue),G(Ut),w.role==="admin"){const it=await Q("users");Se(it)}}catch(Q){console.error("Error fetching data:",Q),g([]),T([]),C([]),ee([]),G([]),fe([]),Se([])}finally{f(!1)}})()},[w,r]),ge.useEffect(()=>{if(I){const Z=()=>M(null);window.addEventListener("afterprint",Z);const Q=setTimeout(()=>window.print(),100);return()=>{clearTimeout(Q),window.removeEventListener("afterprint",Z)}}},[I]);const L=async(Z,Q)=>{if(r)return alert("وضع العرض التجريبي: لا يمكن تسجيل الدخول لأن قاعدة البيانات غير معدة."),{success:!1,error:"قاعدة البيانات غير معدة. يرجى مراجعة التعليمات في الملف lib/firebase.ts"};try{return await $w(nh,Z,Q),n("dashboard"),{success:!0}}catch(ae){return console.error(ae),{success:!1,error:"اسم المستخدم أو كلمة المرور غير صحيحة."}}},x=async()=>{r||(await e2(nh),R(null),se(null))},nt=async Z=>{if(r){alert("وضع العرض التجريبي: لا يمكن حفظ البيانات.");return}if((w==null?void 0:w.role)==="admin"||!(w!=null&&w.residenceId)){alert("خطأ: يجب أن تكون مسجلاً كمستخدم إقامة لإدارة سندات الطلب.");return}const{id:Q,...ae}=Z,ue={...ae,residenceId:w.residenceId};try{if(Q){const me=Cn(ht,"purchase_orders",Q);await th(me,ue),ee(Te=>Te.map(Ue=>Ue.id===Q?{id:Q,...ue}:Ue))}else{const me=Sl(Yr(ht,"purchase_orders"),Qs("residenceId","==",w.residenceId),Qs("orderNumber","==",Z.orderNumber));if(!(await wl(me)).empty){alert("يوجد سند طلب بنفس الرقم مسجل مسبقًا في هذه الإقامة.");return}const Ut={id:(await km(Yr(ht,"purchase_orders"),ue)).id,...ue};ee(it=>[Ut,...it].sort((Ke,an)=>an.date.localeCompare(Ke.date)))}D("purchaseOrders")}catch(me){console.error("Error saving PO:",me)}},dt=async(Z,Q)=>{if(r){alert("وضع العرض التجريبي: لا يمكن حفظ البيانات.");return}if((w==null?void 0:w.role)==="admin"||!(w!=null&&w.residenceId)){alert("خطأ: يجب أن تكون مسجلاً كمستخدم إقامة لإنشاء سند استلام.");return}const{id:ae,...ue}=Z,me={...ue,residenceId:w.residenceId};try{if(ae){const Te=Cn(ht,"delivery_notes",ae),Ue=Cn(ht,"purchase_orders",me.purchaseOrderId),Ut=z0(ht);Ut.update(Te,me),Ut.update(Ue,{status:Q}),await Ut.commit(),G(it=>it.map(Ke=>Ke.id===ae?{id:ae,...me}:Ke)),ee(it=>it.map(Ke=>Ke.id===me.purchaseOrderId?{...Ke,status:Q}:Ke))}else{const Te=Sl(Yr(ht,"delivery_notes"),Qs("residenceId","==",w.residenceId),Qs("noteNumber","==",Z.noteNumber));if(!(await wl(Te)).empty){alert("يوجد سند استلام بنفس الرقم مسجل مسبقًا في هذه الإقامة.");return}const it={id:(await km(Yr(ht,"delivery_notes"),me)).id,...me};G(an=>[it,...an].sort((Lt,Ui)=>Ui.receptionDate.localeCompare(Lt.receptionDate)));const Ke=Cn(ht,"purchase_orders",me.purchaseOrderId);await th(Ke,{status:Q}),ee(an=>an.map(Lt=>Lt.id===me.purchaseOrderId?{...Lt,status:Q}:Lt))}D("deliveryNotes")}catch(Te){console.error("Error saving DN:",Te)}},Y=async Z=>{if(r)return alert("وضع العرض التجريبي: لا يمكن حذف البيانات.");const Q=Sl(Yr(ht,"delivery_notes"),Qs("purchaseOrderId","==",Z));if(!(await wl(Q)).empty){alert("لا يمكن حذف سند الطلب هذا لأنه يحتوي على سندات استلام مرتبطة به. يرجى حذف سندات الاستلام أولاً.");return}if(window.confirm("هل أنت متأكد أنك تريد حذف سند الطلب هذا؟"))try{await _b(Cn(ht,"purchase_orders",Z)),ee(ue=>ue.filter(me=>me.id!==Z))}catch(ue){console.error("Error deleting PO:",ue)}},re=async Z=>{if(r)return alert("وضع العرض التجريبي: لا يمكن حذف البيانات.");if(window.confirm("هل أنت متأكد أنك تريد حذف سند الاستلام هذا؟ سيتم تحديث حالة سند الطلب المرتبط."))try{const Q=Sl(Yr(ht,"delivery_notes"),Qs("purchaseOrderId","==",Z.purchaseOrderId)),ue=(await wl(Q)).docs.map(it=>({id:it.id,...it.data()})).filter(it=>it.id!==Z.id);let me=un.OPEN;ue.length>0&&(me=un.PARTIALLY_RECEIVED);const Te=z0(ht),Ue=Cn(ht,"delivery_notes",Z.id);Te.delete(Ue);const Ut=Cn(ht,"purchase_orders",Z.purchaseOrderId);Te.update(Ut,{status:me}),await Te.commit(),G(it=>it.filter(Ke=>Ke.id!==Z.id)),ee(it=>it.map(Ke=>Ke.id===Z.purchaseOrderId?{...Ke,status:me}:Ke))}catch(Q){console.error("Error deleting DN:",Q)}},ye=Z=>{const Q=z.find(ae=>ae.id===Z);if(Q){const ae=le.find(Te=>Te.id===Q.residenceId);if(!ae)return alert("لم يتم العثور على بيانات الإقامة لهذا السند.");const ue=p.find(Te=>Te.id===Q.supplierId),me=v.find(Te=>Te.id===Q.lotId);M(y.jsx(ON,{order:Q,supplier:ue,lot:me,products:S,residence:ae}))}},Pe=Z=>{const Q=q.find(ae=>ae.id===Z);if(Q){const ae=le.find(Te=>Te.id===Q.residenceId);if(!ae)return alert("لم يتم العثور على بيانات الإقامة لهذا السند.");const ue=z.find(Te=>Te.id===Q.purchaseOrderId),me=v.find(Te=>Te.id===(ue==null?void 0:ue.lotId));M(y.jsx(VN,{note:Q,purchaseOrder:ue,lot:me,products:S,residence:ae}))}},Fe=async Z=>{if(r){alert("وضع العرض التجريبي: لا يمكن حفظ البيانات.");return}try{const{id:Q,...ae}=Z,ue=Cn(ht,"residences",Q);await th(ue,ae),fe(me=>me.map(Te=>Te.id===Q?Z:Te))}catch(Q){console.error("Error saving residence settings:",Q)}},V=ge.useMemo(()=>z.filter(Z=>Z.status===un.OPEN||Z.status===un.PARTIALLY_RECEIVED),[z]);if(u)return y.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:y.jsx("div",{className:"text-xl font-semibold",children:"جاري تحميل البيانات..."})});if(!w)return y.jsxs("div",{className:"relative min-h-screen",children:[r&&y.jsx(LN,{}),y.jsx(MN,{onLogin:L})]});const J=()=>{if(e==="settings"&&w.role!=="admin"||e==="residenceSettings"&&w.role!=="user")return D("dashboard"),y.jsx(cm,{pos:z,dns:q});switch(e){case"dashboard":return y.jsx(cm,{pos:z,dns:q});case"purchaseOrders":return y.jsx(kN,{purchaseOrders:z,lots:v,suppliers:p,residences:le,setView:D,onPrint:ye,onEdit:Q=>D("editPurchaseOrder",Q),onDelete:Y,user:w});case"deliveryNotes":return y.jsx(PN,{deliveryNotes:q,purchaseOrders:z,residences:le,setView:D,onPrint:Pe,onEdit:Q=>D("editDeliveryNote",Q),onDelete:re,user:w});case"newPurchaseOrder":return y.jsx(lv,{lots:v,products:S,suppliers:p,onSave:nt,onCancel:()=>D("purchaseOrders")});case"editPurchaseOrder":return y.jsx(lv,{lots:v,products:S,suppliers:p,onSave:nt,onCancel:()=>D("purchaseOrders"),existingOrder:s});case"newDeliveryNote":return y.jsx(uv,{lots:v,openPurchaseOrders:V,products:S,suppliers:p,onSave:dt,onCancel:()=>D("deliveryNotes")});case"editDeliveryNote":return y.jsx(uv,{lots:v,openPurchaseOrders:[...V,z.find(Q=>Q.id===(s==null?void 0:s.purchaseOrderId))],products:S,suppliers:p,onSave:dt,onCancel:()=>D("deliveryNotes"),existingNote:s});case"settings":return y.jsx(DN,{suppliers:p,setSuppliers:g,lots:v,setLots:T,products:S,setProducts:C,residences:le,setResidences:fe,users:de,setUsers:Se});case"residenceSettings":const Z=le.find(Q=>Q.id===w.residenceId);return Z?y.jsx(jN,{settings:Z,onSave:Fe}):y.jsx("div",{children:"جاري تحميل إعدادات الإقامة..."});default:return y.jsx(cm,{pos:z,dns:q})}};return y.jsxs("div",{className:"flex bg-gray-100 min-h-screen font-sans",children:[y.jsx(dA,{currentView:e,setView:D,user:w,onLogout:x}),y.jsx("main",{className:"flex-1 pr-64",children:J()}),I&&y.jsx("div",{className:"print-container",children:I})]})},Eb=document.getElementById("root");if(!Eb)throw new Error("Could not find root element to mount to");const zN=lA.createRoot(Eb);zN.render(y.jsx(eA.StrictMode,{children:y.jsx(UN,{})}));
